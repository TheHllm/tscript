<!doctype html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>TScript IDE</title><script defer="defer">(()=>{var t={4631:function(t){t.exports=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),a=/Edge\/(\d+)/.exec(t),o=r||i||a,s=o&&(r?document.documentMode||6:+(a||i)[1]),l=!a&&/WebKit\//.test(t),c=l&&/Qt\/\d+\.\d+/.test(t),d=!a&&/Chrome\//.test(t),p=/Opera\//.test(t),u=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),f=/PhantomJS/.test(t),m=u&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),g=/Android/.test(t),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),v=m||/Mac/.test(e),b=/\bCrOS\b/.test(t),w=/win/i.test(e),x=p&&t.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(p=!1,l=!0);var T=v&&(c||p&&(null==x||x<12.11)),k=n||o&&s>=9;function _(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var S,E=function(t,e){var n=t.className,r=_(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function C(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function O(t,e){return C(t).appendChild(e)}function M(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var a=0;a<e.length;++a)i.appendChild(e[a]);return i}function P(t,e,n,r){var i=M(t,e,n,r);return i.setAttribute("role","presentation"),i}function A(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function I(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function L(t,e){var n=t.className;_(e).test(n)||(t.className+=(n?" ":"")+e)}function D(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!_(n[r]).test(e)&&(e+=" "+n[r]);return e}S=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(t){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var F=function(t){t.select()};function N(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function z(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function H(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var a=r||0,o=i||0;;){var s=t.indexOf("\t",a);if(s<0||s>=e)return o+(e-a);o+=s-a,o+=n-o%n,a=s+1}}m?F=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:o&&(F=function(t){try{t.select()}catch(t){}});var R=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function j(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}R.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},R.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var W={toString:function(){return"CodeMirror.Pass"}},$={scroll:!1},B={origin:"*mouse"},q={origin:"+move"};function U(t,e,n){for(var r=0,i=0;;){var a=t.indexOf("\t",r);-1==a&&(a=t.length);var o=a-r;if(a==t.length||i+o>=e)return r+Math.min(o,e-i);if(i+=a-r,r=a+1,(i+=n-i%n)>=e)return r}}var V=[""];function G(t){for(;V.length<=t;)V.push(K(V)+" ");return V[t]}function K(t){return t[t.length-1]}function X(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function Y(){}function Z(t,e){var n;return Object.create?n=Object.create(t):(Y.prototype=t,n=new Y),e&&z(e,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&Q(t))||e.test(t):Q(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return t.charCodeAt(0)>=768&&nt.test(t)}function it(t,e,n){for(;(n<0?e>0:e<t.length)&&rt(t.charAt(e));)e+=n;return e}function at(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,a=r<0?Math.ceil(i):Math.floor(i);if(a==e)return t(a)?e:n;t(a)?n=a:e=a+r}}var ot=null;function st(t,e,n){var r;ot=null;for(var i=0;i<t.length;++i){var a=t[i];if(a.from<e&&a.to>e)return i;a.to==e&&(a.from!=a.to&&"before"==n?r=i:ot=i),a.from==e&&(a.from!=a.to&&"before"!=n?r=i:ot=i)}return null!=r?r:ot}var lt=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function a(t,e,n){this.level=t,this.from=e,this.to=n}return function(o,s){var l,c="ltr"==s?"L":"R";if(0==o.length||"ltr"==s&&!t.test(o))return!1;for(var d=o.length,p=[],u=0;u<d;++u)p.push((l=o.charCodeAt(u))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var h=0,f=c;h<d;++h){var m=p[h];"m"==m?p[h]=f:f=m}for(var g=0,y=c;g<d;++g){var v=p[g];"1"==v&&"r"==y?p[g]="n":n.test(v)&&(y=v,"r"==v&&(p[g]="R"))}for(var b=1,w=p[0];b<d-1;++b){var x=p[b];"+"==x&&"1"==w&&"1"==p[b+1]?p[b]="1":","!=x||w!=p[b+1]||"1"!=w&&"n"!=w||(p[b]=w),w=x}for(var T=0;T<d;++T){var k=p[T];if(","==k)p[T]="N";else if("%"==k){var _=void 0;for(_=T+1;_<d&&"%"==p[_];++_);for(var S=T&&"!"==p[T-1]||_<d&&"1"==p[_]?"1":"N",E=T;E<_;++E)p[E]=S;T=_-1}}for(var C=0,O=c;C<d;++C){var M=p[C];"L"==O&&"1"==M?p[C]="L":n.test(M)&&(O=M)}for(var P=0;P<d;++P)if(e.test(p[P])){var A=void 0;for(A=P+1;A<d&&e.test(p[A]);++A);for(var I="L"==(P?p[P-1]:c),L=I==("L"==(A<d?p[A]:c))?I?"L":"R":c,D=P;D<A;++D)p[D]=L;P=A-1}for(var F,N=[],z=0;z<d;)if(r.test(p[z])){var H=z;for(++z;z<d&&r.test(p[z]);++z);N.push(new a(0,H,z))}else{var R=z,j=N.length,W="rtl"==s?1:0;for(++z;z<d&&"L"!=p[z];++z);for(var $=R;$<z;)if(i.test(p[$])){R<$&&(N.splice(j,0,new a(1,R,$)),j+=W);var B=$;for(++$;$<z&&i.test(p[$]);++$);N.splice(j,0,new a(2,B,$)),j+=W,R=$}else++$;R<z&&N.splice(j,0,new a(1,R,z))}return"ltr"==s&&(1==N[0].level&&(F=o.match(/^\s+/))&&(N[0].from=F[0].length,N.unshift(new a(0,0,F[0].length))),1==K(N).level&&(F=o.match(/\s+$/))&&(K(N).to-=F[0].length,N.push(new a(0,d-F[0].length,d)))),"rtl"==s?N.reverse():N}}();function ct(t,e){var n=t.order;return null==n&&(n=t.order=lt(t.text,e)),n}var dt=[],pt=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||dt).concat(n)}};function ut(t,e){return t._handlers&&t._handlers[e]||dt}function ht(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var a=j(i,n);a>-1&&(r[e]=i.slice(0,a).concat(i.slice(a+1)))}}}function ft(t,e){var n=ut(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function mt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),ft(t,n||e.type,t,e),xt(e)||e.codemirrorIgnore}function gt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==j(n,e[r])&&n.push(e[r])}function yt(t,e){return ut(t,e).length>0}function vt(t){t.prototype.on=function(t,e){pt(this,t,e)},t.prototype.off=function(t,e){ht(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function wt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function xt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Tt(t){bt(t),wt(t)}function kt(t){return t.target||t.srcElement}function _t(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),v&&t.ctrlKey&&1==e&&(e=3),e}var St,Et,Ct=function(){if(o&&s<9)return!1;var t=M("div");return"draggable"in t||"dragDrop"in t}();function Ot(t){if(null==St){var e=M("span","​");O(t,M("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(St=e.offsetWidth<=1&&e.offsetHeight>2&&!(o&&s<8))}var n=St?M("span","​"):M("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Mt(t){if(null!=Et)return Et;var e=O(t,document.createTextNode("AخA")),n=S(e,0,1).getBoundingClientRect(),r=S(e,1,2).getBoundingClientRect();return C(t),!(!n||n.left==n.right)&&(Et=r.right-n.right<3)}var Pt,At=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var a=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),o=a.indexOf("\r");-1!=o?(n.push(a.slice(0,o)),e+=o+1):(n.push(a),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},It=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Lt="oncopy"in(Pt=M("div"))||(Pt.setAttribute("oncopy","return;"),"function"==typeof Pt.oncopy),Dt=null;var Ft={},Nt={};function zt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ft[t]=e}function Ht(t){if("string"==typeof t&&Nt.hasOwnProperty(t))t=Nt[t];else if(t&&"string"==typeof t.name&&Nt.hasOwnProperty(t.name)){var e=Nt[t.name];"string"==typeof e&&(e={name:e}),(t=Z(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Ht("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Ht("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Rt(t,e){e=Ht(e);var n=Ft[e.name];if(!n)return Rt(t,"text/plain");var r=n(t,e);if(jt.hasOwnProperty(e.name)){var i=jt[e.name];for(var a in i)i.hasOwnProperty(a)&&(r.hasOwnProperty(a)&&(r["_"+a]=r[a]),r[a]=i[a])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var o in e.modeProps)r[o]=e.modeProps[o];return r}var jt={};function Wt(t,e){z(e,jt.hasOwnProperty(t)?jt[t]:jt[t]={})}function $t(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Bt(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function qt(t,e,n){return!t.startState||t.startState(e,n)}var Ut=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Vt(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],a=i.chunkSize();if(e<a){n=i;break}e-=a}return n.lines[e]}function Gt(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,(function(t){var a=t.text;i==n.line&&(a=a.slice(0,n.ch)),i==e.line&&(a=a.slice(e.ch)),r.push(a),++i})),r}function Kt(t,e,n){var r=[];return t.iter(e,n,(function(t){r.push(t.text)})),r}function Xt(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function Yt(t){if(null==t.parent)return null;for(var e=t.parent,n=j(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function Zt(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],a=i.height;if(e<a){t=i;continue t}e-=a,n+=i.chunkSize()}return n}while(!t.lines);for(var o=0;o<t.lines.length;++o){var s=t.lines[o].height;if(e<s)break;e-=s}return n+o}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function Qt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,n){if(void 0===n&&(n=null),!(this instanceof te))return new te(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ne(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function re(t){return te(t.line,t.ch)}function ie(t,e){return ee(t,e)<0?e:t}function ae(t,e){return ee(t,e)<0?t:e}function oe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function se(t,e){if(e.line<t.first)return te(t.first,0);var n=t.first+t.size-1;return e.line>n?te(n,Vt(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?te(t.line,e):n<0?te(t.line,0):t}(e,Vt(t,e.line).text.length)}function le(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=se(t,e[r]);return n}Ut.prototype.eol=function(){return this.pos>=this.string.length},Ut.prototype.sol=function(){return this.pos==this.lineStart},Ut.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ut.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ut.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Ut.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Ut.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Ut.prototype.skipToEnd=function(){this.pos=this.string.length},Ut.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Ut.prototype.backUp=function(t){this.pos-=t},Ut.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=H(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.indentation=function(){return H(this.string,null,this.tabSize)-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},Ut.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},Ut.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ut.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Ut.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Ut.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ce=function(t,e){this.state=t,this.lookAhead=e},de=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function pe(t,e,n,r){var i=[t.state.modeGen],a={};we(t,e.text,t.doc.mode,n,(function(t,e){return i.push(t,e)}),a,r);for(var o=n.state,s=function(r){n.baseTokens=i;var s=t.state.overlays[r],l=1,c=0;n.state=!0,we(t,e.text,s.mode,n,(function(t,e){for(var n=l;c<t;){var r=i[l];r>t&&i.splice(l,1,t,i[l+1],r),l+=2,c=Math.min(t,r)}if(e)if(s.opaque)i.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var a=i[n+1];i[n+1]=(a?a+" ":"")+"overlay "+e}}),a),n.state=o,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)s(l);return{styles:i,classes:a.bgClass||a.textClass?a:null}}function ue(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=he(t,Yt(e)),i=e.text.length>t.options.maxHighlightLength&&$t(t.doc.mode,r.state),a=pe(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=a.styles,a.classes?e.styleClasses=a.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function he(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new de(r,!0,e);var a=function(t,e,n){for(var r,i,a=t.doc,o=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>o;--s){if(s<=a.first)return a.first;var l=Vt(a,s-1),c=l.stateAfter;if(c&&(!n||s+(c instanceof ce?c.lookAhead:0)<=a.modeFrontier))return s;var d=H(l.text,null,t.options.tabSize);(null==i||r>d)&&(i=s-1,r=d)}return i}(t,e,n),o=a>r.first&&Vt(r,a-1).stateAfter,s=o?de.fromSaved(r,o,a):new de(r,qt(r.mode),a);return r.iter(a,e,(function(n){fe(t,n.text,s);var r=s.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()})),n&&(r.modeFrontier=s.line),s}function fe(t,e,n,r){var i=t.doc.mode,a=new Ut(e,t.options.tabSize,n);for(a.start=a.pos=r||0,""==e&&me(i,n.state);!a.eol();)ge(i,a,n.state),a.start=a.pos}function me(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Bt(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ge(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=Bt(t,n).mode);var a=t.token(e,n);if(e.pos>e.start)return a}throw new Error("Mode "+t.name+" failed to advance stream.")}de.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},de.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},de.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},de.fromSaved=function(t,e,n){return e instanceof ce?new de(t,$t(t.mode,e.state),n,e.lookAhead):new de(t,$t(t.mode,e),n)},de.prototype.save=function(t){var e=!1!==t?$t(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ce(e,this.maxLookAhead):e};var ye=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ve(t,e,n,r){var i,a,o=t.doc,s=o.mode,l=Vt(o,(e=se(o,e)).line),c=he(t,e.line,n),d=new Ut(l.text,t.options.tabSize,c);for(r&&(a=[]);(r||d.pos<e.ch)&&!d.eol();)d.start=d.pos,i=ge(s,d,c.state),r&&a.push(new ye(d,i,$t(o.mode,c.state)));return r?a:new ye(d,i,c.state)}function be(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[r])||(e[r]+=" "+n[2])}return t}function we(t,e,n,r,i,a,o){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,c=0,d=null,p=new Ut(e,t.options.tabSize,r),u=t.options.addModeClass&&[null];for(""==e&&be(me(n,r.state),a);!p.eol();){if(p.pos>t.options.maxHighlightLength?(s=!1,o&&fe(t,e,r,p.pos),p.pos=e.length,l=null):l=be(ge(n,p,r.state,u),a),u){var h=u[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||d!=l){for(;c<p.start;)i(c=Math.min(p.start,c+5e3),d);d=l}p.start=p.pos}for(;c<p.pos;){var f=Math.min(p.pos,c+5e3);i(f,d),c=f}}var xe=!1,Te=!1;function ke(t,e,n){this.marker=t,this.from=e,this.to=n}function _e(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Se(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Ee(t,e){if(e.full)return null;var n=Jt(t,e.from.line)&&Vt(t,e.from.line).markedSpans,r=Jt(t,e.to.line)&&Vt(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,a=e.to.ch,o=0==ee(e.from,e.to),s=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var a=t[i],o=a.marker;if(null==a.from||(o.inclusiveLeft?a.from<=e:a.from<e)||a.from==e&&"bookmark"==o.type&&(!n||!a.marker.insertLeft)){var s=null==a.to||(o.inclusiveRight?a.to>=e:a.to>e);(r||(r=[])).push(new ke(o,a.from,s?null:a.to))}}return r}(n,i,o),l=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var a=t[i],o=a.marker;if(null==a.to||(o.inclusiveRight?a.to>=e:a.to>e)||a.from==e&&"bookmark"==o.type&&(!n||a.marker.insertLeft)){var s=null==a.from||(o.inclusiveLeft?a.from<=e:a.from<e);(r||(r=[])).push(new ke(o,s?null:a.from-e,null==a.to?null:a.to-e))}}return r}(r,a,o),c=1==e.text.length,d=K(e.text).length+(c?i:0);if(s)for(var p=0;p<s.length;++p){var u=s[p];if(null==u.to){var h=_e(l,u.marker);h?c&&(u.to=null==h.to?null:h.to+d):u.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];null!=m.to&&(m.to+=d),null==m.from?_e(s,m.marker)||(m.from=d,c&&(s||(s=[])).push(m)):(m.from+=d,c&&(s||(s=[])).push(m))}s&&(s=Ce(s)),l&&l!=s&&(l=Ce(l));var g=[s];if(!c){var y,v=e.text.length-2;if(v>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(y||(y=[])).push(new ke(s[b].marker,null,null));for(var w=0;w<v;++w)g.push(y);g.push(l)}return g}function Ce(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Oe(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Me(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Pe(t){return t.inclusiveLeft?-1:0}function Ae(t){return t.inclusiveRight?1:0}function Ie(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),a=ee(r.from,i.from)||Pe(t)-Pe(e);return a?-a:ee(r.to,i.to)||Ae(t)-Ae(e)||e.id-t.id}function Le(t,e){var n,r=Te&&t.markedSpans;if(r)for(var i=void 0,a=0;a<r.length;++a)(i=r[a]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||Ie(n,i.marker)<0)&&(n=i.marker);return n}function De(t){return Le(t,!0)}function Fe(t){return Le(t,!1)}function Ne(t,e){var n,r=Te&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var a=r[i];a.marker.collapsed&&(null==a.from||a.from<e)&&(null==a.to||a.to>e)&&(!n||Ie(n,a.marker)<0)&&(n=a.marker)}return n}function ze(t,e,n,r,i){var a=Vt(t,e),o=Te&&a.markedSpans;if(o)for(var s=0;s<o.length;++s){var l=o[s];if(l.marker.collapsed){var c=l.marker.find(0),d=ee(c.from,n)||Pe(l.marker)-Pe(i),p=ee(c.to,r)||Ae(l.marker)-Ae(i);if(!(d>=0&&p<=0||d<=0&&p>=0)&&(d<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ee(c.to,n)>=0:ee(c.to,n)>0)||d>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ee(c.from,r)<=0:ee(c.from,r)<0)))return!0}}}function He(t){for(var e;e=De(t);)t=e.find(-1,!0).line;return t}function Re(t,e){var n=Vt(t,e),r=He(n);return n==r?e:Yt(r)}function je(t,e){if(e>t.lastLine())return e;var n,r=Vt(t,e);if(!We(t,r))return e;for(;n=Fe(r);)r=n.find(1,!0).line;return Yt(r)+1}function We(t,e){var n=Te&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&$e(t,e,r))return!0}}function $e(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return $e(t,r.line,_e(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,a=0;a<e.markedSpans.length;++a)if((i=e.markedSpans[a]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&$e(t,e,i))return!0}function Be(t){for(var e=0,n=(t=He(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var a=n.parent;a;a=(n=a).parent)for(var o=0;o<a.children.length;++o){var s=a.children[o];if(s==n)break;e+=s.height}return e}function qe(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=De(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=Fe(r);){var a=e.find(0,!0);n-=r.text.length-a.from.ch,n+=(r=a.to.line).text.length-a.to.ch}return n}function Ue(t){var e=t.display,n=t.doc;e.maxLine=Vt(n,n.first),e.maxLineLength=qe(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=qe(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var Ve=function(t,e,n){this.text=t,Me(this,e),this.height=n?n(this):1};function Ge(t){t.parent=null,Oe(t)}Ve.prototype.lineNo=function(){return Yt(this)},vt(Ve);var Ke={},Xe={};function Ye(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Xe:Ke;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ze(t,e){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var a=i?e.rest[i-1]:e.line,o=void 0;r.pos=0,r.addToken=Qe,Mt(t.display.measure)&&(o=ct(a,t.doc.direction))&&(r.addToken=tn(r.addToken,o)),r.map=[],nn(a,r,ue(t,a,e!=t.display.externalMeasured&&Yt(a))),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=D(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=D(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Ot(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return ft(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=D(r.pre.className,r.textClass||"")),r}function Je(t){var e=M("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,n,r,i,a,l){if(e){var c,d=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var a=t.charAt(i);" "!=a||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(a=" "),r+=a,n=" "==a}return r}(e,t.trailingSpace):e,p=t.cm.state.specialChars,u=!1;if(p.test(e)){c=document.createDocumentFragment();for(var h=0;;){p.lastIndex=h;var f=p.exec(e),m=f?f.index-h:e.length-h;if(m){var g=document.createTextNode(d.slice(h,h+m));o&&s<9?c.appendChild(M("span",[g])):c.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!f)break;h+=m+1;var y=void 0;if("\t"==f[0]){var v=t.cm.options.tabSize,b=v-t.col%v;(y=c.appendChild(M("span",G(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),t.col+=b}else"\r"==f[0]||"\n"==f[0]?((y=c.appendChild(M("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),t.col+=1):((y=t.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),o&&s<9?c.appendChild(M("span",[y])):c.appendChild(y),t.col+=1);t.map.push(t.pos,t.pos+1,y),t.pos++}}else t.col+=e.length,c=document.createTextNode(d),t.map.push(t.pos,t.pos+e.length,c),o&&s<9&&(u=!0),t.pos+=e.length;if(t.trailingSpace=32==d.charCodeAt(e.length-1),n||r||i||u||a||l){var w=n||"";r&&(w+=r),i&&(w+=i);var x=M("span",[c],w,a);if(l)for(var T in l)l.hasOwnProperty(T)&&"style"!=T&&"class"!=T&&x.setAttribute(T,l[T]);return t.content.appendChild(x)}t.content.appendChild(c)}}function tn(t,e){return function(n,r,i,a,o,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,d=c+r.length;;){for(var p=void 0,u=0;u<e.length&&!((p=e[u]).to>c&&p.from<=c);u++);if(p.to>=d)return t(n,r,i,a,o,s,l);t(n,r.slice(0,p.to-c),i,a,null,s,l),a=null,r=r.slice(p.to-c),c=p.to}}}function en(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var r=t.markedSpans,i=t.text,a=0;if(r)for(var o,s,l,c,d,p,u,h=i.length,f=0,m=1,g="",y=0;;){if(y==f){l=c=d=s="",u=null,p=null,y=1/0;for(var v=[],b=void 0,w=0;w<r.length;++w){var x=r[w],T=x.marker;if("bookmark"==T.type&&x.from==f&&T.widgetNode)v.push(T);else if(x.from<=f&&(null==x.to||x.to>f||T.collapsed&&x.to==f&&x.from==f)){if(null!=x.to&&x.to!=f&&y>x.to&&(y=x.to,c=""),T.className&&(l+=" "+T.className),T.css&&(s=(s?s+";":"")+T.css),T.startStyle&&x.from==f&&(d+=" "+T.startStyle),T.endStyle&&x.to==y&&(b||(b=[])).push(T.endStyle,x.to),T.title&&((u||(u={})).title=T.title),T.attributes)for(var k in T.attributes)(u||(u={}))[k]=T.attributes[k];T.collapsed&&(!p||Ie(p.marker,T)<0)&&(p=x)}else x.from>f&&y>x.from&&(y=x.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==y&&(c+=" "+b[_]);if(!p||p.from==f)for(var S=0;S<v.length;++S)en(e,0,v[S]);if(p&&(p.from||0)==f){if(en(e,(null==p.to?h+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=h)break;for(var E=Math.min(h,y);;){if(g){var C=f+g.length;if(!p){var O=C>E?g.slice(0,E-f):g;e.addToken(e,O,o?o+l:l,d,f+O.length==y?c:"",s,u)}if(C>=E){g=g.slice(E-f),f=E;break}f=C,d=""}g=i.slice(a,a=n[m++]),o=Ye(n[m++],e.cm.options)}}else for(var M=1;M<n.length;M+=2)e.addToken(e,i.slice(a,a=n[M]),Ye(n[M+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Fe(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Yt(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=We(t,e)}function an(t,e,n){for(var r,i=[],a=e;a<n;a=r){var o=new rn(t.doc,Vt(t.doc,a),a);r=a+o.size,i.push(o)}return i}var on=null;var sn=null;function ln(t,e){var n=ut(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);on?r=on.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(cn,0));for(var a=function(t){r.push((function(){return n[t].apply(null,i)}))},o=0;o<n.length;++o)a(o)}}function cn(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function dn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var a=e.changes[i];"text"==a?hn(t,e):"gutter"==a?mn(t,e,n,r):"class"==a?fn(t,e):"widget"==a&&gn(t,e,r)}e.changes=null}function pn(t){return t.node==t.text&&(t.node=M("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),o&&s<8&&(t.node.style.zIndex=2)),t.node}function un(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ze(t,e)}function hn(t,e){var n=e.text.className,r=un(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,fn(t,e)):n&&(e.text.className=n)}function fn(t,e){(function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=pn(e);e.background=r.insertBefore(M("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}})(t,e),e.line.wrapClass?pn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function mn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=pn(e);e.gutterBackground=M("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var a=e.line.gutterMarkers;if(t.options.lineNumbers||a){var o=pn(e),s=e.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(t.display.input.setUneditable(s),o.insertBefore(s,e.text),e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(M("div",Qt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),a)for(var l=0;l<t.display.gutterSpecs.length;++l){var c=t.display.gutterSpecs[l].className,d=a.hasOwnProperty(c)&&a[c];d&&s.appendChild(M("div",[d],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(t,e,n){e.alignable&&(e.alignable=null);for(var r=_("CodeMirror-linewidget"),i=e.node.firstChild,a=void 0;i;i=a)a=i.nextSibling,r.test(i.className)&&e.node.removeChild(i);vn(t,e,n)}function yn(t,e,n,r){var i=un(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),fn(t,e),mn(t,e,n,r),vn(t,e,r),e.node}function vn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)bn(t,e.rest[r],e,n,!1)}function bn(t,e,n,r,i){if(e.widgets)for(var a=pn(n),o=0,s=e.widgets;o<s.length;++o){var l=s[o],c=M("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),wn(l,c,n,r),t.display.input.setUneditable(c),i&&l.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),ln(l,"redraw")}}function wn(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function xn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!A(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),O(e.display.measure,M("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function Tn(t,e){for(var n=kt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function kn(t){return t.lineSpace.offsetTop}function _n(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Sn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=O(t.measure,M("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function En(t){return 50-t.display.nativeBarWidth}function Cn(t){return t.display.scroller.clientWidth-En(t)-t.display.barWidth}function On(t){return t.display.scroller.clientHeight-En(t)-t.display.barHeight}function Mn(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(Yt(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Pn(t,e,n,r){return Ln(t,In(t,e),n,r)}function An(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[dr(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function In(t,e){var n=Yt(e),r=An(t,n);r&&!r.text?r=null:r&&r.changes&&(dn(t,r,n,ar(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=Yt(e=He(e)),r=t.display.externalMeasured=new rn(t.doc,e,n);r.lineN=n;var i=r.built=Ze(t,r);return r.text=i.pre,O(t.display.lineMeasure,i.pre),r}(t,e));var i=Mn(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ln(t,e,n,r,i){e.before&&(n=-1);var a,l=n+(r||"");return e.cache.hasOwnProperty(l)?a=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,n){var r=t.options.lineWrapping,i=r&&Cn(t);if(!e.measure.heights||r&&e.measure.width!=i){var a=e.measure.heights=[];if(r){e.measure.width=i;for(var o=e.text.firstChild.getClientRects(),s=0;s<o.length-1;s++){var l=o[s],c=o[s+1];Math.abs(l.bottom-c.bottom)>2&&a.push((l.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(a=function(t,e,n,r){var i,a=Nn(e.map,n,r),l=a.node,c=a.start,d=a.end,p=a.collapse;if(3==l.nodeType){for(var u=0;u<4;u++){for(;c&&rt(e.line.text.charAt(a.coverStart+c));)--c;for(;a.coverStart+d<a.coverEnd&&rt(e.line.text.charAt(a.coverStart+d));)++d;if((i=o&&s<9&&0==c&&d==a.coverEnd-a.coverStart?l.parentNode.getBoundingClientRect():zn(S(l,c,d).getClientRects(),r)).left||i.right||0==c)break;d=c,c-=1,p="right"}o&&s<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Dt)return Dt;var e=O(t,M("span","x")),n=e.getBoundingClientRect(),r=S(e,0,1).getBoundingClientRect();return Dt=Math.abs(n.left-r.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}(t.display.measure,i))}else{var h;c>0&&(p=r="right"),i=t.options.lineWrapping&&(h=l.getClientRects()).length>1?h["right"==r?h.length-1:0]:l.getBoundingClientRect()}if(o&&s<9&&!c&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+ir(t.display),top:f.top,bottom:f.bottom}:Fn}for(var m=i.top-e.rect.top,g=i.bottom-e.rect.top,y=(m+g)/2,v=e.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var w=b?v[b-1]:0,x=v[b],T={left:("right"==p?i.right:i.left)-e.rect.left,right:("left"==p?i.left:i.right)-e.rect.left,top:w,bottom:x};return i.left||i.right||(T.bogus=!0),t.options.singleCursorHeightPerLine||(T.rtop=m,T.rbottom=g),T}(t,e,n,r)).bogus||(e.cache[l]=a)),{left:a.left,right:a.right,top:i?a.rtop:a.top,bottom:i?a.rbottom:a.bottom}}var Dn,Fn={left:0,right:0,top:0,bottom:0};function Nn(t,e,n){for(var r,i,a,o,s,l,c=0;c<t.length;c+=3)if(s=t[c],l=t[c+1],e<s?(i=0,a=1,o="left"):e<l?a=1+(i=e-s):(c==t.length-3||e==l&&t[c+3]>e)&&(i=(a=l-s)-1,e>=l&&(o="right")),null!=i){if(r=t[c+2],s==l&&n==(r.insertLeft?"left":"right")&&(o=n),"left"==n&&0==i)for(;c&&t[c-2]==t[c-3]&&t[c-1].insertLeft;)r=t[2+(c-=3)],o="left";if("right"==n&&i==l-s)for(;c<t.length-3&&t[c+3]==t[c+4]&&!t[c+5].insertLeft;)r=t[(c+=3)+2],o="right";break}return{node:r,start:i,end:a,collapse:o,coverStart:s,coverEnd:l}}function zn(t,e){var n=Fn;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function Hn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Rn(t){t.display.externalMeasure=null,C(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Hn(t.display.view[e])}function jn(t){Rn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Wn(){return d&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $n(){return d&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Bn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=xn(t.widgets[n]));return e}function qn(t,e,n,r,i){if(!i){var a=Bn(e);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var o=Be(e);if("local"==r?o+=kn(t.display):o-=t.display.viewOffset,"page"==r||"window"==r){var s=t.display.lineSpace.getBoundingClientRect();o+=s.top+("window"==r?0:$n());var l=s.left+("window"==r?0:Wn());n.left+=l,n.right+=l}return n.top+=o,n.bottom+=o,n}function Un(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=Wn(),i-=$n();else if("local"==n||!n){var a=t.display.sizer.getBoundingClientRect();r+=a.left,i+=a.top}var o=t.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function Vn(t,e,n,r,i){return r||(r=Vt(t.doc,e.line)),qn(t,r,Pn(t,r,e.ch,i),n)}function Gn(t,e,n,r,i,a){function o(e,o){var s=Ln(t,i,e,o?"right":"left",a);return o?s.left=s.right:s.right=s.left,qn(t,r,s,n)}r=r||Vt(t.doc,e.line),i||(i=In(t,r));var s=ct(r,t.doc.direction),l=e.ch,c=e.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!s)return o("before"==c?l-1:l,"before"==c);function d(t,e,n){return o(n?t-1:t,1==s[e].level!=n)}var p=st(s,l,c),u=ot,h=d(l,p,"before"==c);return null!=u&&(h.other=d(l,u,"before"!=c)),h}function Kn(t,e){var n=0;e=se(t.doc,e),t.options.lineWrapping||(n=ir(t.display)*e.ch);var r=Vt(t.doc,e.line),i=Be(r)+kn(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Xn(t,e,n,r,i){var a=te(t,e,n);return a.xRel=i,r&&(a.outside=r),a}function Yn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Xn(r.first,0,null,-1,-1);var i=Zt(r,n),a=r.first+r.size-1;if(i>a)return Xn(r.first+r.size-1,Vt(r,a).text.length,null,1,1);e<0&&(e=0);for(var o=Vt(r,i);;){var s=tr(t,o,i,e,n),l=Ne(o,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var c=l.find(1);if(c.line==i)return c;o=Vt(r,i=c.line)}}function Zn(t,e,n,r){r-=Bn(e);var i=e.text.length,a=at((function(e){return Ln(t,n,e-1).bottom<=r}),i,0);return{begin:a,end:i=at((function(e){return Ln(t,n,e).top>r}),a,i)}}function Jn(t,e,n,r){return n||(n=In(t,e)),Zn(t,e,n,qn(t,e,Ln(t,n,r),"line").top)}function Qn(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function tr(t,e,n,r,i){i-=Be(e);var a=In(t,e),o=Bn(e),s=0,l=e.text.length,c=!0,d=ct(e,t.doc.direction);if(d){var p=(t.options.lineWrapping?nr:er)(t,e,n,a,d,r,i);s=(c=1!=p.level)?p.from:p.to-1,l=c?p.to:p.from-1}var u,h,f=null,m=null,g=at((function(e){var n=Ln(t,a,e);return n.top+=o,n.bottom+=o,!!Qn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(f=e,m=n),!0)}),s,l),y=!1;if(m){var v=r-m.left<m.right-r,b=v==c;g=f+(b?0:1),h=b?"after":"before",u=v?m.left:m.right}else{c||g!=l&&g!=s||g++,h=0==g?"after":g==e.text.length?"before":Ln(t,a,g-(c?1:0)).bottom+o<=i==c?"after":"before";var w=Gn(t,te(n,g,h),"line",e,a);u=w.left,y=i<w.top?-1:i>=w.bottom?1:0}return Xn(n,g=it(e.text,g,1),h,y,r-u)}function er(t,e,n,r,i,a,o){var s=at((function(s){var l=i[s],c=1!=l.level;return Qn(Gn(t,te(n,c?l.to:l.from,c?"before":"after"),"line",e,r),a,o,!0)}),0,i.length-1),l=i[s];if(s>0){var c=1!=l.level,d=Gn(t,te(n,c?l.from:l.to,c?"after":"before"),"line",e,r);Qn(d,a,o,!0)&&d.top>o&&(l=i[s-1])}return l}function nr(t,e,n,r,i,a,o){var s=Zn(t,e,r,o),l=s.begin,c=s.end;/\s/.test(e.text.charAt(c-1))&&c--;for(var d=null,p=null,u=0;u<i.length;u++){var h=i[u];if(!(h.from>=c||h.to<=l)){var f=Ln(t,r,1!=h.level?Math.min(c,h.to)-1:Math.max(l,h.from)).right,m=f<a?a-f+1e9:f-a;(!d||p>m)&&(d=h,p=m)}}return d||(d=i[i.length-1]),d.from<l&&(d={from:l,to:d.to,level:d.level}),d.to>c&&(d={from:d.from,to:c,level:d.level}),d}function rr(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Dn){Dn=M("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Dn.appendChild(document.createTextNode("x")),Dn.appendChild(M("br"));Dn.appendChild(document.createTextNode("x"))}O(t.measure,Dn);var n=Dn.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),C(t.measure),n||1}function ir(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=M("span","xxxxxxxxxx"),n=M("pre",[e],"CodeMirror-line-like");O(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function ar(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,a=e.gutters.firstChild,o=0;a;a=a.nextSibling,++o){var s=t.display.gutterSpecs[o].className;n[s]=a.offsetLeft+a.clientLeft+i,r[s]=a.clientWidth}return{fixedPos:or(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function or(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function sr(t){var e=rr(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/ir(t.display)-3);return function(i){if(We(t.doc,i))return 0;var a=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(a+=i.widgets[o].height);return n?a+(Math.ceil(i.text.length/r)||1)*e:a+e}}function lr(t){var e=t.doc,n=sr(t);e.iter((function(t){var e=n(t);e!=t.height&&Xt(t,e)}))}function cr(t,e,n,r){var i=t.display;if(!n&&"true"==kt(e).getAttribute("cm-not-content"))return null;var a,o,s=i.lineSpace.getBoundingClientRect();try{a=e.clientX-s.left,o=e.clientY-s.top}catch(t){return null}var l,c=Yn(t,a,o);if(r&&c.xRel>0&&(l=Vt(t.doc,c.line).text).length==c.ch){var d=H(l,l.length,t.options.tabSize)-l.length;c=te(c.line,Math.max(0,Math.round((a-Sn(t.display).left)/ir(t.display))-d))}return c}function dr(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function pr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)Te&&Re(t.doc,e)<i.viewTo&&hr(t);else if(n<=i.viewFrom)Te&&je(t.doc,n+r)>i.viewFrom?hr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)hr(t);else if(e<=i.viewFrom){var a=fr(t,n,n+r,1);a?(i.view=i.view.slice(a.index),i.viewFrom=a.lineN,i.viewTo+=r):hr(t)}else if(n>=i.viewTo){var o=fr(t,e,e,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):hr(t)}else{var s=fr(t,e,e,-1),l=fr(t,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(an(t,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):hr(t)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:e<c.lineN+c.size&&(i.externalMeasured=null))}function ur(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var a=r.view[dr(t,e)];if(null!=a.node){var o=a.changes||(a.changes=[]);-1==j(o,n)&&o.push(n)}}}function hr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function fr(t,e,n,r){var i,a=dr(t,e),o=t.display.view;if(!Te||n==t.doc.first+t.doc.size)return{index:a,lineN:n};for(var s=t.display.viewFrom,l=0;l<a;l++)s+=o[l].size;if(s!=e){if(r>0){if(a==o.length-1)return null;i=s+o[a].size-e,a++}else i=s-e;e+=i,n+=i}for(;Re(t.doc,n)!=n;){if(a==(r<0?0:o.length-1))return null;n+=r*o[a-(r<0?1:0)].size,a+=r}return{index:a,lineN:n}}function mr(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function gr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function yr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),a=r.selection=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++)if(e||o!=n.sel.primIndex){var s=n.sel.ranges[o];if(!(s.from().line>=t.display.viewTo||s.to().line<t.display.viewFrom)){var l=s.empty();(l||t.options.showCursorWhenSelecting)&&vr(t,s.head,i),l||wr(t,s,a)}}return r}function vr(t,e,n){var r=Gn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(M("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var a=n.appendChild(M("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=r.other.left+"px",a.style.top=r.other.top+"px",a.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function br(t,e){return t.top-e.top||t.left-e.left}function wr(t,e,n){var r=t.display,i=t.doc,a=document.createDocumentFragment(),o=Sn(t.display),s=o.left,l=Math.max(r.sizerWidth,Cn(t)-r.sizer.offsetLeft)-o.right,c="ltr"==i.direction;function d(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),a.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?l-t:n)+"px;\n                             height: "+(r-e)+"px"))}function p(e,n,r){var a,o,p=Vt(i,e),u=p.text.length;function h(n,r){return Vn(t,te(e,n),"div",p,r)}function f(e,n,r){var i=Jn(t,p,null,e),a="ltr"==n==("after"==r)?"left":"right";return h("after"==r?i.begin:i.end-(/\s/.test(p.text.charAt(i.end-1))?2:1),a)[a]}var m=ct(p,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,a=0;a<t.length;++a){var o=t[a];(o.from<n&&o.to>e||e==n&&o.to==e)&&(r(Math.max(o.from,e),Math.min(o.to,n),1==o.level?"rtl":"ltr",a),i=!0)}i||r(e,n,"ltr")}(m,n||0,null==r?u:r,(function(t,e,i,p){var g="ltr"==i,y=h(t,g?"left":"right"),v=h(e-1,g?"right":"left"),b=null==n&&0==t,w=null==r&&e==u,x=0==p,T=!m||p==m.length-1;if(v.top-y.top<=3){var k=(c?w:b)&&T,_=(c?b:w)&&x?s:(g?y:v).left,S=k?l:(g?v:y).right;d(_,y.top,S-_,y.bottom)}else{var E,C,O,M;g?(E=c&&b&&x?s:y.left,C=c?l:f(t,i,"before"),O=c?s:f(e,i,"after"),M=c&&w&&T?l:v.right):(E=c?f(t,i,"before"):s,C=!c&&b&&x?l:y.right,O=!c&&w&&T?s:v.left,M=c?f(e,i,"after"):l),d(E,y.top,C-E,y.bottom),y.bottom<v.top&&d(s,y.bottom,null,v.top),d(O,v.top,M-O,v.bottom)}(!a||br(y,a)<0)&&(a=y),br(v,a)<0&&(a=v),(!o||br(y,o)<0)&&(o=y),br(v,o)<0&&(o=v)})),{start:a,end:o}}var u=e.from(),h=e.to();if(u.line==h.line)p(u.line,u.ch,h.ch);else{var f=Vt(i,u.line),m=Vt(i,h.line),g=He(f)==He(m),y=p(u.line,u.ch,g?f.text.length+1:null).end,v=p(h.line,g?0:null,h.ch).start;g&&(y.top<v.top-2?(d(y.right,y.top,null,y.bottom),d(s,v.top,v.left,v.bottom)):d(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&d(s,y.bottom,null,v.top)}n.appendChild(a)}function xr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||Sr(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function Tr(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||_r(t))}function kr(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Sr(t))}),100)}function _r(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(ft(t,"focus",t,e),t.state.focused=!0,L(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),xr(t))}function Sr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(ft(t,"blur",t,e),t.state.focused=!1,E(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Er(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],a=t.options.lineWrapping,l=void 0,c=0;if(!i.hidden){if(o&&s<8){var d=i.node.offsetTop+i.node.offsetHeight;l=d-n,n=d}else{var p=i.node.getBoundingClientRect();l=p.bottom-p.top,!a&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-p.left-1)}var u=i.line.height-l;if((u>.005||u<-.005)&&(Xt(i.line,l),Cr(i.line),i.rest))for(var h=0;h<i.rest.length;h++)Cr(i.rest[h]);if(c>t.display.sizerWidth){var f=Math.ceil(c/ir(t.display));f>t.display.maxLineLength&&(t.display.maxLineLength=f,t.display.maxLine=i.line,t.display.maxLineChanged=!0)}}}}function Cr(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Or(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-kn(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,a=Zt(e,r),o=Zt(e,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<a?(a=s,o=Zt(e,Be(Vt(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=o&&(a=Zt(e,Be(Vt(e,l))-t.wrapper.clientHeight),o=l)}return{from:a,to:Math.max(o,a+1)}}function Mr(t,e){var n=t.display,r=rr(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,a=On(t),o={};e.bottom-e.top>a&&(e.bottom=e.top+a);var s=t.doc.height+_n(n),l=e.top<r,c=e.bottom>s-r;if(e.top<i)o.scrollTop=l?0:e.top;else if(e.bottom>i+a){var d=Math.min(e.top,(c?s:e.bottom)-a);d!=i&&(o.scrollTop=d)}var p=t.options.fixedGutter?0:n.gutters.offsetWidth,u=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-p,h=Cn(t)-n.gutters.offsetWidth,f=e.right-e.left>h;return f&&(e.right=e.left+h),e.left<10?o.scrollLeft=0:e.left<u?o.scrollLeft=Math.max(0,e.left+p-(f?0:10)):e.right>h+u-3&&(o.scrollLeft=e.right+(f?0:10)-h),o}function Pr(t,e){null!=e&&(Lr(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ar(t){Lr(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Ir(t,e,n){null==e&&null==n||Lr(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Lr(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Dr(t,Kn(t,e.from),Kn(t,e.to),e.margin))}function Dr(t,e,n,r){var i=Mr(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Ir(t,i.scrollLeft,i.scrollTop)}function Fr(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||li(t,{top:e}),Nr(t,e,!0),n&&li(t),ri(t,100))}function Nr(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function zr(t,e,n,r){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,pi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Hr(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+_n(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+En(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Rr=function(t,e,n){this.cm=n;var r=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),pt(r,"scroll",(function(){r.clientHeight&&e(r.scrollTop,"vertical")})),pt(i,"scroll",(function(){i.clientWidth&&e(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Rr.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0";var i=t.viewHeight-(e?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var a=t.viewWidth-t.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+a)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Rr.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Rr.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Rr.prototype.zeroWidthHack=function(){var t=v&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new R,this.disableVert=new R},Rr.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)}))},Rr.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var jr=function(){};function Wr(t,e){e||(e=Hr(t));var n=t.display.barWidth,r=t.display.barHeight;$r(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&Er(t),$r(t,Hr(t)),n=t.display.barWidth,r=t.display.barHeight}function $r(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}jr.prototype.update=function(){return{bottom:0,right:0}},jr.prototype.setScrollLeft=function(){},jr.prototype.setScrollTop=function(){},jr.prototype.clear=function(){};var Br={native:Rr,null:jr};function qr(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&E(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Br[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),pt(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?zr(t,e):Fr(t,e)}),t),t.display.scrollbars.addClass&&L(t.display.wrapper,t.display.scrollbars.addClass)}var Ur=0;function Vr(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ur},e=t.curOp,on?on.ops.push(e):e.ownsGroup=on={ops:[e],delayedCallbacks:[]}}function Gr(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{on=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Kr(e[n]);for(var r=0;r<e.length;r++)Xr(e[r]);for(var i=0;i<e.length;i++)Yr(e[i]);for(var a=0;a<e.length;a++)Zr(e[a]);for(var o=0;o<e.length;o++)Jr(e[o])}(t)}))}function Kr(t){var e=t.cm,n=e.display;(function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=En(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=En(t)+"px",e.scrollbarsClipped=!0)})(e),t.updateMaxLine&&Ue(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new ai(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Xr(t){t.updatedDisplay=t.mustUpdate&&oi(t.cm,t.update)}function Yr(t){var e=t.cm,n=e.display;t.updatedDisplay&&Er(e),t.barMeasure=Hr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Pn(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+En(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-Cn(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Zr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&zr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==I();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Wr(e,t.barMeasure),t.updatedDisplay&&di(e,t.barMeasure),t.selectionChanged&&xr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&Tr(t.cm)}function Jr(t){var e=t.cm,n=e.display,r=e.doc;t.updatedDisplay&&si(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Nr(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&zr(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!mt(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!f){var a=M("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-kn(t.display))+"px;\n                         height: "+(e.bottom-e.top+En(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(a),a.scrollIntoView(i),t.display.lineSpace.removeChild(a)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?te(e.line,e.ch+1,"before"):e);for(var a=0;a<5;a++){var o=!1,s=Gn(t,e),l=n&&n!=e?Gn(t,n):s,c=Mr(t,i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r}),d=t.doc.scrollTop,p=t.doc.scrollLeft;if(null!=c.scrollTop&&(Fr(t,c.scrollTop),Math.abs(t.doc.scrollTop-d)>1&&(o=!0)),null!=c.scrollLeft&&(zr(t,c.scrollLeft),Math.abs(t.doc.scrollLeft-p)>1&&(o=!0)),!o)break}return i}(e,se(r,t.scrollToPos.from),se(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,a=t.maybeUnhiddenMarkers;if(i)for(var o=0;o<i.length;++o)i[o].lines.length||ft(i[o],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&ft(a[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&ft(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Qr(t,e){if(t.curOp)return e();Vr(t);try{return e()}finally{Gr(t)}}function ti(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Vr(t);try{return e.apply(t,arguments)}finally{Gr(t)}}}function ei(t){return function(){if(this.curOp)return t.apply(this,arguments);Vr(this);try{return t.apply(this,arguments)}finally{Gr(this)}}}function ni(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Vr(e);try{return t.apply(this,arguments)}finally{Gr(e)}}}function ri(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,N(ii,t))}function ii(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=he(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(a){if(r.line>=t.display.viewFrom){var o=a.styles,s=a.text.length>t.options.maxHighlightLength?$t(e.mode,r.state):null,l=pe(t,a,r,!0);s&&(r.state=s),a.styles=l.styles;var c=a.styleClasses,d=l.classes;d?a.styleClasses=d:c&&(a.styleClasses=null);for(var p=!o||o.length!=a.styles.length||c!=d&&(!c||!d||c.bgClass!=d.bgClass||c.textClass!=d.textClass),u=0;!p&&u<o.length;++u)p=o[u]!=a.styles[u];p&&i.push(r.line),a.stateAfter=r.save(),r.nextLine()}else a.text.length<=t.options.maxHighlightLength&&fe(t,a.text,r),a.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(t,t.options.workDelay),!0})),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&Qr(t,(function(){for(var e=0;e<i.length;e++)ur(t,i[e],"text")}))}}var ai=function(t,e,n){var r=t.display;this.viewport=e,this.visible=Or(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Cn(t),this.force=n,this.dims=ar(t),this.events=[]};function oi(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return hr(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==mr(t))return!1;ui(t)&&(hr(t),e.dims=ar(t));var i=r.first+r.size,a=Math.max(e.visible.from-t.options.viewportMargin,r.first),o=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),Te&&(a=Re(t.doc,a),o=je(t.doc,o));var s=a!=n.viewFrom||o!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;(function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=an(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=an(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(dr(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(an(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,dr(t,n)))),r.viewTo=n})(t,a,o),n.viewOffset=Be(Vt(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var c=mr(t);if(!s&&0==c&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var d=function(t){if(t.hasFocus())return null;var e=I();if(!e||!A(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&A(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return c>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,a=r.lineDiv,o=a.firstChild;function s(e){var n=e.nextSibling;return l&&v&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var c=r.view,d=r.viewFrom,p=0;p<c.length;p++){var u=c[p];if(u.hidden);else if(u.node&&u.node.parentNode==a){for(;o!=u.node;)o=s(o);var h=i&&null!=e&&e<=d&&u.lineNumber;u.changes&&(j(u.changes,"gutter")>-1&&(h=!1),dn(t,u,d,n)),h&&(C(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(Qt(t.options,d)))),o=u.node.nextSibling}else{var f=yn(t,u,d,n);a.insertBefore(f,o)}d+=u.size}for(;o;)o=s(o)}(t,n.updateLineNumbers,e.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=I()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&A(document.body,t.anchorNode)&&A(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(d),C(n.cursorDiv),C(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ri(t,400)),n.updateLineNumbers=null,!0}function si(t,e){for(var n=e.viewport,r=!0;;r=!1){if(r&&t.options.lineWrapping&&e.oldDisplayWidth!=Cn(t))r&&(e.visible=Or(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+_n(t.display)-On(t),n.top)}),e.visible=Or(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!oi(t,e))break;Er(t);var i=Hr(t);gr(t),Wr(t,i),di(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function li(t,e){var n=new ai(t,e);if(oi(t,n)){Er(t),si(t,n);var r=Hr(t);gr(t),Wr(t,r),di(t,r),n.finish()}}function ci(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px"}function di(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+En(t)+"px"}function pi(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=or(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,a=r+"px",o=0;o<n.length;o++)if(!n[o].hidden){t.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=a),n[o].gutterBackground&&(n[o].gutterBackground.style.left=a));var s=n[o].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=a}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function ui(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=Qt(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(M("div",[M("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=i.firstChild.offsetWidth,o=i.offsetWidth-a;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(a,r.lineGutter.offsetWidth-o)+1,r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(t.display),!0}return!1}function hi(t,e){for(var n=[],r=!1,i=0;i<t.length;i++){var a=t[i],o=null;if("string"!=typeof a&&(o=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!e)continue;r=!0}n.push({className:a,style:o})}return e&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function fi(t){var e=t.gutters,n=t.gutterSpecs;C(e),t.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],a=i.className,o=i.style,s=e.appendChild(M("div",null,"CodeMirror-gutter "+a));o&&(s.style.cssText=o),"CodeMirror-linenumbers"==a&&(t.lineGutter=s,s.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",ci(t)}function mi(t){fi(t.display),pr(t),pi(t)}function gi(t,e,r,i){var a=this;this.input=r,a.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=P("div",null,"CodeMirror-code"),a.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=M("div",null,"CodeMirror-cursors"),a.measure=M("div",null,"CodeMirror-measure"),a.lineMeasure=M("div",null,"CodeMirror-measure"),a.lineSpace=P("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var c=P("div",[a.lineSpace],"CodeMirror-lines");a.mover=M("div",[c],null,"position: relative"),a.sizer=M("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=M("div",null,null,"position: absolute; height: 50px; width: 1px;"),a.gutters=M("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=M("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=M("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),o&&s<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),l||n&&y||(a.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(a.wrapper):t(a.wrapper)),a.viewFrom=a.viewTo=e.first,a.reportedViewFrom=a.reportedViewTo=e.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=hi(i.gutters,i.lineNumbers),fi(a),r.init(a)}ai.prototype.signal=function(t,e){yt(t,e)&&this.events.push(arguments)},ai.prototype.finish=function(){for(var t=0;t<this.events.length;t++)ft.apply(null,this.events[t])};var yi=0,vi=null;function bi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function wi(t){var e=bi(t);return e.x*=vi,e.y*=vi,e}function xi(t,e){var r=bi(e),i=r.x,a=r.y,o=t.display,s=o.scroller,c=s.scrollWidth>s.clientWidth,d=s.scrollHeight>s.clientHeight;if(i&&c||a&&d){if(a&&v&&l)t:for(var u=e.target,h=o.view;u!=s;u=u.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==u){t.display.currentWheelTarget=u;break t}if(i&&!n&&!p&&null!=vi)return a&&d&&Fr(t,Math.max(0,s.scrollTop+a*vi)),zr(t,Math.max(0,s.scrollLeft+i*vi)),(!a||a&&d)&&bt(e),void(o.wheelStartX=null);if(a&&null!=vi){var m=a*vi,g=t.doc.scrollTop,y=g+o.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):y=Math.min(t.doc.height,y+m+50),li(t,{top:g,bottom:y})}yi<20&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=a,setTimeout((function(){if(null!=o.wheelStartX){var t=s.scrollLeft-o.wheelStartX,e=s.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(vi=(vi*yi+n)/(yi+1),++yi)}}),200)):(o.wheelDX+=i,o.wheelDY+=a))}}o?vi=-.53:n?vi=15:d?vi=-.7:u&&(vi=-1/3);var Ti=function(t,e){this.ranges=t,this.primIndex=e};Ti.prototype.primary=function(){return this.ranges[this.primIndex]},Ti.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!ne(n.anchor,r.anchor)||!ne(n.head,r.head))return!1}return!0},Ti.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new ki(re(this.ranges[e].anchor),re(this.ranges[e].head));return new Ti(t,this.primIndex)},Ti.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Ti.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ee(e,r.from())>=0&&ee(t,r.to())<=0)return n}return-1};var ki=function(t,e){this.anchor=t,this.head=e};function _i(t,e,n){var r=t&&t.options.selectionsMayTouch,i=e[n];e.sort((function(t,e){return ee(t.from(),e.from())})),n=j(e,i);for(var a=1;a<e.length;a++){var o=e[a],s=e[a-1],l=ee(s.to(),o.from());if(r&&!o.empty()?l>0:l>=0){var c=ae(s.from(),o.from()),d=ie(s.to(),o.to()),p=s.empty()?o.from()==o.head:s.from()==s.head;a<=n&&--n,e.splice(--a,2,new ki(p?d:c,p?c:d))}}return new Ti(e,n)}function Si(t,e){return new Ti([new ki(t,e||t)],0)}function Ei(t){return t.text?te(t.from.line+t.text.length-1,K(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ci(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Ei(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=Ei(e).ch-e.to.ch),te(n,r)}function Oi(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new ki(Ci(i.anchor,e),Ci(i.head,e)))}return _i(t.cm,n,t.sel.primIndex)}function Mi(t,e,n){return t.line==e.line?te(n.line,t.ch-e.ch+n.ch):te(n.line+(t.line-e.line),t.ch)}function Pi(t){t.doc.mode=Rt(t.options,t.doc.modeOption),Ai(t)}function Ai(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ri(t,100),t.state.modeGen++,t.curOp&&pr(t)}function Ii(t,e){return 0==e.from.ch&&0==e.to.ch&&""==K(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Li(t,e,n,r){function i(t){return n?n[t]:null}function a(t,n,i){(function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Oe(t),Me(t,n);var i=r?r(t):1;i!=t.height&&Xt(t,i)})(t,n,i,r),ln(t,"change",t,e)}function o(t,e){for(var n=[],a=t;a<e;++a)n.push(new Ve(c[a],i(a),r));return n}var s=e.from,l=e.to,c=e.text,d=Vt(t,s.line),p=Vt(t,l.line),u=K(c),h=i(c.length-1),f=l.line-s.line;if(e.full)t.insert(0,o(0,c.length)),t.remove(c.length,t.size-c.length);else if(Ii(t,e)){var m=o(0,c.length-1);a(p,p.text,h),f&&t.remove(s.line,f),m.length&&t.insert(s.line,m)}else if(d==p)if(1==c.length)a(d,d.text.slice(0,s.ch)+u+d.text.slice(l.ch),h);else{var g=o(1,c.length-1);g.push(new Ve(u+d.text.slice(l.ch),h,r)),a(d,d.text.slice(0,s.ch)+c[0],i(0)),t.insert(s.line+1,g)}else if(1==c.length)a(d,d.text.slice(0,s.ch)+c[0]+p.text.slice(l.ch),i(0)),t.remove(s.line+1,f);else{a(d,d.text.slice(0,s.ch)+c[0],i(0)),a(p,u+p.text.slice(l.ch),h);var y=o(1,c.length-1);f>1&&t.remove(s.line+1,f-1),t.insert(s.line+1,y)}ln(t,"change",t,e)}function Di(t,e,n){!function t(r,i,a){if(r.linked)for(var o=0;o<r.linked.length;++o){var s=r.linked[o];if(s.doc!=i){var l=a&&s.sharedHist;n&&!l||(e(s.doc,l),t(s.doc,r,l))}}}(t,null,!0)}function Fi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,lr(t),Pi(t),Ni(t),t.options.lineWrapping||Ue(t),t.options.mode=e.modeOption,pr(t)}function Ni(t){("rtl"==t.doc.direction?L:E)(t.display.lineDiv,"CodeMirror-rtl")}function zi(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Hi(t,e){var n={from:re(e.from),to:Ei(e),text:Gt(t,e.from,e.to)};return Bi(t,n,e.from.line,e.to.line+1),Di(t,(function(t){return Bi(t,n,e.from.line,e.to.line+1)}),!0),n}function Ri(t){for(;t.length&&K(t).ranges;)t.pop()}function ji(t,e,n,r){var i=t.history;i.undone.length=0;var a,o,s=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(a=function(t,e){return e?(Ri(t.done),K(t.done)):t.done.length&&!K(t.done).ranges?K(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),K(t.done)):void 0}(i,i.lastOp==r)))o=K(a.changes),0==ee(e.from,e.to)&&0==ee(e.from,o.to)?o.to=Ei(e):a.changes.push(Hi(t,e));else{var l=K(i.done);for(l&&l.ranges||$i(t.sel,i.done),a={changes:[Hi(t,e)],generation:i.generation},i.done.push(a);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,o||ft(t,"historyAdded")}function Wi(t,e,n,r){var i=t.history,a=r&&r.origin;n==i.lastSelOp||a&&i.lastSelOrigin==a&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==a||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,a,K(i.done),e))?i.done[i.done.length-1]=e:$i(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=a,i.lastSelOp=n,r&&!1!==r.clearRedo&&Ri(i.undone)}function $i(t,e){var n=K(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Bi(t,e,n,r){var i=e["spans_"+t.id],a=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),(function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[a]=n.markedSpans),++a}))}function qi(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Ui(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(qi(n[i]));return r}(t,e),r=Ee(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var a=n[i],o=r[i];if(a&&o)t:for(var s=0;s<o.length;++s){for(var l=o[s],c=0;c<a.length;++c)if(a[c].marker==l.marker)continue t;a.push(l)}else o&&(n[i]=o)}return n}function Vi(t,e,n){for(var r=[],i=0;i<t.length;++i){var a=t[i];if(a.ranges)r.push(n?Ti.prototype.deepCopy.call(a):a);else{var o=a.changes,s=[];r.push({changes:s});for(var l=0;l<o.length;++l){var c=o[l],d=void 0;if(s.push({from:c.from,to:c.to,text:c.text}),e)for(var p in c)(d=p.match(/^spans_(\d+)$/))&&j(e,Number(d[1]))>-1&&(K(s)[p]=c[p],delete c[p])}}}return r}function Gi(t,e,n,r){if(r){var i=t.anchor;if(n){var a=ee(e,i)<0;a!=ee(n,i)<0?(i=e,e=n):a!=ee(e,n)<0&&(e=n)}return new ki(i,e)}return new ki(n||e,e)}function Ki(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),Qi(t,new Ti([Gi(t.sel.primary(),e,n,i)],0),r)}function Xi(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),a=0;a<t.sel.ranges.length;a++)r[a]=Gi(t.sel.ranges[a],e[a],null,i);Qi(t,_i(t.cm,r,t.sel.primIndex),n)}function Yi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,Qi(t,_i(t.cm,i,t.sel.primIndex),r)}function Zi(t,e,n,r){Qi(t,Si(e,n),r)}function Ji(t,e,n){var r=t.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=e,ta(t,e,n)):Qi(t,e,n)}function Qi(t,e,n){ta(t,e,n),Wi(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function ta(t,e,n){(yt(t,"beforeSelectionChange")||t.cm&&yt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new ki(se(t,e[n].anchor),se(t,e[n].head))},origin:n&&n.origin};return ft(t,"beforeSelectionChange",t,r),t.cm&&ft(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?_i(t.cm,r.ranges,r.ranges.length-1):e}(t,e,n));var r=n&&n.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);ea(t,ra(t,e,r,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||Ar(t.cm)}function ea(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,gt(t.cm)),ln(t,"cursorActivity",t))}function na(t){ea(t,ra(t,t.sel,null,!1))}function ra(t,e,n,r){for(var i,a=0;a<e.ranges.length;a++){var o=e.ranges[a],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[a],l=aa(t,o.anchor,s&&s.anchor,n,r),c=aa(t,o.head,s&&s.head,n,r);(i||l!=o.anchor||c!=o.head)&&(i||(i=e.ranges.slice(0,a)),i[a]=new ki(l,c))}return i?_i(t.cm,i,e.primIndex):e}function ia(t,e,n,r,i){var a=Vt(t,e.line);if(a.markedSpans)for(var o=0;o<a.markedSpans.length;++o){var s=a.markedSpans[o],l=s.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,d="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(c?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(d?s.to>=e.ch:s.to>e.ch))){if(i&&(ft(l,"beforeCursorEnter"),l.explicitlyCleared)){if(a.markedSpans){--o;continue}break}if(!l.atomic)continue;if(n){var p=l.find(r<0?1:-1),u=void 0;if((r<0?d:c)&&(p=oa(t,p,-r,p&&p.line==e.line?a:null)),p&&p.line==e.line&&(u=ee(p,n))&&(r<0?u<0:u>0))return ia(t,p,e,r,i)}var h=l.find(r<0?-1:1);return(r<0?c:d)&&(h=oa(t,h,r,h.line==e.line?a:null)),h?ia(t,h,e,r,i):null}}return e}function aa(t,e,n,r,i){var a=r||1;return ia(t,e,n,a,i)||!i&&ia(t,e,n,a,!0)||ia(t,e,n,-a,i)||!i&&ia(t,e,n,-a,!0)||(t.cantEdit=!0,te(t.first,0))}function oa(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?se(t,te(e.line-1)):null:n>0&&e.ch==(r||Vt(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+n)}function sa(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),$)}function la(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,a){e&&(r.from=se(t,e)),n&&(r.to=se(t,n)),i&&(r.text=i),void 0!==a&&(r.origin=a)}),ft(t,"beforeChange",t,r),t.cm&&ft(t.cm,"beforeChange",t.cm,r),r.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function ca(t,e,n){if(t.cm){if(!t.cm.curOp)return ti(t.cm,ca)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"))||(e=la(t,e,!0))){var r=xe&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=j(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:e,to:n}],a=0;a<r.length;++a)for(var o=r[a],s=o.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ee(c.to,s.from)<0||ee(c.from,s.to)>0)){var d=[l,1],p=ee(c.from,s.from),u=ee(c.to,s.to);(p<0||!o.inclusiveLeft&&!p)&&d.push({from:c.from,to:s.from}),(u>0||!o.inclusiveRight&&!u)&&d.push({from:s.to,to:c.to}),i.splice.apply(i,d),l+=d.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)da(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else da(t,e)}}function da(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var n=Oi(t,e);ji(t,e,n,t.cm?t.cm.curOp.id:NaN),ha(t,e,n,Ee(t,e));var r=[];Di(t,(function(t,n){n||-1!=j(r,t.history)||(ya(t.history,e),r.push(t.history)),ha(t,e,null,Ee(t,e))}))}}function pa(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,a=t.history,o=t.sel,s="undo"==e?a.done:a.undone,l="undo"==e?a.undone:a.done,c=0;c<s.length&&(i=s[c],n?!i.ranges||i.equals(t.sel):i.ranges);c++);if(c!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if($i(i,l),n&&!i.equals(t.sel))return void Qi(t,i,{clearRedo:!1});o=i}var d=[];$i(o,l),l.push({changes:d,generation:a.generation}),a.generation=i.generation||++a.maxGeneration;for(var p=yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"),u=function(n){var r=i.changes[n];if(r.origin=e,p&&!la(t,r,!1))return s.length=0,{};d.push(Hi(t,r));var a=n?Oi(t,r):K(s);ha(t,r,a,Ui(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:Ei(r)});var o=[];Di(t,(function(t,e){e||-1!=j(o,t.history)||(ya(t.history,r),o.push(t.history)),ha(t,r,null,Ui(t,r))}))},h=i.changes.length-1;h>=0;--h){var f=u(h);if(f)return f.v}}}}function ua(t,e){if(0!=e&&(t.first+=e,t.sel=new Ti(X(t.sel.ranges,(function(t){return new ki(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){pr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)ur(t.cm,r,"gutter")}}function ha(t,e,n,r){if(t.cm&&!t.cm.curOp)return ti(t.cm,ha)(t,e,n,r);if(e.to.line<t.first)ua(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);ua(t,i),e={from:te(t.first,0),to:te(e.to.line+i,e.to.ch),text:[K(e.text)],origin:e.origin}}var a=t.lastLine();e.to.line>a&&(e={from:e.from,to:te(a,Vt(t,a).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Gt(t,e.from,e.to),n||(n=Oi(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,a=e.from,o=e.to,s=!1,l=a.line;t.options.lineWrapping||(l=Yt(He(Vt(r,a.line))),r.iter(l,o.line+1,(function(t){if(t==i.maxLine)return s=!0,!0}))),r.sel.contains(e.from,e.to)>-1&&gt(t),Li(r,e,n,sr(t)),t.options.lineWrapping||(r.iter(l,a.line+e.text.length,(function(t){var e=qe(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,s=!1)})),s&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=Vt(t,r).stateAfter;if(i&&(!(i instanceof ce)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}(r,a.line),ri(t,400);var c=e.text.length-(o.line-a.line)-1;e.full?pr(t):a.line!=o.line||1!=e.text.length||Ii(t.doc,e)?pr(t,a.line,o.line+1,c):ur(t,a.line,"text");var d=yt(t,"changes"),p=yt(t,"change");if(p||d){var u={from:a,to:o,text:e.text,removed:e.removed,origin:e.origin};p&&ln(t,"change",t,u),d&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(u)}t.display.selForContextMenu=null}(t.cm,e,r):Li(t,e,r),ta(t,n,$),t.cantEdit&&aa(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function fa(t,e,n,r,i){var a;r||(r=n),ee(r,n)<0&&(n=(a=[r,n])[0],r=a[1]),"string"==typeof e&&(e=t.splitLines(e)),ca(t,{from:n,to:r,text:e,origin:i})}function ma(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function ga(t,e,n,r){for(var i=0;i<t.length;++i){var a=t[i],o=!0;if(a.ranges){a.copied||((a=t[i]=a.deepCopy()).copied=!0);for(var s=0;s<a.ranges.length;s++)ma(a.ranges[s].anchor,e,n,r),ma(a.ranges[s].head,e,n,r)}else{for(var l=0;l<a.changes.length;++l){var c=a.changes[l];if(n<c.from.line)c.from=te(c.from.line+r,c.from.ch),c.to=te(c.to.line+r,c.to.ch);else if(e<=c.to.line){o=!1;break}}o||(t.splice(0,i+1),i=0)}}}function ya(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;ga(t.done,n,r,i),ga(t.undone,n,r,i)}function va(t,e,n,r){var i=e,a=e;return"number"==typeof e?a=Vt(t,oe(t,e)):i=Yt(e),null==i?null:(r(a,i)&&t.cm&&ur(t.cm,i,n),a)}function ba(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function wa(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}ki.prototype.from=function(){return ae(this.anchor,this.head)},ki.prototype.to=function(){return ie(this.anchor,this.head)},ki.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ba.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,Ge(i),ln(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},wa.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var a=Math.min(e,i-t),o=r.height;if(r.removeInner(t,a),this.height-=o-r.height,i==a&&(this.children.splice(n--,1),r.parent=null),0==(e-=a))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof ba))){var s=[];this.collapse(s),this.children=[new ba(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(t<=a){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var o=i.lines.length%25+25,s=o;s<i.lines.length;){var l=new ba(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,o),this.maybeSpill()}break}t-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new wa(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=j(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new wa(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(t<a){var o=Math.min(e,a-t);if(i.iterN(t,o,n))return!0;if(0==(e-=o))break;t=0}else t-=a}}};var xa=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function Ta(t,e,n){Be(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Pr(t,n)}xa.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=Yt(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var a=xn(this);Xt(n,Math.max(0,n.height-a)),t&&(Qr(t,(function(){Ta(t,n,-a),ur(t,r,"widget")})),ln(t,"lineWidgetCleared",t,this,r))}},xa.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=xn(this)-e;i&&(We(this.doc,r)||Xt(r,r.height+i),n&&Qr(n,(function(){n.curOp.forceUpdate=!0,Ta(n,r,i),ln(n,"lineWidgetChanged",n,t,Yt(r))})))},vt(xa);var ka=0,_a=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ka};function Sa(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=z(r)).shared=!1;var a=[Sa(t,e,n,r,i)],o=a[0],s=r.widgetNode;return Di(t,(function(t){s&&(r.widgetNode=s.cloneNode(!0)),a.push(Sa(t,se(t,e),se(t,n),r,i));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;o=K(a)})),new Ea(a,o)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return ti(t.cm,Sa)(t,e,n,r,i);var a=new _a(t,i),o=ee(e,n);if(r&&z(r,a,!1),o>0||0==o&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=P("span",[a.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(ze(t,e.line,e,n,a)||e.line!=n.line&&ze(t,n.line,e,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}a.addToHistory&&ji(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,c=t.cm;if(t.iter(l,n.line+1,(function(t){c&&a.collapsed&&!c.options.lineWrapping&&He(t)==c.display.maxLine&&(s=!0),a.collapsed&&l!=e.line&&Xt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new ke(a,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l})),a.collapsed&&t.iter(e.line,n.line+1,(function(e){We(t,e)&&Xt(e,0)})),a.clearOnEnter&&pt(a,"beforeCursorEnter",(function(){return a.clear()})),a.readOnly&&(xe=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),a.collapsed&&(a.id=++ka,a.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),a.collapsed)pr(c,e.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var d=e.line;d<=n.line;d++)ur(c,d,"text");a.atomic&&na(c.doc),ln(c,"markerAdded",c,a)}return a}_a.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Vr(t),yt(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,a=0;a<this.lines.length;++a){var o=this.lines[a],s=_e(o.markedSpans,this);t&&!this.collapsed?ur(t,Yt(o),"text"):t&&(null!=s.to&&(i=Yt(o)),null!=s.from&&(r=Yt(o))),o.markedSpans=Se(o.markedSpans,s),null==s.from&&this.collapsed&&!We(this.doc,o)&&t&&Xt(o,rr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=He(this.lines[l]),d=qe(c);d>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=d,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&pr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&na(t.doc)),t&&ln(t,"markerCleared",t,this,r,i),e&&Gr(t),this.parent&&this.parent.clear()}},_a.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var a=this.lines[i],o=_e(a.markedSpans,this);if(null!=o.from&&(n=te(e?a:Yt(a),o.from),-1==t))return n;if(null!=o.to&&(r=te(e?a:Yt(a),o.to),1==t))return r}return n&&{from:n,to:r}},_a.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&Qr(r,(function(){var i=e.line,a=Yt(e.line),o=An(r,a);if(o&&(Hn(o),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!We(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=xn(n)-s;l&&Xt(i,i.height+l)}ln(r,"markerChanged",r,t)}))},_a.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=j(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},_a.prototype.detachLine=function(t){if(this.lines.splice(j(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},vt(_a);var Ea=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Ca(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),(function(t){return t.parent}))}function Oa(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Di(n.primary.doc,(function(t){return r.push(t)}));for(var i=0;i<n.markers.length;i++){var a=n.markers[i];-1==j(r,a.doc)&&(a.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}Ea.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},Ea.prototype.find=function(t,e){return this.primary.find(t,e)},vt(Ea);var Ma=0,Pa=function(t,e,n,r,i){if(!(this instanceof Pa))return new Pa(t,e,n,r,i);null==n&&(n=0),wa.call(this,[new ba([new Ve("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=te(n,0);this.sel=Si(a),this.history=new zi(null),this.id=++Ma,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Li(this,{from:a,to:a,text:t}),Qi(this,Si(a),$)};Pa.prototype=Z(wa.prototype,{constructor:Pa,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Kt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ni((function(t){var e=te(this.first,0),n=this.first+this.size-1;ca(this,{from:e,to:te(n,Vt(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ir(this.cm,0,0),Qi(this,Si(e),$)})),replaceRange:function(t,e,n,r){fa(this,t,e=se(this,e),n=n?se(this,n):e,r)},getRange:function(t,e,n){var r=Gt(this,se(this,t),se(this,e));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return Vt(this,t)},getLineNumber:function(t){return Yt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Vt(this,t)),He(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return se(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni((function(t,e,n){Zi(this,se(this,"number"==typeof t?te(t,e||0):t),null,n)})),setSelection:ni((function(t,e,n){Zi(this,se(this,t),se(this,e||t),n)})),extendSelection:ni((function(t,e,n){Ki(this,se(this,t),e&&se(this,e),n)})),extendSelections:ni((function(t,e){Xi(this,le(this,t),e)})),extendSelectionsBy:ni((function(t,e){Xi(this,le(this,X(this.sel.ranges,t)),e)})),setSelections:ni((function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new ki(se(this,t[i].anchor),se(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Qi(this,_i(this.cm,r,e),n)}})),addSelection:ni((function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new ki(se(this,t),se(this,e||t))),Qi(this,_i(this.cm,r,r.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=Gt(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Gt(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:ni((function(t,e,n){for(var r=[],i=this.sel,a=0;a<i.ranges.length;a++){var o=i.ranges[a];r[a]={from:o.from(),to:o.to(),text:this.splitLines(t[a]),origin:n}}for(var s=e&&"end"!=e&&function(t,e,n){for(var r=[],i=te(t.first,0),a=i,o=0;o<e.length;o++){var s=e[o],l=Mi(s.from,i,a),c=Mi(Ei(s),i,a);if(i=s.to,a=c,"around"==n){var d=t.sel.ranges[o],p=ee(d.head,d.anchor)<0;r[o]=new ki(p?c:l,p?l:c)}else r[o]=new ki(l,l)}return new Ti(r,t.sel.primIndex)}(this,r,e),l=r.length-1;l>=0;l--)ca(this,r[l]);s?Ji(this,s):this.cm&&Ar(this.cm)})),undo:ni((function(){pa(this,"undo")})),redo:ni((function(){pa(this,"redo")})),undoSelection:ni((function(){pa(this,"undo",!0)})),redoSelection:ni((function(){pa(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new zi(this.history.maxGeneration),Di(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Vi(this.history.done),undone:Vi(this.history.undone)}},setHistory:function(t){var e=this.history=new zi(this.history.maxGeneration);e.done=Vi(t.done.slice(0),null,!0),e.undone=Vi(t.undone.slice(0),null,!0)},setGutterMarker:ni((function(t,e,n){return va(this,t,"gutter",(function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&et(r)&&(t.gutterMarkers=null),!0}))})),clearGutter:ni((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&va(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,et(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=Vt(this,t)))return null}else if(null==(e=Yt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ni((function(t,e,n){return va(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(_(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0}))})),removeLineClass:ni((function(t,e,n){return va(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var a=i.match(_(n));if(!a)return!1;var o=a.index+a[0].length;t[r]=i.slice(0,a.index)+(a.index&&o!=i.length?" ":"")+i.slice(o)||null}return!0}))})),addLineWidget:ni((function(t,e,n){return function(t,e,n,r){var i=new xa(t,n,r),a=t.cm;return a&&i.noHScroll&&(a.display.alignWidgets=!0),va(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=e,a&&!We(t,e)){var r=Be(e)<t.scrollTop;Xt(e,e.height+xn(i)),r&&Pr(a,i.height),a.curOp.forceUpdate=!0}return!0})),a&&ln(a,"lineWidgetAdded",a,i,"number"==typeof e?e:Yt(e)),i}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Sa(this,se(this,t),se(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return Sa(this,t=se(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Vt(this,(t=se(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=se(this,t),e=se(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,(function(a){var o=a.markedSpans;if(o)for(var s=0;s<o.length;s++){var l=o[s];null!=l.to&&i==t.line&&t.ch>=l.to||null==l.from&&i!=t.line||null!=l.from&&i==e.line&&l.from>=e.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)})),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var a=i.text.length+r;if(a>t)return e=t,!0;t-=a,++n})),se(this,te(n,e))},indexFromPos:function(t){var e=(t=se(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new Pa(Kt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Pa(Kt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),a=t.clipPos(i.from),o=t.clipPos(i.to);if(ee(a,o)){var s=Sa(t,a,o,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,Ca(this)),r},unlinkDoc:function(t){if(t instanceof Co&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Oa(Ca(this));break}if(t.history==this.history){var n=[t.id];Di(t,(function(t){return n.push(t.id)}),!0),t.history=new zi(null),t.history.done=Vi(this.history.done,n),t.history.undone=Vi(this.history.undone,n)}},iterLinkedDocs:function(t){Di(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):At(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&Qr(e=this.cm,(function(){Ni(e),pr(e)})))}))}),Pa.prototype.eachLine=Pa.prototype.iter;var Aa=0;function Ia(t){var e=this;if(La(e),!mt(e,t)&&!Tn(e.display,t)){bt(t),o&&(Aa=+new Date);var n=cr(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,a=Array(i),s=0,l=function(){++s==i&&ti(e,(function(){var t={from:n=se(e.doc,n),to:n,text:e.doc.splitLines(a.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};ca(e.doc,t),Ji(e.doc,Si(se(e.doc,n),se(e.doc,Ei(t))))}))()},c=function(t,n){if(e.options.allowDropFileTypes&&-1==j(e.options.allowDropFileTypes,t.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var t=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(a[n]=t),l()},r.readAsText(t)}},d=0;d<r.length;d++)c(r[d],d);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var p=t.dataTransfer.getData("Text");if(p){var u;if(e.state.draggingText&&!e.state.draggingText.copy&&(u=e.listSelections()),ta(e.doc,Si(n,n)),u)for(var h=0;h<u.length;++h)fa(e.doc,"",u[h].anchor,u[h].head,"drag");e.replaceSelection(p,"around","paste"),e.display.input.focus()}}catch(t){}}}}function La(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Da(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<e.length;r++){var i=e[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var Fa=!1;function Na(){var t;Fa||(pt(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Da(za)}),100))})),pt(window,"blur",(function(){return Da(Sr)})),Fa=!0)}function za(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Ha={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ra=0;Ra<10;Ra++)Ha[Ra+48]=Ha[Ra+96]=String(Ra);for(var ja=65;ja<=90;ja++)Ha[ja]=String.fromCharCode(ja);for(var Wa=1;Wa<=12;Wa++)Ha[Wa+111]=Ha[Wa+63235]="F"+Wa;var $a={};function Ba(t){var e,n,r,i,a=t.split(/-(?!$)/);t=a[a.length-1];for(var o=0;o<a.length-1;o++){var s=a[o];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function qa(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=X(n.split(" "),Ba),a=0;a<i.length;a++){var o=void 0,s=void 0;a==i.length-1?(s=i.join(" "),o=r):(s=i.slice(0,a+1).join(" "),o="...");var l=e[s];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+s)}else e[s]=o}delete t[n]}for(var c in e)t[c]=e[c];return t}function Ua(t,e,n,r){var i=(e=Xa(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Ua(t,e.fallthrough,n,r);for(var a=0;a<e.fallthrough.length;a++){var o=Ua(t,e.fallthrough[a],n,r);if(o)return o}}}function Va(t){var e="string"==typeof t?t:Ha[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ga(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(T?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(T?e.ctrlKey:e.metaKey)&&"Mod"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function Ka(t,e){if(p&&34==t.keyCode&&t.char)return!1;var n=Ha[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Ga(n,t,e))}function Xa(t){return"string"==typeof t?$a[t]:t}function Ya(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var a=e(n[i]);r.length&&ee(a.from,K(r).to)<=0;){var o=r.pop();if(ee(o.from,a.from)<0){a.from=o.from;break}}r.push(a)}Qr(t,(function(){for(var e=r.length-1;e>=0;e--)fa(t.doc,"",r[e].from,r[e].to,"+delete");Ar(t)}))}function Za(t,e,n){var r=it(t.text,e+n,n);return r<0||r>t.text.length?null:r}function Ja(t,e,n){var r=Za(t,e.ch,n);return null==r?null:new te(e.line,r,n<0?"after":"before")}function Qa(t,e,n,r,i){if(t){"rtl"==e.doc.direction&&(i=-i);var a=ct(n,e.doc.direction);if(a){var o,s=i<0?K(a):a[0],l=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==e.doc.direction){var c=In(e,n);o=i<0?n.text.length-1:0;var d=Ln(e,c,o).top;o=at((function(t){return Ln(e,c,t).top==d}),i<0==(1==s.level)?s.from:s.to-1,o),"before"==l&&(o=Za(n,o,1))}else o=i<0?s.to:s.from;return new te(r,o,l)}}return new te(r,i<0?n.text.length:0,i<0?"before":"after")}$a.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$a.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$a.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$a.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$a.default=v?$a.macDefault:$a.pcDefault;var to={selectAll:sa,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),$)},killLine:function(t){return Ya(t,(function(e){if(e.empty()){var n=Vt(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Ya(t,(function(e){return{from:te(e.from().line,0),to:se(t.doc,te(e.to().line+1,0))}}))},delLineLeft:function(t){return Ya(t,(function(t){return{from:te(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Ya(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Ya(t,(function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return eo(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return no(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=Vt(t.doc,e),r=function(t){for(var e;e=Fe(t);)t=e.find(1,!0).line;return t}(n);return r!=n&&(e=Yt(r)),Qa(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?no(t,e.head):r}),q)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var a=n[i].from(),o=H(t.getLine(a.line),a.ch,r);e.push(G(r-o%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Qr(t,(function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,a=Vt(t.doc,i.line).text;if(a)if(i.ch==a.length&&(i=new te(i.line,i.ch-1)),i.ch>0)i=new te(i.line,i.ch+1),t.replaceRange(a.charAt(i.ch-1)+a.charAt(i.ch-2),te(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var o=Vt(t.doc,i.line-1).text;o&&(i=new te(i.line,1),t.replaceRange(a.charAt(0)+t.doc.lineSeparator()+o.charAt(o.length-1),te(i.line-1,o.length-1),i,"+transpose"))}n.push(new ki(i,i))}t.setSelections(n)}))},newlineAndIndent:function(t){return Qr(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Ar(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function eo(t,e){var n=Vt(t.doc,e),r=He(n);return r!=n&&(e=Yt(r)),Qa(!0,t,r,e,1)}function no(t,e){var n=eo(t,e.line),r=Vt(t.doc,n.line),i=ct(r,t.doc.direction);if(!i||0==i[0].level){var a=Math.max(n.ch,r.text.search(/\S/)),o=e.line==n.line&&e.ch<=a&&e.ch;return te(n.line,o?0:a,n.sticky)}return n}function ro(t,e,n){if("string"==typeof e&&!(e=to[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=W}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var io=new R;function ao(t,e,n,r){var i=t.state.keySeq;if(i){if(Va(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:io.set(50,(function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())})),oo(t,i+" "+e,n,r))return!0}return oo(t,e,n,r)}function oo(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Ua(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Ua(e,t.options.extraKeys,n,t)||Ua(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&ln(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(bt(n),xr(t)),!!i}function so(t,e){var n=Ka(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ao(t,"Shift-"+n,e,(function(e){return ro(t,e,!0)}))||ao(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return ro(t,e)})):ao(t,n,e,(function(e){return ro(t,e)})))}var lo=null;function co(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=I(),mt(e,t)))){o&&s<11&&27==t.keyCode&&(t.returnValue=!1);var r=t.keyCode;e.display.shift=16==r||t.shiftKey;var i=so(e,t);p&&(lo=i?r:null,i||88!=r||Lt||!(v?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),n&&!v&&!i&&46==r&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(E(e,"CodeMirror-crosshair"),ht(document,"keyup",n),ht(document,"mouseover",n))}L(e,"CodeMirror-crosshair"),pt(document,"keyup",n),pt(document,"mouseover",n)}(e)}}function po(t){16==t.keyCode&&(this.doc.sel.shift=!1),mt(this,t)}function uo(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||Tn(e.display,t)||mt(e,t)||t.ctrlKey&&!t.altKey||v&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(p&&n==lo)return lo=null,void bt(t);if(!p||t.which&&!(t.which<10)||!so(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return ao(t,"'"+n+"'",e,(function(e){return ro(t,e,!0)}))}(e,t,i)||e.display.input.onKeyPress(t))}}}var ho,fo,mo=function(t,e,n){this.time=t,this.pos=e,this.button=n};function go(t){var e=this,n=e.display;if(!(mt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,Tn(n,t))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!bo(e,t)){var r=cr(e,t),i=_t(t),a=r?function(t,e){var n=+new Date;return fo&&fo.compare(n,t,e)?(ho=fo=null,"triple"):ho&&ho.compare(n,t,e)?(fo=new mo(n,t,e),ho=null,"double"):(ho=new mo(n,t,e),fo=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var a="Click";return"double"==r?a="Double"+a:"triple"==r&&(a="Triple"+a),ao(t,Ga(a=(1==e?"Left":2==e?"Middle":"Right")+a,i),i,(function(e){if("string"==typeof e&&(e=to[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=W}finally{t.state.suppressEdits=!1}return r}))}(e,i,r,a,t)||(1==i?r?function(t,e,n,r){o?setTimeout(N(Tr,t),0):t.curOp.focus=I();var i,a=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};if(null==i.unit){var a=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=a?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=v?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?n.altKey:n.ctrlKey)),i}(t,n,r),c=t.doc.sel;t.options.dragDrop&&Ct&&!t.isReadOnly()&&"single"==n&&(i=c.contains(e))>-1&&(ee((i=c.ranges[i]).from(),e)<0||e.xRel>0)&&(ee(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,a=!1,c=ti(t,(function(e){l&&(i.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:kr(t)),ht(i.wrapper.ownerDocument,"mouseup",c),ht(i.wrapper.ownerDocument,"mousemove",d),ht(i.scroller,"dragstart",p),ht(i.scroller,"drop",c),a||(bt(e),r.addNew||Ki(t.doc,n,null,null,r.extend),l&&!u||o&&9==s?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),d=function(t){a=a||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},p=function(){return a=!0};l&&(i.scroller.draggable=!0),t.state.draggingText=c,c.copy=!r.moveOnDrag,pt(i.wrapper.ownerDocument,"mouseup",c),pt(i.wrapper.ownerDocument,"mousemove",d),pt(i.scroller,"dragstart",p),pt(i.scroller,"drop",c),t.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(t,r,e,a):function(t,e,n,r){o&&kr(t);var i=t.display,a=t.doc;bt(e);var s,l,c=a.sel,d=c.ranges;if(r.addNew&&!r.extend?(l=a.sel.contains(n),s=l>-1?d[l]:new ki(n,n)):(s=a.sel.primary(),l=a.sel.primIndex),"rectangle"==r.unit)r.addNew||(s=new ki(n,n)),n=cr(t,e,!0,!0),l=-1;else{var p=yo(t,n,r.unit);s=r.extend?Gi(s,p.anchor,p.head,r.extend):p}r.addNew?-1==l?(l=d.length,Qi(a,_i(t,d.concat([s]),l),{scroll:!1,origin:"*mouse"})):d.length>1&&d[l].empty()&&"char"==r.unit&&!r.extend?(Qi(a,_i(t,d.slice(0,l).concat(d.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=a.sel):Yi(a,l,s,B):(l=0,Qi(a,new Ti([s],0),B),c=a.sel);var u=n;function h(e){if(0!=ee(u,e))if(u=e,"rectangle"==r.unit){for(var i=[],o=t.options.tabSize,d=H(Vt(a,n.line).text,n.ch,o),p=H(Vt(a,e.line).text,e.ch,o),h=Math.min(d,p),f=Math.max(d,p),m=Math.min(n.line,e.line),g=Math.min(t.lastLine(),Math.max(n.line,e.line));m<=g;m++){var y=Vt(a,m).text,v=U(y,h,o);h==f?i.push(new ki(te(m,v),te(m,v))):y.length>v&&i.push(new ki(te(m,v),te(m,U(y,f,o))))}i.length||i.push(new ki(n,n)),Qi(a,_i(t,c.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,w=s,x=yo(t,e,r.unit),T=w.anchor;ee(x.anchor,T)>0?(b=x.head,T=ae(w.from(),x.anchor)):(b=x.anchor,T=ie(w.to(),x.head));var k=c.ranges.slice(0);k[l]=function(t,e){var n=e.anchor,r=e.head,i=Vt(t.doc,n.line);if(0==ee(n,r)&&n.sticky==r.sticky)return e;var a=ct(i);if(!a)return e;var o=st(a,n.ch,n.sticky),s=a[o];if(s.from!=n.ch&&s.to!=n.ch)return e;var l,c=o+(s.from==n.ch==(1!=s.level)?0:1);if(0==c||c==a.length)return e;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var d=st(a,r.ch,r.sticky),p=d-o||(r.ch-n.ch)*(1==s.level?-1:1);l=d==c-1||d==c?p<0:p>0}var u=a[c+(l?-1:0)],h=l==(1==u.level),f=h?u.from:u.to,m=h?"after":"before";return n.ch==f&&n.sticky==m?e:new ki(new te(n.line,f,m),r)}(t,new ki(se(a,T),b)),Qi(a,_i(t,k,l),B)}}var f=i.wrapper.getBoundingClientRect(),m=0;function g(e){var n=++m,o=cr(t,e,!0,"rectangle"==r.unit);if(o)if(0!=ee(o,u)){t.curOp.focus=I(),h(o);var s=Or(i,a);(o.line>=s.to||o.line<s.from)&&setTimeout(ti(t,(function(){m==n&&g(e)})),150)}else{var l=e.clientY<f.top?-20:e.clientY>f.bottom?20:0;l&&setTimeout(ti(t,(function(){m==n&&(i.scroller.scrollTop+=l,g(e))})),50)}}function y(e){t.state.selectingText=!1,m=1/0,e&&(bt(e),i.input.focus()),ht(i.wrapper.ownerDocument,"mousemove",v),ht(i.wrapper.ownerDocument,"mouseup",b),a.history.lastSelOrigin=null}var v=ti(t,(function(t){0!==t.buttons&&_t(t)?g(t):y(t)})),b=ti(t,y);t.state.selectingText=b,pt(i.wrapper.ownerDocument,"mousemove",v),pt(i.wrapper.ownerDocument,"mouseup",b)}(t,r,e,a)}(e,r,a,t):kt(t)==n.scroller&&bt(t):2==i?(r&&Ki(e.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(k?e.display.input.onContextMenu(t):kr(e)))}}function yo(t,e,n){if("char"==n)return new ki(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new ki(te(e.line,0),se(t.doc,te(e.line+1,0)));var r=n(t,e);return new ki(r.from,r.to)}function vo(t,e,n,r){var i,a;if(e.touches)i=e.touches[0].clientX,a=e.touches[0].clientY;else try{i=e.clientX,a=e.clientY}catch(t){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&bt(e);var o=t.display,s=o.lineDiv.getBoundingClientRect();if(a>s.bottom||!yt(t,n))return xt(e);a-=s.top-o.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return ft(t,n,t,Zt(t.doc,a),t.display.gutterSpecs[l].className,e),xt(e)}}function bo(t,e){return vo(t,e,"gutterClick",!0)}function wo(t,e){Tn(t.display,e)||function(t,e){return!!yt(t,"gutterContextMenu")&&vo(t,e,"gutterContextMenu",!1)}(t,e)||mt(t,e,"contextmenu")||k||t.display.input.onContextMenu(e)}function xo(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),jn(t)}mo.prototype.compare=function(t,e,n){return this.time+400>t&&0==ee(e,this.pos)&&n==this.button};var To={toString:function(){return"CodeMirror.Init"}},ko={},_o={};function So(t,e,n){if(!e!=!(n&&n!=To)){var r=t.display.dragFunctions,i=e?pt:ht;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function Eo(t){t.options.lineWrapping?(L(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(E(t.display.wrapper,"CodeMirror-wrap"),Ue(t)),lr(t),pr(t),jn(t),setTimeout((function(){return Wr(t)}),100)}function Co(t,e){var n=this;if(!(this instanceof Co))return new Co(t,e);this.options=e=e?z(e):{},z(ko,e,!1);var r=e.value;"string"==typeof r?r=new Pa(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var i=new Co.inputStyles[e.inputStyle](this),a=this.display=new gi(t,r,i,e);for(var c in a.wrapper.CodeMirror=this,xo(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new R,keySeq:null,specialChars:null},e.autofocus&&!y&&a.input.focus(),o&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;pt(e.scroller,"mousedown",ti(t,go)),pt(e.scroller,"dblclick",o&&s<11?ti(t,(function(e){if(!mt(t,e)){var n=cr(t,e);if(n&&!bo(t,e)&&!Tn(t.display,e)){bt(e);var r=t.findWordAt(n);Ki(t.doc,r.anchor,r.head)}}})):function(e){return mt(t,e)||bt(e)}),pt(e.scroller,"contextmenu",(function(e){return wo(t,e)})),pt(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||wo(t,n)}));var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(r=e.activeTouch).end=+new Date)}function a(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function l(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}pt(e.scroller,"touchstart",(function(i){if(!mt(t,i)&&!a(i)&&!bo(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}})),pt(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),pt(e.scroller,"touchend",(function(n){var r=e.activeTouch;if(r&&!Tn(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,o=t.coordsChar(e.activeTouch,"page");a=!r.prev||l(r,r.prev)?new ki(o,o):!r.prev.prev||l(r,r.prev.prev)?t.findWordAt(o):new ki(te(o.line,0),se(t.doc,te(o.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),bt(n)}i()})),pt(e.scroller,"touchcancel",i),pt(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Fr(t,e.scroller.scrollTop),zr(t,e.scroller.scrollLeft,!0),ft(t,"scroll",t))})),pt(e.scroller,"mousewheel",(function(e){return xi(t,e)})),pt(e.scroller,"DOMMouseScroll",(function(e){return xi(t,e)})),pt(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){mt(t,e)||Tt(e)},over:function(e){mt(t,e)||(function(t,e){var n=cr(t,e);if(n){var r=document.createDocumentFragment();vr(t,n,r),t.display.dragCursor||(t.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),O(t.display.dragCursor,r)}}(t,e),Tt(e))},start:function(e){return function(t,e){if(o&&(!t.state.draggingText||+new Date-Aa<100))Tt(e);else if(!mt(t,e)&&!Tn(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!u)){var n=M("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),p&&n.parentNode.removeChild(n)}}(t,e)},drop:ti(t,Ia),leave:function(e){mt(t,e)||La(t)}};var c=e.input.getField();pt(c,"keyup",(function(e){return po.call(t,e)})),pt(c,"keydown",ti(t,co)),pt(c,"keypress",ti(t,uo)),pt(c,"focus",(function(e){return _r(t,e)})),pt(c,"blur",(function(e){return Sr(t,e)}))}(this),Na(),Vr(this),this.curOp.forceUpdate=!0,Fi(this,r),e.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&_r(n)}),20):Sr(this),_o)_o.hasOwnProperty(c)&&_o[c](this,e[c],To);ui(this),e.finishInit&&e.finishInit(this);for(var d=0;d<Oo.length;++d)Oo[d](this);Gr(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}Co.defaults=ko,Co.optionHandlers=_o;var Oo=[];function Mo(t,e,n,r){var i,a=t.doc;null==n&&(n="add"),"smart"==n&&(a.mode.indent?i=he(t,e).state:n="prev");var o=t.options.tabSize,s=Vt(a,e),l=H(s.text,null,o);s.stateAfter&&(s.stateAfter=null);var c,d=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((c=a.mode.indent(i,s.text.slice(d.length),s.text))==W||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>a.first?H(Vt(a,e-1).text,null,o):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var p="",u=0;if(t.options.indentWithTabs)for(var h=Math.floor(c/o);h;--h)u+=o,p+="\t";if(u<c&&(p+=G(c-u)),p!=d)return fa(a,p,te(e,0),te(e,d.length),"+input"),s.stateAfter=null,!0;for(var f=0;f<a.sel.ranges.length;f++){var m=a.sel.ranges[f];if(m.head.line==e&&m.head.ch<d.length){var g=te(e,d.length);Yi(a,f,new ki(g,g));break}}}Co.defineInitHook=function(t){return Oo.push(t)};var Po=null;function Ao(t){Po=t}function Io(t,e,n,r,i){var a=t.doc;t.display.shift=!1,r||(r=a.sel);var o=+new Date-200,s="paste"==i||t.state.pasteIncoming>o,l=At(e),c=null;if(s&&r.ranges.length>1)if(Po&&Po.text.join("\n")==e){if(r.ranges.length%Po.text.length==0){c=[];for(var d=0;d<Po.text.length;d++)c.push(a.splitLines(Po.text[d]))}}else l.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(c=X(l,(function(t){return[t]})));for(var p=t.curOp.updateInput,u=r.ranges.length-1;u>=0;u--){var h=r.ranges[u],f=h.from(),m=h.to();h.empty()&&(n&&n>0?f=te(f.line,f.ch-n):t.state.overwrite&&!s?m=te(m.line,Math.min(Vt(a,m.line).text.length,m.ch+K(l).length)):s&&Po&&Po.lineWise&&Po.text.join("\n")==l.join("\n")&&(f=m=te(f.line,0)));var g={from:f,to:m,text:c?c[u%c.length]:l,origin:i||(s?"paste":t.state.cutIncoming>o?"cut":"+input")};ca(t.doc,g),ln(t,"inputRead",t,g)}e&&!s&&Do(t,e),Ar(t),t.curOp.updateInput<2&&(t.curOp.updateInput=p),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Lo(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Qr(e,(function(){return Io(e,n,0,null,"paste")})),!0}function Do(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var a=t.getModeAt(i.head),o=!1;if(a.electricChars){for(var s=0;s<a.electricChars.length;s++)if(e.indexOf(a.electricChars.charAt(s))>-1){o=Mo(t,i.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(Vt(t.doc,i.head.line).text.slice(0,i.head.ch))&&(o=Mo(t,i.head.line,"smart"));o&&ln(t,"electricInput",t,i.head.line)}}}function Fo(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,a={anchor:te(i,0),head:te(i+1,0)};n.push(a),e.push(t.getRange(a.anchor,a.head))}return{text:e,ranges:n}}function No(t,e,n,r){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",r?"":"off"),t.setAttribute("spellcheck",!!e)}function zo(){var t=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=M("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),m&&(t.style.border="1px solid black"),No(t),e}function Ho(t,e,n,r,i){var a=e,o=n,s=Vt(t,e.line),l=i&&"rtl"==t.direction?-n:n;function c(a){var o,c;if("codepoint"==r){var d=s.text.charCodeAt(e.ch+(n>0?0:-1));if(isNaN(d))o=null;else{var p=n>0?d>=55296&&d<56320:d>=56320&&d<57343;o=new te(e.line,Math.max(0,Math.min(s.text.length,e.ch+n*(p?2:1))),-n)}}else o=i?function(t,e,n,r){var i=ct(e,t.doc.direction);if(!i)return Ja(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=st(i,n.ch,n.sticky),o=i[a];if("ltr"==t.doc.direction&&o.level%2==0&&(r>0?o.to>n.ch:o.from<n.ch))return Ja(e,n,r);var s,l=function(t,n){return Za(e,t instanceof te?t.ch:t,n)},c=function(n){return t.options.lineWrapping?(s=s||In(t,e),Jn(t,e,s,n)):{begin:0,end:e.text.length}},d=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==o.level){var p=1==o.level==r<0,u=l(n,p?1:-1);if(null!=u&&(p?u<=o.to&&u<=d.end:u>=o.from&&u>=d.begin)){var h=p?"before":"after";return new te(n.line,u,h)}}var f=function(t,e,r){for(var a=function(t,e){return e?new te(n.line,l(t,1),"before"):new te(n.line,t,"after")};t>=0&&t<i.length;t+=e){var o=i[t],s=e>0==(1!=o.level),c=s?r.begin:l(r.end,-1);if(o.from<=c&&c<o.to)return a(c,s);if(c=s?o.from:l(o.to,-1),r.begin<=c&&c<r.end)return a(c,s)}},m=f(a+r,r,d);if(m)return m;var g=r>0?d.end:l(d.begin,-1);return null==g||r>0&&g==e.text.length||!(m=f(r>0?0:i.length-1,r,c(g)))?null:m}(t.cm,s,e,n):Ja(s,e,n);if(null==o){if(a||((c=e.line+l)<t.first||c>=t.first+t.size||(e=new te(c,e.ch,e.sticky),!(s=Vt(t,c)))))return!1;e=Qa(i,t.cm,s,e.line,l)}else e=o;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var d=null,p="group"==r,u=t.cm&&t.cm.getHelper(e,"wordChars"),h=!0;!(n<0)||c(!h);h=!1){var f=s.text.charAt(e.ch)||"\n",m=tt(f,u)?"w":p&&"\n"==f?"n":!p||/\s/.test(f)?null:"p";if(!p||h||m||(m="s"),d&&d!=m){n<0&&(n=1,c(),e.sticky="after");break}if(m&&(d=m),n>0&&!c(!h))break}var g=aa(t,e,a,o,!0);return ne(a,g)&&(g.hitSide=!0),g}function Ro(t,e,n,r){var i,a,o=t.doc,s=e.left;if("page"==r){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*rr(t.display),3);i=(n>0?e.bottom:e.top)+n*c}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(a=Yn(t,s,i)).outside;){if(n<0?i<=0:i>=o.height){a.hitSide=!0;break}i+=5*n}return a}var jo=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new R,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Wo(t,e){var n=An(t,e.line);if(!n||n.hidden)return null;var r=Vt(t.doc,e.line),i=Mn(n,r,e.line),a=ct(r,t.doc.direction),o="left";a&&(o=st(a,e.ch)%2?"right":"left");var s=Nn(i.map,e.ch,o);return s.offset="right"==s.collapse?s.end:s.start,s}function $o(t,e){return e&&(t.bad=!0),t}function Bo(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return $o(t.clipPos(te(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var a=t.display.view[i];if(a.node==r)return qo(a,e,n)}}function qo(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!A(r,e))return $o(te(Yt(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var a=t.rest?K(t.rest):t.line;return $o(te(Yt(a),a.text.length),i)}var o=3==e.nodeType?e:null,s=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,n&&(n=o.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=t.measure,c=l.maps;function d(e,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var a=i<0?l.map:c[i],o=0;o<a.length;o+=3){var s=a[o+2];if(s==e||s==n){var d=Yt(i<0?t.line:t.rest[i]),p=a[o]+r;return(r<0||s!=e)&&(p=a[o+(r?1:0)]),te(d,p)}}}var p=d(o,s,n);if(p)return $o(p,i);for(var u=s.nextSibling,h=o?o.nodeValue.length-n:0;u;u=u.nextSibling){if(p=d(u,u.firstChild,0))return $o(te(p.line,p.ch-h),i);h+=u.textContent.length}for(var f=s.previousSibling,m=n;f;f=f.previousSibling){if(p=d(f,f.firstChild,-1))return $o(te(p.line,p.ch+m),i);m+=f.textContent.length}}jo.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function a(t){for(var e=t.target;e;e=e.parentNode){if(e==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function o(t){if(a(t)&&!mt(r,t)){if(r.somethingSelected())Ao({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Fo(r);Ao({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation((function(){r.setSelections(e.ranges,0,$),r.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var o=Po.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var s=zo(),l=s.firstChild;r.display.lineSpace.insertBefore(s,r.display.lineSpace.firstChild),l.value=Po.text.join("\n");var c=document.activeElement;F(l),setTimeout((function(){r.display.lineSpace.removeChild(s),c.focus(),c==i&&n.showPrimarySelection()}),50)}}No(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),pt(i,"paste",(function(t){!a(t)||mt(r,t)||Lo(t,r)||s<=11&&setTimeout(ti(r,(function(){return e.updateFromDOM()})),20)})),pt(i,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),pt(i,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),pt(i,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),pt(i,"touchstart",(function(){return n.forceCompositionEnd()})),pt(i,"input",(function(){e.composing||e.readFromDOMSoon()})),pt(i,"copy",o),pt(i,"cut",o)},jo.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},jo.prototype.prepareSelection=function(){var t=yr(this.cm,!1);return t.focus=document.activeElement==this.div,t},jo.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},jo.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},jo.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),a=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||a.line<e.display.viewFrom)t.removeAllRanges();else{var o=Bo(e,t.anchorNode,t.anchorOffset),s=Bo(e,t.focusNode,t.focusOffset);if(!o||o.bad||!s||s.bad||0!=ee(ae(o,s),i)||0!=ee(ie(o,s),a)){var l=e.display.view,c=i.line>=e.display.viewFrom&&Wo(e,i)||{node:l[0].measure.map[2],offset:0},d=a.line<e.display.viewTo&&Wo(e,a);if(!d){var p=l[l.length-1].measure,u=p.maps?p.maps[p.maps.length-1]:p.map;d={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}if(c&&d){var h,f=t.rangeCount&&t.getRangeAt(0);try{h=S(c.node,c.offset,d.offset,d.node)}catch(t){}h&&(!n&&e.state.focused?(t.collapse(c.node,c.offset),h.collapsed||(t.removeAllRanges(),t.addRange(h))):(t.removeAllRanges(),t.addRange(h)),f&&null==t.anchorNode?t.addRange(f):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},jo.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},jo.prototype.showMultipleSelections=function(t){O(this.cm.display.cursorDiv,t.cursors),O(this.cm.display.selectionDiv,t.selection)},jo.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},jo.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return A(this.div,e)},jo.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},jo.prototype.blur=function(){this.div.blur()},jo.prototype.getField=function(){return this.div},jo.prototype.supportsTouch=function(){return!0},jo.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Qr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},jo.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},jo.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(g&&d&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Bo(e,t.anchorNode,t.anchorOffset),r=Bo(e,t.focusNode,t.focusOffset);n&&r&&Qr(e,(function(){Qi(e.doc,Si(n,r),$),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)}))}}},jo.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,a=r.doc.sel.primary(),o=a.from(),s=a.to();if(0==o.ch&&o.line>r.firstLine()&&(o=te(o.line-1,Vt(r.doc,o.line-1).length)),s.ch==Vt(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=te(s.line+1,0)),o.line<i.viewFrom||s.line>i.viewTo-1)return!1;o.line==i.viewFrom||0==(t=dr(r,o.line))?(e=Yt(i.view[0].line),n=i.view[0].node):(e=Yt(i.view[t].line),n=i.view[t-1].node.nextSibling);var l,c,d=dr(r,s.line);if(d==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=Yt(i.view[d+1].line)-1,c=i.view[d+1].node.previousSibling),!n)return!1;for(var p=r.doc.splitLines(function(t,e,n,r,i){var a="",o=!1,s=t.doc.lineSeparator(),l=!1;function c(){o&&(a+=s,l&&(a+=s),o=l=!1)}function d(t){t&&(c(),a+=t)}function p(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void d(n);var a,u=e.getAttribute("cm-marker");if(u){var h=t.findMarks(te(r,0),te(i+1,0),(g=+u,function(t){return t.id==g}));return void(h.length&&(a=h[0].find(0))&&d(Gt(t.doc,a.from,a.to).join(s)))}if("false"==e.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;f&&c();for(var m=0;m<e.childNodes.length;m++)p(e.childNodes[m]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),f&&(o=!0)}else 3==e.nodeType&&d(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;p(e),e!=n;)e=e.nextSibling,l=!1;return a}(r,n,c,e,l)),u=Gt(r.doc,te(e,0),te(l,Vt(r.doc,l).text.length));p.length>1&&u.length>1;)if(K(p)==K(u))p.pop(),u.pop(),l--;else{if(p[0]!=u[0])break;p.shift(),u.shift(),e++}for(var h=0,f=0,m=p[0],g=u[0],y=Math.min(m.length,g.length);h<y&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var v=K(p),b=K(u),w=Math.min(v.length-(1==p.length?h:0),b.length-(1==u.length?h:0));f<w&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==p.length&&1==u.length&&e==o.line)for(;h&&h>o.ch&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)h--,f++;p[p.length-1]=v.slice(0,v.length-f).replace(/^\u200b+/,""),p[0]=p[0].slice(h).replace(/\u200b+$/,"");var x=te(e,h),T=te(l,u.length?K(u).length-f:0);return p.length>1||p[0]||ee(x,T)?(fa(r.doc,p,x,T,"+input"),!0):void 0},jo.prototype.ensurePolled=function(){this.forceCompositionEnd()},jo.prototype.reset=function(){this.forceCompositionEnd()},jo.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},jo.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},jo.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Qr(this.cm,(function(){return pr(t.cm)}))},jo.prototype.setUneditable=function(t){t.contentEditable="false"},jo.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ti(this.cm,Io)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},jo.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},jo.prototype.onContextMenu=function(){},jo.prototype.resetPosition=function(){},jo.prototype.needsContentAttribute=!0;var Uo=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new R,this.hasSelection=!1,this.composing=null};Uo.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function a(t){if(!mt(r,t)){if(r.somethingSelected())Ao({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Fo(r);Ao({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,$):(n.prevInput="",i.value=e.text.join("\n"),F(i))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),m&&(i.style.width="0px"),pt(i,"input",(function(){o&&s>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),pt(i,"paste",(function(t){mt(r,t)||Lo(t,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),pt(i,"cut",a),pt(i,"copy",a),pt(t.scroller,"paste",(function(e){if(!Tn(t,e)&&!mt(r,e)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var a=new Event("paste");a.clipboardData=e.clipboardData,i.dispatchEvent(a)}})),pt(t.lineSpace,"selectstart",(function(e){Tn(t,e)||bt(e)})),pt(i,"compositionstart",(function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}})),pt(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},Uo.prototype.createField=function(t){this.wrapper=zo(),this.textarea=this.wrapper.firstChild},Uo.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},Uo.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=yr(t);if(t.options.moveInputWithCursor){var i=Gn(t,n.sel.primary().head,"div"),a=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+o.top-a.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+o.left-a.left))}return r},Uo.prototype.showSelection=function(t){var e=this.cm.display;O(e.cursorDiv,t.cursors),O(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Uo.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&F(this.textarea),o&&s>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",o&&s>=9&&(this.hasSelection=null))}},Uo.prototype.getField=function(){return this.textarea},Uo.prototype.supportsTouch=function(){return!1},Uo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||I()!=this.textarea))try{this.textarea.focus()}catch(t){}},Uo.prototype.blur=function(){this.textarea.blur()},Uo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Uo.prototype.receivedFocus=function(){this.slowPoll()},Uo.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Uo.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},Uo.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||It(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(o&&s>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var a=i.charCodeAt(0);if(8203!=a||r||(r="​"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Qr(e,(function(){Io(e,i.slice(l),r.length-l,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Uo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Uo.prototype.onKeyPress=function(){o&&s>=9&&(this.hasSelection=null),this.fastPoll()},Uo.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var a=cr(n,t),c=r.scroller.scrollTop;if(a&&!p){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&ti(n,Qi)(n.doc,Si(a),$);var d,u=i.style.cssText,h=e.wrapper.style.cssText,f=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-f.top-5)+"px; left: "+(t.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(d=window.scrollY),r.input.focus(),l&&window.scrollTo(null,d),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),o&&s>=9&&g(),k){Tt(t);var m=function(){ht(window,"mouseup",m),setTimeout(y,20)};pt(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var t=n.somethingSelected(),a="​"+(t?i.value:"");i.value="⇚",i.value=a,e.prevInput=t?"":"​",i.selectionStart=1,i.selectionEnd=a.length,r.selForContextMenu=n.doc.sel}}function y(){if(e.contextMenuPending==y&&(e.contextMenuPending=!1,e.wrapper.style.cssText=h,i.style.cssText=u,o&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!o||o&&s<9)&&g();var t=0,a=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==e.prevInput?ti(n,sa)(n):t++<10?r.detectingSelectAll=setTimeout(a,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(a,200)}}},Uo.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},Uo.prototype.setUneditable=function(){},Uo.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,a){t.defaults[n]=r,i&&(e[n]=a?function(t,e,n){n!=To&&i(t,e,n)}:i)}t.defineOption=n,t.Init=To,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,Pi(t)}),!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Ai(t),jn(t),pr(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter((function(t){for(var i=0;;){var a=t.text.indexOf(e,i);if(-1==a)break;i=a+e.length,n.push(te(r,a))}r++}));for(var i=n.length-1;i>=0;i--)fa(t.doc,e,n[i],te(n[i].line,n[i].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=To&&t.refresh()})),n("specialCharPlaceholder",Je,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!w),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){xo(t),mi(t)}),!0),n("keyMap","default",(function(t,e,n){var r=Xa(e),i=n!=To&&Xa(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Eo,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=hi(e,t.options.lineNumbers),mi(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?or(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return Wr(t)}),!0),n("scrollbarStyle","native",(function(t){qr(t),Wr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=hi(t.options.gutters,e),mi(t)}),!0),n("firstLineNumber",1,mi,!0),n("lineNumberFormatter",(function(t){return t}),mi,!0),n("showCursorWhenSelecting",!1,gr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(Sr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("screenReaderLabel",null,(function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,So),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,gr,!0),n("singleCursorHeightPerLine",!0,gr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ai,!0),n("addModeClass",!1,Ai,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Ai,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(Co),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&ti(this,e[t])(this,n,i),ft(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Xa(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:ei((function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");(function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)})(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,pr(this)})),removeOverlay:ei((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void pr(this)}})),indentLine:ei((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&Mo(this,t,e,n)})),indentSelection:ei((function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(Mo(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ar(this));else{var a=i.from(),o=i.to(),s=Math.max(n,a.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=s;l<n;++l)Mo(this,l,t);var c=this.doc.sel.ranges;0==a.ch&&e.length==c.length&&c[r].from().ch>0&&Yi(this.doc,r,new ki(a,c[r].to()),$)}}})),getTokenAt:function(t,e){return ve(this,t,e)},getLineTokens:function(t,e){return ve(this,te(t),e,!0)},getTokenTypeAt:function(t){t=se(this.doc,t);var e,n=ue(this,Vt(this.doc,t.line)),r=0,i=(n.length-1)/2,a=t.ch;if(0==a)e=n[2];else for(;;){var o=r+i>>1;if((o?n[2*o-1]:0)>=a)i=o;else{if(!(n[2*o+1]<a)){e=n[2*o+2];break}r=o+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],a=this.getModeAt(t);if("string"==typeof a[e])i[a[e]]&&r.push(i[a[e]]);else if(a[e])for(var o=0;o<a[e].length;o++){var s=i[a[e][o]];s&&r.push(s)}else a.helperType&&i[a.helperType]?r.push(i[a.helperType]):i[a.name]&&r.push(i[a.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(a,this)&&-1==j(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(t,e){var n=this.doc;return he(this,(t=oe(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return Gn(this,null==t?n.head:"object"==typeof t?se(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Vn(this,se(this.doc,t),e||"page")},coordsChar:function(t,e){return Yn(this,(t=Un(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Un(this,{top:t,left:0},e||"page").top,Zt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var a=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>a&&(t=a,i=!0),r=Vt(this.doc,t)}else r=t;return qn(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-Be(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var a,o,s,l=this.display,c=(t=Gn(this,se(this.doc,t))).bottom,d=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==r)c=t.top;else if("above"==r||"near"==r){var p=Math.max(l.wrapper.clientHeight,this.doc.height),u=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>p)&&t.top>e.offsetHeight?c=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=p&&(c=t.bottom),d+e.offsetWidth>u&&(d=u-e.offsetWidth)}e.style.top=c+"px",e.style.left=e.style.right="","right"==i?(d=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?d=0:"middle"==i&&(d=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=d+"px"),n&&(a=this,o={left:d,top:c,right:d+e.offsetWidth,bottom:c+e.offsetHeight},null!=(s=Mr(a,o)).scrollTop&&Fr(a,s.scrollTop),null!=s.scrollLeft&&zr(a,s.scrollLeft))},triggerOnKeyDown:ei(co),triggerOnKeyPress:ei(uo),triggerOnKeyUp:po,triggerOnMouseDown:ei(go),execCommand:function(t){if(to.hasOwnProperty(t))return to[t].call(null,this)},triggerElectric:ei((function(t){Do(this,t)})),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var a=se(this.doc,t),o=0;o<e&&!(a=Ho(this.doc,a,i,n,r)).hitSide;++o);return a},moveH:ei((function(t,e){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Ho(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()}),q)})),deleteH:ei((function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Ya(this,(function(n){var i=Ho(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(t,e,n,r){var i=1,a=r;e<0&&(i=-1,e=-e);for(var o=se(this.doc,t),s=0;s<e;++s){var l=Gn(this,o,"div");if(null==a?a=l.left:l.left=a,(o=Ro(this,l,i,n)).hitSide)break}return o},moveV:ei((function(t,e){var n=this,r=this.doc,i=[],a=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(o){if(a)return t<0?o.from():o.to();var s=Gn(n,o.head,"div");null!=o.goalColumn&&(s.left=o.goalColumn),i.push(s.left);var l=Ro(n,s,t,e);return"page"==e&&o==r.sel.primary()&&Pr(n,Vn(n,l,"div").top-s.top),l}),q),i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]})),findWordAt:function(t){var e=Vt(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var a=e.charAt(n),o=tt(a,i)?function(t){return tt(t,i)}:/\s/.test(a)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};n>0&&o(e.charAt(n-1));)--n;for(;r<e.length&&o(e.charAt(r));)++r}return new ki(te(t.line,n),te(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?L(this.display.cursorDiv,"CodeMirror-overwrite"):E(this.display.cursorDiv,"CodeMirror-overwrite"),ft(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ei((function(t,e){Ir(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-En(this)-this.display.barHeight,width:t.scrollWidth-En(this)-this.display.barWidth,clientHeight:On(this),clientWidth:Cn(this)}},scrollIntoView:ei((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Lr(t),t.curOp.scrollToPos=e}(this,t):Dr(this,t.from,t.to,t.margin)})),setSize:ei((function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&Rn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){ur(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,ft(this,"refresh",this)})),operation:function(t){return Qr(this,t)},startOperation:function(){return Vr(this)},endOperation:function(){return Gr(this)},refresh:ei((function(){var t=this.display.cachedTextHeight;pr(this),this.curOp.forceUpdate=!0,jn(this),Ir(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this.display),(null==t||Math.abs(t-rr(this.display))>.5||this.options.lineWrapping)&&lr(this),ft(this,"refresh",this)})),swapDoc:ei((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Fi(this,t),jn(this),this.display.input.reset(),Ir(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},vt(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,a){t.registerHelper(e,r,a),n[e]._global.push({pred:i,val:a})}}(Co);var Vo="iter insert remove copy getEditor constructor".split(" ");for(var Go in Pa.prototype)Pa.prototype.hasOwnProperty(Go)&&j(Vo,Go)<0&&(Co.prototype[Go]=function(t){return function(){return t.apply(this.doc,arguments)}}(Pa.prototype[Go]));return vt(Pa),Co.inputStyles={textarea:Uo,contenteditable:jo},Co.defineMode=function(t){Co.defaults.mode||"null"==t||(Co.defaults.mode=t),zt.apply(this,arguments)},Co.defineMIME=function(t,e){Nt[t]=e},Co.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Co.defineMIME("text/plain","null"),Co.defineExtension=function(t,e){Co.prototype[t]=e},Co.defineDocExtension=function(t,e){Pa.prototype[t]=e},Co.fromTextArea=function(t,e){if((e=e?z(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=I();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=s.getValue()}var i;if(t.form&&(pt(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var a=t.form;i=a.submit;try{var o=a.submit=function(){r(),a.submit=i,a.submit(),a.submit=o}}catch(t){}}e.finishInit=function(n){n.save=r,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,r(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(ht(t.form,"submit",r),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var s=Co((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return s},function(t){t.off=ht,t.on=pt,t.wheelEventPixels=wi,t.Doc=Pa,t.splitLines=At,t.countColumn=H,t.findColumn=U,t.isWordChar=Q,t.Pass=W,t.signal=ft,t.Line=Ve,t.changeEnd=Ei,t.scrollbarModel=Br,t.Pos=te,t.cmpPos=ee,t.modes=Ft,t.mimeModes=Nt,t.resolveMode=Ht,t.getMode=Rt,t.modeExtensions=jt,t.extendMode=Wt,t.copyState=$t,t.startState=qt,t.innerMode=Bt,t.commands=to,t.keyMap=$a,t.keyName=Ka,t.isModifierKey=Va,t.lookupKey=Ua,t.normalizeKeyMap=qa,t.StringStream=Ut,t.SharedTextMarker=Ea,t.TextMarker=_a,t.LineWidget=xa,t.e_preventDefault=bt,t.e_stopPropagation=wt,t.e_stop=Tt,t.addClass=L,t.contains=A,t.rmClass=E,t.keyNames=Ha}(Co),Co.version="5.59.2",Co}()},8496:t=>{t.exports=function(){var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window};var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.init=i,e.getWindow=function(e){return(0,t.default)(e)?e:(e.ownerDocument||e).defaultView||r.window},e.window=e.realWindow=void 0;var n=void 0;e.realWindow=n;var r=void 0;function i(t){e.realWindow=n=t;var i=t.document.createTextNode("");i.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(i)===i&&(t=t.wrap(t)),e.window=r=t}e.window=r,"undefined"!=typeof window&&window&&i(window);var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=function(t){return!!t&&"object"==typeof t},s=function(t){return"function"==typeof t},l={window:function(n){return n===e.window||(0,t.default)(n)},docFrag:function(t){return o(t)&&11===t.nodeType},object:o,func:s,number:function(t){return"number"==typeof t},bool:function(t){return"boolean"==typeof t},string:function(t){return"string"==typeof t},element:function(t){if(!t||"object"!=typeof t)return!1;var n=e.getWindow(t)||e.window;return/object|function/.test(typeof n.Element)?t instanceof n.Element:1===t.nodeType&&"string"==typeof t.nodeName},plainObject:function(t){return o(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},array:function(t){return o(t)&&void 0!==t.length&&s(t.splice)}};a.default=l;var c={};function d(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.prepared.axis;"x"===n?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===n&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function p(t){var e=t.iEvent,n=t.interaction;if("drag"===n.prepared.name){var r=n.prepared.axis;if("x"===r||"y"===r){var i="x"===r?"y":"x";e.page[i]=n.coords.start.page[i],e.client[i]=n.coords.start.client[i],e.delta[i]=0}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var u={id:"actions/drag",install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.draggable=u.draggable,e.map.drag=u,e.methodDict.drag="draggable",r.actions.drag=u.defaults},listeners:{"interactions:before-action-move":d,"interactions:action-resume":d,"interactions:action-move":p,"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.buttons,i=n.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(r&n.options.drag.mouseButtons)))return t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis},!1}},draggable:function(t){return a.default.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):a.default.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:d,move:p,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},h=u;c.default=h;var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=void 0;var m={init:function(t){var e=t;m.document=e.document,m.DocumentFragment=e.DocumentFragment||g,m.SVGElement=e.SVGElement||g,m.SVGSVGElement=e.SVGSVGElement||g,m.SVGElementInstance=e.SVGElementInstance||g,m.Element=e.Element||g,m.HTMLElement=e.HTMLElement||m.Element,m.Event=e.Event,m.Touch=e.Touch||g,m.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function g(){}var y=m;f.default=y;var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var b={init:function(t){var n=f.default.Element,r=e.window.navigator;b.supportsTouch="ontouchstart"in t||a.default.func(t.DocumentTouch)&&f.default.document instanceof t.DocumentTouch,b.supportsPointerEvent=!1!==r.pointerEnabled&&!!f.default.PointerEvent,b.isIOS=/iP(hone|od|ad)/.test(r.platform),b.isIOS7=/iP(hone|od|ad)/.test(r.platform)&&/OS 7[^\d]/.test(r.appVersion),b.isIe9=/MSIE 9/.test(r.userAgent),b.isOperaMobile="Opera"===r.appName&&b.supportsTouch&&/Presto/.test(r.userAgent),b.prefixedMatchesSelector="matches"in n.prototype?"matches":"webkitMatchesSelector"in n.prototype?"webkitMatchesSelector":"mozMatchesSelector"in n.prototype?"mozMatchesSelector":"oMatchesSelector"in n.prototype?"oMatchesSelector":"msMatchesSelector",b.pEventTypes=b.supportsPointerEvent?f.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,b.wheelEvent="onmousewheel"in f.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},w=b;v.default=w;var x={};function T(t){var e=t.parentNode;if(a.default.docFrag(e)){for(;(e=e.host)&&a.default.docFrag(e););return e}return e}function k(t,n){return e.window!==e.realWindow&&(n=n.replace(/\/deep\//g," ")),t[v.default.prefixedMatchesSelector](n)}Object.defineProperty(x,"__esModule",{value:!0}),x.nodeContains=function(t,e){if(t.contains)return t.contains(e);for(;e;){if(e===t)return!0;e=e.parentNode}return!1},x.closest=function(t,e){for(;a.default.element(t);){if(k(t,e))return t;t=T(t)}return null},x.parentNode=T,x.matchesSelector=k,x.indexOfDeepestElement=function(t){for(var n,r=[],i=0;i<t.length;i++){var a=t[i],o=t[n];if(a&&i!==n)if(o){var s=_(a),l=_(o);if(s!==a.ownerDocument)if(l!==a.ownerDocument)if(s!==l){r=r.length?r:S(o);var c=void 0;if(o instanceof f.default.HTMLElement&&a instanceof f.default.SVGElement&&!(a instanceof f.default.SVGSVGElement)){if(a===l)continue;c=a.ownerSVGElement}else c=a;for(var d=S(c,o.ownerDocument),p=0;d[p]&&d[p]===r[p];)p++;for(var u=[d[p-1],d[p],r[p]],h=u[0].lastChild;h;){if(h===u[1]){n=i,r=d;break}if(h===u[2])break;h=h.previousSibling}}else m=a,g=o,(parseInt(e.getWindow(m).getComputedStyle(m).zIndex,10)||0)>=(parseInt(e.getWindow(g).getComputedStyle(g).zIndex,10)||0)&&(n=i);else n=i}else n=i}var m,g;return n},x.matchesUpTo=function(t,e,n){for(;a.default.element(t);){if(k(t,e))return!0;if((t=T(t))===n)return k(t,e)}return!1},x.getActualElement=function(t){return t.correspondingUseElement||t},x.getScrollXY=E,x.getElementClientRect=C,x.getElementRect=function(t){var n=C(t);if(!v.default.isIOS7&&n){var r=E(e.getWindow(t));n.left+=r.x,n.right+=r.x,n.top+=r.y,n.bottom+=r.y}return n},x.getPath=function(t){for(var e=[];t;)e.push(t),t=T(t);return e},x.trySelector=function(t){return!!a.default.string(t)&&(f.default.document.querySelector(t),!0)};var _=function(t){return t.parentNode||t.host};function S(t,e){for(var n,r=[],i=t;(n=_(i))&&i!==e&&n!==i.ownerDocument;)r.unshift(i),i=n;return r}function E(t){return{x:(t=t||e.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function C(t){var e=t instanceof f.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.default=function(t,e){for(var n in e)t[n]=e[n];return t};var M={};function P(t,e,n){return"parent"===t?(0,x.parentNode)(n):"self"===t?e.getRect(n):(0,x.closest)(n,t)}Object.defineProperty(M,"__esModule",{value:!0}),M.getStringOptionResult=P,M.resolveRectLike=function(t,e,n,r){var i=t;return a.default.string(i)?i=P(i,e,n):a.default.func(i)&&(i=i.apply(void 0,r)),a.default.element(i)&&(i=(0,x.getElementRect)(i)),i},M.rectToXY=function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},M.xywhToTlbr=function(t){return!t||"left"in t&&"top"in t||((t=(0,O.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t},M.tlbrToXywh=function(t){return!t||"x"in t&&"y"in t||((t=(0,O.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||(t.right||0)-t.x,t.height=t.height||(t.bottom||0)-t.y),t},M.addEdges=function(t,e,n){t.left&&(e.left+=n.x),t.right&&(e.right+=n.x),t.top&&(e.top+=n.y),t.bottom&&(e.bottom+=n.y),e.width=e.right-e.left,e.height=e.bottom-e.top};var A={};Object.defineProperty(A,"__esModule",{value:!0}),A.default=function(t,e,n){var r=t.options[n],i=r&&r.origin||t.options.origin,a=(0,M.resolveRectLike)(i,t,e,[t&&e]);return(0,M.rectToXY)(a)||{x:0,y:0}};var I={};function L(t){return t.trim().split(/ +/)}Object.defineProperty(I,"__esModule",{value:!0}),I.default=function t(e,n,r){if(r=r||{},a.default.string(e)&&-1!==e.search(" ")&&(e=L(e)),a.default.array(e))return e.reduce((function(e,i){return(0,O.default)(e,t(i,n,r))}),r);if(a.default.object(e)&&(n=e,e=""),a.default.func(n))r[e]=r[e]||[],r[e].push(n);else if(a.default.array(n))for(var i=0;i<n.length;i++){var o;o=n[i],t(e,o,r)}else if(a.default.object(n))for(var s in n){var l=L(s).map((function(t){return""+e+t}));t(l,n[s],r)}return r};var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0,D.default=function(t,e){return Math.sqrt(t*t+e*e)};var F={};function N(t,e){for(var n in e){var r=N.prefixedPropREs,i=!1;for(var a in r)if(0===n.indexOf(a)&&r[a].test(n)){i=!0;break}i||"function"==typeof e[n]||(t[n]=e[n])}return t}Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0,N.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var z=N;F.default=z;var H={};function R(t){return t instanceof f.default.Event||t instanceof f.default.Touch}function j(t,e,n){return t=t||"page",(n=n||{}).x=e[t+"X"],n.y=e[t+"Y"],n}function W(t,e){return e=e||{x:0,y:0},v.default.isOperaMobile&&R(t)?(j("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):j("page",t,e),e}function $(t,e){return e=e||{},v.default.isOperaMobile&&R(t)?j("screen",t,e):j("client",t,e),e}function B(t){var e=[];return a.default.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function q(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++){var r=t[n];for(var i in e)e[i]+=r[i]}for(var a in e)e[a]/=t.length;return e}Object.defineProperty(H,"__esModule",{value:!0}),H.copyCoords=function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},H.setCoordDeltas=function(t,e,n){t.page.x=n.page.x-e.page.x,t.page.y=n.page.y-e.page.y,t.client.x=n.client.x-e.client.x,t.client.y=n.client.y-e.client.y,t.timeStamp=n.timeStamp-e.timeStamp},H.setCoordVelocity=function(t,e){var n=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/n,t.page.y=e.page.y/n,t.client.x=e.client.x/n,t.client.y=e.client.y/n,t.timeStamp=n},H.setZeroCoords=function(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0},H.isNativePointer=R,H.getXY=j,H.getPageXY=W,H.getClientXY=$,H.getPointerId=function(t){return a.default.number(t.pointerId)?t.pointerId:t.identifier},H.setCoords=function(t,e,n){var r=e.length>1?q(e):e[0];W(r,t.page),$(r,t.client),t.timeStamp=n},H.getTouchPair=B,H.pointerAverage=q,H.touchBBox=function(t){if(!t.length)return null;var e=B(t),n=Math.min(e[0].pageX,e[1].pageX),r=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),a=Math.max(e[0].pageY,e[1].pageY);return{x:n,y:r,left:n,top:r,right:i,bottom:a,width:i-n,height:a-r}},H.touchDistance=function(t,e){var n=e+"X",r=e+"Y",i=B(t),a=i[0][n]-i[1][n],o=i[0][r]-i[1][r];return(0,D.default)(a,o)},H.touchAngle=function(t,e){var n=e+"X",r=e+"Y",i=B(t),a=i[1][n]-i[0][n],o=i[1][r]-i[0][r];return 180*Math.atan2(o,a)/Math.PI},H.getPointerType=function(t){return a.default.string(t.pointerType)?t.pointerType:a.default.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof f.default.Touch?"touch":"mouse"},H.getEventTargets=function(t){var e=a.default.func(t.composedPath)?t.composedPath():t.path;return[x.getActualElement(e?e[0]:t.target),x.getActualElement(t.currentTarget)]},H.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},H.coordsToEvent=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(H,"pointerExtend",{enumerable:!0,get:function(){return F.default}});var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.BaseEvent=void 0;var V=function(){function t(t){this.type=void 0,this.target=void 0,this.currentTarget=void 0,this.interactable=void 0,this._interaction=void 0,this.timeStamp=void 0,this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=t}var e=t.prototype;return e.preventDefault=function(){},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t}();U.BaseEvent=V,Object.defineProperty(V.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.find=G.findIndex=G.from=G.merge=G.remove=G.contains=void 0,G.contains=function(t,e){return-1!==t.indexOf(e)},G.remove=function(t,e){return t.splice(t.indexOf(e),1)};var K=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}return t};G.merge=K,G.from=function(t){return K([],t)};var X=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1};G.findIndex=X,G.find=function(t,e){return t[X(t,e)]};var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.DropEvent=void 0;var Z=function(t){var e,n;function r(e,n,r){var i;(i=t.call(this,n._interaction)||this).target=void 0,i.dropzone=void 0,i.dragEvent=void 0,i.relatedTarget=void 0,i.draggable=void 0,i.timeStamp=void 0,i.propagationStopped=!1,i.immediatePropagationStopped=!1;var a="dragleave"===r?e.prev:e.cur,o=a.element,s=a.dropzone;return i.type=r,i.target=o,i.currentTarget=o,i.dropzone=s,i.dragEvent=n,i.relatedTarget=n.target,i.draggable=n.interactable,i.timeStamp=n.timeStamp,i}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.reject=function(){var t=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var n=e.activeDrops,i=G.findIndex(n,(function(e){var n=e.dropzone,r=e.element;return n===t.dropzone&&r===t.target}));e.activeDrops.splice(i,1);var a=new r(e,this.dragEvent,"dropdeactivate");a.dropzone=this.dropzone,a.target=this.target,this.dropzone.fire(a)}else this.dropzone.fire(new r(e,this.dragEvent,"dragleave"))},i.preventDefault=function(){},i.stopPropagation=function(){this.propagationStopped=!0},i.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},r}(U.BaseEvent);Y.DropEvent=Z;var J={};function Q(t,e){for(var n=0;n<t.slice().length;n++){var r=t.slice()[n],i=r.dropzone,a=r.element;e.dropzone=i,e.target=a,i.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function tt(t,e){for(var n=function(t,e){for(var n=t.interactables,r=[],i=0;i<n.list.length;i++){var o=n.list[i];if(o.options.drop.enabled){var s=o.options.drop.accept;if(!(a.default.element(s)&&s!==e||a.default.string(s)&&!x.matchesSelector(e,s)||a.default.func(s)&&!s({dropzone:o,draggableElement:e})))for(var l=a.default.string(o.target)?o._context.querySelectorAll(o.target):a.default.array(o.target)?o.target:[o.target],c=0;c<l.length;c++){var d=l[c];d!==e&&r.push({dropzone:o,element:d,rect:o.getRect(d)})}}}return r}(t,e),r=0;r<n.length;r++){var i=n[r];i.rect=i.dropzone.getRect(i.element)}return n}function et(t,e,n){for(var r=t.dropState,i=t.interactable,a=t.element,o=[],s=0;s<r.activeDrops.length;s++){var l=r.activeDrops[s],c=l.dropzone,d=l.element,p=l.rect;o.push(c.dropCheck(e,n,i,a,d,p)?d:null)}var u=x.indexOfDeepestElement(o);return r.activeDrops[u]||null}function nt(t,e,n){var r=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(i.activate=new Y.DropEvent(r,n,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===n.type&&(i.deactivate=new Y.DropEvent(r,n,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),r.rejected||(r.cur.element!==r.prev.element&&(r.prev.dropzone&&(i.leave=new Y.DropEvent(r,n,"dragleave"),n.dragLeave=i.leave.target=r.prev.element,n.prevDropzone=i.leave.dropzone=r.prev.dropzone),r.cur.dropzone&&(i.enter=new Y.DropEvent(r,n,"dragenter"),n.dragEnter=r.cur.element,n.dropzone=r.cur.dropzone)),"dragend"===n.type&&r.cur.dropzone&&(i.drop=new Y.DropEvent(r,n,"drop"),n.dropzone=r.cur.dropzone,n.relatedTarget=r.cur.element),"dragmove"===n.type&&r.cur.dropzone&&(i.move=new Y.DropEvent(r,n,"dropmove"),i.move.dragmove=n,n.dropzone=r.cur.dropzone)),i}function rt(t,e){var n=t.dropState,r=n.activeDrops,i=n.cur,a=n.prev;e.leave&&a.dropzone.fire(e.leave),e.enter&&i.dropzone.fire(e.enter),e.move&&i.dropzone.fire(e.move),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&Q(r,e.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function it(t,e){var n=t.interaction,r=t.iEvent,i=t.event;if("dragmove"===r.type||"dragend"===r.type){var a=n.dropState;e.dynamicDrop&&(a.activeDrops=tt(e,n.element));var o=r,s=et(n,o,i);a.rejected=a.rejected&&!!s&&s.dropzone===a.cur.dropzone&&s.element===a.cur.element,a.cur.dropzone=s&&s.dropzone,a.cur.element=s&&s.element,a.events=nt(n,0,o)}}Object.defineProperty(J,"__esModule",{value:!0}),J.default=void 0;var at={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,r=t.Interactable,i=t.defaults;t.usePlugin(c.default),r.prototype.dropzone=function(t){return function(t,e){if(a.default.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var n=(0,I.default)(e.listeners),r=Object.keys(n).reduce((function(t,e){return t[/^(enter|leave)/.test(e)?"drag"+e:/^(activate|deactivate|move)/.test(e)?"drop"+e:e]=n[e],t}),{});t.off(t.options.drop.listeners),t.on(r),t.options.drop.listeners=r}return a.default.func(e.ondrop)&&t.on("drop",e.ondrop),a.default.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),a.default.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),a.default.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),a.default.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),a.default.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:a.default.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return a.default.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},r.prototype.dropCheck=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var l=!1;if(!(s=s||t.getRect(o)))return!!t.options.drop.checker&&t.options.drop.checker(e,n,l,t,o,r,i);var c=t.options.drop.overlap;if("pointer"===c){var d=(0,A.default)(r,i,"drag"),p=H.getPageXY(e);p.x+=d.x,p.y+=d.y;var u=p.x>s.left&&p.x<s.right,h=p.y>s.top&&p.y<s.bottom;l=u&&h}var f=r.getRect(i);if(f&&"center"===c){var m=f.left+f.width/2,g=f.top+f.height/2;l=m>=s.left&&m<=s.right&&g>=s.top&&g<=s.bottom}return f&&a.default.number(c)&&(l=Math.max(0,Math.min(s.right,f.right)-Math.max(s.left,f.left))*Math.max(0,Math.min(s.bottom,f.bottom)-Math.max(s.top,f.top))/(f.width*f.height)>=c),t.options.drop.checker&&(l=t.options.drop.checker(e,n,l,t,o,r,i)),l}(this,t,e,n,r,i,o)},n.dynamicDrop=function(e){return a.default.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},(0,O.default)(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=at.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var n=t.interaction,r=(t.event,t.iEvent);if("drag"===n.prepared.name){var i=n.dropState;i.activeDrops=null,i.events=null,i.activeDrops=tt(e,n.element),i.events=nt(n,0,r),i.events.activate&&(Q(i.activeDrops,i.events.activate),e.fire("actions/drop:start",{interaction:n,dragEvent:r}))}},"interactions:action-move":it,"interactions:after-action-move":function(t,e){var n=t.interaction,r=t.iEvent;"drag"===n.prepared.name&&(rt(n,n.dropState.events),e.fire("actions/drop:move",{interaction:n,dragEvent:r}),n.dropState.events={})},"interactions:action-end":function(t,e){if("drag"===t.interaction.prepared.name){var n=t.interaction,r=t.iEvent;it(t,e),rt(n,n.dropState.events),e.fire("actions/drop:end",{interaction:n,dragEvent:r})}},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var n=e.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:tt,getDrop:et,getDropEvents:nt,fireDropEvents:rt,defaults:{enabled:!1,accept:null,overlap:"pointer"}},ot=at;J.default=ot;var st={};function lt(t){var e=t.interaction,n=t.iEvent,r=t.phase;if("gesture"===e.prepared.name){var i=e.pointers.map((function(t){return t.pointer})),o="start"===r,s="end"===r,l=e.interactable.options.deltaSource;if(n.touches=[i[0],i[1]],o)n.distance=H.touchDistance(i,l),n.box=H.touchBBox(i),n.scale=1,n.ds=0,n.angle=H.touchAngle(i,l),n.da=0,e.gesture.startDistance=n.distance,e.gesture.startAngle=n.angle;else if(s){var c=e.prevEvent;n.distance=c.distance,n.box=c.box,n.scale=c.scale,n.ds=0,n.angle=c.angle,n.da=0}else n.distance=H.touchDistance(i,l),n.box=H.touchBBox(i),n.scale=n.distance/e.gesture.startDistance,n.angle=H.touchAngle(i,l),n.ds=n.scale-e.gesture.scale,n.da=n.angle-e.gesture.angle;e.gesture.distance=n.distance,e.gesture.angle=n.angle,a.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(e.gesture.scale=n.scale)}}Object.defineProperty(st,"__esModule",{value:!0}),st.default=void 0;var ct={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,n=t.Interactable,r=t.defaults;n.prototype.gesturable=function(t){return a.default.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):a.default.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=ct,e.methodDict.gesture="gesturable",r.actions.gesture=ct.defaults},listeners:{"interactions:action-start":lt,"interactions:action-move":lt,"interactions:action-end":lt,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return t.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},dt=ct;st.default=dt;var pt={};function ut(t,e,n,r,i,o,s){if(!e)return!1;if(!0===e){var l=a.default.number(o.width)?o.width:o.right-o.left,c=a.default.number(o.height)?o.height:o.bottom-o.top;if(s=Math.min(s,Math.abs(("left"===t||"right"===t?l:c)/2)),l<0&&("left"===t?t="right":"right"===t&&(t="left")),c<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return n.x<(l>=0?o.left:o.right)+s;if("top"===t)return n.y<(c>=0?o.top:o.bottom)+s;if("right"===t)return n.x>(l>=0?o.right:o.left)-s;if("bottom"===t)return n.y>(c>=0?o.bottom:o.top)-s}return!!a.default.element(r)&&(a.default.element(e)?e===r:x.matchesUpTo(r,e,i))}function ht(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var r=e;n.interactable.options.resize.square?("y"===n.resizeAxes?r.delta.x=r.delta.y:r.delta.y=r.delta.x,r.axes="xy"):(r.axes=n.resizeAxes,"x"===n.resizeAxes?r.delta.y=0:"y"===n.resizeAxes&&(r.delta.x=0))}}Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0;var ft={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,n=t.browser,r=t.Interactable,i=t.defaults;ft.cursors=function(t){return t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),ft.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,r.prototype.resizable=function(e){return function(t,e,n){return a.default.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),a.default.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=n.defaults.actions.resize.axis),a.default.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:a.default.bool(e.square)&&(t.options.resize.square=e.square),t):a.default.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=ft,e.methodDict.resize="resizable",i.actions.resize=ft.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.rect;n._rects={start:(0,O.default)({},i),corrected:(0,O.default)({},i),previous:(0,O.default)({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}}(t),ht(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e,i=n.interactable.options.resize.invert,a="reposition"===i||"negate"===i,o=n.rect,s=n._rects,l=s.start,c=s.corrected,d=s.delta,p=s.previous;if((0,O.default)(p,c),a){if((0,O.default)(c,o),"reposition"===i){if(c.top>c.bottom){var u=c.top;c.top=c.bottom,c.bottom=u}if(c.left>c.right){var h=c.left;c.left=c.right,c.right=h}}}else c.top=Math.min(o.top,l.bottom),c.bottom=Math.max(o.bottom,l.top),c.left=Math.min(o.left,l.right),c.right=Math.max(o.right,l.left);for(var f in c.width=c.right-c.left,c.height=c.bottom-c.top,c)d[f]=c[f]-p[f];r.edges=n.prepared.edges,r.rect=c,r.deltaRect=d}}(t),ht(t)},"interactions:action-end":function(t){var e=t.iEvent,n=t.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var r=e;r.edges=n.prepared.edges,r.rect=n._rects.corrected,r.deltaRect=n._rects.delta}},"auto-start:check":function(t){var e=t.interaction,n=t.interactable,r=t.element,i=t.rect,o=t.buttons;if(i){var s=(0,O.default)({},e.coords.cur.page),l=n.options.resize;if(l&&l.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(o&l.mouseButtons))){if(a.default.object(l.edges)){var c={left:!1,right:!1,top:!1,bottom:!1};for(var d in c)c[d]=ut(d,l.edges[d],s,e._latestPointer.eventTarget,r,i,l.margin||ft.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(t.action={name:"resize",edges:c})}else{var p="y"!==l.axis&&s.x>i.right-ft.defaultMargin,u="x"!==l.axis&&s.y>i.bottom-ft.defaultMargin;(p||u)&&(t.action={name:"resize",axes:(p?"x":"")+(u?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,n=t.axis,r=t.name,i=ft.cursors,a=null;if(n)a=i[r+n];else if(e){for(var o="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var c=s[l];e[c]&&(o+=c)}a=i[o]}return a},defaultMargin:null},mt=ft;pt.default=mt;var gt={};Object.defineProperty(gt,"__esModule",{value:!0}),gt.default=void 0;var yt={id:"actions",install:function(t){t.usePlugin(st.default),t.usePlugin(pt.default),t.usePlugin(c.default),t.usePlugin(J.default)}};gt.default=yt;var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.default=void 0,vt.default={};var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.default=void 0;var wt,xt,Tt=0,kt={request:function(t){return wt(t)},cancel:function(t){return xt(t)},init:function(t){if(wt=t.requestAnimationFrame,xt=t.cancelAnimationFrame,!wt)for(var e=["ms","moz","webkit","o"],n=0;n<e.length;n++){var r=e[n];wt=t[r+"RequestAnimationFrame"],xt=t[r+"CancelAnimationFrame"]||t[r+"CancelRequestAnimationFrame"]}wt=wt&&wt.bind(t),xt=xt&&xt.bind(t),wt||(wt=function(e){var n=Date.now(),r=Math.max(0,16-(n-Tt)),i=t.setTimeout((function(){e(n+r)}),r);return Tt=n+r,i},xt=function(t){return clearTimeout(t)})}};bt.default=kt;var _t={};Object.defineProperty(_t,"__esModule",{value:!0}),_t.getContainer=Et,_t.getScroll=Ct,_t.getScrollSize=function(t){return a.default.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},_t.getScrollSizeDelta=function(t,e){var n=t.interaction,r=t.element,i=n&&n.interactable.options[n.prepared.name].autoScroll;if(!i||!i.enabled)return e(),{x:0,y:0};var a=Et(i.container,n.interactable,r),o=Ct(a);e();var s=Ct(a);return{x:s.x-o.x,y:s.y-o.y}},_t.default=void 0;var St={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){St.isScrolling=!0,bt.default.cancel(St.i),t.autoScroll=St,St.interaction=t,St.prevTime=St.now(),St.i=bt.default.request(St.scroll)},stop:function(){St.isScrolling=!1,St.interaction&&(St.interaction.autoScroll=null),bt.default.cancel(St.i)},scroll:function(){var t=St.interaction,e=t.interactable,n=t.element,r=t.prepared.name,i=e.options[r].autoScroll,o=Et(i.container,e,n),s=St.now(),l=(s-St.prevTime)/1e3,c=i.speed*l;if(c>=1){var d={x:St.x*c,y:St.y*c};if(d.x||d.y){var p=Ct(o);a.default.window(o)?o.scrollBy(d.x,d.y):o&&(o.scrollLeft+=d.x,o.scrollTop+=d.y);var u=Ct(o),h={x:u.x-p.x,y:u.y-p.y};(h.x||h.y)&&e.fire({type:"autoscroll",target:n,interactable:e,delta:h,interaction:t,container:o})}St.prevTime=s}St.isScrolling&&(bt.default.cancel(St.i),St.i=bt.default.request(St.scroll))},check:function(t,e){var n;return null==(n=t.options[e].autoScroll)?void 0:n.enabled},onInteractionMove:function(t){var e=t.interaction,n=t.pointer;if(e.interacting()&&St.check(e.interactable,e.prepared.name))if(e.simulation)St.x=St.y=0;else{var r,i,o,s,l=e.interactable,c=e.element,d=e.prepared.name,p=l.options[d].autoScroll,u=Et(p.container,l,c);if(a.default.window(u))s=n.clientX<St.margin,r=n.clientY<St.margin,i=n.clientX>u.innerWidth-St.margin,o=n.clientY>u.innerHeight-St.margin;else{var h=x.getElementClientRect(u);s=n.clientX<h.left+St.margin,r=n.clientY<h.top+St.margin,i=n.clientX>h.right-St.margin,o=n.clientY>h.bottom-St.margin}St.x=i?1:s?-1:0,St.y=o?1:r?-1:0,St.isScrolling||(St.margin=p.margin,St.speed=p.speed,St.start(e))}}};function Et(t,n,r){return(a.default.string(t)?(0,M.getStringOptionResult)(t,n,r):t)||(0,e.getWindow)(r)}function Ct(t){return a.default.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var Ot={id:"auto-scroll",install:function(t){var e=t.defaults,n=t.actions;t.autoScroll=St,St.now=function(){return t.now()},n.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=St.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,St.stop(),St.interaction&&(St.interaction=null)},"interactions:stop":St.stop,"interactions:action-move":function(t){return St.onInteractionMove(t)}}};_t.default=Ot;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.warnOnce=function(t,n){var r=!1;return function(){return r||(e.window.console.warn(n),r=!0),t.apply(this,arguments)}},Mt.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t};var Pt={};function At(t){return a.default.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function It(t){return a.default.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var Lt={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,n,r,i){var a=function(t,e,n,r,i){var a=t.getRect(r),o={action:null,interactable:t,interaction:n,element:r,rect:a,buttons:e.buttons||{0:1,1:4,3:8,4:16}[e.button]};return i.fire("auto-start:check",o),o.action}(this,n,r,i,t);return this.options.actionChecker?this.options.actionChecker(e,n,a,this,i,r):a},e.prototype.ignoreFrom=(0,Mt.warnOnce)((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,Mt.warnOnce)((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=It,e.prototype.styleCursor=At}};Pt.default=Lt;var Dt={};function Ft(t,e,n,r,i){return e.testIgnoreAllow(e.options[t.name],n,r)&&e.options[t.name].enabled&&Rt(e,n,t,i)?t:null}function Nt(t,e,n,r,i,a,o){for(var s=0,l=r.length;s<l;s++){var c=r[s],d=i[s],p=c.getAction(e,n,t,d);if(p){var u=Ft(p,c,d,a,o);if(u)return{action:u,interactable:c,element:d}}}return{action:null,interactable:null,element:null}}function zt(t,e,n,r,i){var o=[],s=[],l=r;function c(t){o.push(t),s.push(l)}for(;a.default.element(l);){o=[],s=[],i.interactables.forEachMatch(l,c);var d=Nt(t,e,n,o,s,r,i);if(d.action&&!d.interactable.options[d.action.name].manualStart)return d;l=x.parentNode(l)}return{action:null,interactable:null,element:null}}function Ht(t,e,n){var r=e.action,i=e.interactable,a=e.element;r=r||{name:null},t.interactable=i,t.element=a,(0,Mt.copyAction)(t.prepared,r),t.rect=i&&r.name?i.getRect(a):null,$t(t,n),n.fire("autoStart:prepared",{interaction:t})}function Rt(t,e,n,r){var i=t.options,a=i[n.name].max,o=i[n.name].maxPerElement,s=r.autoStart.maxInteractions,l=0,c=0,d=0;if(!(a&&o&&s))return!1;for(var p=0;p<r.interactions.list.length;p++){var u=r.interactions.list[p],h=u.prepared.name;if(u.interacting()){if(++l>=s)return!1;if(u.interactable===t){if((c+=h===n.name?1:0)>=a)return!1;if(u.element===e&&(d++,h===n.name&&d>=o))return!1}}}return s>0}function jt(t,e){return a.default.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function Wt(t,e,n){var r=n.autoStart.cursorElement;r&&r!==t&&(r.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,n.autoStart.cursorElement=e?t:null}function $t(t,e){var n=t.interactable,r=t.element,i=t.prepared;if("mouse"===t.pointerType&&n&&n.options.styleCursor){var o="";if(i.name){var s=n.options[i.name].cursorChecker;o=a.default.func(s)?s(i,n,r,t._interacting):e.actions.map[i.name].getCursor(i)}Wt(t.element,o||"",e)}else e.autoStart.cursorElement&&Wt(e.autoStart.cursorElement,"",e)}Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=void 0;var Bt={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(Pt.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,O.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return jt(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:Rt,cursorElement:null}},listeners:{"interactions:down":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;n.interacting()||Ht(n,zt(n,r,i,a,e),e)},"interactions:move":function(t,e){!function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||Ht(n,zt(n,r,i,a,e),e)}(t,e),function(t,e){var n=t.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){e.fire("autoStart:before-start",t);var r=n.interactable,i=n.prepared.name;i&&r&&(r.options[i].manualStart||!Rt(r,n.element,n.prepared,e)?n.stop():(n.start(n.prepared,r,n.element),$t(n,e)))}}(t,e)},"interactions:stop":function(t,e){var n=t.interaction,r=n.interactable;r&&r.options.styleCursor&&Wt(n.element,"",e)}},maxInteractions:jt,withinInteractionLimit:Rt,validateAction:Ft};Dt.default=Bt;var qt={};Object.defineProperty(qt,"__esModule",{value:!0}),qt.default=void 0;var Ut={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var n=t.interaction,r=t.eventTarget,i=t.dx,o=t.dy;if("drag"===n.prepared.name){var s=Math.abs(i),l=Math.abs(o),c=n.interactable.options.drag,d=c.startAxis,p=s>l?"x":s<l?"y":"xy";if(n.prepared.axis="start"===c.lockAxis?p[0]:c.lockAxis,"xy"!==p&&"xy"!==d&&d!==p){n.prepared.name=null;for(var u=r,h=function(t){if(t!==n.interactable){var i=n.interactable.options.drag;if(!i.manualStart&&t.testIgnoreAllow(i,u,r)){var a=t.getAction(n.downPointer,n.downEvent,n,u);if(a&&"drag"===a.name&&function(t,e){if(!e)return!1;var n=e.options.drag.startAxis;return"xy"===t||"xy"===n||n===t}(p,t)&&Dt.default.validateAction(a,t,u,r,e))return t}}};a.default.element(u);){var f=e.interactables.forEachMatch(u,h);if(f){n.prepared.name="drag",n.interactable=f,n.element=u;break}u=(0,x.parentNode)(u)}}}}}};qt.default=Ut;var Vt={};function Gt(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var n=t.interactable.options;return n[e].hold||n[e].delay}Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=void 0;var Kt={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(Dt.default),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,n=Gt(e);n>0&&(e.autoStartHoldTimer=setTimeout((function(){e.start(e.prepared,e.interactable,e.element)}),n))},"interactions:move":function(t){var e=t.interaction,n=t.duplicate;e.autoStartHoldTimer&&e.pointerWasMoved&&!n&&(clearTimeout(e.autoStartHoldTimer),e.autoStartHoldTimer=null)},"autoStart:before-start":function(t){var e=t.interaction;Gt(e)>0&&(e.prepared.name=null)}},getHoldDuration:Gt};Vt.default=Kt;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.default=void 0;var Yt={id:"auto-start",install:function(t){t.usePlugin(Dt.default),t.usePlugin(Vt.default),t.usePlugin(qt.default)}};Xt.default=Yt;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.default=void 0,Zt.default={};var Jt={};function Qt(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):a.default.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function te(t){var e=t.interaction,n=t.event;e.interactable&&e.interactable.checkAndPreventDefault(n)}function ee(t){var n=t.Interactable;n.prototype.preventDefault=Qt,n.prototype.checkAndPreventDefault=function(n){return function(t,n,r){var i=t.options.preventDefault;if("never"!==i)if("always"!==i){if(n.events.supportsPassive&&/^touch(start|move)$/.test(r.type)){var o=(0,e.getWindow)(r.target).document,s=n.getDocOptions(o);if(!s||!s.events||!1!==s.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(r.type)||a.default.element(r.target)&&(0,x.matchesSelector)(r.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||r.preventDefault()}else r.preventDefault()}(this,t,n)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var n=0;n<t.interactions.list.length;n++){var r=t.interactions.list[n];if(r.element&&(r.element===e.target||(0,x.nodeContains)(r.element,e.target)))return void r.interactable.checkAndPreventDefault(e)}}})}Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.install=ee,Jt.default=void 0;var ne={id:"core/interactablePreventDefault",install:ee,listeners:["down","move","up","cancel"].reduce((function(t,e){return t["interactions:"+e]=te,t}),{})};Jt.default=ne;var re,ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.default=void 0,function(t){t.touchAction="touchAction",t.boxSizing="boxSizing",t.noListeners="noListeners"}(re||(re={}));var ae="[interact.js] ",oe={touchAction:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action",boxSizing:"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing"},se=[{name:re.touchAction,perform:function(t){return!function(t,e,n){for(var r=t;a.default.element(r);){if(le(r,"touchAction",n))return!0;r=(0,x.parentNode)(r)}return!1}(t.element,0,/pan-|pinch|none/)},getInfo:function(t){return[t.element,oe.touchAction]},text:'Consider adding CSS "touch-action: none" to this element\n'},{name:re.boxSizing,perform:function(t){var e=t.element;return"resize"===t.prepared.name&&e instanceof f.default.HTMLElement&&!le(e,"boxSizing",/border-box/)},text:'Consider adding CSS "box-sizing: border-box" to this resizable element',getInfo:function(t){return[t.element,oe.boxSizing]}},{name:re.noListeners,perform:function(t){var e=t.prepared.name;return!(t.interactable.events.types[e+"move"]||[]).length},getInfo:function(t){return[t.prepared.name,t.interactable]},text:"There are no listeners set for this action"}];function le(t,n,r){var i=t.style[n]||e.window.getComputedStyle(t)[n];return r.test((i||"").toString())}var ce={id:"dev-tools",install:function(t,e){var n=(void 0===e?{}:e).logger,r=t.Interactable,i=t.defaults;t.logger=n||console,i.base.devTools={ignore:{}},r.prototype.devTools=function(t){return t?((0,O.default)(this.options.devTools,t),this):this.options.devTools}},listeners:{"interactions:action-start":function(t,e){for(var n=t.interaction,r=0;r<se.length;r++){var i,a=se[r],o=n.interactable&&n.interactable.options;o&&o.devTools&&o.devTools.ignore[a.name]||!a.perform(n)||(i=e.logger).warn.apply(i,[ae+a.text].concat(a.getInfo(n)))}}},checks:se,CheckName:re,links:oe,prefix:ae};ie.default=ce;var de={};Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0,de.default={};var pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=function t(e){var n={};for(var r in e){var i=e[r];a.default.plainObject(i)?n[r]=t(i):a.default.array(i)?n[r]=G.from(i):n[r]=i}return n};var ue={};Object.defineProperty(ue,"__esModule",{value:!0}),ue.getRectOffset=me,ue.default=void 0;var he=function(){function t(t){this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=null,this.result=null,this.endResult=null,this.edges=void 0,this.interaction=void 0,this.interaction=t,this.result=fe()}var e=t.prototype;return e.start=function(t,e){var n=t.phase,r=this.interaction,i=function(t){var e=t.interactable.options[t.prepared.name],n=e.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(t){var n=e[t];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(t){return!!t}))}(r);this.prepareStates(i),this.edges=(0,O.default)({},r.edges),this.startOffset=me(r.rect,e),this.startDelta={x:0,y:0};var a={phase:n,pageCoords:e,preEnd:!1};return this.result=fe(),this.startAll(a),this.result=this.setAll(a)},e.fillArg=function(t){var e=this.interaction;t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect=t.rect||e.rect,t.edges=this.edges,t.startOffset=this.startOffset},e.startAll=function(t){this.fillArg(t);for(var e=0;e<this.states.length;e++){var n=this.states[e];n.methods.start&&(t.state=n,n.methods.start(t))}},e.setAll=function(t){this.fillArg(t);var e=t.phase,n=t.preEnd,r=t.skipModifiers,i=t.rect;t.coords=(0,O.default)({},t.pageCoords),t.rect=(0,O.default)({},i);for(var a=r?this.states.slice(r):this.states,o=fe(t.coords,t.rect),s=0;s<a.length;s++){var l=a[s],c=l.options,d=(0,O.default)({},t.coords),p=null;l.methods.set&&this.shouldDo(c,n,e)&&(t.state=l,p=l.methods.set(t),M.addEdges(this.interaction.edges,t.rect,{x:t.coords.x-d.x,y:t.coords.y-d.y})),o.eventProps.push(p)}o.delta.x=t.coords.x-t.pageCoords.x,o.delta.y=t.coords.y-t.pageCoords.y,o.rectDelta.left=t.rect.left-i.left,o.rectDelta.right=t.rect.right-i.right,o.rectDelta.top=t.rect.top-i.top,o.rectDelta.bottom=t.rect.bottom-i.bottom;var u=this.result.coords,h=this.result.rect;if(u&&h){var f=o.rect.left!==h.left||o.rect.right!==h.right||o.rect.top!==h.top||o.rect.bottom!==h.bottom;o.changed=f||u.x!==o.coords.x||u.y!==o.coords.y}return o},e.applyToInteraction=function(t){var e=this.interaction,n=t.phase,r=e.coords.cur,i=e.coords.start,a=this.result,o=this.startDelta,s=a.delta;"start"===n&&(0,O.default)(this.startDelta,a.delta);for(var l=[[i,o],[r,s]],c=0;c<l.length;c++){var d=l[c],p=d[0],u=d[1];p.page.x+=u.x,p.page.y+=u.y,p.client.x+=u.x,p.client.y+=u.y}var h=this.result.rectDelta,f=t.rect||e.rect;f.left+=h.left,f.right+=h.right,f.top+=h.top,f.bottom+=h.bottom,f.width=f.right-f.left,f.height=f.bottom-f.top},e.setAndApply=function(t){var e=this.interaction,n=t.phase,r=t.preEnd,i=t.skipModifiers,a=this.setAll({preEnd:r,phase:n,pageCoords:t.modifiedCoords||e.coords.cur.page});if(this.result=a,!a.changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var o=e.coords.cur.page,s={x:t.modifiedCoords.x-o.x,y:t.modifiedCoords.y-o.y};a.coords.x+=s.x,a.coords.y+=s.y,a.delta.x+=s.x,a.delta.y+=s.y}this.applyToInteraction(t)},e.beforeEnd=function(t){var e=t.interaction,n=t.event,r=this.states;if(r&&r.length){for(var i=!1,a=0;a<r.length;a++){var o=r[a];t.state=o;var s=o.options,l=o.methods,c=l.beforeEnd&&l.beforeEnd(t);if(c)return this.endResult=c,!1;i=i||!i&&this.shouldDo(s,!0,t.phase,!0)}i&&e.move({event:n,preEnd:!0})}},e.stop=function(t){var e=t.interaction;if(this.states&&this.states.length){var n=(0,O.default)({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(n);for(var r=0;r<this.states.length;r++){var i=this.states[r];n.state=i,i.methods.stop&&i.methods.stop(n)}this.states=null,this.endResult=null}},e.prepareStates=function(t){this.states=[];for(var e=0;e<t.length;e++){var n=t[e],r=n.options,i=n.methods,a=n.name;this.states.push({options:r,methods:i,index:e,name:a})}return this.states},e.restoreInteractionCoords=function(t){var e=t.interaction,n=e.coords,r=e.rect,i=e.modification;if(i.result){for(var a=i.startDelta,o=i.result,s=o.delta,l=o.rectDelta,c=[[n.start,a],[n.cur,s]],d=0;d<c.length;d++){var p=c[d],u=p[0],h=p[1];u.page.x-=h.x,u.page.y-=h.y,u.client.x-=h.x,u.client.y-=h.y}r.left-=l.left,r.right-=l.right,r.top-=l.top,r.bottom-=l.bottom}},e.shouldDo=function(t,e,n,r){return!(!t||!1===t.enabled||r&&!t.endOnly||t.endOnly&&!e||"start"===n&&!t.setStart)},e.copyFrom=function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.edges=t.edges,this.states=t.states.map((function(t){return(0,pe.default)(t)})),this.result=fe((0,O.default)({},t.result.coords),(0,O.default)({},t.result.rect))},e.destroy=function(){for(var t in this)this[t]=null},t}();function fe(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function me(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}ue.default=he;var ge={};function ye(t){var e=t.iEvent,n=t.interaction.modification.result;n&&(e.modifiers=n.eventProps)}Object.defineProperty(ge,"__esModule",{value:!0}),ge.makeModifier=function(t,e){var n=t.defaults,r={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop},i=function(t){var i=t||{};for(var a in i.enabled=!1!==i.enabled,n)a in i||(i[a]=n[a]);var o={options:i,methods:r,name:e,enable:function(){return i.enabled=!0,o},disable:function(){return i.enabled=!1,o}};return o};return e&&"string"==typeof e&&(i._defaults=n,i._methods=r),i},ge.addEventModifiers=ye,ge.default=void 0;var ve={id:"modifiers/base",before:["actions"],install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new ue.default(e)},"interactions:before-action-start":function(t){var e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":function(t){return t.interaction.modification.setAndApply(t)},"interactions:before-action-end":function(t){return t.interaction.modification.beforeEnd(t)},"interactions:action-start":ye,"interactions:action-move":ye,"interactions:action-end":ye,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}}};ge.default=ve;var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.defaults=void 0,be.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var we={};Object.defineProperty(we,"__esModule",{value:!0}),we.InteractEvent=void 0;var xe=function(t){var e,n;function r(e,n,r,i,a,o,s){var l;(l=t.call(this,e)||this).target=void 0,l.currentTarget=void 0,l.relatedTarget=null,l.screenX=void 0,l.screenY=void 0,l.button=void 0,l.buttons=void 0,l.ctrlKey=void 0,l.shiftKey=void 0,l.altKey=void 0,l.metaKey=void 0,l.page=void 0,l.client=void 0,l.delta=void 0,l.rect=void 0,l.x0=void 0,l.y0=void 0,l.t0=void 0,l.dt=void 0,l.duration=void 0,l.clientX0=void 0,l.clientY0=void 0,l.velocity=void 0,l.speed=void 0,l.swipe=void 0,l.timeStamp=void 0,l.axes=void 0,l.preEnd=void 0,a=a||e.element;var c=e.interactable,d=(c&&c.options||be.defaults).deltaSource,p=(0,A.default)(c,a,r),u="start"===i,h="end"===i,f=u?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(l):e.prevEvent,m=u?e.coords.start:h?{page:f.page,client:f.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return l.page=(0,O.default)({},m.page),l.client=(0,O.default)({},m.client),l.rect=(0,O.default)({},e.rect),l.timeStamp=m.timeStamp,h||(l.page.x-=p.x,l.page.y-=p.y,l.client.x-=p.x,l.client.y-=p.y),l.ctrlKey=n.ctrlKey,l.altKey=n.altKey,l.shiftKey=n.shiftKey,l.metaKey=n.metaKey,l.button=n.button,l.buttons=n.buttons,l.target=a,l.currentTarget=a,l.preEnd=o,l.type=s||r+(i||""),l.interactable=c,l.t0=u?e.pointers[e.pointers.length-1].downTime:f.t0,l.x0=e.coords.start.page.x-p.x,l.y0=e.coords.start.page.y-p.y,l.clientX0=e.coords.start.client.x-p.x,l.clientY0=e.coords.start.client.y-p.y,l.delta=u||h?{x:0,y:0}:{x:l[d].x-f[d].x,y:l[d].y-f[d].y},l.dt=e.coords.delta.timeStamp,l.duration=l.timeStamp-l.t0,l.velocity=(0,O.default)({},e.coords.velocity[d]),l.speed=(0,D.default)(l.velocity.x,l.velocity.y),l.swipe=h||"inertiastart"===i?l.getSwipe():null,l}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.getSwipe=function(){var t=this._interaction;if(t.prevEvent.speed<600||this.timeStamp-t.prevEvent.timeStamp>150)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var n=112.5<=e&&e<247.5,r=202.5<=e&&e<337.5;return{up:r,down:!r&&22.5<=e&&e<157.5,left:n,right:!n&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}},i.preventDefault=function(){},i.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},i.stopPropagation=function(){this.propagationStopped=!0},r}(U.BaseEvent);we.InteractEvent=xe,Object.defineProperties(xe.prototype,{pageX:{get:function(){return this.page.x},set:function(t){this.page.x=t}},pageY:{get:function(){return this.page.y},set:function(t){this.page.y=t}},clientX:{get:function(){return this.client.x},set:function(t){this.client.x=t}},clientY:{get:function(){return this.client.y},set:function(t){this.client.y=t}},dx:{get:function(){return this.delta.x},set:function(t){this.delta.x=t}},dy:{get:function(){return this.delta.y},set:function(t){this.delta.y=t}},velocityX:{get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},velocityY:{get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}});var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.PointerInfo=void 0,Te.PointerInfo=function(t,e,n,r,i){this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=t,this.pointer=e,this.event=n,this.downTime=r,this.downTarget=i};var ke,_e,Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Object.defineProperty(Se,"PointerInfo",{enumerable:!0,get:function(){return Te.PointerInfo}}),Se.default=Se.Interaction=Se._ProxyMethods=Se._ProxyValues=void 0,Se._ProxyValues=ke,function(t){t.interactable="",t.element="",t.prepared="",t.pointerIsDown="",t.pointerWasMoved="",t._proxy=""}(ke||(Se._ProxyValues=ke={})),Se._ProxyMethods=_e,function(t){t.start="",t.move="",t.end="",t.stop="",t.interacting=""}(_e||(Se._ProxyMethods=_e={}));var Ee=0,Ce=function(){var t;function e(t){var e=this,n=t.pointerType,r=t.scopeFire;this.interactable=null,this.element=null,this.rect=void 0,this._rects=void 0,this.edges=void 0,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=null,this.simulation=null,this.doMove=(0,Mt.warnOnce)((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:H.newCoords(),prev:H.newCoords(),cur:H.newCoords(),delta:H.newCoords(),velocity:H.newCoords()},this._id=Ee++,this._scopeFire=r,this.pointerType=n;var i=this;this._proxy={};var a=function(t){Object.defineProperty(e._proxy,t,{get:function(){return i[t]}})};for(var o in ke)a(o);var s=function(t){Object.defineProperty(e._proxy,t,{value:function(){return i[t].apply(i,arguments)}})};for(var l in _e)s(l);this._scopeFire("interactions:new",{interaction:this})}(t=[{key:"pointerMoveTolerance",get:function(){return 1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,t);var n=e.prototype;return n.pointerDown=function(t,e,n){var r=this.updatePointer(t,e,n,!0),i=this.pointers[r];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:n,pointerIndex:r,pointerInfo:i,type:"down",interaction:this})},n.start=function(t,e,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&((0,Mt.copyAction)(this.prepared,t),this.interactable=e,this.element=n,this.rect=e.getRect(n),this.edges=this.prepared.edges?(0,O.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)},n.pointerMove=function(t,e,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,n,!1);var r,i,a=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(r=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,D.default)(r,i)>this.pointerMoveTolerance);var o=this.getPointerIndex(t),s={pointer:t,pointerIndex:o,pointerInfo:this.pointers[o],event:e,type:"move",eventTarget:n,dx:r,dy:i,duplicate:a,interaction:this};a||H.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),a||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&H.copyCoords(this.coords.prev,this.coords.cur))},n.move=function(t){t&&t.event||H.setZeroCoords(this.coords.delta),(t=(0,O.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)},n.pointerUp=function(t,e,n,r){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,n,!1));var a=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:"+a,{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:n,type:a,curEventTarget:r,interaction:this}),this.simulation||this.end(e),this.removePointer(t,e)},n.documentBlur=function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})},n.end=function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),this._ending=!1,!0===e&&this.stop()},n.currentAction=function(){return this._interacting?this.prepared.name:null},n.interacting=function(){return this._interacting},n.stop=function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null},n.getPointerIndex=function(t){var e=H.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:G.findIndex(this.pointers,(function(t){return t.id===e}))},n.getPointerInfo=function(t){return this.pointers[this.getPointerIndex(t)]},n.updatePointer=function(t,e,n,r){var i=H.getPointerId(t),a=this.getPointerIndex(t),o=this.pointers[a];return r=!1!==r&&(r||/(down|start)$/i.test(e.type)),o?o.pointer=t:(o=new Te.PointerInfo(i,t,e,null,null),a=this.pointers.length,this.pointers.push(o)),H.setCoords(this.coords.cur,this.pointers.map((function(t){return t.pointer})),this._now()),H.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),r&&(this.pointerIsDown=!0,o.downTime=this.coords.cur.timeStamp,o.downTarget=n,H.pointerExtend(this.downPointer,t),this.interacting()||(H.copyCoords(this.coords.start,this.coords.cur),H.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,n),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:n,down:r,pointerInfo:o,pointerIndex:a,interaction:this}),a},n.removePointer=function(t,e){var n=this.getPointerIndex(t);if(-1!==n){var r=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:n,pointerInfo:r,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}},n._updateLatestPointer=function(t,e,n){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=n},n.destroy=function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null},n._createPreparedEvent=function(t,e,n,r){return new we.InteractEvent(this,t,this.prepared.name,e,this.element,n,r)},n._fireEvent=function(t){this.interactable.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)},n._doPhase=function(t){var e=t.event,n=t.phase,r=t.preEnd,i=t.type,a=this.rect;if(a&&"move"===n&&(M.addEdges(this.edges,a,this.coords.delta[this.interactable.options.deltaSource]),a.width=a.right-a.left,a.height=a.bottom-a.top),!1===this._scopeFire("interactions:before-action-"+n,t))return!1;var o=t.iEvent=this._createPreparedEvent(e,n,r,i);return this._scopeFire("interactions:action-"+n,t),"start"===n&&(this.prevEvent=o),this._fireEvent(o),this._scopeFire("interactions:after-action-"+n,t),!0},n._now=function(){return Date.now()},e}();Se.Interaction=Ce;var Oe=Ce;Se.default=Oe;var Me={};function Pe(t){t.pointerIsDown&&(De(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}function Ae(t){Ie(t.interaction)}function Ie(t){if(!function(t){return!(!t.offset.pending.x&&!t.offset.pending.y)}(t))return!1;var e=t.offset.pending;return De(t.coords.cur,e),De(t.coords.delta,e),M.addEdges(t.edges,t.rect,e),e.x=0,e.y=0,!0}function Le(t){var e=t.x,n=t.y;this.offset.pending.x+=e,this.offset.pending.y+=n,this.offset.total.x+=e,this.offset.total.y+=n}function De(t,e){var n=t.page,r=t.client,i=e.x,a=e.y;n.x+=i,n.y+=a,r.x+=i,r.y+=a}Object.defineProperty(Me,"__esModule",{value:!0}),Me.addTotal=Pe,Me.applyPending=Ie,Me.default=void 0,Se._ProxyMethods.offsetBy="";var Fe={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(t){t.Interaction.prototype.offsetBy=Le},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return Pe(t.interaction)},"interactions:before-action-start":Ae,"interactions:before-action-move":Ae,"interactions:before-action-end":function(t){var e=t.interaction;if(Ie(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}};Me.default=Fe;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.default=Ne.InertiaState=void 0;var ze=function(){function t(t){this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=null,this.modifierCount=0,this.modifierArg=null,this.startCoords=null,this.t0=0,this.v0=0,this.te=0,this.targetOffset=null,this.modifiedOffset=null,this.currentOffset=null,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=null,this.interaction=void 0,this.interaction=t}var e=t.prototype;return e.start=function(t){var e=this.interaction,n=He(e);if(!n||!n.enabled)return!1;var r=e.coords.velocity.client,i=(0,D.default)(r.x,r.y),a=this.modification||(this.modification=new ue.default(e));if(a.copyFrom(e.modification),this.t0=e._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg={interaction:e,interactable:e.interactable,element:e.element,rect:e.rect,edges:e.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-e.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(a.result=a.setAll(this.modifierArg),!a.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0},e.startInertia=function(){var t=this,e=this.interaction.coords.velocity.client,n=He(this.interaction),r=n.resistance,i=-Math.log(n.endSpeed/this.v0)/r;this.targetOffset={x:(e.x-i)/r,y:(e.y-i)/r},this.te=i,this.lambda_v0=r/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var a=this.modification,o=this.modifierArg;o.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},a.result=a.setAll(o),a.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+a.result.delta.x,y:this.targetOffset.y+a.result.delta.y}),this.onNextFrame((function(){return t.inertiaTick()}))},e.startSmoothEnd=function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return t.smoothEndTick()}))},e.onNextFrame=function(t){var e=this;this.timeout=bt.default.request((function(){e.active&&t()}))},e.inertiaTick=function(){var t,e,n,r,i,a=this,o=this.interaction,s=He(o).resistance,l=(o._now()-this.t0)/1e3;if(l<this.te){var c,d=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(t=this.targetOffset.x,e=this.targetOffset.y,n=this.modifiedOffset.x,r=this.modifiedOffset.y,c={x:Re(i=d,0,t,n),y:Re(i,0,e,r)}):c={x:this.targetOffset.x*d,y:this.targetOffset.y*d};var p={x:c.x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=p.x,this.currentOffset.y+=p.y,o.offsetBy(p),o.move(),this.onNextFrame((function(){return a.inertiaTick()}))}else o.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()},e.smoothEndTick=function(){var t=this,e=this.interaction,n=e._now()-this.t0,r=He(e).smoothEndDuration;if(n<r){var i={x:je(n,0,this.targetOffset.x,r),y:je(n,0,this.targetOffset.y,r)},a={x:i.x-this.currentOffset.x,y:i.y-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,e.offsetBy(a),e.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return t.smoothEndTick()}))}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()},e.resume=function(t){var e=t.pointer,n=t.event,r=t.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(e,n,r,!0),i._doPhase({interaction:i,event:n,phase:"resume"}),(0,H.copyCoords)(i.coords.prev,i.coords.cur),this.stop()},e.end=function(){this.interaction.move(),this.interaction.end(),this.stop()},e.stop=function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,bt.default.cancel(this.timeout)},t}();function He(t){var e=t.interactable,n=t.prepared;return e&&e.options&&n.name&&e.options[n.name].inertia}function Re(t,e,n,r){var i=1-t;return i*i*e+2*i*t*n+t*t*r}function je(t,e,n,r){return-n*(t/=r)*(t-2)+e}Ne.InertiaState=ze;var We={id:"inertia",before:["modifiers","actions"],install:function(t){var e=t.defaults;t.usePlugin(Me.default),t.usePlugin(ge.default),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new ze(e)},"interactions:before-action-end":function(t){var e=t.interaction,n=t.event;return(!e._interacting||e.simulation||!e.inertia.start(n))&&null},"interactions:down":function(t){var e=t.interaction,n=t.eventTarget,r=e.inertia;if(r.active)for(var i=n;a.default.element(i);){if(i===e.element){r.resume(t);break}i=x.parentNode(i)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":ge.addEventModifiers,"interactions:action-inertiastart":ge.addEventModifiers,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};Ne.default=We;var $e={};function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t.immediatePropagationStopped)break;r(t)}}Object.defineProperty($e,"__esModule",{value:!0}),$e.Eventable=void 0;var qe=function(){function t(t){this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=(0,O.default)({},t||{})}var e=t.prototype;return e.fire=function(t){var e,n=this.global;(e=this.types[t.type])&&Be(t,e),!t.propagationStopped&&n&&(e=n[t.type])&&Be(t,e)},e.on=function(t,e){var n=(0,I.default)(t,e);for(t in n)this.types[t]=G.merge(this.types[t]||[],n[t])},e.off=function(t,e){var n=(0,I.default)(t,e);for(t in n){var r=this.types[t];if(r&&r.length)for(var i=0;i<n[t].length;i++){var a=n[t][i],o=r.indexOf(a);-1!==o&&r.splice(o,1)}}},e.getRect=function(t){return null},t}();$e.Eventable=qe;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=function(t,e){if(e.phaselessTypes[t])return!0;for(var n in e.map)if(0===t.indexOf(n)&&t.substr(n.length)in e.phases)return!0;return!1};var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.Interactable=void 0;var Ge=function(){var t;function n(t,n,r,i){this.options=void 0,this._actions=void 0,this.target=void 0,this.events=new $e.Eventable,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._rectChecker=void 0,this._actions=n.actions,this.target=t,this._context=n.context||r,this._win=(0,e.getWindow)((0,x.trySelector)(t)?this._context:t),this._doc=this._win.document,this._scopeEvents=i,this.set(n)}(t=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(n.prototype,t);var r=n.prototype;return r.setOnEvents=function(t,e){return a.default.func(e.onstart)&&this.on(t+"start",e.onstart),a.default.func(e.onmove)&&this.on(t+"move",e.onmove),a.default.func(e.onend)&&this.on(t+"end",e.onend),a.default.func(e.oninertiastart)&&this.on(t+"inertiastart",e.oninertiastart),this},r.updatePerActionListeners=function(t,e,n){(a.default.array(e)||a.default.object(e))&&this.off(t,e),(a.default.array(n)||a.default.object(n))&&this.on(t,n)},r.setPerAction=function(t,e){var n=this._defaults;for(var r in e){var i=r,o=this.options[t],s=e[i];"listeners"===i&&this.updatePerActionListeners(t,o.listeners,s),a.default.array(s)?o[i]=G.from(s):a.default.plainObject(s)?(o[i]=(0,O.default)(o[i]||{},(0,pe.default)(s)),a.default.object(n.perAction[i])&&"enabled"in n.perAction[i]&&(o[i].enabled=!1!==s.enabled)):a.default.bool(s)&&a.default.object(n.perAction[i])?o[i].enabled=s:o[i]=s}},r.getRect=function(t){return t=t||(a.default.element(this.target)?this.target:null),a.default.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,x.getElementRect)(t)},r.rectChecker=function(t){var e=this;return a.default.func(t)?(this._rectChecker=t,this.getRect=function(t){var n=(0,O.default)({},e._rectChecker(t));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):null===t?(delete this.getRect,delete this._rectChecker,this):this.getRect},r._backCompatOption=function(t,e){if((0,x.trySelector)(e)||a.default.object(e)){for(var n in this.options[t]=e,this._actions.map)this.options[n][t]=e;return this}return this.options[t]},r.origin=function(t){return this._backCompatOption("origin",t)},r.deltaSource=function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},r.context=function(){return this._context},r.inContext=function(t){return this._context===t.ownerDocument||(0,x.nodeContains)(this._context,t)},r.testIgnoreAllow=function(t,e,n){return!this.testIgnore(t.ignoreFrom,e,n)&&this.testAllow(t.allowFrom,e,n)},r.testAllow=function(t,e,n){return!t||!!a.default.element(n)&&(a.default.string(t)?(0,x.matchesUpTo)(n,t,e):!!a.default.element(t)&&(0,x.nodeContains)(t,n))},r.testIgnore=function(t,e,n){return!(!t||!a.default.element(n))&&(a.default.string(t)?(0,x.matchesUpTo)(n,t,e):!!a.default.element(t)&&(0,x.nodeContains)(t,n))},r.fire=function(t){return this.events.fire(t),this},r._onOff=function(t,e,n,r){a.default.object(e)&&!a.default.array(e)&&(r=n,n=null);var i="on"===t?"add":"remove",o=(0,I.default)(e,n);for(var s in o){"wheel"===s&&(s=v.default.wheelEvent);for(var l=0;l<o[s].length;l++){var c=o[s][l];(0,Ue.default)(s,this._actions)?this.events[t](s,c):a.default.string(this.target)?this._scopeEvents[i+"Delegate"](this.target,this._context,s,c,r):this._scopeEvents[i](this.target,s,c,r)}}return this},r.on=function(t,e,n){return this._onOff("on",t,e,n)},r.off=function(t,e,n){return this._onOff("off",t,e,n)},r.set=function(t){var e=this._defaults;for(var n in a.default.object(t)||(t={}),this.options=(0,pe.default)(e.base),this._actions.methodDict){var r=n,i=this._actions.methodDict[r];this.options[r]={},this.setPerAction(r,(0,O.default)((0,O.default)({},e.perAction),e.actions[r])),this[i](t[r])}for(var o in t)a.default.func(this[o])&&this[o](t[o]);return this},r.unset=function(){if(a.default.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],n=e.length-1;n>=0;n--){var r=e[n],i=r.selector,o=r.context,s=r.listeners;i===this.target&&o===this._context&&e.splice(n,1);for(var l=s.length-1;l>=0;l--)this._scopeEvents.removeDelegate(this.target,this._context,t,s[l][0],s[l][1])}else this._scopeEvents.remove(this.target,"all")},n}();Ve.Interactable=Ge;var Ke={};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.InteractableSet=void 0;var Xe=function(){function t(t){var e=this;this.list=[],this.selectorMap={},this.scope=void 0,this.scope=t,t.addListeners({"interactable:unset":function(t){var n=t.interactable,r=n.target,i=n._context,o=a.default.string(r)?e.selectorMap[r]:r[e.scope.id],s=G.findIndex(o,(function(t){return t.context===i}));o[s]&&(o[s].context=null,o[s].interactable=null),o.splice(s,1)}})}var e=t.prototype;return e.new=function(t,e){e=(0,O.default)(e||{},{actions:this.scope.actions});var n=new this.scope.Interactable(t,e,this.scope.document,this.scope.events),r={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),a.default.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(r)):(n.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(r)),this.scope.fire("interactable:new",{target:t,options:e,interactable:n,win:this.scope._win}),n},e.get=function(t,e){var n=e&&e.context||this.scope.document,r=a.default.string(t),i=r?this.selectorMap[t]:t[this.scope.id];if(!i)return null;var o=G.find(i,(function(e){return e.context===n&&(r||e.interactable.inContext(t))}));return o&&o.interactable},e.forEachMatch=function(t,e){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=void 0;if((a.default.string(r.target)?a.default.element(t)&&x.matchesSelector(t,r.target):t===r.target)&&r.inContext(t)&&(i=e(r)),void 0!==i)return i}},t}();Ke.InteractableSet=Xe;var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=void 0;var Ze=function(){function t(t){this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=t,(0,F.default)(this,t)}var e=t.prototype;return e.preventOriginalDefault=function(){this.originalEvent.preventDefault()},e.stopPropagation=function(){this.originalEvent.stopPropagation()},e.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation()},t}();function Je(t){if(!a.default.object(t))return{capture:!!t,passive:!1};var e=(0,O.default)({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}var Qe={id:"events",install:function(t){var e=[],n={},r=[],i={add:o,remove:s,addDelegate:function(t,e,i,a,s){var d=Je(s);if(!n[i]){n[i]=[];for(var p=0;p<r.length;p++){var u=r[p];o(u,i,l),o(u,i,c,!0)}}var h=n[i],f=G.find(h,(function(n){return n.selector===t&&n.context===e}));f||(f={selector:t,context:e,listeners:[]},h.push(f)),f.listeners.push([a,d])},removeDelegate:function(t,e,r,i,a){var o,d=Je(a),p=n[r],u=!1;if(p)for(o=p.length-1;o>=0;o--){var h=p[o];if(h.selector===t&&h.context===e){for(var f=h.listeners,m=f.length-1;m>=0;m--){var g=f[m],y=g[0],v=g[1],b=v.capture,w=v.passive;if(y===i&&b===d.capture&&w===d.passive){f.splice(m,1),f.length||(p.splice(o,1),s(e,r,l),s(e,r,c,!0)),u=!0;break}}if(u)break}}},delegateListener:l,delegateUseCapture:c,delegatedEvents:n,documents:r,targets:e,supportsOptions:!1,supportsPassive:!1};function o(t,n,r,a){var o=Je(a),s=G.find(e,(function(e){return e.eventTarget===t}));s||(s={eventTarget:t,events:{}},e.push(s)),s.events[n]||(s.events[n]=[]),t.addEventListener&&!G.contains(s.events[n],r)&&(t.addEventListener(n,r,i.supportsOptions?o:o.capture),s.events[n].push(r))}function s(t,n,r,a){var o=Je(a),l=G.findIndex(e,(function(e){return e.eventTarget===t})),c=e[l];if(c&&c.events)if("all"!==n){var d=!1,p=c.events[n];if(p){if("all"===r){for(var u=p.length-1;u>=0;u--)s(t,n,p[u],o);return}for(var h=0;h<p.length;h++)if(p[h]===r){t.removeEventListener(n,r,i.supportsOptions?o:o.capture),p.splice(h,1),0===p.length&&(delete c.events[n],d=!0);break}}d&&!Object.keys(c.events).length&&e.splice(l,1)}else for(n in c.events)c.events.hasOwnProperty(n)&&s(t,n,"all")}function l(t,e){for(var r=Je(e),i=new Ze(t),o=n[t.type],s=H.getEventTargets(t)[0],l=s;a.default.element(l);){for(var c=0;c<o.length;c++){var d=o[c],p=d.selector,u=d.context;if(x.matchesSelector(l,p)&&x.nodeContains(u,s)&&x.nodeContains(u,l)){var h=d.listeners;i.currentTarget=l;for(var f=0;f<h.length;f++){var m=h[f],g=m[0],y=m[1],v=y.capture,b=y.passive;v===r.capture&&b===r.passive&&g(i)}}}l=x.parentNode(l)}}function c(t){return l(t,!0)}return t.document.createElement("div").addEventListener("test",null,{get capture(){return i.supportsOptions=!0},get passive(){return i.supportsPassive=!0}}),t.events=i,i}};Ye.default=Qe;var tn={};Object.defineProperty(tn,"__esModule",{value:!0}),tn.createInteractStatic=function(t){var e=function e(n,r){var i=t.interactables.get(n,r);return i||((i=t.interactables.new(n,r)).events.global=e.globalEvents),i};return e.getPointerAverage=H.pointerAverage,e.getTouchBBox=H.touchBBox,e.getTouchDistance=H.touchDistance,e.getTouchAngle=H.touchAngle,e.getElementRect=x.getElementRect,e.getElementClientRect=x.getElementClientRect,e.matchesSelector=x.matchesSelector,e.closest=x.closest,e.globalEvents={},e.version="1.10.2",e.scope=t,e.use=function(t,e){return this.scope.usePlugin(t,e),this},e.isSet=function(t,e){return!!this.scope.interactables.get(t,e&&e.context)},e.on=(0,Mt.warnOnce)((function(t,e,n){if(a.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.default.array(t)){for(var r=0;r<t.length;r++){var i=t[r];this.on(i,e,n)}return this}if(a.default.object(t)){for(var o in t)this.on(o,t[o],e);return this}return(0,Ue.default)(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:n}),this}),"The interact.on() method is being deprecated"),e.off=(0,Mt.warnOnce)((function(t,e,n){if(a.default.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),a.default.array(t)){for(var r=0;r<t.length;r++){var i=t[r];this.off(i,e,n)}return this}if(a.default.object(t)){for(var o in t)this.off(o,t[o],e);return this}var s;return(0,Ue.default)(t,this.scope.actions)?t in this.globalEvents&&-1!==(s=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(s,1):this.scope.events.remove(this.scope.document,t,e,n),this}),"The interact.off() method is being deprecated"),e.debug=function(){return this.scope},e.supportsTouch=function(){return v.default.supportsTouch},e.supportsPointerEvent=function(){return v.default.supportsPointerEvent},e.stop=function(){for(var t=0;t<this.scope.interactions.list.length;t++)this.scope.interactions.list[t].stop();return this},e.pointerMoveTolerance=function(t){return a.default.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance},e.addDocument=function(t,e){this.scope.addDocument(t,e)},e.removeDocument=function(t){this.scope.removeDocument(t)},e};var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.default=void 0;var nn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<nn.methodOrder.length;e++){var n;n=nn.methodOrder[e];var r=nn[n](t);if(r)return r}return null},simulationResume:function(t){var e=t.pointerType,n=t.eventType,r=t.eventTarget,i=t.scope;if(!/down|start/i.test(n))return null;for(var a=0;a<i.interactions.list.length;a++){var o=i.interactions.list[a],s=r;if(o.simulation&&o.simulation.allowResume&&o.pointerType===e)for(;s;){if(s===o.element)return o;s=x.parentNode(s)}}return null},mouseOrPen:function(t){var e,n=t.pointerId,r=t.pointerType,i=t.eventType,a=t.scope;if("mouse"!==r&&"pen"!==r)return null;for(var o=0;o<a.interactions.list.length;o++){var s=a.interactions.list[o];if(s.pointerType===r){if(s.simulation&&!rn(s,n))continue;if(s.interacting())return s;e||(e=s)}}if(e)return e;for(var l=0;l<a.interactions.list.length;l++){var c=a.interactions.list[l];if(!(c.pointerType!==r||/down/i.test(i)&&c.simulation))return c}return null},hasPointer:function(t){for(var e=t.pointerId,n=t.scope,r=0;r<n.interactions.list.length;r++){var i=n.interactions.list[r];if(rn(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,n=t.scope,r=0;r<n.interactions.list.length;r++){var i=n.interactions.list[r];if(1===i.pointers.length){var a=i.interactable;if(a&&(!a.options.gesture||!a.options.gesture.enabled))continue}else if(i.pointers.length>=2)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function rn(t,e){return t.pointers.some((function(t){return t.id===e}))}var an=nn;en.default=an;var on={};Object.defineProperty(on,"__esModule",{value:!0}),on.default=void 0;var sn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function ln(t,e){return function(n){var r=e.interactions.list,i=H.getPointerType(n),a=H.getEventTargets(n),o=a[0],s=a[1],l=[];if(/^touch/.test(n.type)){e.prevTouchTime=e.now();for(var c=0;c<n.changedTouches.length;c++){var d=n.changedTouches[c],p={pointer:d,pointerId:H.getPointerId(d),pointerType:i,eventType:n.type,eventTarget:o,curEventTarget:s,scope:e},u=cn(p);l.push([p.pointer,p.eventTarget,p.curEventTarget,u])}}else{var h=!1;if(!v.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var f=0;f<r.length&&!h;f++)h="mouse"!==r[f].pointerType&&r[f].pointerIsDown;h=h||e.now()-e.prevTouchTime<500||0===n.timeStamp}if(!h){var m={pointer:n,pointerId:H.getPointerId(n),pointerType:i,eventType:n.type,curEventTarget:s,eventTarget:o,scope:e},g=cn(m);l.push([m.pointer,m.eventTarget,m.curEventTarget,g])}}for(var y=0;y<l.length;y++){var b=l[y],w=b[0],x=b[1],T=b[2];b[3][t](w,n,x,T)}}}function cn(t){var e=t.pointerType,n=t.scope,r={interaction:en.default.search(t),searchDetails:t};return n.fire("interactions:find",r),r.interaction||n.interactions.new({pointerType:e})}function dn(t,e){var n=t.doc,r=t.scope,i=t.options,a=r.interactions.docEvents,o=r.events,s=o[e];for(var l in r.browser.isIOS&&!i.events&&(i.events={passive:!1}),o.delegatedEvents)s(n,l,o.delegateListener),s(n,l,o.delegateUseCapture,!0);for(var c=i&&i.events,d=0;d<a.length;d++){var p=a[d];s(n,p.type,p.listener,c)}}var pn={id:"core/interactions",install:function(t){for(var e={},n=0;n<sn.length;n++){var r=sn[n];e[r]=ln(r,t)}var i,a=v.default.pEventTypes;function o(){for(var e=0;e<t.interactions.list.length;e++){var n=t.interactions.list[e];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var r=function(){var e=n.pointers[i];t.documents.some((function(t){var n=t.doc;return(0,x.nodeContains)(n,e.downTarget)}))||n.removePointer(e.pointer,e.event)},i=0;i<n.pointers.length;i++)r()}}(i=f.default.PointerEvent?[{type:a.down,listener:o},{type:a.down,listener:e.pointerDown},{type:a.move,listener:e.pointerMove},{type:a.up,listener:e.pointerUp},{type:a.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:o},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var n=0;n<t.interactions.list.length;n++)t.interactions.list[n].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(e){var n,r,i;function a(){return e.apply(this,arguments)||this}return r=e,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,a.prototype._now=function(){return t.now()},(i=[{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(a.prototype,i),a}(Se.default),t.interactions={list:[],new:function(e){e.scopeFire=function(e,n){return t.fire(e,n)};var n=new t.Interaction(e);return t.interactions.list.push(n),n},listeners:e,docEvents:i,pointerMoveTolerance:1},t.usePlugin(Jt.default)},listeners:{"scope:add-document":function(t){return dn(t,"add")},"scope:remove-document":function(t){return dn(t,"remove")},"interactable:unset":function(t,e){for(var n=t.interactable,r=e.interactions.list.length-1;r>=0;r--){var i=e.interactions.list[r];i.interactable===n&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),e.interactions.list.length>2&&e.interactions.list.splice(r,1))}}},onDocSignal:dn,doOnInteractions:ln,methodNames:sn};on.default=pn;var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.initScope=fn,un.Scope=void 0;var hn=function(){function t(){var t=this;this.id="__interact_scope_"+Math.floor(100*Math.random()),this.isInitialized=!1,this.listenerMaps=[],this.browser=v.default,this.defaults=(0,pe.default)(be.defaults),this.Eventable=$e.Eventable,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(0,tn.createInteractStatic)(this),this.InteractEvent=we.InteractEvent,this.Interactable=void 0,this.interactables=new Ke.InteractableSet(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(e){return t.removeDocument(e.target)};var e=this;this.Interactable=function(t){var n,r;function i(){return t.apply(this,arguments)||this}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a,o=i.prototype;return o.set=function(n){return t.prototype.set.call(this,n),e.fire("interactable:set",{options:n,interactable:this}),this},o.unset=function(){t.prototype.unset.call(this),e.interactables.list.splice(e.interactables.list.indexOf(this),1),e.fire("interactable:unset",{interactable:this})},(a=[{key:"_defaults",get:function(){return e.defaults}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(i.prototype,a),i}(Ve.Interactable)}var n=t.prototype;return n.addListeners=function(t,e){this.listenerMaps.push({id:e,map:t})},n.fire=function(t,e){for(var n=0;n<this.listenerMaps.length;n++){var r=this.listenerMaps[n].map[t];if(r&&!1===r(e,this,t))return!1}},n.init=function(t){return this.isInitialized?this:fn(this,t)},n.pluginIsInstalled=function(t){return this._plugins.map[t.id]||-1!==this._plugins.list.indexOf(t)},n.usePlugin=function(t,e){if(!this.isInitialized)return this;if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var n=0,r=this.listenerMaps.length,i=t.before.reduce((function(t,e){return t[e]=!0,t[mn(e)]=!0,t}),{});n<r;n++){var a=this.listenerMaps[n].id;if(i[a]||i[mn(a)])break}this.listenerMaps.splice(n,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this},n.addDocument=function(t,n){if(-1!==this.getDocIndex(t))return!1;var r=e.getWindow(t);n=n?(0,O.default)({},n):{},this.documents.push({doc:t,options:n}),this.events.documents.push(t),t!==this.document&&this.events.add(r,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:r,scope:this,options:n})},n.removeDocument=function(t){var n=this.getDocIndex(t),r=e.getWindow(t),i=this.documents[n].options;this.events.remove(r,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:t,window:r,scope:this,options:i})},n.getDocIndex=function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1},n.getDocOptions=function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options},n.now=function(){return(this.window.Date||Date).now()},t}();function fn(t,n){return t.isInitialized=!0,e.init(n),f.default.init(n),v.default.init(n),bt.default.init(n),t.window=n,t.document=n.document,t.usePlugin(on.default),t.usePlugin(Ye.default),t}function mn(t){return t&&t.replace(/\/.*$/,"")}un.Scope=hn;var gn={};Object.defineProperty(gn,"__esModule",{value:!0}),gn.init=gn.default=void 0;var yn=new un.Scope,vn=yn.interactStatic;gn.default=vn;var bn=function(t){return yn.init(t)};gn.init=bn,"object"==typeof window&&window&&bn(window);var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.default=void 0,wn.default=function(){};var xn={};Object.defineProperty(xn,"__esModule",{value:!0}),xn.default=void 0,xn.default=function(){};var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.default=void 0,Tn.default=function(t){var e=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(e){var n=e[0],r=e[1];return n in t||r in t})),n=function(n,r){for(var i=t.range,a=t.limits,o=void 0===a?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:a,s=t.offset,l=void 0===s?{x:0,y:0}:s,c={range:i,grid:t,x:null,y:null},d=0;d<e.length;d++){var p=e[d],u=p[0],h=p[1],f=Math.round((n-l.x)/t[u]),m=Math.round((r-l.y)/t[h]);c[u]=Math.max(o.left,Math.min(o.right,f*t[u]+l.x)),c[h]=Math.max(o.top,Math.min(o.bottom,m*t[h]+l.y))}return c};return n.grid=t,n.coordFields=e,n};var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),Object.defineProperty(kn,"edgeTarget",{enumerable:!0,get:function(){return wn.default}}),Object.defineProperty(kn,"elements",{enumerable:!0,get:function(){return xn.default}}),Object.defineProperty(kn,"grid",{enumerable:!0,get:function(){return Tn.default}});var _n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.default=void 0;var Sn={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=(0,O.default)(e.snappers||{},kn),e.createSnapGrid=e.snappers.grid}};_n.default=Sn;var En={};function Cn(){return(Cn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}Object.defineProperty(En,"__esModule",{value:!0}),En.aspectRatio=En.default=void 0;var On={start:function(t){var e=t.state,n=t.rect,r=t.edges,i=t.pageCoords,a=e.options.ratio,o=e.options,s=o.equalDelta,l=o.modifiers;"preserve"===a&&(a=n.width/n.height),e.startCoords=(0,O.default)({},i),e.startRect=(0,O.default)({},n),e.ratio=a,e.equalDelta=s;var c=e.linkedEdges={top:r.top||r.left&&!r.bottom,left:r.left||r.top&&!r.right,bottom:r.bottom||r.right&&!r.top,right:r.right||r.bottom&&!r.left};if(e.xIsPrimaryAxis=!(!r.left&&!r.right),e.equalDelta)e.edgeSign=(c.left?1:-1)*(c.top?1:-1);else{var d=e.xIsPrimaryAxis?c.top:c.left;e.edgeSign=d?-1:1}if((0,O.default)(t.edges,c),l&&l.length){var p=new ue.default(t.interaction);p.copyFrom(t.interaction.modification),p.prepareStates(l),e.subModification=p,p.startAll(Cn({},t))}},set:function(t){var e=t.state,n=t.rect,r=t.coords,i=(0,O.default)({},r),a=e.equalDelta?Mn:Pn;if(a(e,e.xIsPrimaryAxis,r,n),!e.subModification)return null;var o=(0,O.default)({},n);(0,M.addEdges)(e.linkedEdges,o,{x:r.x-i.x,y:r.y-i.y});var s=e.subModification.setAll(Cn({},t,{rect:o,edges:e.linkedEdges,pageCoords:r,prevCoords:r,prevRect:o})),l=s.delta;return s.changed&&(a(e,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,O.default)(r,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function Mn(t,e,n){var r=t.startCoords,i=t.edgeSign;e?n.y=r.y+(n.x-r.x)*i:n.x=r.x+(n.y-r.y)*i}function Pn(t,e,n,r){var i=t.startRect,a=t.startCoords,o=t.ratio,s=t.edgeSign;if(e){var l=r.width/o;n.y=a.y+(l-i.height)*s}else{var c=r.height*o;n.x=a.x+(c-i.width)*s}}En.aspectRatio=On;var An=(0,ge.makeModifier)(On,"aspectRatio");En.default=An;var In={};Object.defineProperty(In,"__esModule",{value:!0}),In.default=void 0;var Ln=function(){};Ln._defaults={};var Dn=Ln;In.default=Dn;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Object.defineProperty(Fn,"default",{enumerable:!0,get:function(){return In.default}});var Nn={};function zn(t,e,n){return a.default.func(t)?M.resolveRectLike(t,e.interactable,e.element,[n.x,n.y,e]):M.resolveRectLike(t,e.interactable,e.element)}Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.getRestrictionRect=zn,Nn.restrict=Nn.default=void 0;var Hn={start:function(t){var e=t.rect,n=t.startOffset,r=t.state,i=t.interaction,a=t.pageCoords,o=r.options,s=o.elementRect,l=(0,O.default)({left:0,top:0,right:0,bottom:0},o.offset||{});if(e&&s){var c=zn(o.restriction,i,a);if(c){var d=c.right-c.left-e.width,p=c.bottom-c.top-e.height;d<0&&(l.left+=d,l.right+=d),p<0&&(l.top+=p,l.bottom+=p)}l.left+=n.left-e.width*s.left,l.top+=n.top-e.height*s.top,l.right+=n.right-e.width*(1-s.right),l.bottom+=n.bottom-e.height*(1-s.bottom)}r.offset=l},set:function(t){var e=t.coords,n=t.interaction,r=t.state,i=r.options,a=r.offset,o=zn(i.restriction,n,e);if(o){var s=M.xywhToTlbr(o);e.x=Math.max(Math.min(s.right-a.right,e.x),s.left+a.left),e.y=Math.max(Math.min(s.bottom-a.bottom,e.y),s.top+a.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Nn.restrict=Hn;var Rn=(0,ge.makeModifier)(Hn,"restrict");Nn.default=Rn;var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.restrictEdges=jn.default=void 0;var Wn={top:1/0,left:1/0,bottom:-1/0,right:-1/0},$n={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Bn(t,e){for(var n=["top","left","bottom","right"],r=0;r<n.length;r++){var i=n[r];i in t||(t[i]=e[i])}return t}var qn={noInner:Wn,noOuter:$n,start:function(t){var e,n=t.interaction,r=t.startOffset,i=t.state,a=i.options;if(a){var o=(0,Nn.getRestrictionRect)(a.offset,n,n.coords.start.page);e=M.rectToXY(o)}e=e||{x:0,y:0},i.offset={top:e.y+r.top,left:e.x+r.left,bottom:e.y-r.bottom,right:e.x-r.right}},set:function(t){var e=t.coords,n=t.edges,r=t.interaction,i=t.state,a=i.offset,o=i.options;if(n){var s=(0,O.default)({},e),l=(0,Nn.getRestrictionRect)(o.inner,r,s)||{},c=(0,Nn.getRestrictionRect)(o.outer,r,s)||{};Bn(l,Wn),Bn(c,$n),n.top?e.y=Math.min(Math.max(c.top+a.top,s.y),l.top+a.top):n.bottom&&(e.y=Math.max(Math.min(c.bottom+a.bottom,s.y),l.bottom+a.bottom)),n.left?e.x=Math.min(Math.max(c.left+a.left,s.x),l.left+a.left):n.right&&(e.x=Math.max(Math.min(c.right+a.right,s.x),l.right+a.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};jn.restrictEdges=qn;var Un=(0,ge.makeModifier)(qn,"restrictEdges");jn.default=Un;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.restrictRect=Vn.default=void 0;var Gn=(0,O.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},Nn.restrict.defaults),Kn={start:Nn.restrict.start,set:Nn.restrict.set,defaults:Gn};Vn.restrictRect=Kn;var Xn=(0,ge.makeModifier)(Kn,"restrictRect");Vn.default=Xn;var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.restrictSize=Yn.default=void 0;var Zn={width:-1/0,height:-1/0},Jn={width:1/0,height:1/0},Qn={start:function(t){return jn.restrictEdges.start(t)},set:function(t){var e=t.interaction,n=t.state,r=t.rect,i=t.edges,a=n.options;if(i){var o=M.tlbrToXywh((0,Nn.getRestrictionRect)(a.min,e,t.coords))||Zn,s=M.tlbrToXywh((0,Nn.getRestrictionRect)(a.max,e,t.coords))||Jn;n.options={endOnly:a.endOnly,inner:(0,O.default)({},jn.restrictEdges.noInner),outer:(0,O.default)({},jn.restrictEdges.noOuter)},i.top?(n.options.inner.top=r.bottom-o.height,n.options.outer.top=r.bottom-s.height):i.bottom&&(n.options.inner.bottom=r.top+o.height,n.options.outer.bottom=r.top+s.height),i.left?(n.options.inner.left=r.right-o.width,n.options.outer.left=r.right-s.width):i.right&&(n.options.inner.right=r.left+o.width,n.options.outer.right=r.left+s.width),jn.restrictEdges.set(t),n.options=a}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Yn.restrictSize=Qn;var tr=(0,ge.makeModifier)(Qn,"restrictSize");Yn.default=tr;var er={};Object.defineProperty(er,"__esModule",{value:!0}),Object.defineProperty(er,"default",{enumerable:!0,get:function(){return In.default}});var nr={};Object.defineProperty(nr,"__esModule",{value:!0}),nr.snap=nr.default=void 0;var rr={start:function(t){var e,n=t.interaction,r=t.interactable,i=t.element,a=t.rect,o=t.state,s=t.startOffset,l=o.options,c=l.offsetWithOrigin?function(t){var e=t.interaction.element;return(0,M.rectToXY)((0,M.resolveRectLike)(t.state.options.origin,null,null,[e]))||(0,A.default)(t.interactable,e,t.interaction.prepared.name)}(t):{x:0,y:0};if("startCoords"===l.offset)e={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var d=(0,M.resolveRectLike)(l.offset,r,i,[n]);(e=(0,M.rectToXY)(d)||{x:0,y:0}).x+=c.x,e.y+=c.y}var p=l.relativePoints;o.offsets=a&&p&&p.length?p.map((function(t,n){return{index:n,relativePoint:t,x:s.left-a.width*t.x+e.x,y:s.top-a.height*t.y+e.y}})):[(0,O.default)({index:0,relativePoint:null},e)]},set:function(t){var e=t.interaction,n=t.coords,r=t.state,i=r.options,o=r.offsets,s=(0,A.default)(e.interactable,e.element,e.prepared.name),l=(0,O.default)({},n),c=[];i.offsetWithOrigin||(l.x-=s.x,l.y-=s.y);for(var d=0;d<o.length;d++)for(var p=o[d],u=l.x-p.x,h=l.y-p.y,f=0,m=i.targets.length;f<m;f++){var g,y=i.targets[f];(g=a.default.func(y)?y(u,h,e._proxy,p,f):y)&&c.push({x:(a.default.number(g.x)?g.x:u)+p.x,y:(a.default.number(g.y)?g.y:h)+p.y,range:a.default.number(g.range)?g.range:i.range,source:y,index:f,offset:p})}for(var v={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<c.length;b++){var w=c[b],x=w.range,T=w.x-l.x,k=w.y-l.y,_=(0,D.default)(T,k),S=_<=x;x===1/0&&v.inRange&&v.range!==1/0&&(S=!1),v.target&&!(S?v.inRange&&x!==1/0?_/x<v.distance/v.range:x===1/0&&v.range!==1/0||_<v.distance:!v.inRange&&_<v.distance)||(v.target=w,v.distance=_,v.range=x,v.inRange=S,v.delta.x=T,v.delta.y=k)}return v.inRange&&(n.x=v.target.x,n.y=v.target.y),r.closest=v,v},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};nr.snap=rr;var ir=(0,ge.makeModifier)(rr,"snap");nr.default=ir;var ar={};Object.defineProperty(ar,"__esModule",{value:!0}),ar.snapSize=ar.default=void 0;var or={start:function(t){var e=t.state,n=t.edges,r=e.options;if(!n)return null;t.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:r.offset||"self",origin:{x:0,y:0},range:r.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],nr.snap.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e=t.interaction,n=t.state,r=t.coords,i=n.options,o=n.offsets,s={x:r.x-o[0].x,y:r.y-o[0].y};n.options=(0,O.default)({},i),n.options.targets=[];for(var l=0;l<(i.targets||[]).length;l++){var c=(i.targets||[])[l],d=void 0;if(d=a.default.func(c)?c(s.x,s.y,e):c){for(var p=0;p<n.targetFields.length;p++){var u=n.targetFields[p],h=u[0],f=u[1];if(h in d||f in d){d.x=d[h],d.y=d[f];break}}n.options.targets.push(d)}}var m=nr.snap.set(t);return n.options=i,m},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};ar.snapSize=or;var sr=(0,ge.makeModifier)(or,"snapSize");ar.default=sr;var lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.snapEdges=lr.default=void 0;var cr={start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],ar.snapSize.start(t)):null},set:ar.snapSize.set,defaults:(0,O.default)((0,pe.default)(ar.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};lr.snapEdges=cr;var dr=(0,ge.makeModifier)(cr,"snapEdges");lr.default=dr;var pr={};Object.defineProperty(pr,"__esModule",{value:!0}),Object.defineProperty(pr,"default",{enumerable:!0,get:function(){return In.default}});var ur={};Object.defineProperty(ur,"__esModule",{value:!0}),Object.defineProperty(ur,"default",{enumerable:!0,get:function(){return In.default}});var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=void 0;var fr={aspectRatio:En.default,restrictEdges:jn.default,restrict:Nn.default,restrictRect:Vn.default,restrictSize:Yn.default,snapEdges:lr.default,snap:nr.default,snapSize:ar.default,spring:pr.default,avoid:Fn.default,transform:ur.default,rubberband:er.default};hr.default=fr;var mr={};Object.defineProperty(mr,"__esModule",{value:!0}),mr.default=void 0;var gr={id:"modifiers",install:function(t){var e=t.interactStatic;for(var n in t.usePlugin(ge.default),t.usePlugin(_n.default),e.modifiers=hr.default,hr.default){var r=hr.default[n],i=r._defaults,a=r._methods;i._methods=a,t.defaults.perAction[n]=i}}};mr.default=gr;var yr={};Object.defineProperty(yr,"__esModule",{value:!0}),yr.default=void 0,yr.default={};var vr={};function br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Object.defineProperty(vr,"__esModule",{value:!0}),vr.PointerEvent=vr.default=void 0;var wr=function(t){var e,n;function r(e,n,r,i,a,o){var s;if((s=t.call(this,a)||this).type=void 0,s.originalEvent=void 0,s.pointerId=void 0,s.pointerType=void 0,s.double=void 0,s.pageX=void 0,s.pageY=void 0,s.clientX=void 0,s.clientY=void 0,s.dt=void 0,s.eventable=void 0,H.pointerExtend(br(s),r),r!==n&&H.pointerExtend(br(s),n),s.timeStamp=o,s.originalEvent=r,s.type=e,s.pointerId=H.getPointerId(n),s.pointerType=H.getPointerType(n),s.target=i,s.currentTarget=null,"tap"===e){var l=a.getPointerIndex(n);s.dt=s.timeStamp-a.pointers[l].downTime;var c=s.timeStamp-a.tapTime;s.double=!!(a.prevTap&&"doubletap"!==a.prevTap.type&&a.prevTap.target===s.target&&c<500)}else"doubletap"===e&&(s.dt=n.timeStamp-a.tapTime);return s}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i._subtractOrigin=function(t){var e=t.x,n=t.y;return this.pageX-=e,this.pageY-=n,this.clientX-=e,this.clientY-=n,this},i._addOrigin=function(t){var e=t.x,n=t.y;return this.pageX+=e,this.pageY+=n,this.clientX+=e,this.clientY+=n,this},i.preventDefault=function(){this.originalEvent.preventDefault()},r}(U.BaseEvent);vr.PointerEvent=vr.default=wr;var xr={};Object.defineProperty(xr,"__esModule",{value:!0}),xr.default=void 0;var Tr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(t){t.pointerEvents=Tr,t.defaults.actions.pointerEvents=Tr.defaults,(0,O.default)(t.actions.phaselessTypes,Tr.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,n=t.pointerInfo;!e&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;t.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&Sr(t),kr({interaction:n,pointer:r,event:i,eventTarget:a,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.pointerIndex,s=n.pointers[o].hold,l=x.getPath(a),c={interaction:n,pointer:r,event:i,eventTarget:a,type:"hold",targets:[],path:l,node:null},d=0;d<l.length;d++){var p=l[d];c.node=p,e.fire("pointerEvents:collect-targets",c)}if(c.targets.length){for(var u=1/0,h=0;h<c.targets.length;h++){var f=c.targets[h].eventable.options.holdDuration;f<u&&(u=f)}s.duration=u,s.timeout=setTimeout((function(){kr({interaction:n,eventTarget:a,pointer:r,event:i,type:"hold"},e)}),u)}}(t,e),kr(t,e)},"interactions:up":function(t,e){Sr(t),kr(t,e),function(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget;n.pointerWasMoved||kr({interaction:n,eventTarget:a,pointer:r,event:i,type:"tap"},e)}(t,e)},"interactions:cancel":function(t,e){Sr(t),kr(t,e)}},PointerEvent:vr.PointerEvent,fire:kr,collectEventTargets:_r,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function kr(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.type,s=t.targets,l=void 0===s?_r(t,e):s,c=new vr.PointerEvent(o,r,i,a,n,e.now());e.fire("pointerEvents:new",{pointerEvent:c});for(var d={interaction:n,pointer:r,event:i,eventTarget:a,targets:l,type:o,pointerEvent:c},p=0;p<l.length;p++){var u=l[p];for(var h in u.props||{})c[h]=u.props[h];var f=(0,A.default)(u.eventable,u.node);if(c._subtractOrigin(f),c.eventable=u.eventable,c.currentTarget=u.node,u.eventable.fire(c),c._addOrigin(f),c.immediatePropagationStopped||c.propagationStopped&&p+1<l.length&&l[p+1].node!==c.currentTarget)break}if(e.fire("pointerEvents:fired",d),"tap"===o){var m=c.double?kr({interaction:n,pointer:r,event:i,eventTarget:a,type:"doubletap"},e):c;n.prevTap=m,n.tapTime=m.timeStamp}return c}function _r(t,e){var n=t.interaction,r=t.pointer,i=t.event,a=t.eventTarget,o=t.type,s=n.getPointerIndex(r),l=n.pointers[s];if("tap"===o&&(n.pointerWasMoved||!l||l.downTarget!==a))return[];for(var c=x.getPath(a),d={interaction:n,pointer:r,event:i,eventTarget:a,type:o,path:c,targets:[],node:null},p=0;p<c.length;p++){var u=c[p];d.node=u,e.fire("pointerEvents:collect-targets",d)}return"hold"===o&&(d.targets=d.targets.filter((function(t){return t.eventable.options.holdDuration===n.pointers[s].hold.duration}))),d.targets}function Sr(t){var e=t.interaction,n=t.pointerIndex,r=e.pointers[n].hold;r&&r.timeout&&(clearTimeout(r.timeout),r.timeout=null)}var Er=Tr;xr.default=Er;var Cr={};function Or(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=void 0;var Mr={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(xr.default);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(t,e){return t["pointerEvents:"+e]=Or,t}),{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var n=t.interaction,r=t.pointerEvent,i=t.eventTarget,a=t.targets;if("hold"===r.type&&a.length){var o=a[0].eventable.options.holdRepeatInterval;o<=0||(n.holdIntervalHandle=setTimeout((function(){e.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:r,event:r},e)}),o))}}})};Cr.default=Mr;var Pr={};function Ar(t){return(0,O.default)(this.events.options,t),this}Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.default=void 0;var Ir={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=Ar;var n=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var r=n.call(this,t,e);return r===this&&(this.events.options[t]=e),r}},listeners:{"pointerEvents:collect-targets":function(t,e){var n=t.targets,r=t.node,i=t.type,a=t.eventTarget;e.interactables.forEachMatch(r,(function(t){var e=t.events,o=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(o,r,a)&&n.push({node:r,eventable:e,props:{interactable:t}})}))},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var n=t.interactable,r=t.options;(0,O.default)(n.events.options,e.pointerEvents.defaults),(0,O.default)(n.events.options,r.pointerEvents||{})}}};Pr.default=Ir;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.default=void 0;var Dr={id:"pointer-events",install:function(t){t.usePlugin(xr),t.usePlugin(Cr.default),t.usePlugin(Pr.default)}};Lr.default=Dr;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.default=void 0,Fr.default={};var Nr={};function zr(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,n){for(var r=a.default.string(t.target)?G.from(t._context.querySelectorAll(t.target)):[t.target],i=n.window.Promise,o=i?[]:null,s=function(){var a=r[l],s=t.getRect(a);if(!s)return"break";var c=G.find(n.interactions.list,(function(n){return n.interacting()&&n.interactable===t&&n.element===a&&n.prepared.name===e.name})),d=void 0;if(c)c.move(),o&&(d=c._reflowPromise||new i((function(t){c._reflowResolve=t})));else{var p=(0,M.tlbrToXywh)(s),u={page:{x:p.x,y:p.y},client:{x:p.x,y:p.y},timeStamp:n.now()},h=H.coordsToEvent(u);d=function(t,e,n,r,i){var a=t.interactions.new({pointerType:"reflow"}),o={interaction:a,event:i,pointer:i,eventTarget:n,phase:"reflow"};a.interactable=e,a.element=n,a.prevEvent=i,a.updatePointer(i,i,n,!0),H.setZeroCoords(a.coords.delta),(0,Mt.copyAction)(a.prepared,r),a._doPhase(o);var s=t.window.Promise,l=s?new s((function(t){a._reflowResolve=t})):void 0;return a._reflowPromise=l,a.start(r,e,n),a._interacting?(a.move(o),a.end(i)):(a.stop(),a._reflowResolve()),a.removePointer(i,i),l}(n,t,a,e,h)}o&&o.push(d)},l=0;l<r.length&&"break"!==s();l++);return o&&i.all(o).then((function(){return t}))}(this,e,t)}}Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.install=zr,Nr.default=void 0;var Hr={id:"reflow",install:zr,listeners:{"interactions:stop":function(t,e){var n=t.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),G.remove(e.interactions.list,n))}}};Nr.default=Hr;var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.default=void 0,Rr.default={};var jr={exports:{}};Object.defineProperty(jr.exports,"__esModule",{value:!0}),jr.exports.default=void 0,gn.default.use(yr.default),gn.default.use(Jt.default),gn.default.use(Me.default),gn.default.use(Zt.default),gn.default.use(vt.default),gn.default.use(Lr.default),gn.default.use(Ne.default),gn.default.use(mr.default),gn.default.use(Xt.default),gn.default.use(gt.default),gn.default.use(_t.default),gn.default.use(Nr.default),gn.default.use(de.default),gn.default.use(Rr.default),gn.default.use(Fr.default),gn.default.use(ie.default);var Wr=gn.default;if(jr.exports.default=Wr,jr)try{jr.exports=gn.default}catch(t){}gn.default.default=gn.default,jr=jr.exports;var $r={exports:{}};Object.defineProperty($r.exports,"__esModule",{value:!0}),$r.exports.default=void 0;var Br=jr.default;if($r.exports.default=Br,$r)try{$r.exports=jr.default}catch(t){}return jr.default.default=jr.default,$r.exports}()},6404:(t,e,n)=>{"use strict";n.r(e)},648:(t,e,n)=>{"use strict";n.r(e)},9186:(t,e,n)=>{"use strict";n.r(e)},6871:(t,e,n)=>{"use strict";n.r(e)},7826:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_cheatsheet=void 0,e.doc_cheatsheet={id:"cheatsheet",name:"Cheat Sheet",title:"Cheat Sheet",content:'\n\t<div class="flex">\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/expressions/literals">literals</a></th><th>example</th></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/integers">integer</a></td><td><code>42</code></td></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/reals">real</a></td><td><code>6.62607015e-34</code></td></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/strings">string</a></td><td><code>"This is a test.\\nNext line."</code></td></tr>\n\t<tr><td>range</td><td><code>20:30</code></td></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/arrays">array</a></td><td><code>["foo", 42, false];</code></td></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/dictionaries">dictionary</a></td><td><code>{foo: 42, "bar-bar": false}</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/statements">control structures</a></th><th>example / syntax</th></tr>\n\t<tr><td><a href="?doc#/language/statements/if-then-else">condition</a></td><td><code>if i == 0 then { ... } else { ... }</code></td></tr>\n\t<tr><td><a href="?doc#/language/statements/for-loops">for-loop</a></td><td><code>for var i in 0:n do { ... }</code></td></tr>\n\t<tr><td><a href="?doc#/language/statements/while-do-loops">while-do-loop</a></td><td><code>while not happy do { ... }</code></td></tr>\n\t<tr><td><a href="?doc#/language/statements/do-while-loops">do-while-loop</a></td><td><code>do { ... } while not happy;</code></td></tr>\n\t<tr><td><a href="?doc#/language/statements/try-catch">try-catch-block</a></td><td><code>try { ... } catch var ex do { ... }</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/syntax/comments">comments</a></th><th>example</th></tr>\n\t<tr><td>line comment</td><td><code># comment</code></td></tr>\n\t<tr><td>range comment</td><td><code>#* comment *#</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/declarations/variables">variables</a></th><th>example</th></tr>\n\t<tr><td>declare variable(s)</td><td><code>var a, b;</code></td></tr>\n\t<tr><td>declare and initialize</td><td><code>var c = 7;</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th>functions</th><th>example / syntax</th></tr>\n\t<tr><td><a href="?doc#/language/declarations/functions">function</a> or <a href="?doc#/language/declarations/classes">method</a></td><td><code>function myfunc (...) { ... }</code></td></tr>\n\t<tr><td><a href="?doc#/language/expressions/literals/anonymous-functions">lambda function</a></td><td><code>function (...) { ... }</code></td></tr>\n\t<tr><td>enclosing <a href="?doc#/language/expressions/literals/anonymous-functions">lambda function</a></td><td><code>function [...] (...) { ... }</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th>namespaces</th><th>example / syntax</th></tr>\n\t<tr><td>define <a href="?doc#/language/declarations/namespaces">namespace</a></td><td><code>namespace myspace { ... }</code></td></tr>\n\t<tr><td><a href="?doc#/language/directives/use">import</a> specific name(s)</td><td><code>from myspace use foo, bar;</code></td></tr>\n\t<tr><td><a href="?doc#/language/directives/use">import</a> whole namespace</td><td><code>use namespace myspace;</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/library">standard library</a></th><th>topic</th></tr>\n\t<tr><td><a href="?doc#/library/core">code functions</a></td><td>messages, time, errors, files, events</td></tr>\n\t<tr><td><a href="?doc#/library/math">math functions</a></td><td>e.g., sine and square root</td></tr>\n\t<tr><td><a href="?doc#/library/turtle">turtle graphics</a></td><td>simple graphics</td></tr>\n\t<tr><td><a href="?doc#/library/canvas">canvas graphics</a></td><td>powerful 2D graphics</td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/declarations/classes">classes</a></th><th>example / syntax</th></tr>\n\t<tr><td>define class</td><td><code>class MyStuff { ... }</code></td></tr>\n\t<tr><td>define subclass</td><td><code>class MyCoolStuff : MyStuff { ... }</code></td></tr>\n\t<tr><td>constructor</td><td><code>constructor (...) { ... }</code></td></tr>\n\t<tr><td>constructor calling super class</td><td><code>constructor (...) : super(...) { ... }</code></td></tr>\n\t<tr><td>visibility sections</td><td><code>public:</code><br/><code>protected:</code><br/><code>private:</code></td></tr>\n\t<tr><td>class-related keywords</td><td><code>static</code>, <code>this</code>, <code>super</code></td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/types">data type</a></th><th>values</th></tr>\n\t<tr><td><a href="?doc#/language/types/null"><code>Null</code></a></td><td><code>null</code></td></tr>\n\t<tr><td><a href="?doc#/language/types/boolean"><code>Boolean</code></a></td><td><code>true</code>, <code>false</code></td></tr>\n\t<tr><td><a href="?doc#/language/types/integer"><code>Integer</code></a></td><td>signed 32-bit integers</td></tr>\n\t<tr><td><a href="?doc#/language/types/real"><code>Real</code></a></td><td>floating point numbers</td></tr>\n\t<tr><td><a href="?doc#/language/types/string"><code>String</code></a></td><td>text</td></tr>\n\t<tr><td><a href="?doc#/language/types/array"><code>Array</code></a></td><td>ordered container with integer keys</td></tr>\n\t<tr><td><a href="?doc#/language/types/dictionary"><code>Dictionary</code></a></td><td>associative container with string keys</td></tr>\n\t<tr><td><a href="?doc#/language/types/function"><code>Function</code></a></td><td>function, lambda function, method</td></tr>\n\t<tr><td><a href="?doc#/language/types/range"><code>Range</code></a></td><td>range of integers, <code>from:to</code></td></tr>\n\t<tr><td><a href="?doc#/language/types/type"><code>Type</code></a></td><td>description of a type</td></tr>\n\t</table>\n\t<table class="nicetable">\n\t<tr><th><a href="?doc#/language/expressions/precedence">operator</a></th><th>meaning</th></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/addition"><code>+</code></a></td><td>addition</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/subtraction"><code>-</code></a></td><td>negation, subtraction</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/multiplication"><code>*</code></a></td><td>multiplication</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/real-division"><code>/</code></a></td><td>real division</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/integer-division"><code>//</code></a></td><td>integer division</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/modulo"><code>%</code></a></td><td>modulo</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/power"><code>^</code></a></td><td>power</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/equality"><code>==</code>, <code>!=</code></a></td><td>equality</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/order"><code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></a></td><td>order comparison</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/unary-operators/not"><code>not</code></a></td><td>logical or bitwise not</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/and"><code>and</code></a></td><td>logical or bitwise and</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/or"><code>or</code></a></td><td>logical or bitwise or</td></tr>\n\t<tr><td><a href="?doc#/language/expressions/binary-operators/xor"><code>xor</code></a></td><td>logical or bitwise exclusive or</td></tr>\n\t</table>\n\t</div>\n',children:[]}},8253:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_concepts=void 0,e.doc_concepts={id:"concepts",name:"Core Concepts",title:"Core Concepts of the TScript Programming Language",content:'\n\t<p>\n\tThe TScript language is carefully designed with the goal to create\n\tan ideal programming language for programming beginners. This\n\toverarching goal encompasses a number of sub-goals and design\n\tprinciples.\n\t<ul>\n\t<li>\n\t\t<b>Visual Tasks.</b>\n\t\tProgramming beginners are new to programming, but they are\n\t\tusually not new to computers. Their expectation is to program\n\t\tthings they experienced before, in particular graphical user\n\t\tinterfaces. They may quickly lose interest when being confronted\n\t\twith writing console programs they can hardly relate to.\n\t\tTherefore TScript comes with easy-to-use graphics programming\n\t\tlibraries: an extremely simple one for turtle graphics, and a\n\t\tlittle more advanced one featuring a canvas for drawing and for\n\t\treceiving user input.\n\t</li>\n\t<li>\n\t\t<b>Avoid error-prone constructions.</b>\n\t\tSurprisingly many programming languages carry a legacy of\n\t\tconstructions around that are known to be problematic in one way\n\t\tor another, going far beyond the infamous\n\t\t<code class="code">goto</code> statement.\n\t\tExamples are macros in C++, the division operator of Python 2,\n\t\tJavascript\'s default behavior of turning assignments to mistyped\n\t\tvariables into globals, obscure scoping rules, and improper\n\t\tinformation hiding in classes. TScript aims to be strict about\n\t\tsuch issues, in the conviction that this is the best way to\n\t\tavoid many small but hard to find errors that will frustrate\n\t\tbeginners.\n\t</li>\n\t<li>\n\t\t<b>Clean syntax.</b>\n\t\tThe C-family of programming languages is known for its rather\n\t\tverbose syntax and for its extensive use of special characters\n\t\tin expressions. For example, the statement\n\t\t\t<div>\n\t\t\t\t<code class="code">for (i=0; a[i]; i++) *a[i] = *(b++) = -(c++);</code>\n\t\t\t</div>\n\t\tmakes perfect sense in C, but it is hard to parse, not only for\n\t\tbeginners.\n\t\tWhile TScript builds on the expressiveness of operators, it\n\t\ttries to avoid some of the complications of C. First of all,\n\t\tthere are no pointers, and hence no pointer arithmetics. Second,\n\t\tassignments cannot be chained because they do not return a\n\t\tvalue, which enforces a clean separation of tests and side\n\t\teffects. Third, core language constructs like conditions and\n\t\tloops use a rather keyword-rich and verbose syntax without\n\t\tparentheses.\n\t</li>\n\t<li>\n\t\t<b>Better fail than do the wrong thing.</b>\n\t\tSometimes it is convenient to handle inputs gracefully. For\n\t\texample, when expecting an integer, one may accept a string\n\t\trepresenting an integer as a decimal number. Another example is\n\t\tthe implicit conversion of integers and even strings to\n\t\tbooleans, which allows such types to appear in conditions.\n\t\tTScript largely disallows such code. The only implicit\n\t\tconversions are between integers and reals holding actual\n\t\tinteger values, and conversions to string when printing. The\n\t\treason is that implicit conversions can be really irritating, in\n\t\tparticular for beginners, in case that things go wrong and the\n\t\tconversion is unintended. Then the better solution is to demand\n\t\tan explicit cast and to fail otherwise with a clear error\n\t\tmessage that points the programmer to the problem.\n\t</li>\n\t<li>\n\t\t<b>Implementation of all standard concepts.</b> TScript is a\n\t\tpretty complete imperative and object oriented programming\n\t\tlanguage, in the sense that it covers all the standard\n\t\tconstructions like conditionals, loops, functions, classes,\n\t\tnamespaces, and the like. This is important since its aim is to\n\t\tprepare the programmer for work with other languages designed\n\t\tfor more serious use. There are some exception to the above\n\t\trule, i.e., TScript does not come with a switch-case construct,\n\t\tit does not have a ternary operator, and it does not allow for\n\t\toperator overloading.\n\t</li>\n\t</ul>\n\t</p>\n\t<p>\n\tThe following documents should be helpful for readers with some\n\tprogramming experience to get an quick overview of tscript:\n\t<ul>\n\t<li><a href="?doc#/cheatsheet">Cheat Sheet</a></li>\n\t<li><a href="?doc#/concepts/overview">The Language at a Glance</a></li>\n\t<li><a href="?doc#/concepts/design">Design Decisions</a></li>\n\t<li><a href="?doc#/concepts/arithmetics">Arithmetics</a></li>\n\t</ul>\n\t</p>\n',children:[{id:"overview",name:"The Language at a Glance",title:"The Language at a Glance",content:'\n\t\t<p>\n\t\tTScript is an imperative and object oriented language. In many\n\t\taspects it has similarities to "scripting" languages like Python\n\t\tand Javascript: code is executed as it is encountered, so there\n\t\tis no explicit entry point, variables are untyped, they\n\t\treference values instead of containing them, and memory is fully\n\t\tmanaged.\n\t\t</p>\n\t\t<p>\n\t\tFor a closer look, let\'s start with an example:\n\t\t<tscript>\n\t\t\tfor var i in 0:10 do print(93 - 8 * i);\n\t\t</tscript>\n\t\tThis line reveals a lot about the syntax of the language. First\n\t\tof all, it is semicolon delimited. Variables are declared with\n\t\tthe <keyword>var</keyword> keyword. There is a special\n\t\t<a href="?doc#/language/types/range">range</a>\n\t\ttype, objects of which are created with the colon operator.\n\t\tFunction calls and computations are denoted in the usual way.\n\t\tHowever, the <a href="?doc#/language/statements/for-loops">for-loop</a>\n\t\tis rather verbose, involving the keywords <keyword>for</keyword>,\n\t\t<keyword>in</keyword>, and <keyword>do</keyword>.\n\t\t</p>\n\t\t<p>\n\t\t<a href="?doc#/language/declarations/functions">Functions</a>\n\t\tare declared with the <keyword>function</keyword>\n\t\tkeyword:\n\t\t<tscript>\n\t\t\tfunction factorial(n)\n\t\t\t{\n\t\t\t\tif n == 0 then return 1;\n\t\t\t\telse return n * factorial(n - 1);\n\t\t\t}\n\t\t\tprint(factorial(10));   # 3628800\n\t\t</tscript>\n\t\tThe maybe only surprise here is the keyword\n\t\t<keyword>then</keyword>, which is another example of the verbose\n\t\tsyntax when it comes to control structures. It is also possible\n\t\tto assign functions to variables and to define\n\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous (lambda) functions enclosing variables</a>.\n\t\t</p>\n\t\t<p>\n\t\tLike JSON, the TScript language knows the types\n\t\t<a href="?doc#/language/types/null">null</a>,\n\t\t<a href="?doc#/language/types/boolean">boolean</a>,\n\t\t<a href="?doc#/language/types/real">real</a> (number in JSON),\n\t\t<a href="?doc#/language/types/string">string</a>,\n\t\t<a href="?doc#/language/types/null">array</a>, and\n\t\t<a href="?doc#/language/types/dictionary">dictionary</a> (object in JSON),\n\t\tand JSON expressions are valid literals. In addition,\n\t\tTScript has a signed 32bit\n\t\t<a href="?doc#/language/types/integer">integer</a> type, a\n\t\t<a href="?doc#/language/types/range">range</a> type, a\n\t\t<a href="?doc#/language/types/function">function</a> type, and a\n\t\t<a href="?doc#/language/types/type">type</a> type. Arrays are\n\t\tdenoted with square brackets and dictionaries with curly braces.\n\t\tDictionary keys can be identifiers or strings:\n\t\t<tscript>\n\t\t\tvar a = [2, 3, 5, 7, 11];         # an array\n\t\t\tvar d = {name: "John", age: 25};  #* a dictionary *#\n\t\t</tscript>\n\t\tThe above example also demonstrates line and block\n\t\t<a href="?doc#/language/syntax/comments">comments</a>.\n\t\t</p>\n\t\t<p>\n\t\tThe built-in types can be extended by declaring\n\t\t<a href="?doc#/language/declarations/classes">classes</a>:\n\t\t<tscript>\n\t\t\tclass Person\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tstatic var m_free_id = 0;\n\t\t\t\tvar m_id;\n\t\t\t\tvar m_name;\n\t\t\t\tvar m_age;\n\n\t\t\tpublic:\n\t\t\t\tconstructor(name, age)\n\t\t\t\t{\n\t\t\t\t\tm_name = name;\n\t\t\t\t\tm_age = age;\n\t\t\t\t\tm_id = m_free_id;\n\t\t\t\t\tm_free_id += 1;\n\t\t\t\t}\n\n\t\t\t\tfunction name()\n\t\t\t\t{ return m_name; }\n\n\t\t\t\tfunction age()\n\t\t\t\t{ return m_age; }\n\n\t\t\t\tfunction id()\n\t\t\t\t{ return m_id; }\n\t\t\t}\n\t\t</tscript>\n\t\tIn contrast to many other scripting languages, TScript\n\t\tconstructors are easily recognizable as such, and classes\n\t\tsupport proper information hiding.\n\t\t</p>\n\t\t<p>\n\t\tFurther features of interest are\n\t\t<a href="?doc#/language/declarations/namespaces">namespaces</a> and\n\t\tcorresponding <a href="?doc#/language/directives/use">use directives</a>,\n\t\tas well as <a href="?doc#/language/statements/throw">exceptions</a>.\n\t\tFor a more complete and more formal overview of the language please\n\t\trefer to the <a href="?doc#/language">reference documentation</a>.\n\t\t</p>\n\t\t<p>\n\t\tAn important aspect of TScript as a teaching language is the closed\n\t\tand rather limited universe it lives in. The language is not designed\n\t\tas a general purpose tool, capable of interacting with arbitrary\n\t\toperating systems and libraries. Instead, its scope is limited to a\n\t\tvery specific and highly standardized working environment. It comes\n\t\twith easily accessible <a href="?doc#/library/turtle">turtle graphics</a>\n\t\tand <a href="?doc#/library/canvas">canvas graphics</a> modules. While the\n\t\tformer is ideal for visual demonstrations of programming concepts\n\t\tlike loops and recursion, the latter allows for the creating of all\n\t\tkinds of (classic) games. Check the <a href="?doc#/examples">examples</a>\n\t\tfor demonstrations.\n\t\t</p>\n\t',children:[]},{id:"design",name:"Design Decisions",title:"Design Decisions",content:'\n\t\t<p>\n\t\tMost programming languages in common use exist for an extended\n\t\tperiod of time and underwent significant changes. Such changes\n\t\tregularly aim to fix design bugs introduced early on. This naturally\n\t\tcreates a tension between designing a proper solution and avoiding\n\t\tto break existing code. Therefore many such fixes are rather newly\n\t\tdesigned workarounds. The main claim to fame of TScript is that its\n\t\tinitial design is already very well crafted, which will hopefully\n\t\tavoid the need for larger changes in the future. The most important\n\t\tfactor making this possible is that the language is very limited in\n\t\tscope, which greatly reduces the need for future changes.\n\t\t</p>\n\t\t<p>\n\t\tStarting with a clean design is only possible by building on prior\n\t\t(positive and negative) experience. TScript combines well-designed\n\t\tconcepts from a range of existing programming languages &mdash; and\n\t\tsure, the decision which concepts are well-designed or not is a\n\t\tsomewhat subjective one. This affects its basic syntax, the level\n\t\tof abstraction of many concepts, as well as a number of specific\n\t\tbut important design decisions, some of which are listed in the\n\t\tfollowing.\n\t\t</p>\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\tThe family of C-style languages has contributed\n\t\t\t\tinsignificance of whitespace, the semicolon as a delimiter,\n\t\t\t\tbraces as block markers, and scoping rules for variables,\n\t\t\t\tblock comments, and many minor details like the use of\n\t\t\t\tsquare brackets for variables enclosed by lambda functions.\n\t\t\t\tMost class-related features like proper information hiding,\n\t\t\t\ta fixed class layout and static members are inspired by C++\n\t\t\t\tand Java.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tAutomatic memory management, runtime typing, variables being\n\t\t\t\treferences to values, and the absence of an explicit entry\n\t\t\t\tpoint are very common concepts in high-level scripting\n\t\t\t\tlanguages.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tTScript is fully compatible with\n\t\t\t\t<a target="_blank" href="http://json.org/">JSON</a>, in the\n\t\t\t\tsense that every JSON expression is a legal TScript constant.\n\t\t\t\tJSON lays the foundation for the system of TScript core types.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tPython has contributed named parameters and separate operators\n\t\t\t\tfor integer and floating point division, and Matlab and NumPy\n\t\t\t\thave inspired array slicing and hence the Range type.\n\t\t\t\tTScript\'s keyword-rich syntax for expressing conditionals and\n\t\t\t\tloops without the need to enclose conditions into parentheses\n\t\t\t\tis not taken directly from a specific language, but it is\n\t\t\t\tinspired by the simplicity of Python syntax.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tAnonymous functions and closures are inspired by Javascript\'s\n\t\t\t\tpowerful event handling abilities, although the mechanism of\n\t\t\t\tenclosing values instead of variables is a bit different.\n\t\t\t</li>\n\t\t</ul>\n\t\t<p>\n\t\tIt is understood that many of these features are also present in other\n\t\tlanguages and that it is near impossible to give proper credit to every\n\t\tprogramming language out there.\n\t\t</p>\n\t',children:[]},{id:"arithmetics",name:"Arithmetics",title:"Arithmetics",content:'\n\t\t<p>\n\t\tTScript has two fundamental arithmetic types: Integer and Real.\n\t\tAt first glance, they seem to be rather similar, to the extent\n\t\tthat one may conclude that Integers are superfluous, since their\n\t\tentire range is covered by Reals. Indeed, most functions and\n\t\toperators that are designed for one type accept both types, and\n\t\talso mixed types in case of multiple arguments.\n\t\t</p>\n\t\t<p>\n\t\tHowever, merging the two types would clearly violate the\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a>.\n\t\tThis is because integers and reals have very different (primary)\n\t\troles in the core language: integers act as array indices, while\n\t\treals are numeric values.\n\t\t</p>\n\t\t<p>\n\t\tIt turns out that array indexing requires its own arithmetics,\n\t\te.g, for implementing a two-dimensional grid with an array.\n\t\tThink of a matrix stored in\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Matrix_representation">row-major format</a>\n\t\tas an example. For a matrix of width <i>w</i> and height <i>h</i>\n\t\tand for zero-based column and row indices <i>(x,y)</i>, the index\n\t\tof the corresponding array item is\n\t\t<code class="code">i=x+w*y</code>. The operation is inverted by\n\t\t<code class="code">x=i%w</code> and\n\t\t<code class="code">y=i//w</code>, which justifies the way\n\t\tinteger division and modulo are defined. By induction, this\n\t\targument extends to <i>n</i>-dimensional grids.\n\t\t</p>\n\t\t<p>\n\t\tThe differences between integer and floating point arithmetics\n\t\tcan be broken down to three points:\n\t\t<ul>\n\t\t\t<li>division,</li>\n\t\t\t<li>overflow (and underflow), and</li>\n\t\t\t<li>rounding errors.</li>\n\t\t</ul>\n\t\tOverflow is often considered a minor issue, at least if it is\n\t\tclear a-priori that the program will not have to handle very\n\t\tlarge values. Rounding errors can cause\n\t\t<a target="_blank" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">problems</a>\n\t\tin floating point arithmetics, but it tends to occur is contexts\n\t\twhere it is clear that we deal with reals, and experienced\n\t\tprogrammers of numerically sensitive algorithms are usually\n\t\taware of it. Division is problematic as follows:\n\t\t<tscript>\n\t\t\tfunction compute(a, b)\n\t\t\t{ return a / b; }\n\n\t\t\tprint(compute(1, 3));       # prints 0.3333...\n\t\t\tprint(compute(1.0, 3.0));   # prints 0.3333...\n\t\t</tscript>\n\t\t</p>\n\t\t<p>\n\t\tAssume for a second that the division operator would use the\n\t\tarithmetics induced by its types, then the first case would\n\t\ttrigger integer division and the statement would print zero!\n\t\t</p>\n\t\t<p>\n\t\tThe problem is that in a runtime-typed language like TScript\n\t\tthe compute function cannot know which types its arguments\n\t\twill take. However, most probably the zero result is not\n\t\tintended by the programmer. Runtime type checking and forced\n\t\tconversion can fix the problem,\n\t\t<tscript>\n\t\t\tfunction compute1(a, b)\n\t\t\t{\n\t\t\t\tassert(Type(a) == Real and Type(b) == Real);\n\t\t\t\treturn a / b;\n\t\t\t}\n\t\t\tfunction compute2(a, b)\n\t\t\t{ return Real(a) / Real(b); }\n\t\t</tscript>\n\t\tbut demanding this solution from the programmer is a far too\n\t\terror prone approach.\n\t\t</p>\n\t\t<p>\n\t\tThis dilemma is resolved by introducing two distinct division\n\t\toperators, <code class="code">/</code> for reals and\n\t\t<code class="code">//</code> for integers. This design is not\n\t\telegant, but it solves an important problem by avoiding\n\t\tfrequent and hard-to-find division bugs. This solution is of\n\t\tcourse inspired by Python3.\n\t\t</p>\n\t\t<p>\n\t\tThe power operator <code class="code">^</code> is particularly\n\t\tprone to integer overflow. However, it is rarely applied with\n\t\tlarge exponents. Instead of providing a second operator that\n\t\tis more safe with respect to integer overflow, the function\n\t\t<a href="?doc#/library/math">math.pow</a> is provided as an alternative.\n\t\t</p>\n\t',children:[]},{id:"style",name:"Style",title:"Coding Style",content:'\n\t\t<p>\n\t\tAlso beyond its basic syntax, the TScript language aims to teach\n\t\tgood coding style. Therefore there exists an official style\n\t\tguide. It aims to be not too restrictive, while emphasizing a\n\t\tfew points that can make code much easier to read. These two\n\t\tpoints are:\n\t\t<ul>\n\t\t\t<li>indentation, and</li>\n\t\t\t<li>capitalization of identifiers.</li>\n\t\t</ul>\n\t\t</p>\n\t\t<h3>Style Checking Mode</h3>\n\t\t<p>\n\t\tAlthough the core language does not enforce any particular\n\t\tcoding style, it can be helpful for beginners to get used to a\n\t\tstyle that fosters readable code early on. Therefore the TScript\n\t\tIDE offers the option to enable a special <i>style checking\n\t\tmode</i>. In this mode, violations of this style guide are\n\t\treported as errors. The mode can be enabled/disables in the\n\t\tconfiguration dialog accessible through the toolbar.\n\t\t</p>\n\t\t<h3>Indentation</h3>\n\t\t<p>\n\t\tThe language syntax does not enforce indentation. Quite the\n\t\tcontrary is the case: whitespace is entirely insignificant.\n\t\tHowever, it is clear that cleanly indented code is significantly\n\t\teasier to read. Therefore, clean indentation of blocks is\n\t\tenforced by this style guide.\n\t\t</p>\n\t\t<p>\n\t\tRULES: Each block (scope, function/class/namespace body) is\n\t\tindented uniformly. Its indentation exceeds the indentation of\n\t\tthe surrounding block. Lines containing matching opening and\n\t\tclosing braces must have the same indentation.\n\t\t</p>\n\t\t<p>\n\t\t</p>\n\t\t<tscript>\n\t\t\tfunction foo()\n\t\t\t{ print("foo"); }   # okay\n\n\t\t\tfunction bar() {\n\t\t\t\t\tprint("bar");\n\t\t\t\t} # wrong; indentation of braces does not match\n\n\t\t\tfunction foo2()\n\t\t\t{\n\t\t\t\t\tprint("foo");\n\t\t\t\tprint("foo2");\t# wrong; block is not indented consistently\n\t\t\t}\n\n\t\t\tfunction bar2()\n\t\t\t{\n\t\t\tprint("bar2");   # wrong; indentation does not increase\n\t\t\t}\n\t\t</tscript>\n\t\t</p>\n\t\t<h3>Capitalization of Identifiers</h3>\n\t\t<p>\n\t\tTScript uses the convention that identifiers starting with a\n\t\tcapital letter denote types, while all other identifiers denote\n\t\tvariables, functions, and namespaces. \n\t\t</p>\n\t\t<tscript>\n\t\t\tvar N = 1000;         # should be "n"\n\t\t\tfunction Display(x)   # should be "display"\n\t\t\t{ print(x); }\n\t\t\tnamespace Stuff {     # should be "stuff"\n\t\t\t\tclass set { }     # should be "Set"\n\t\t\t}\n\t\t\tvar T = Integer;      # this is borderline, but should be "t"\n\t\t</tscript>\n\t',children:[]}]}},9792:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_errors=void 0,e.doc_errors={id:"errors",name:"Error Messages",title:"All Error Messages Explained",content:"\n\t<p>\n\tSometimes error messages can be really confusing. Experienced\n\tprogrammers know how to read and interpret even seemingly obscure\n\terrors, and they have adapted to the oddities of their tools.\n\tHowever, beginners can get lost rather quickly when trying to\n\tunderstand the root cause of an error.\n\tOne reason for difficult to understand error messages is that in\n\tsome situations the parser or interpreter emitting the message would\n\thave to guess in order to determine the most probable cause of the\n\terror, while reporting only the symptoms down the road is easy.\n\t</p>\n\t<div class=\"example\">\n\t\t<h3>Example</h3>\n\t\tSay, the programmer accidentally deleted a brace closing a\n\t\tscope. Then an error message may complain that a closing brace\n\t\tis missing at the end of the program. Or it may complain that a\n\t\tconstructor is allowed only inside of a class, as in the example\n\t\tbelow.\n\t\t<tscript>\n\t\tclass A\n\t\t{\n\t\tpublic:\n\t\t\tvar x;\n\t\t\tfunction set(y)\n\t\t\t{\n\t\t\t\tif x == y then {\n\t\t\t\t\tx = y;\n\t\t\t\t}  # <-- what happens if this closing brace is removed?\n\t\t\t\tx = 3 / y;\n\t\t\t}\n\t\t\tconstructor()\n\t\t\t{\n\t\t\t\tx = 0;\n\t\t\t}\n\t\t}\n\t\t</tscript>\n\t\tAssume that the marked brace was accidentally deleted.\n\t\tWhat the programmer perceives is that according his code layout\n\t\tthe constructor is indeed part of the class, so the error does\n\t\tnot seem to make any sense. In contrast, TScript sees the\n\t\tconstructor as being declared within function\n\t\t<code class=\"code\">set</code>, because it\n\t\tkeeps interpreting closing braces differently than the programmer\n\t\tuntil it finally encounters an unresolvable situation and\n\t\treports an error. By the time it encounters the constructor it\n\t\tknows nothing about the class being never closed by a brace,\n\t\tfrom which a really smart program may then be able to narrow down\n\t\tthe error, or at least conclude that the error's root cause could\n\t\tpossibly be found in many different places.\n\t</div>\n\t<p>\n\tSuch situations are hard to avoid in entirety. Therefore, when\n\tencountering a strange error it is helpful to understand how error\n\tmessages come about. For sure, the true cause of the error is found\n\t<i>before</i> the reported error position, and as the above example\n\tdemonstrates, it may be far from the position where an error is\n\tfinally reported. More often than not, the true error is in the\n\tstatement <i>just preceding</i> the one where an error is reported.\n\tIn addition to such general but somewhat limited insights, this\n\tsection aims to help by explaining in detail what each error message\n\tmeans, how it typically occurs, and which pitfalls one should be\n\taware of.\n\t</p>\n\n\t<h2>Placeholders</h2>\n\t<p>\n\tMany error messages in this documentation contain placeholders like\n\t'X' and 'Y'. In an actual error message, these placeholders are\n\treplaced with actual names. For example, the error message\n\t<b>cannot order type 'X'</b> in the documentation could appear in a\n\treal context as <b>cannot order type 'Dictionary'</b>.\n\t</p>\n",children:[{id:"syntax",name:"Syntax Errors",title:"Syntax Errors",content:'\n\t\t<p>\n\t\tA syntax error indicates failure to follow the\n\t\t<a href="?doc#/language/syntax/EBNF-syntax">formal syntax</a>\n\t\tof the language.\n\t\t</p>\n\t',children:[{id:"se-1",content:'\n\t\t\t<p>\n\t\t\tThis error occurs in two situations:\n\t\t\t<ol>\n\t\t\t\t<li>\n\t\t\t\t\tA number is parsed as a floating point literal with decimal dot\n\t\t\t\t\t<code class="code">.</code>, but the dot is not followed by a\n\t\t\t\t\tnumber, as it should.\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\tA number is parsed as a floating point literal with exponent\n\t\t\t\t\tindicator <code class="code">E</code> or <code class="code">e</code>,\n\t\t\t\t\tbut the indicator is not followed by a number, as it should.\n\t\t\t\t</li>\n\t\t\t</lo>\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(5.0);         # number with decimal place\n\t\t\t\t\t# print(5.);        # error\n\t\t\t\t\t# print(.5);        # (different error)\n\t\t\t\t\tprint(-6.2E+002);   # number with exponent\n\t\t\t\t\t# print(-6.2E+);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-2",content:'\n\t\t\t<p>\n\t\t\tEach <a href="?doc#/language/expressions/literals/strings">string literal</a>\n\t\t\tmust end within a single line. This error indicates that the\n\t\t\tclosing double quotes character was not found before the end\n\t\t\tof the line.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-3",content:'\n\t\t\t<p>\n\t\t\tA Unicode escape sequence in a\n\t\t\t<a href="?doc#/language/expressions/literals/strings">string literal</a>\n\t\t\tis of the form <code class="code">\\uXXXX</code>, where each\n\t\t\tX represents a hexadecimal digit, i.e., a digit or a lower\n\t\t\tor upper case letter in the range A to F. This error is\n\t\t\treported if not all of the four characters following the \\u\n\t\t\tsequence are hex digits.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("\\u20AC");    # Euro sign\n\t\t\t\t\t# print("\\u20");    # error: too few characters\n\t\t\t\t\t# print("\\u20YZ");  # error: Y and Z are invalid\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-4",content:'\n\t\t\t<p>\n\t\t\tIn a\n\t\t\t<a href="?doc#/language/expressions/literals/strings">string literal</a>,\n\t\t\tthe backslash character starts an escape sequence. Only specific codes\n\t\t\tare allowed in escape sequences, as specified\n\t\t\t<a href="?doc#/language/syntax/tokens">here</a>. This error occurs if an\n\t\t\tinvalid code is encountered.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("\\n");     # line feed\n\t\t\t\t\t# print("\\z");   # error: z is not a value escape code\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-5",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if an invalid character was encountered\n\t\t\tin the program. All characters are legal inside comments and\n\t\t\tstring literals, but not in the rest of the program. The exact\n\t\t\trules which character is legal in which context are determined\n\t\t\tby the\n\t\t\t<a href="?doc#/language/syntax/EBNF-syntax">syntax rules</a>.\n\t\t\tFor example, the character <code class="code">@</code> is not\n\t\t\tlegal outside comments and string literals.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-6",content:"\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the current class. Therefore, using this keyword outside of\n\t\t\ta class declaration results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-7",content:"\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the current class. Therefore, using this keyword in a class\n\t\t\tthat does not have a super class results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-8",content:'\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> is used to refer to members\n\t\t\tof the super class. The reference is of the form\n\t\t\t<code class="code">super.name</code>. This error indicates that\n\t\t\tthe dot is missing after super.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-9",content:'\n\t\t\t<p>\n\t\t\tThe keyword <keyword>super</keyword> is used to refer to members\n\t\t\tof the super class. The reference is of the form\n\t\t\t<code class="code">super.name</code>. This error indicates that\n\t\t\tthe identifier is missing after super.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-10",content:"\n\t\t\t<p>\n\t\t\tThis error can occur in multiple contexts, namely when parsing the\n\t\t\tsuper class in a class declaration, in a use directive, and when\n\t\t\tparsing the loop variable of a for-loop. It indicates that a name\n\t\t\treferring to a type or variable is expected but not found.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-11",content:"\n\t\t\t<p>\n\t\t\tA name is a sequence of identifiers separated by dots. This error\n\t\t\tindicates that the name ends with a dot, while it should end with\n\t\t\tan identifier. In other words, there is either a trailing dot or\n\t\t\tan identifier is missing at the end.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-13",content:'\n\t\t\t<p>\n\t\t\tThis error message indicates that a name refers to a non-static\n\t\t\tattribute or method, which requires <keyword>this</keyword> to be\n\t\t\tvalid, but the lookup happens from a static context where no\n\t\t\t<keyword>this</keyword> object exists.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x;\n\t\t\t\t\tstatic function f()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tA context where this error may be unintuitive at first is when\n\t\t\tusing a function name as a\n\t\t\t<a href="?doc#/language/expressions/constants">constant expression</a>,\n\t\t\ti.e., as the default value of a parameter or as the initializer\n\t\t\tof an attribute. A constant can refer to a function declaration\n\t\t\tonly if it is not a member of a class or if it is static.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f() { }\n\t\t\t\t\tstatic function s() { }\n\t\t\t\t\t# var y = f;      # error\n\t\t\t\t\tvar z = s;        # okay\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-14",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function, all positional arguments must precede\n\t\t\tthe named arguments. This error occurs when that rule is violated\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b=0, c=0) { /*...*/ }\n\t\t\t\tf(7, c=2);      # okay\n\t\t\t\t# f(b=2, 6);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-15",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that a function call is broken. The argument list\n\t\t\tis a comma-separated list of expressions in parentheses. In other words,\n\t\t\teach expression is followed either by a comma or by a closing parenthesis.\n\t\t\tThe error is reported if a different token is encountered.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-16",content:'\n\t\t\t<p>\n\t\t\tThe formal syntax of a function call does not ensure that the object\n\t\t\tbeing called is indeed callable.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a) { }\n\t\t\t\tvar a = f;\n\t\t\t\ta(3);      # okay\n\t\t\t\ta = 42;\n\t\t\t\t# a(3);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-21",content:'\n\t\t\t<p>\n\t\t\tThe result of applying a left-unary of binary operator like\n\t\t\t<code class="code">+</code> is a temporary value. Assigning\n\t\t\tto this value does not make any sense, and therefore is a\n\t\t\tsyntax error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar a;\n\t\t\t\ta = 1 + 2;      # okay\n\t\t\t\t# a + 1 = 2;    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-22",content:"\n\t\t\t<p>\n\t\t\tAny expression can be enclosed in parentheses, usually for the\n\t\t\tpurpose of overriding operator precedence rules. When nesting\n\t\t\tmany parenthesis in a single expression, it is a common mistake\n\t\t\tto forget to close a parenthesis, which results in this error.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-23",content:'\n\t\t\t<p>\n\t\t\tA sequence of digits forms an integer <i>token</i>. However, an integer\n\t\t\t<i>literal</i> is limited to the range 0 to 2147483647=2<sup>31</sup>-1,\n\t\t\tsince otherwise overflow would apply, which is undesirable for literals.\n\t\t\tThis error indicates that the valid range was exceeded.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis poses the difficulty of representing the smallest integer value,\n\t\t\twhich is -2147483648. It cannot be denoted as such, because its\n\t\t\tpositive counterpart exceeds the valid range, so an error occurs\n\t\t\tbefore negation is applied. Instead, the value can be denoted as\n\t\t\tfollows:\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar a = -2147483647 - 1;          # usable as a constant\n\t\t\t\tvar b = -2^31;                    # usable as a constant\n\t\t\t\tvar c = Integer(-2147483648.0);   # not usable as a constant\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-24",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/expressions/literals/arrays">array literal</a>\n\t\t\tstarts with an opening bracket <code class="code">[</code> and stops with\n\t\t\ta closing bracket <code class="code">]</code>, enclosing a comma-separated\n\t\t\tlist of expressions. This error indicates that neither a comma nor a\n\t\t\tclosing bracket was found after an expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-25",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/expressions/literals/arrays">array literal</a>\n\t\t\tstarts with an opening bracket <code class="code">[</code> and stops with\n\t\t\ta closing bracket <code class="code">]</code>. This error indicates that\n\t\t\tthe end of the program was reached without encountering the closing\n\t\t\tbracket.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-26",content:'\n\t\t\t<p>\n\t\t\tKeys in a dictionary must be unique. This error occurs if a\n\t\t\t<a href="?doc#/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tspecifies the given key more than once.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar dict = {\n\t\t\t\t\t\t"name": "john",\n\t\t\t\t\t\t"age": 25,\n\t\t\t\t\t\t# "name": "smith",   # error: duplicate key \'name\'\n\t\t\t\t\t\t"address": "..."\n\t\t\t\t\t};\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-27",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tstarts with an opening brace <code class="code">{</code> and stops with\n\t\t\ta closing brace <code class="code">}</code>, enclosing a comma-separated\n\t\t\tlist of key-value pairs. This error indicates that neither a comma nor a\n\t\t\tclosing brace was found after a value.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-28",content:'\n\t\t\t<p>\n\t\t\tKeys in a <a href="?doc#/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tare identifiers or strings. This error is reported if neither of them\n\t\t\twas found where a key was expected.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-29",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/expressions/literals/dictionaries">dictionary literal</a>,\n\t\t\tkeys and values are separated by colons. This error occurs is there is\n\t\t\tno colon found after the key.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-30",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/expressions/literals/dictionaries">dictionary literal</a>\n\t\t\tstarts with an opening brace <code class="code">{</code> and stops with\n\t\t\ta closing brace <code class="code">}</code>. This error indicates that\n\t\t\tthe end of the program was reached without encountering the closing\n\t\t\tbrace.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-31",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\texpression encloses variables as a comma-separated list of named expressions\n\t\t\tenclosed in square brackets. In other words, a comma or a closing bracket\n\t\t\tmust follow each variable or expression, otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-32",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\texpression encloses variables as a comma-separated list of named expressions\n\t\t\tin square brackets. It can enclose variables under their names in the\n\t\t\tsurrounding scope, or it can enclose an expression under an explicitly\n\t\t\tgiven (variable) name. In the latter case, if the variable name is missing\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-33",content:"\n\t\t\t<p>\n\t\t\tThe parameter list of a function is a comma separated list of identifiers,\n\t\t\tpossibly with the definition of default values, enclosed in parentheses.\n\t\t\tHence, each identifier (optionally with its default value) must be followed\n\t\t\tby a comma or closing parenthesis, otherwise this error is reported.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-35",content:'\n\t\t\t<p>\n\t\t\tWhen using the keyword <keyword>function</keyword> in an expression,\n\t\t\tan <a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>\n\t\t\tis declared. The keyword is followed by an optional list of closure\n\t\t\tvariables enclosed in square brackets or by a parameter list in\n\t\t\tenclosed parentheses, otherwise this error is emitted.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-36",content:'\n\t\t\t<p>\n\t\t\tWhen declaring a <a href="?doc#/language/declarations/functions">function</a>,\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>,\n\t\t\tor a <a href="?doc#/language/declarations/classes">constructor</a>,\n\t\t\tthen a parameter list must be defined, even if it is empty. This\n\t\t\terror indicates that the opening parenthesis was not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-37",content:'\n\t\t\t<p>\n\t\t\tA <href="?doc#/language/declarations/functions">function</a> declares\n\t\t\tparameters as a comma-separated list in parentheses. Hence, each\n\t\t\tparameter must be followed by a comma or a closing parenthesis,\n\t\t\totherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-38",content:'\n\t\t\t<p>\n\t\t\tDefault values of\n\t\t\t<href="?doc#/language/declarations/functions">function</a> parameters\n\t\t\tmust be <a href="?doc#/language/expressions/constants">constants</a>.\n\t\t\tThis error indicates that the default value expression is not\n\t\t\tconsidered a proper constant in TScript.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-40",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that a namespace, class, or function body is\n\t\t\tmissing in a <a href="?doc#/language/declarations">declaration</a> or\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-41",content:"\n\t\t\t<p>\n\t\t\tA keyword that cannot initiate an expression was detected in a context\n\t\t\twhere an expression is expected. Such contexts are manifold, i.e.,\n\t\t\ton the right-hand-side of an assignment operator, within a function\n\t\t\tcall, in the condition of a do-while or while-do loop, etc.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor example, the keyword <keyword>true</keyword> itself represents a\n\t\t\tvalid expression. On the contrary, the keyword <keyword>while</keyword>\n\t\t\tcannot be part of an expression.\n\t\t\t</p>\n\t\t",children:[]},{id:"se-42",content:'\n\t\t\t<p>\n\t\t\tA token that cannot initiate an expression was detected in a context\n\t\t\twhere an expression is expected. Such contexts are manifold, i.e.,\n\t\t\ton the right-hand-side of an assignment operator, within a function\n\t\t\tcall, in the condition of a do-while or while-do loop, etc.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tFor example, integer, real and string tokens represents valid expressions.\n\t\t\tOn the contrary, an expression cannot start with the token\n\t\t\t<code class="code">,</code> (a comma).\n\t\t\t</p>\n\t\t',children:[]},{id:"se-43",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/expressions/names">name</a> used to\n\t\t\t<a href="?doc#/language/expressions/member-access">access a member</a>\n\t\t\tof an object or a namespace is a sequence of identifiers separated\n\t\t\twith dots. This error indicates that the sequence ends with a dot,\n\t\t\tand not with an identifier, as it should.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-44",content:'\n\t\t\t<p>\n\t\t\tCharacters of strings and items of arrays and dictionaries are\n\t\t\t<a href="?doc#/language/expressions/item-access">accessed with an index in square brackets</a>.\n\t\t\tThis error indicates that the closing square bracket is missing\n\t\t\tafter the index expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-47",content:'\n\t\t\t<p>\n\t\t\tWithin a <a href="?doc#/language/declarations/classes">class declaration</a>\n\t\t\tthe keyword <keyword>this</keyword> refers to the object upon which\n\t\t\ta method acts. The keyword is only meaningful in contexts that do\n\t\t\tactually act on an object. The use of <keyword>this</keyword> in\n\t\t\tstatic functions and inner functions results in this error message.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA second legal use of the <keyword>this</keyword> keyword is within an\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\tThere it refers to the function itself, and hence allows the function\n\t\t\tto recursively call itself.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(this);          # okay\n\t\t\t\t\t\tvar a = function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# print(this);    # error\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tstatic function s()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(this);        # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"se-48",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/statements/assignments">assignment</a> ends with\n\t\t\ta semicolon. This error indicates that the semicolon was not found after\n\t\t\tthe expression on the right-hand-side of the assignment operator.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tCommon reasons for this error are that\n\t\t\t<ul>\n\t\t\t<li>the programmer either forgot to put the semicolon, <b>often in the preceding line</b>, or</li>\n\t\t\t<li>the right-hand-side expression ends earlier than anticipated by the\n\t\t\tprogrammer, usually due to a mistake.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-49",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that an <a href="?doc#/language/expressions">expression</a>\n\t\t\tended in an unexpected way. When\n\t\t\t<a href="?doc#/language/statements/expressions">using an expression as a statement</a>,\n\t\t\tthe expression must be terminated with a semicolon. Alternatively, the expression\n\t\t\tcan be continued by appending a binary operator and a further expression.\n\t\t\tIf these expectations are not met then this error is reported.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tCommon reasons for this error are that\n\t\t\t<ul>\n\t\t\t<li>the programmer either forgot to put the semicolon, or</li>\n\t\t\t<li>the expression ends earlier than anticipated by the programmer,\n\t\t\tusually due to a mistake.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-50",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/declarations/variables">variable declaration</a>,\n\t\t\tthe names of all variables must be identifiers. This error indicates that\n\t\t\ta different type of <a href="?doc#/language/syntax/tokens">token</a> was\n\t\t\tencountered instead.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-51",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the basic syntax of a\n\t\t\t<a href="?doc#/language/declarations/variables">variable declaration</a>\n\t\t\tis violated. Variables are separated with commas, the list closes with a\n\t\t\tsemicolon, and each variable can have an initializer starting with an\n\t\t\tequals sign. Therefore the identifier must be followed by an equals sign,\n\t\t\ta comma, or a semicolon. Otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-51b",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the basic syntax of a\n\t\t\t<a href="?doc#/language/declarations/variables">variable declaration</a>\n\t\t\tis violated. Variables are separated with commas, the list closes with a\n\t\t\tsemicolon. Therefore the initializer must be followed by a comma or a\n\t\t\tsemicolon. Otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-52",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/declarations/functions">function declaration</a>\n\t\t\tmust have a name, which is an identifier. This error indicates that the\n\t\t\tname was not found after the <keyword>function</keyword> keyword.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOne possible cause of this error is the attempt to denote an anonymous\n\t\t\tfunction in an expression forming a statement. This does not work directly,\n\t\t\tsince the <keyword>function</keyword> keyword triggers a function\n\t\t\tdeclaration, which is different from an anonymous function expression.\n\t\t\tThe anonymous function can be enclosed in parentheses in order to ensure\n\t\t\tproper parsing as an expression.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-53",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/declarations/classes">constructor of a class</a>\n\t\t\tcan invoke the constructor of the super class with a special syntax,\n\t\t\t</p>\n\t\t',children:[]},{id:"se-54",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/declarations/classes">class declaration</a>\n\t\t\tcontains an identifier acting as the name of the class. This error\n\t\t\tindicates that no identifier was found after the keyword\n\t\t\t<keyword>class</keyword>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-55",content:'\n\t\t\t<p>\n\t\t\tAn <a href="?doc#/language/declarations/classes">access modifier in a class declaration</a>\n\t\t\tconsists of one of the keywords <keyword>public</keyword>, <keyword>protected</keyword>,\n\t\t\tor <keyword>private</keyword>, followed by a colon. This error indicates that the colon\n\t\t\tis missing.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-56",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc#/language/declarations/classes">members of a class</a>\n\t\t\tare subject to a visibility modifier, consisting of one of the keywords\n\t\t\t<keyword>public</keyword>, <keyword>protected</keyword>, or\n\t\t\t<keyword>private</keyword>, followed by a colon. This error indicates\n\t\t\tthat a member declaration precedes the first visibility modifier.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-57",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/declarations/classes">Attributes of a class</a>\n\t\t\tcan be initialized in their declaration by providing an initializer.\n\t\t\tThis works for static as well as for non-static attributes. However,\n\t\t\tin contrast to global and local variables, the initializer must be\n\t\t\ta <a href="?doc#/language/expressions/constants">constant</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-58",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc#/language/declarations/classes">members of a class</a>\n\t\t\tare subject to visibility settings. The constructor of a class always\n\t\t\tcalls the constructor of the super class. This even holds for the\n\t\t\tdefault constructor, which is generated if no constructor is\n\t\t\texplicitly declared.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf the super class has declared its constructor private then the\n\t\t\tsub-class cannot properly initialize the super class. Therefore\n\t\t\tinheriting a class with private constructor is not possible.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-59",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/declarations/classes">constructor of a class</a>\n\t\t\tneeds a <keyword>this</keyword> reference to the object to be initialized,\n\t\t\ttherefore it cannot be static. This error indicates that the constructor\n\t\t\twas marked as static.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-59b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/declarations/classes">constructor of a class</a>\n\t\t\tmust be unique, it cannot be overloaded. Remove all but one constructor\n\t\t\tto fix this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-60",content:'\n\t\t\t<p>\n\t\t\tThe only members of a <a href="?doc#/language/declarations/classes">class</a>\n\t\t\tthat can be declared are attributes and methods. This error indicates that\n\t\t\ta class declaration found inside the scope of another class is declared\n\t\t\tstatic.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-61",content:'\n\t\t\t<p>\n\t\t\tThe only members of a <a href="?doc#/language/declarations/classes">class</a>\n\t\t\tthat can be declared are attributes and methods. This error indicates that\n\t\t\ta <a href="?doc#/language/directives/use">use directive</a> found inside the\n\t\t\tscope of another class is declared static.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-62",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that an unexpected entity was found inside a\n\t\t\t<a href="?doc#/language/declarations/classes">class</a>. The class syntax\n\t\t\tdemands that only access modifiers, attribute and method declarations,\n\t\t\tdeclarations of nested classes, and use-directives are allowed.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-63",content:'\n\t\t\t<p>\n\t\t\tAs the error message states, a\n\t\t\t<a href="?doc#/language/declarations/namespaces">namespace</a> can be\n\t\t\tdeclared only at global scope or nested within another namespace.\n\t\t\tIt must not be declared at function of class scope. The error\n\t\t\tmessage indicates that this rule was violated.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-64",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/declarations/namespaces">namespace declaration</a>\n\t\t\tcontains an identifier acting as the name of the class. This error\n\t\t\tindicates that no identifier was found after the keyword\n\t\t\t<keyword>namespace</keyword>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-65",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/directives/use">Use directives</a> can have two forms.\n\t\t\tThis error occurs if the form starting with <keyword>from</keyword> does\n\t\t\tnot contain the keyword <keyword>use</keyword> after the from-clause.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-66",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/directives/use">use directive</a>, an imported name\n\t\t\tcan be remapped to a different name with an <keyword>as</keyword> clause.\n\t\t\tHowever, the same mechanism does not work when importing all name from a\n\t\t\tnamespace. This error indicates that the attempt was made nevertheless.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-67",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the <ebnf>identifier</ebnf> is missing after\n\t\t\t<keyword>as</keyword> in a <a href="?doc#/language/directives/use">use directive</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-68",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/directives/use">use directive</a>, multiple names\n\t\t\tor whole namespaces can be imported. The individual imports are separated\n\t\t\twith commas, and the overall use directive closes with a semicolon. Therefore\n\t\t\teach import must be followed either by a comma or by a semicolon. This error\n\t\t\tindicates that the above rule is violated.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-69",content:'\n\t\t\t<p>\n\t\t\tThe error indicates that in an\n\t\t\t<a href="?doc#/language/statements/if-then-else">if-then-else</a> conditional\n\t\t\tstatement the keyword <keyword>then</keyword> is missing. This mistake is\n\t\t\tcommonly made by programmers coming from C-style languages which do not\n\t\t\thave this keyword.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-70",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/for-loops">for loop</a> uses a loop\n\t\t\tvariable to indicate its current iteration. If this variable is declared\n\t\t\twithin the loop with the <keyword>var</keyword> keyword, then the variable\n\t\t\tname must be a plain <ebnf>identifier</ebnf>. The error message indicates\n\t\t\tthat a non-identifier token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-71",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/statements/for-loops">for loop</a> declaring its\n\t\t\town loop variable, the keyword <keyword>in</keyword> must follow the loop\n\t\t\tvariable declaration. This error indicates that some other token was\n\t\t\tencountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-72",content:'\n\t\t\t<p>\n\t\t\tIn a <a href="?doc#/language/statements/for-loops">for loop</a> after the\n\t\t\tcontainer to loop over must be followed by the keyword <keyword>do</keyword>.\n\t\t\tThis error indicates that some other token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-73",content:'\n\t\t\t<p>\n\t\t\tIf a <a href="?doc#/language/statements/for-loops">for loop</a> does not use\n\t\t\tloop variable declared within the loop, then the expression following\n\t\t\tthe keyword <keyword>for</keyword> could either be an externally declared\n\t\t\tloop variable or the container to iterate over. In the former case, the\n\t\t\texpression must be followed by <keyword>in</keyword>, in the latter case\n\t\t\tby <keyword>do</keyword>. The error message indicates that neither one\n\t\t\twas found.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-74",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc#/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdemands that the loop body is followed by the keyword <keyword>while</keyword>.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-75",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc#/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdemands that the condition is followed by a semicolon.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\tIt may indicate that the expression representing the loop condition\n\t\t\tis broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-76",content:'\n\t\t\t<p>\n\t\t\tThe syntax of a <a href="?doc#/language/statements/while-do-loops">while-do loop</a>\n\t\t\tdemands that the condition is followed by the keyword <keyword>do</keyword>.\n\t\t\tThis error message indicates that an different token was encountered.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-77",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/break-continue">break</a> statement\n\t\t\tcan only appear inside a loop. This error message indicates that there\n\t\t\tis no loop surrounding the statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-78",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/break-continue">continue</a> statement\n\t\t\tcan only appear inside a loop. This error message indicates that there\n\t\t\tis no loop surrounding the statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-79",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/return">return</a> statement returns\n\t\t\tthe control flow from the current function back to the calling context.\n\t\t\tWhen doing so, it can also return a value, which then becomes the value\n\t\t\tof the function call expression. However, a constructor does not evaluate\n\t\t\tto an arbitrary expression and therefore cannot return a value. A return\n\t\t\tstatement inside a constructor must not contain a return value, otherwise\n\t\t\tthis error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-80",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/return">return</a> statement returns\n\t\t\tthe control flow from the current function back to the calling context.\n\t\t\tWhen doing so, it can also return a value, which then becomes the value\n\t\t\tof the function call expression. When applied at global or namespace\n\t\t\tscope, the return statement ends the program. Since a program does not\n\t\t\thave a value, a return statement at global or namespace scope must not\n\t\t\tcontain a return value, otherwise this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/return">return</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\tThe most probably reason is that the return expression is broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81b",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/break-continue">break</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-81c",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/break-continue">continue</a> statement ends with\n\t\t\ta semicolon. The error message indicates that this is not the case.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-82",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-84",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-85",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-86",content:'\n\t\t\t<p>\n\t\t\t<a href="?doc#/language/statements/try-catch">try-catch</a>\n\t\t\t</p>\n\t\t',children:[]},{id:"se-87",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/throw">throw</a> statements ends with\n\t\t\ta semicolon. This error message indicates that the semicolon is missing.\n\t\t\tThe most probably cause of this error is a bug in the expression preceding\n\t\t\tthe semicolon.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-88",content:'\n\t\t\t<p>\n\t\t\tCurly braces can close\n\t\t\t<a href="?doc#/language/statements/blocks">blocks of statements</a> and\n\t\t\t<a href="?doc#/language/expressions/literals/dictionaries">dictionary literals</a>.\n\t\t\tThis error indicates that a closing brace was found in a different\n\t\t\tcontext. The most common cause of this error is that the declaration\n\t\t\tor statement preceding the closing brace is broken.\n\t\t\t</p>\n\t\t',children:[]},{id:"se-89",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if a keyword that cannot start a statement\n\t\t\t(like, e.g., <keyword>static</keyword>) was encountered where a\n\t\t\tstatement was expected. This error has two common causes:\n\t\t\t<ul>\n\t\t\t\t<li>a keyword was used as an identifier, or</li>\n\t\t\t\t<li>the preceding statement is broken.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t",children:[]},{id:"se-90",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if a token that cannot start a statement\n\t\t\t(like, e.g., <code class="code">+=</code>) was encountered where a\n\t\t\tstatement was expected. This error usually indicates that the\n\t\t\tstatement directly preceding the location where the error is\n\t\t\treported is broken.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"argument-mismatch",name:"Argument Mismatch",title:"Argument Mismatch",content:"\n\t\t<p>\n\t\tValues passed into a function or operator can mismatch the needs\n\t\tand expectations of the function being called in several ways.\n\t\tArguments can be of the wrong type, or their values can be in an\n\t\tinvalid range. Errors in this category reflect such events.\n\t\t</p>\n\t",children:[{id:"am-1",content:'\n\t\t\t<p>\n\t\t\tA function specifies how many arguments it expects, but the formal\n\t\t\tfunction declaration does not specify which types can be processed.\n\t\t\tFor example, the wait function expects the number of milliseconds\n\t\t\tto wait as an argument, which must be a number. If a value of\n\t\t\tunrelated type is passed, say, a dictionary, then the function\n\t\t\treports this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\twait(10);         # okay\n\t\t\t\t\t# wait("foo");    # error\n\t\t\t\t\t# wait({a: 2});   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tSuch errors occur for two frequent reasons.\n\t\t\t<ol>\n\t\t\t<li>The programmer passes positional\n\t\t\targuments in the wrong order. For example, the function\n\t\t\tString.find expects a search key (string), a start position\n\t\t\t(integer), and a flag (boolean). If the programmer passes\n\t\t\tthe start position first, then the function tries to\n\t\t\tinterpret it as the search key. Since the value is not a\n\t\t\tstring, the attempt fails and an error is reported.</li>\n\t\t\t<li>A variable or expression\n\t\t\tpassed to a function as a parameter is of a type that is\n\t\t\tnot expected by the programmer.</li>\n\t\t\t</ol>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-2",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/unary-operators/minus">unary operator not</a>\n\t\t\tis only defined for boolean arguments. Applying unary not\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-3",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/unary-operators/plus">unary operator +</a>\n\t\t\tis only defined for numerical arguments. Applying unary plus\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-4",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/unary-operators/minus">unary operator -</a>\n\t\t\tis only defined for numerical arguments. Applying unary minus\n\t\t\tto a value of any other type results in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-5",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/addition">binary operator +</a>\n\t\t\tis applied to two types that cannot be added. The operator supports\n\t\t\tnumeric types as well as string concatenation. All other operand\n\t\t\ttypes result in this error.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-6",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/subtraction">binary operator -</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-7",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/multiplication">binary operator +</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-8",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/real-division">binary operator /</a>\n\t\t\tor the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/integer-division">binary operator //</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-9",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/modulo">binary operator %</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-10",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/power">binary operator ^</a>\n\t\t\tis applied to non-numeric arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-11",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/addition">binary operator :</a>\n\t\t\tis applied to non-integer arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-12",content:'\n\t\t\t<p>\n\t\t\tThis error occurs if one of the binary operators\n\t\t\t<a href="?doc#/language/expressions/binary-operators/and">and</a>,\n\t\t\t<a href="?doc#/language/expressions/binary-operators/or">or</a>, or\n\t\t\t<a href="?doc#/language/expressions/binary-operators/xor">xor</a>\n\t\t\tis applied to non-boolean non-integer arguments.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-13",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a value is converted to an integer. The\n\t\t\tvalue is often a real, but it can also be a string that is\n\t\t\tinterpreted as a real. If the real is not a finite value or if\n\t\t\tthe string representation overflows to an infinite value then\n\t\t\tthe error occurs. It is an error because integers cannot\n\t\t\trepresent infinity and not-a-number, and also the integer\n\t\t\toverflow rules are unsuitable to resolve this situation.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar r = Real.inf();\n\t\t\t\t\tvar s = "1e1000";\n\t\t\t\t\t# print(Integer(r));  # error: r is infinite\n\t\t\t\t\t# print(Integer(s));  # error: s parsed as Real\n\t\t\t\t\t                      # overflows to infinity\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"am-14",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a string is converted to an integer\n\t\t\tand the string value does not represent a number.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(Integer("42"));        # prints 42\n\t\t\t\t\t# print(Integer(""));        # error\n\t\t\t\t\t# print(Integer("hello"));   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"am-15",content:'\n\t\t\t<p>\n\t\t\tThis error occurs when a value is divided by zero with the\n\t\t\tinteger division operator <code class="code">//</code> or\n\t\t\twith the modulo operator <code class="code">%</code>. In\n\t\t\tcontrast to this behavior, the real division operator\n\t\t\t<code class="code">/</code> does not emit an error and instead\n\t\t\tproduces an infinite result or not-a-number.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3 / 0);      # prints Infinity\n\t\t\t\t\t# print(3 // 0);   # error\n\t\t\t\t\t# print(3 % 0);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error usually occurs when dividing by a variable or by\n\t\t\tthe result of a complex expression the value of which was not\n\t\t\tforeseen by the programmer to be zero. Example:\n\t\t\t<tscript>\n\t\t\t\tvar a = math.pi();\n\t\t\t\tvar b = a - 2 * math.atan(1e100);  # numerically evaluates to zero\n\t\t\t\t# var c = math.e() % b;            # error\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"am-16",content:'\n\t\t\t<p>\n\t\t\tValues are said to be ordered if they can be compared with operators\n\t\t\t<code class="code">&lt;</code>, <code class="code">&lt;=</code>,\n\t\t\t<code class="code">&gt;</code>, and <code class="code">&gt;=</code>.\n\t\t\tThe rules for ordering values are found\n\t\t\t<a href="?doc#/language/expressions/binary-operators/order">here</a>.\n\t\t\tFor example, arrays can be ordered, while dictionaries cannot.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(1 < 2);               # prints true\n\t\t\t\t\tprint("hello" > "world");   # prints false\n\t\t\t\t\tprint([] < [42]);           # prints true\n\t\t\t\t\t# print({} < {a: 7});       # error: dictionaries are not ordered\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs frequently if one of the operands of the comparison\n\t\t\tis of a type the programmer did not expect. E.g., a function like\n\t\t\t<a href="?doc#/language/types/string">String.find</a> usually returns a\n\t\t\tnumber, but in occasional error conditions it returns null. Therefore\n\t\t\ta statement like\n\t\t\t<tscript>\n\t\t\t\tvar s = "hello";\n\t\t\t\t# ... code that modifies s ...\n\t\t\t\tif s.find("e") < 10 then print("found e close to the beginning");\n\t\t\t</tscript>\n\t\t\traises an error, but only if the search key is not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-16b",content:'\n\t\t\t<p>\n\t\t\tValues are said to be ordered if they can be compared with operators\n\t\t\t<code class="code">&lt;</code>, <code class="code">&lt;=</code>,\n\t\t\t<code class="code">&gt;</code>, and <code class="code">&gt;=</code>.\n\t\t\tThe rules for ordering values are found\n\t\t\t<a href="?doc#/language/expressions/binary-operators/order">here</a>.\n\t\t\tFor example, arrays can be ordered, while dictionaries cannot.\n\t\t\tIn most cases, values of different types cannot be ordered. Integer\n\t\t\tand Real are exceptions:\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3 < 3.14159);        # prints true\n\t\t\t\t\t# print(3 < true);         # error: cannot order integer and boolean\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs frequently if one of the operands of the comparison\n\t\t\tis of a type the programmer did not expect. E.g., a function like\n\t\t\t<a href="?doc#/language/types/string">String.find</a> usually returns a\n\t\t\tnumber, but in occasional error conditions it returns null. Therefore\n\t\t\ta statement like\n\t\t\t<tscript>\n\t\t\t\tvar s = "hello";\n\t\t\t\t# ... code that modifies s ...\n\t\t\t\tif s.find("e") < 10 then print("found e close to the beginning");\n\t\t\t</tscript>\n\t\t\traises an error, but only if the search key is not found.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-17",content:'\n\t\t\t<p>\n\t\t\tWhen calling the Array constructor with an integer as the first\n\t\t\targument, an array of the given size is created. If this size is\n\t\t\tnegative then this error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = Array(3, false);      # [false, false, false]\n\t\t\t\t\t# var b = Array(-5, false);   # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs if the expression controlling the array size\n\t\t\thappens to become negative, which was usually not anticipated by\n\t\t\tthe programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-18",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/types/array">Array.insert</a> function\n\t\t\ttakes a position within the array as its argument. The position\n\t\t\tmust neither be negative nor exceed the array length. If it does,\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [6, "foo", true];\n\t\t\t\t\ta.insert(3, null);       # works, inserts at the end\n\t\t\t\t\t# a.insert(-2, false);   # error, negative position\n\t\t\t\t\t# a.insert(10, "bar");   # error, position beyond the end\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThis error occurs if the expression controlling the array position\n\t\t\thappens to take values not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-18b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/types/array">Array.pop</a> function removes\n\t\t\tthe last item of the array, which is returned. If the array is\n\t\t\tempty and hence there is no item to remove and return then this\n\t\t\terror is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-19",content:"\n\t\t\t<p>\n\t\t\tThe <a href=\"?doc#/language/types/array\">Array.sort</a> function can\n\t\t\tsort the array according to a user-specificed order relation,\n\t\t\tdefined by the 'comparator' function passed as an argument to\n\t\t\tArray.sort. Given two items as arguments, this function must\n\t\t\treturn a numeric value. If the value is non-numeric, then this\n\t\t\terror is reported.\n\t\t\t</p>\n\t\t",children:[]},{id:"am-20",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the items of a\n\t\t\t<a href="?doc#/language/types/string">string</a> are\n\t\t\t<a href="?doc#/language/expressions/item-access">accessed</a>\n\t\t\twith an invalid index of key type. Valid index types are\n\t\t\tinteger and range.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-21",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a>\n\t\t\ta single character of a <a href="?doc#/language/types/string">string</a>\n\t\t\tas an integer code, the index must be a valid position within the\n\t\t\tstring. This error indicates that the index is negative.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-22",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a>\n\t\t\ta single character of a <a href="?doc#/language/types/string">string</a>\n\t\t\tas an integer code, the index must be a valid position within the\n\t\t\tstring. This error indicates that the index exceeds the valid range,\n\t\t\twhich is upper bounded by the string size.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-23",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof an array, a valid (zero-based) index is neither negative, not does it\n\t\t\texceed the size of the array. This error indicates that the index is\n\t\t\tnegative. This error is usually caused by an expression evaluating to a\n\t\t\tnegative number, which was not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-24",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc#/language/types/array">array</a>, a valid (zero-based)\n\t\t\tindex is neither negative, not does it exceed the size of the array.\n\t\t\tThis error indicates that the index is at least at large as the array size.\n\t\t\tThe error is usually caused by an expression evaluating to a too large\n\t\t\tnumber, which was not anticipated by the programmer.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-25",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc#/language/types/array">array</a>, a valid index is of\n\t\t\ttype integer or range. If the expression is on the left-hand-side of an\n\t\t\tassignment operator, then the only valid index type is an integer. This\n\t\t\terror indicates that the index expression evaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-26",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof an <a href="?doc#/language/types/array">array</a>, a valid index is of\n\t\t\ttype integer or range. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-27",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc#/language/types/dictionary">dictionary</a>, the index\n\t\t\tmust be a key of the dictionary. This error indicates that the index was\n\t\t\tnot found as a key in the dictionary.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-28",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc#/language/types/dictionary">dictionary</a>, a valid key\n\t\t\tis of type string. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-29",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc#/language/types/range">range</a>, the index must be a\n\t\t\tvalid index of an array representing the elements of the range. This\n\t\t\tmeans that it must not be negative, and it must be less than the size of\n\t\t\tthe range. This error indicates that the index is outside these bounds.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-30",content:'\n\t\t\t<p>\n\t\t\tWhen <a href="?doc#/language/expressions/item-access">accessing</a> an item\n\t\t\tof a <a href="?doc#/language/types/range">range</a>, the index must be a of\n\t\t\ttype integer or range. This error indicates that the index expression\n\t\t\tevaluates to a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-31",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/item-access">access operator</a>\n\t\t\tprovides access to the items of a container. The only types supporting\n\t\t\tthis mechanism are string, array, dictionary, and range. This error\n\t\t\tindicates that it was attempted to access an item of a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-31b",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/item-access">access operator</a>\n\t\t\tprovides access to the items of a container. The only types supporting\n\t\t\tthis mechanism when used on the left-hand-side of an assignment are\n\t\t\tarray and dictionary. This error indicates that it was attempted to\n\t\t\tset an item of a different type.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-32",content:'\n\t\t\t<p>\n\t\t\tThe left-hand side of an\n\t\t\t<a href="?doc#/language/statements/assignments">assignment operator</a>\n\t\t\tis an expression. However, not all expressions can be assigned to.\n\t\t\tThis error indicates that it was attempted to assign to an expression\n\t\t\tthat does not refer to a variable in which the result of the\n\t\t\tright-hand-side can be stored.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-33",content:'\n\t\t\t<p>\n\t\t\tThe condition in an\n\t\t\t<a href="?doc#/language/statements/if-then-else">if-then-else</a>\n\t\t\tstatement decides whether the then-branch or the else-branch is\n\t\t\texecuted. The expression must evaluate to a\n\t\t\t<a href="?doc#/language/types/boolean">boolean</a> value, otherwise\n\t\t\tthis error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-34",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/for-loops">for-loop</a> iterates\n\t\t\tover the items of a range or array. If the expression defining the\n\t\t\tcontainer evaluates to a different type then this error is emitted.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-35",content:'\n\t\t\t<p>\n\t\t\tA <a href="?doc#/language/statements/for-loops">for-loop</a> stores\n\t\t\tthe current item of the container it iterates over in a variable.\n\t\t\tIt this variable is not declared inside the loop, then an arbitrary\n\t\t\tname can be provided. This name must refer to a variable, otherwise\n\t\t\tthis error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-36",content:'\n\t\t\t<p>\n\t\t\tThe condition in a\n\t\t\t<a href="?doc#/language/statements/do-while-loops">do-while loop</a>\n\t\t\tdecides whether to stop or to continue the loop. The expression\n\t\t\tmust evaluate to a <a href="?doc#/language/types/boolean">boolean</a>\n\t\t\tvalue, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-37",content:'\n\t\t\t<p>\n\t\t\tThe condition in a\n\t\t\t<a href="?doc#/language/statements/while-do-loops">while-do loop</a>\n\t\t\tdecides whether to stop or to continue the loop. The expression\n\t\t\tmust evaluate to a <a href="?doc#/language/types/boolean">boolean</a>\n\t\t\tvalue, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-38",content:'\n\t\t\t<p>\n\t\t\tLoading a value with the standard library\'s\n\t\t\t<code class="code">load</code> function failed because the key does\n\t\t\tnot exist.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error occurs when trying to load a value from a key that was\n\t\t\tnot saved before. Use the <code class="code">exists</code> function\n\t\t\tto check whether a key exists.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-39",content:'\n\t\t\t<p>\n\t\t\tSaving a value with the standard library\'s <code class="code">save</code>\n\t\t\tfunction failed because the value is not a\n\t\t\t<a target="_blank" href="http://json.org/">JSON</a> constant.\n\t\t\tValues of type Null, Boolean, Integer, Real, and String are legal,\n\t\t\tas well as Array and Dictionary, if all of the values stored\n\t\t\ttherein are legal JSON values and the data structure is an\n\t\t\tacyclic graph (a tree).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error occurs if the value to be stored is or contains a value\n\t\t\tof a disallowed type, like a Range, Function, Type, or a user-defined\n\t\t\tclass. This error is also reported if the data structure is recursive,\n\t\t\ti.e., if an array or dictionary contains itself as a value, possibly\n\t\t\tindirectly.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-40",content:"\n\t\t\t<p>\n\t\t\tThe given event name is not known.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe most probable reason for this error is a misspelled event name.\n\t\t\t</p>\n\t\t",children:[]},{id:"am-41",content:'\n\t\t\t<p>\n\t\t\tThe function registered as an event handler is expected to take exactly\n\t\t\tone argument, the event object. A common way to declare event handlers\n\t\t\tis as follows:\n\t\t\t<tscript>\n\t\t\t\tfunction onKey(event)\n\t\t\t\t{\n\t\t\t\t\tprint(event.key);\n\t\t\t\t}\n\t\t\t\tsetEventHandler("canvas.keydown", onKey);\n\t\t\t\tsetEventHandler("canvas.keyup", function(event) { print(event.key); });\n\t\t\t</tscript>\n\t\t\tThe event parameter must be present even for events emitting an empty\n\t\t\tevent dictionary.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThis error is raised if the event handler takes no arguments or more\n\t\t\tthan one argument.\n\t\t\t</p>\n\t\t',children:[]},{id:"am-42",content:"\n\t\t\t<p>\n\t\t\tThe function <i>deepcopy</i> creates a deep copy of a container.\n\t\t\tIf the container holds other containers as values then they are\n\t\t\tdeep copied, too. The copied data structure must fulfill the\n\t\t\tfollowing requirements:\n\t\t\t<ul>\n\t\t\t\t<li>It must not contain functions.</li>\n\t\t\t\t<li>It must not contain objects.</li>\n\t\t\t\t<li>It must not contain a loop, i.e., contain a value as its own sub-value.</li>\n\t\t\t</ul>\n\t\t\tThis error message indicates that the first or second property\n\t\t\tis not fulfilled.\n\t\t\t</p>\n\t\t",children:[]},{id:"am-43",content:"\n\t\t\t<p>\n\t\t\tThe error indicates that a recursive data structure was passed\n\t\t\tto a function that cannot handle this case since it would result\n\t\t\tin an infinite recursion, as illustrated by the following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = [];\n\t\t\t\ta.push(a);\n\t\t\t\t# print(a);          # error; would result in infinite recursion\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t",children:[]}]},{id:"name",name:"Name Lookup Errors",title:"Name Lookup Errors",content:'\n\t\t<p>\n\t\tA <a href="?doc#/language/expressions/names">name</a> refers to a declaration\n\t\taccording to the name lookup rules. The errors in this category indicate\n\t\tthat something went wrong either when declaring or when resolving a name.\n\t\t</p>\n\t',children:[{id:"ne-1",content:'\n\t\t\t<p>\n\t\t\tWhen providing named arguments in a function call, each parameter\n\t\t\tcan be specified only once. This error indicates that a parameter\n\t\t\twas specified multiple times. This includes the case that the\n\t\t\tparameter was specified as a positional and as a names argument.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b, c=0) { }\n\t\t\t\t\tf(3, 5);           # okay\n\t\t\t\t\t# f(3, 5, b=8);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t',children:[]},{id:"ne-2",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function with named parameters then the function to be\n\t\t\tcalled must have a parameter with the given name &ndash; otherwise\n\t\t\tthis error is reported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b = 0) { }\n\t\t\t\t\tf(a=3);      # okay\n\t\t\t\t\t# f(x=4);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-3",content:'\n\t\t\t<p>\n\t\t\tA function cannot be called with more arguments than it has\n\t\t\tparameters. An attempt to do so results in this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b, c) { }\n\t\t\t\tf(3, 5, 8);         # okay\n\t\t\t\t# f(3, 5, 8, 2);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-4",content:'\n\t\t\t<p>\n\t\t\tWhen calling a function, all (non-default) parameters must be\n\t\t\tspecified by providing corresponding (positional or named)\n\t\t\targuments. Failure to specify a parameter results in this error.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f(a, b, c) { }\n\t\t\t\tf(3, 5, 8);   # okay\n\t\t\t\t# f(3, 8);    # error: c not specified\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"ne-5",content:"\n\t\t\t<p>\n\t\t\tThis error means that the given name cannot be resolved\n\t\t\tsince no declaration of the given name exists. The three most\n\t\t\tcommon causes of this error are\n\t\t\t<ol>\n\t\t\t\t<li>the programmer forgot to declare the name,</li>\n\t\t\t\t<li>the name was mistyped, and</li>\n\t\t\t\t<li>the programmer forgot to make the name available with a use directive.</li>\n\t\t\t</ol>\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-6",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the variable requires a <keyword>this</keyword> argument that\n\t\t\tis not present, i.e., when accessing a non-static attribute from\n\t\t\twithin a nested function or class.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x;\n\t\t\t\t\tclass B\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tstatic function f()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-7",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the name refers to a local variable in an outer function.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tvar a = 7;\n\t\t\t\t\tfunction g()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(a);   # error\n\t\t\t\t\t}\n\t\t\t\t\tvar h = function[a]()\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(a);     # okay\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-8",content:"\n\t\t\t<p>\n\t\t\tIn certain situations a name is resolved into a variable that cannot\n\t\t\tbe accessed from the current context. This error refers to the case\n\t\t\tthat the only candidate to which the name could resolve is a private\n\t\t\tmember up a (direct or indirect) super class.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tclass A\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tvar x;\n\t\t\t\t}\n\t\t\t\tclass B : A\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tfunction f()\n\t\t\t\t\t{\n\t\t\t\t\t\t# print(x);   # error\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-9",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that a name was not found inside a namespace.\n\t\t\tFor a name of the form <code class="ebnf">identifier "." identifier</code>\n\t\t\twith the left identifier referring to a namespace, the right identifier\n\t\t\tis looked up inside that namespace. If the name is not found in there\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-11",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that a name refers to a namespace, while a\n\t\t\tdifferent entity was expected.\n\t\t\t</p>\n\t\t\t<div>\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tnamespace A\n\t\t\t\t{ }\n\t\t\t\tclass B # : A      # error; super class expected, namespace found\n\t\t\t\t{ }\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t",children:[]},{id:"ne-12",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/member-access">member access operator .</a>\n\t\t\treferences a public member of a type. If the left-hand-side evaluates\n\t\t\tto a type then access is restricted to public static members.\n\t\t\tThis error is reported if neither the type nor any of its super\n\t\t\tclasses has a public static member of the given name.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-13",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/expressions/member-access">member access operator .</a>\n\t\t\treferences a public member of a type. This error is reported if neither\n\t\t\tthe type nor any of its super classes has a public member of the given\n\t\t\tname.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-14",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a variable name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-15",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a function name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-16",content:'\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a parameter name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope. Therefore a function\n\t\t\tparameter can conflict with a\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">closure</a>\n\t\t\tparameter, which is declared first.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-17",content:'\n\t\t\t<p>\n\t\t\tAll <a href="?doc#/language/expressions/literals/anonymous-functions">closure</a>\n\t\t\tparameters belong to the same scope, therefore they must be unique.\n\t\t\tIf two closure parameters are declared with same name are declared\n\t\t\tthen this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-18",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a class name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-19",content:"\n\t\t\t<p>\n\t\t\tNames declared within a scope must be unique. This error indicates\n\t\t\tthat a namespace name is already used by a different declaration.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIn some contexts it is not obvious which names belong to which scope.\n\t\t\tOne typical pitfall is that function parameters, closure parameters,\n\t\t\tand the function body are all in the same scope.\n\t\t\t</p>\n\t\t",children:[]},{id:"ne-21",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/declarations/classes">constructor of a class</a>\n\t\t\tcan invoke the constructor of the super class with a special syntax\n\t\t\tstarting with a colon after the parameter list. Calling the super class\n\t\t\tconstructor makes sense only if the class has a super class. This error\n\t\t\tindicates that the super class constructor is called although there does\n\t\t\tnot exist a super class.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-22",content:'\n\t\t\t<p>\n\t\t\tThe <a href="?doc#/language/declarations/classes">super class of a class</a>\n\t\t\tis provided as a name. The name must refer to a type, otherwise this\n\t\t\terror is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-23",content:'\n\t\t\t<p>\n\t\t\tWhen importing all name from a namespace with a\n\t\t\t<a href="?doc#/language/directives/use">use directive</a> of the form\n\t\t\t<ebnf>"use" "namespace" use-name</ebnf>, then the namespace is\n\t\t\tprovided as a name. This is done in the assumption that the name\n\t\t\tindeed refers to a namespace, otherwise this error is triggered.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-24",content:'\n\t\t\t<p>\n\t\t\tWhen importing a name from a namespace with a\n\t\t\t<a href="?doc#/language/directives/use">use directive</a>, then the\n\t\t\tnames are made available in the current scope as if the declarations\n\t\t\twere members of the scope. Since names of declarations in a scope\n\t\t\tmust be unique, this can trigger conflicts. This error indicates that\n\t\t\tthe attempt to import a name creates such a conflict, since the name\n\t\t\twas already taken by a declaration or by another name import.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe often easiest way to fix this problem is to remove the use directive\n\t\t\tand to access the declaration by its full name. When importing a single\n\t\t\tname, a better solution is to import the conflicting declaration under\n\t\t\tan alias name.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-25",content:'\n\t\t\t<p>\n\t\t\tIt was attempted to call a constructor of a type with a protected or\n\t\t\tprivate constructor from outside the scope of the class, and for a\n\t\t\tprotected constructor, from outside the scope of its sub-classes.\n\t\t\tThis violates the member access rules explained\n\t\t\t<a href="?doc#/language/declarations/classes">here</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAn easy fix is to make the constructor public. However, this error\n\t\t\tusually indicates that objects of the given type should not ever be\n\t\t\tcreated directly from outside the class.\n\t\t\t</p>\n\t\t',children:[]},{id:"ne-26",content:"\n\t\t\t<p>\n\t\t\tIt was attempted to use a class as its own super class.\n\t\t\tThat's not possible because inheritance chains must be cycle-free.\n\t\t\t</p>\n\t\t",children:[]}]},{id:"logic",name:"Logic Errors",title:"Logic Errors",content:"\n\t\tThe errors in this category indicate a severe bug in the logic of a\n\t\tTScript program.\n\t",children:[{id:"le-1",content:"\n\t\t\t<p>\n\t\t\tThis error indicates that too many function calls were nested.\n\t\t\tIt is often caused by an infinite recursion.\n\t\t\t</p>\n\t\t",children:[]},{id:"le-2",content:'\n\t\t\t<p>\n\t\t\tThe function <code class="code">enterEventMode</code> was called,\n\t\t\tdirectly or indirectly, from within an event handler. Event\n\t\t\thandling mode cannot be nested, hence this error is reported.\n\t\t\t</p>\n\t\t',children:[]},{id:"le-3",content:'\n\t\t\t<p>\n\t\t\tThis error indicates that the function\n\t\t\t<code class="code">quitEventMode</code> was called although the\n\t\t\tprogram was not in event handling mode.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"user",name:"User-Defined Errors",title:"User-Defined Errors",content:"\n\t\tThis section collects errors reported by the program itself, not by\n\t\tthe TScript programming language and its runtime environment.\n\t",children:[{id:"ue-1",content:'\n\t\t\t<p>\n\t\t\tThe library function <a href="?doc#/library/core">assert</a> can be\n\t\t\tcalled in order to report an error in case a condition is violated.\n\t\t\tThe error is reported by user or library code, not by the core language.\n\t\t\t</p>\n\t\t',children:[]},{id:"ue-2",content:'\n\t\t\t<p>\n\t\t\tThe library function <a href="?doc#/library/core">error</a> can be\n\t\t\tcalled in order to report an error. The error is reported by user\n\t\t\tor library code, not by the core language.\n\t\t\t</p>\n\t\t',children:[]},{id:"ue-3",content:'\n\t\t\t<p>\n\t\t\tIf an exception is <a href="?doc#/language/statements/throw">thrown</a>\n\t\t\tand not <a href="?doc#/language/statements/try-catch">caught</a> then\n\t\t\tthe program stops and this error message is reported. This is often\n\t\t\tunintended by the programmer and hints at an internal error that\n\t\t\tshould be fixed.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"style",name:"Style Errors",title:"Style Errors",content:"\n\t\tThis section collects errors reported by the style checker. They are not\n\t\tprogramming errors in a strict sense. Yet, if configured to do so,\n\t\tTScript reports style errors to enforce good programming style. This\n\t\tbehavior can be changed in the configuration dialog.\n\t",children:[{id:"ste-1",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the indentation of a program is\n\t\t\tinconsistent. The indentation in each block must be larger\n\t\t\tthan in its surrounding block, and it must be consistent\n\t\t\twithin the block.\n\t\t\t<tscript>\n\t\t\tprint("hello");\n\t\t\t{\n\t\t\tprint("world");   # wrong; inner block indentation must\n\t\t\t                  # exceed outer block indentation\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"ste-2",content:'\n\t\t\t<p>\n\t\t\tThis error is reported if the indentation of program block\n\t\t\tmarkers is inconsistent, i.e., if the indentation of the line\n\t\t\tcontaining an opening brace differs from the indentation of\n\t\t\tthe line with the corresponding closing brace:\n\t\t\t<tscript>\n\t\t\tif true then {\n\t\t\t\tprint("true!");\n\t\t\t\t}   # This brace must not be indented\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"ste-3",content:"\n\t\t\t<p>\n\t\t\tThis error can occur when a variable, function, or namespace name\n\t\t\tstarts with a capital letter. By convention, these names start with\n\t\t\ta lowercase letter or an underscore.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t{\n\t\t\t\tvar foo = 7;   # okay\n\t\t\t\tvar Bar = 8;   # wrong; easily mistaken for a type\n\t\t\t}\n\t\t\t</tscript>\n\t\t",children:[]},{id:"ste-4",content:"\n\t\t\t<p>\n\t\t\tThis error can occur when a class name starts with a\n\t\t\tlowercase letter or an underscore. By convention, TScript\n\t\t\tclass names start with a capital letter.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t{\n\t\t\t\tclass Foo {}   # okay\n\t\t\t\tclass bar {}   # wrong\n\t\t\t}\n\t\t\t</tscript>\n\t\t",children:[]}]},{id:"internal",name:"Internal Errors",title:"Internal Errors",content:"\n\t\tThis section collects errors reported by TScript about itself.\n\t\tSuch errors <i>should of course never occur</i>, however, it is\n\t\tclear that bugs are unavoidable.\n\t",children:[{id:"ie-1",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if the TScript parser fails to\n\t\t\toperate as expected. This is not the fault of the program\n\t\t\twritten by the user, but rather a bug on the side of\n\t\t\tTScript.\n\t\t\t</p>\n\t\t",children:[]},{id:"ie-2",content:"\n\t\t\t<p>\n\t\t\tThis error is reported if the TScript interpreter fails to\n\t\t\toperate as expected. This is not the fault of the program\n\t\t\twritten by the user, but rather a bug on the side of\n\t\t\tTScript or its standard library.\n\t\t\t</p>\n\t\t",children:[]}]}]}},976:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_examples=void 0,e.doc_examples={id:"examples",name:"Example Programs",title:"Example Programs",content:'\n\t<p>\n\tThis section provides example programs demonstrating the use of\n\tturtle and canvas graphics. They can by copied by clicking the code.\n\tSimply paste the code into the editor and run the programs. You may\n\tneed to activate the corresponding panels (turtle or canvas) in\n\torder to see the output.\n\t</p>\n\t<ul>\n\t\t<li><a href="?doc#/examples/koch-snowflake">Koch snowflake (turtle graphics)</a></li>\n\t\t<li><a href="?doc#/examples/game-of-life">Conway\'s Game of Life (canvas graphics)</a></li>\n\t\t<li><a href="?doc#/examples/cube-3D">Rotating 3D Cube (canvas graphics)</a></li>\n\t</ul>\n',children:[{id:"koch-snowflake",name:"Koch Snowflake",title:"Koch Snowflake",content:"\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# Koch snowflake\n\t\t\t# https://en.wikipedia.org/wiki/Koch_snowflake\n\t\t\t#\n\n\t\t\tfunction segment(length, depth)\n\t\t\t{\n\t\t\t\tif depth <= 0 then\n\t\t\t\t{\n\t\t\t\t\tturtle.move(length);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(60);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t\tturtle.turn(60);\n\t\t\t\t\tsegment(length/3, depth-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar h0 = -80 / 3 * math.sqrt(3);\n\t\t\tfor var depth in 1:7 do\n\t\t\t{\n\t\t\t\tturtle.reset(-80, h0, 90);\n\t\t\t\tturtle.color(0, 0, 0);\n\t\t\t\tfor 0:3 do\n\t\t\t\t{\n\t\t\t\t\tsegment(160, depth);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t}\n\t\t\t\tif depth == 6 then break;\n\t\t\t\twait(1000);\n\t\t\t\tturtle.reset(-80, h0, 90);\n\t\t\t\tturtle.color(1, 1, 1);\n\t\t\t\tfor 0:3 do\n\t\t\t\t{\n\t\t\t\t\tsegment(160, depth);\n\t\t\t\t\tturtle.turn(-120);\n\t\t\t\t}\n\t\t\t}\n\t\t</tscript>\n\t",children:[]},{id:"game-of-life",name:"Game of Life",title:"Game of Life",content:'\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# Game of Life\n\t\t\t# https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\n\t\t\t#\n\n\t\t\t# initialize the field\n\t\t\tvar fieldsize = 25;\n\t\t\tvar field = [];\n\t\t\tfor var y in 0:fieldsize do\n\t\t\t{\n\t\t\t\tvar row = [];\n\t\t\t\tfor var x in 0:fieldsize do row.push(math.random() < 0.2);\n\t\t\t\tfield.push(row);\n\t\t\t}\n\n\t\t\t# progress the dynamics by one time step\n\t\t\tfunction step()\n\t\t\t{\n\t\t\t\tvar newfield = [];\n\t\t\t\tfor var y in 0:fieldsize do\n\t\t\t\t{\n\t\t\t\t\tvar row = [];\n\t\t\t\t\tfor var x in 0:fieldsize do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar n = 0;\n\t\t\t\t\t\tfor var b in -1:2 do\n\t\t\t\t\t\t\tfor var a in -1:2 do\n\t\t\t\t\t\t\t\tif field[(y+b+fieldsize) % fieldsize][(x+a+fieldsize) % fieldsize] then n += 1;\n\t\t\t\t\t\tif field[y][x] then row.push(n == 3 or n == 4);\n\t\t\t\t\t\telse row.push(n == 3);\n\t\t\t\t\t}\n\t\t\t\t\tnewfield.push(row);\n\t\t\t\t}\n\t\t\t\tfield = newfield;\n\t\t\t}\n\n\t\t\t# redraw the whole field\n\t\t\tfunction draw()\n\t\t\t{\n\t\t\t\t# size of a cell in pixels\n\t\t\t\tvar sz = math.min(canvas.width() // fieldsize, canvas.height() // fieldsize);\n\t\t\t\tif sz <= 0 then return;\n\n\t\t\t\tfor var y in 0:fieldsize do\n\t\t\t\t{\n\t\t\t\t\tfor var x in 0:fieldsize do\n\t\t\t\t\t{\n\t\t\t\t\t\tif field[y][x] then canvas.setFillColor(1, 1, 1);\n\t\t\t\t\t\telse canvas.setFillColor(0, 0, 1);\n\t\t\t\t\t\tcanvas.fillRect(x*sz, y*sz, sz, sz);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t# draw the initial state\n\t\t\tcanvas.setFillColor(0, 0, 0);\n\t\t\tcanvas.clear();\n\t\t\tdraw();\n\n\t\t\t# infinite "game" loop\n\t\t\twhile true do\n\t\t\t{\n\t\t\t\tstep();\n\t\t\t\tdraw();\n\t\t\t}\n\t\t</tscript>\n\t',children:[]},{id:"cube-3D",name:"3D Cube",title:"3D Cube",content:'\n\t\t<tscript do-not-run>\n\t\t\t#\n\t\t\t# 3D cube\n\t\t\t#\n\n\t\t\tuse namespace math;\n\n\t\t\tclass Face\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar color;\n\t\t\t\tvar points;\n\t\t\t\tconstructor(points_, color_)\n\t\t\t\t{\n\t\t\t\t\tpoints = points_;\n\t\t\t\t\tcolor = color_;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar points3d = [\n\t\t\t\t\t[-1,-1,-1],\n\t\t\t\t\t[+1,-1,-1],\n\t\t\t\t\t[-1,+1,-1],\n\t\t\t\t\t[+1,+1,-1],\n\t\t\t\t\t[-1,-1,+1],\n\t\t\t\t\t[+1,-1,+1],\n\t\t\t\t\t[-1,+1,+1],\n\t\t\t\t\t[+1,+1,+1],\n\t\t\t\t];\n\t\t\tvar faces = [\n\t\t\t\t\tFace([0,1,3,2], [1,0,0]),\n\t\t\t\t\tFace([1,0,4,5], [1,1,0]),\n\t\t\t\t\tFace([3,1,5,7], [0,1,0]),\n\t\t\t\t\tFace([2,3,7,6], [0,0,1]),\n\t\t\t\t\tFace([0,2,6,4], [1,0,1]),\n\t\t\t\t\tFace([6,7,5,4], [0,1,1]),\n\t\t\t\t];\n\n\t\t\tfunction matmat(m1, m2)\n\t\t\t{\n\t\t\t\tvar ret = [[1,0,0], [0,1,0], [0,0,1]];\n\t\t\t\tfor var i in 0:3 do\n\t\t\t\t{\n\t\t\t\t\tfor var j in 0:3 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar sum = 0.0;\n\t\t\t\t\t\tfor var k in 0:3 do sum += m1[i][k] * m2[k][j];\n\t\t\t\t\t\tret[i][j] = sum;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction matvec(m, v)\n\t\t\t{\n\t\t\t\tvar ret = [0,0,0];\n\t\t\t\tfor var j in 0:3 do\n\t\t\t\t{\n\t\t\t\t\tvar sum = 0.0;\n\t\t\t\t\tfor var k in 0:3 do sum += m[j][k] * v[k];\n\t\t\t\t\tret[j] = sum;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\tfunction projection(v)\n\t\t\t{\n\t\t\t\tuse namespace canvas;\n\t\t\t\tvar w = width() / 2;\n\t\t\t\tvar h = height() / 2;\n\t\t\t\tvar s = min(w, h);\n\t\t\t\treturn [w + s * v[0] / (v[2] + 3), h + s * v[1] / (v[2] + 3)];\n\t\t\t}\n\n\t\t\tfunction draw(yaw, pitch)\n\t\t\t{\n\t\t\t\tvar rot_yaw = [[cos(yaw),0,sin(yaw)], [0,1,0], [-sin(yaw),0,cos(yaw)]];\n\t\t\t\tvar rot_pitch = [[1,0,0], [0,cos(pitch),sin(pitch)], [0,-sin(pitch),cos(pitch)]];\n\t\t\t\tvar rot = matmat(rot_yaw, rot_pitch);\n\t\t\t\tvar points2d = [];\n\t\t\t\tfor var p in points3d do\n\t\t\t\t{\n\t\t\t\t\tvar p3d = matvec(rot, p);\n\t\t\t\t\tvar p2d = projection(p3d);\n\t\t\t\t\tpoints2d.push(p2d);\n\t\t\t\t}\n\t\t\t\tfor var f in faces do\n\t\t\t\t{\n\t\t\t\t\tvar list = [];\n\t\t\t\t\tfor var i in f.points do list.push(points2d[i]);\n\t\t\t\t\tvar v0 = [list[1][0] - list[0][0], list[1][1] - list[0][1]];\n\t\t\t\t\tvar v1 = [list[2][0] - list[1][0], list[2][1] - list[1][1]];\n\t\t\t\t\tvar det = v0[0] * v1[1] - v0[1] * v1[0];\n\t\t\t\t\tif det <= 0 then continue;\n\t\t\t\t\tuse namespace canvas;\n\t\t\t\t\tsetFillColor(f.color[0], f.color[1], f.color[2]);\n\t\t\t\t\tframeArea(list);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdraw(0, 0);\n\n\t\t\tfunction onMouseMove(event)\n\t\t\t{\n\t\t\t\tuse namespace canvas;\n\t\t\t\tsetFillColor(1, 1, 1);\n\t\t\t\tclear();\n\t\t\t\tdraw(width() / 2 - event.x / 100, event.y / 100 - height() / 2);\n\t\t\t}\n\n\t\t\talert("Move the mouse over the canvas!");\n\t\t\tsetEventHandler("canvas.mousemove", onMouseMove);\n\t\t\tenterEventMode();\n\t\t</tscript>\n\t',children:[]}]}},7427:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_ide=void 0,e.doc_ide={id:"ide",name:"The TScript IDE",title:"The TScript Integrated Development Environment (IDE)",content:"\n\t<p>\n\tTScript is not only a programming language, it also comes with a\n\tfully fledged integrated development environment (IDE). The IDE\n\tincludes a code editor and powerful debugging facilities.\n\t</p>\n\t<p>\n\tIn principle, the IDE can be decoupled from the programming language,\n\tand a single IDE can be used for a multitude of languages. However,\n\tproviding a default IDE for the language has advantages for\n\tbeginners. No choices need to be made. More importantly, there is no\n\tfriction in setup and configuration processes.\n\t</p>\n\t<p>\n\tThe TScript IDE main window consists of a toolbar at the top and an\n\tarea holding several panels. The panels can be docked to a wide area\n\ton the left or to a more narrow area on the right. They can also\n\tfloat around freely on top of docked panels, one panel can be\n\tmaximizied on top of all others, and panels can be reduced to icons.\n\tAll of this is controlled with the buttons in the title bar of each\n\tpanel. Panels can be resized by dragging the lower and right edges.\n\t</p>\n",children:[{id:"toolbar",name:"Toolbar",title:"Toolbar",content:'\n\t\t<p>\n\t\tThe IDE has a toolbar at the top. It features a number of central\n\t\tcontrols.\n\t\t</p>\n\t\t<p>\n\t\tThe four leftmost buttons manage files. They create a new\n\t\tdocument, open a document from a file, save to file, and save\n\t\tunder a different name. Currently, documents can only be stored\n\t\tin the local storage of the browser.\n\t\t<div class="warning">\n\t\t\tLocal storage is not a safe place to store data! It can be\n\t\t\tcleared at any time by the browser, and it is actively\n\t\t\tcleared by some plug-ins when removing cookies. Do not rely\n\t\t\ton your source code being safely stored when using this\n\t\t\ttechnology!\n\t\t</div>\n\t\tFurthermore, when opening TScript from multiple locations on the\n\t\tweb or in the file system, the browser treats the websites as\n\t\tdifferent, and files stored in one instance are not available in\n\t\tthe others.\n\t\t</p>\n\t\t<p>\n\t\tThe next group of buttons controls program execution. They start\n\t\tor continue, interrupt, and abort the program. Three further\n\t\tbuttons belong the the debugger. They step through the programs\n\t\tat different levels of granularity. The button with the little\n\t\tred dot toggles (sets/removes) the breakpoint in the current\n\t\tline, or the closest line below that is a legal breakpoint\n\t\tlocation.\n\t\t</p>\n\t\t<p>\n\t\tThe green arrow opens the export dialog. It allows to export\n\t\tprograms using turtle graphics or canvas graphics as standalone\n\t\tapplications (web pages). These files can be ran in a browser,\n\t\ti.e., independent of the TScript IDE.\n\t\t</p>\n\t\t<p>\n\t\tThe button with the gear symbol opens the configuration dialog.\n\t\tCurrently it allows to configure the hotkeys associated with the\n\t\ttoolbar buttons. Furthermore, there is a checkbox that enables\n\t\t<a href="?doc#/concepts/style">style checking mode</a>.\n\t\t</p>\n\t\t<p>\n\t\tIt follows a wide element with colored background, called the\n\t\tprogram state indicator. It indicates whether the program is just\n\t\tabout to be written, whether it was parsed successfully or whether\n\t\tan error occurred, and whether the program is running, waiting, or\n\t\tinterrupted.\n\t\t</p>\n\t\t<p>\n\t\tRight of the program indicator there is an area collecting icons of\n\t\ticonified panels. The icons can be clicked to restore the previous\n\t\tnon-icon state of a panel.\n\t\t</p>\n\t\t<p>\n\t\tFinally, the button on the far right opens the documentation (i.e.,\n\t\tthis very collection of documents) in a new window or browser tab.\n\t\t</p>\n\t',children:[]},{id:"editor",name:"Source Code Editor",title:"Source Code Editor",content:'\n\t\t<p>\n\t\tThe source code editor is the most important panel. It consists\n\t\tof a modern browser-based text editor with syntax highlighting\n\t\tfor the TScript programming language. The program code is typed,\n\t\tpasted, or loaded into this panel. Breakpoints can be toggled\n\t\t(added/removed) by clicking the gutter on the left. The gutter\n\t\talso displays line numbers.\n\t\t</p>\n\t\t<p>\n\t\tBesides the hotkeys defined for the\n\t\t<a href="?doc#/ide/toolbar">toolbar</a> buttons, the editor provides\n\t\tthe following hotkeys:\n\t\t<table class="nicetable">\n\t\t\t<tr><th>key</th><th>effect</th></tr>\n\t\t\t<tr><td>control-A</td><td>select all</td></tr>\n\t\t\t<tr><td>control-Z</td><td>undo last change</td></tr>\n\t\t\t<tr><td>shift-control-Z</td><td>redo last change</td></tr>\n\t\t\t<tr><td>control-Y</td><td>redo last change</td></tr>\n\t\t\t<tr><td>control-Home</td><td>jump to start of the document</td></tr>\n\t\t\t<tr><td>control-End</td><td>jump to end of the document</td></tr>\n\t\t\t<tr><td>shift-Tabulator</td><td>auto-indent the current line</td></tr>\n\t\t\t<tr><td>control-D</td><td>comment/uncomment selected lines</td></tr>\n\t\t\t<tr><td>control-F</td><td>open the <i>find</i> dialog</td></tr>\n\t\t\t<tr><td>shift-control-F</td><td>open the <i>find+replace</i> dialog</td></tr>\n\t\t\t<tr><td>control-G</td><td>next search result</td></tr>\n\t\t\t<tr><td>shift-control-G</td><td>previous search result</td></tr>\n\t\t\t<tr><td>alt-G</td><td>open the <i>goto line</i> dialog</td></tr>\n\t\t</table>\n\t\tOn MacOS, use the command key instead of the control key.\n\t\t</p>\n\t',children:[]},{id:"messages",name:"Message Area",title:"Message Area",content:'\n\t\t<p>\n\t\tThe message area contains two types of entities: text printed by\n\t\tthe program with the <a href="?doc#/library/core">print</a> function,\n\t\tand error messages. Errors are clickable, highlighting the line\n\t\tof code in which the error occurred. Also, there is a clickable\n\t\tinformation symbol &#128712; that opens the documentation of the\n\t\terror.\n\t\t</p>\n\t',children:[]},{id:"debugging",name:"Debugging Facilities",title:"Debugging Facilities",content:"\n\t\t<p>\n\t\tThe debugger is firmly integrated into the IDE. It consists of\n\t\tseveral elements. The most prominent ones are stack and program\n\t\tview. Furthermore, stepwise program execution is controlled with\n\t\tthe toolbar buttons, the message area collects error messages,\n\t\twhich are often a starting point for debugging, and breakpoints\n\t\tare defined in the source code error.\n\t\t</p>\n\n\t\t<h2>The Stack View</h2>\n\t\t<p>\n\t\tThis panel contains information only while the program is running.\n\t\tIt displays the program state as a tree. At the topmost level, the\n\t\ttree contains one node per stack frame, which is the entity holding\n\t\tall local variables of a function. The bottom-most stack frame\n\t\t(with index [0]) holds the global variables.\n\t\t</p>\n\t\t<p>\n\t\tEach stack frame holds one sub-node per variable. If the variable\n\t\trefers to a container or an object, then the node can be opened and\n\t\tthe items or attributes are found in the next layer. For example,\n\t\tan array holding 10 items is represented by 10 sub-nodes, one for\n\t\teach item.\n\t\t</p>\n\t\t<p>\n\t\tFurthermore, each stack frame holds a list of temporary values. A\n\t\ttemporary value exists only during the evaluation of an expression,\n\t\tbefore it is consumed by another expression.\n\t\t</p>\n\t\t</p>\n\t\tThe panel allows to inspect the values of all variables at runtime.\n\t\tThis information is invaluable for debugging. While running the\n\t\tprogram step by step the programmer can monitor the effect of all\n\t\tcommands on the variables.\n\t\t<p>\n\n\t\t<h2>The Program View</h2>\n\t\t<p>\n\t\tThis panel contains information only after the program is parsed.\n\t\tIt displays the program structure as a tree. The root node\n\t\trepresents the global scope. Nodes below this one represent\n\t\tdeclarations and statements, which again have sub-nodes, all the\n\t\tway down to atomic units like literals, names, operators, etc.\n\t\tClicking a node of the tree navigates the cursor in the source code\n\t\teditor to the corresponding element. The position of the element is\n\t\tfurthermore provided in parentheses, in the form (line:character).\n\t\t</p>\n\t\t<p>\n\t\tDuring runtime, the tree displays the current instruction by\n\t\thighlighting it with an orange background. It provides an\n\t\tinstructive illustration of the program flow, which can be a\n\t\tvaluable debugging aid.\n\t\t</p>\n\t",children:[]},{id:"program",name:"Program IO Panels",title:"Program IO Panels",content:"\n\t\t<p>\n\t\tThere are two panels dedicated to input and output of the program:\n\t\tone for turtle graphics, and one for a proper graphical user interface.\n\t\tIt is uncommon to include these facilities directly into an IDE. This\n\t\tis because programs are supposed to run independent of the IDE. For\n\t\tTScript this is a minor concern, since the language is not designed\n\t\tfor production use.\n\t\t</p>\n\n\t\t<h2>Turtle Graphics</h2>\n\t\t<p>\n\t\tThe turtle graphics panel represents the area in which the fictitious\n\t\tturtle robot moves around. The panel contains the lines drawn by the\n\t\trobot while moving. It does not display the turtle.\n\t\t</p>\n\t\t<p>\n\t\tThe panel is automatically cleared at program start. The drawing\n\t\tremains even after the program has finished.\n\t\t</p>\n\t\t<p>\n\t\tThe drawing area is a square. However, for display, the area is\n\t\tstretched along one axis to match the aspect ratio of the panel.\n\t\tTherefore it is best practice to keep the panel roughly square shaped.\n\t\t</p>\n\n\t\t<h2>Canvas Graphics</h2>\n\t\t<p>\n\t\tThe canvas panel contains a canvas for drawing geometric shapes and\n\t\ttext. With these tools it is rather easy to display images, for\n\t\texample for simple video games. The panel allows for rich user\n\t\tinteraction. Mouse clicks and mouse pointer movement as well as key\n\t\tpresses generate events that can be processed by the program to\n\t\tcreate interactive applications.\n\t\t</p>\n\t",children:[]}]}},5662:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_language=void 0,e.doc_language={id:"language",name:"The TScript Language",title:"Reference Documentation for the TScript Programming Language",content:"\n\t<p>\n\tThis is the reference documentation of the TScript programming\n\tlanguage. It covers all language features in great detail and with\n\tprecision.\n\t</p>\n",children:[{id:"syntax",name:"Syntax",title:"Syntax",content:'\n\t\t<p>\n\t\tThe syntax of the TScript language specifies whether a text is\n\t\ta well-formed (valid) or ill-formed (invalid) program. A\n\t\twell-formed program can be executed, while trying to run\n\t\tan ill-formed (or malformed) program results in an error\n\t\tmessage already before the program starts. The syntax is\n\t\tspecified in terms of an\n\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">Extended Backus-Naur Form (EBNF)</a>.\n\t\t</p>\n\t\t<p>\n\t\tThe documents within this section define various general aspects\n\t\tof the TScript syntax. For completeness sake, we also provide a\n\t\t<a href="?doc#/language/syntax/EBNF-syntax">complete formal EBNF definition of the TScript syntax</a>.\n\t\t</p>\n\t',children:[{id:"character-set",name:"Character Set",title:"Character Set",content:'\n\t\t\t<p>\n\t\t\tTScript source code consists of unicode characters from the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane">Basic Multilingual Plane</a> (BMP).\n\t\t\tThese characters have codes in the range U+0000 to U+FFFF.\n\t\t\tIn other words, each character (or "code point") can be\n\t\t\trepresented as an unsigned 16-bit integer.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHowever, this document does not specify the <i>character\n\t\t\tencoding</i>, but only the <i>character set</i>. So for\n\t\t\texample UTF-8 encoded text is fine, as long as it does not\n\t\t\tcontain code points above U+FFFF.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOutside of\n\t\t\t<a href="?doc#/language/syntax/comments">comments</a> and\n\t\t\t<a href="?doc#/language/expressions/literals/strings">string literals</a>,\n\t\t\tonly the printable ASCII range U+0020 to U+007E and the\n\t\t\tASCII control characters U+0009 (horizontal tabulator),\n\t\t\tU+000A (line feed), and U+000D (carriage return) are valid.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tInside comments and string literals, the full range U+0000\n\t\t\tto U+FFFF is legal. Every character can be denoted in plain\n\t\t\tASCII by means of an escaping mechanism.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t<b>Note:</b>\n\t\t\tThe TScript implementation is based directly on Javascript\n\t\t\t(ECMAScript&nbsp;6). Javascript allows its implementations\n\t\t\tto support the complete unicode range by composing\n\t\t\tcharacters outside the BMP with the UTF16 encoding, but this\n\t\t\tfeature is not mandatory. In practice, Javascript engines do\n\t\t\tsupport the mechanism, which amounts to representing the\n\t\t\tunicode characters outside the BMP with two characters in\n\t\t\tthe range U+0000 to U+FFFF. This solution is error-prone.\n\t\t\tFor example, it is somewhat surprising if a string that\n\t\t\tprints as a single character consists of two characters, as\n\t\t\trevealed by the size method and when accessing the\n\t\t\tcharacters, slicing the string, etc. It is therefore\n\t\t\trecommended to restrict string contents to the BMP.\n\t\t\t</p>\n\t\t',children:[]},{id:"tokens",name:"Tokens",title:"Tokens",content:'\n\t\t\t<p>\n\t\t\tA TScript program consists of a sequence of tokens. Each\n\t\t\ttoken is a meaningful and often short string of characters\n\t\t\twith clear semantics. Tokens can be separated by whitespace,\n\t\t\tcomments, other terminals, or they can be self-delimiting.\n\t\t\tA sequence of input characters that does not match any of\n\t\t\tthe token types results in a syntax error.\n\t\t\t</p>\n\n\t\t\t<h2>Whitespace and Comments</h2>\n\t\t\t<p>\n\t\t\tWhitespace and\n\t\t\t<a href="?doc#/language/syntax/comments">comments</a> are not\n\t\t\tby themselves considered tokens, but they separate tokens\n\t\t\tand therefore they must be defined:\n\t\t\t<ebnf>\n\t\t\t\twhitespace = " " | tabulator | carriage-return | line-feed ;\n\t\t\t\ttabulator = $ U+0009 $ ;\n\t\t\t\tcarriage-return = $ U+000A $ ;\n\t\t\t\tline-feed = $ U+000D $ ;\n\t\t\t\tcomment = line-comment | block-comment ;\n\t\t\t\tline-comment = "#" (unicode-char - "*" - line-feed)\n\t\t\t\t                   { unicode-char - line-feed } ;\n\t\t\t\tblock-comment = "#*" { (unicode-char - "*")\n\t\t\t\t                       | ("*" { "*" } (unicode-char - "#"))\n\t\t\t\t                     } "*#" ;\n\t\t\t\tunicode-char = $ any Unicode character U+0000 to U+FFFF $ ;\n\t\t\t</ebnf>\n\t\t\t</p>\n\n\t\t\t<h2>Identifiers and Keywords</h2>\n\t\t\t<p>\n\t\t\tAn identifier is defined as follows:\n\t\t\t<ebnf>\n\t\t\t\tidentifier = id_or_key - keyword ;\n\t\t\t\tid_or_key = (letter | "_") { letter | digit | "_" } ;\n\t\t\t\tletter = "A" | "B" | "C" | "D" | "E" | "F" | "G"\n\t\t\t\t       | "H" | "I" | "J" | "K" | "L" | "M" | "N"\n\t\t\t\t       | "O" | "P" | "Q" | "R" | "S" | "T" | "U"\n\t\t\t\t       | "V" | "W" | "X" | "Y" | "Z" | "a" | "b"\n\t\t\t\t       | "c" | "d" | "e" | "f" | "g" | "h" | "i"\n\t\t\t\t       | "j" | "k" | "l" | "m" | "n" | "o" | "p"\n\t\t\t\t       | "q" | "r" | "s" | "t" | "u" | "v" | "w"\n\t\t\t\t       | "x" | "y" | "z" ;\n\t\t\t\tdigit = "0" | "1" | "2" | "3" | "4" | "5" | "6"\n\t\t\t\t      | "7" | "8" | "9" ;\n\t\t\t\tkeyword = $ list of TScript keywords $ ;\n\t\t\t</ebnf>\n\t\t\tIt is essentially a non-empty name consisting of letters,\n\t\t\tdigits and underscores that does not start with a digit.\n\t\t\tFor the definition of <ebnf>keyword</ebnf> see the\n\t\t\t<a href="?doc#/language/syntax/keywords">list of keywords</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Integers</h2>\n\t\t\t<p>\n\t\t\tAn integer is simply defined as a non-empty sequence of\n\t\t\tdigits:\n\t\t\t<ebnf>\n\t\t\t\tinteger = digit { digit } ;\n\t\t\t</ebnf>\n\t\t\tToo large tokens exceeding the\n\t\t\t<a href="?doc#/language/types/integer">integer</a> range result\n\t\t\tin an error message when parsing the literal formed from the\n\t\t\ttoken.\n\t\t\t</p>\n\n\t\t\t<h2>Reals</h2>\n\t\t\t<p>\n\t\t\tA real must contain a fractional part, or an exponent, or both:\n\t\t\t<ebnf>\n\t\t\t\treal = integer "." integer\n\t\t\t\t\t | integer ("e" | "E") [ "+" | "-" ] integer\n\t\t\t\t     | integer "." integer ("e" | "E") [ "+" | "-" ] integer ;\n\t\t\t</ebnf>\n\t\t\t</p>\n\n\t\t\t<h2>Strings</h2>\n\t\t\t<p>\n\t\t\tSimple strings are character sequences enclosed in double\n\t\t\tquotes. A string token can contain escape sequences. It is\n\t\t\tdefined as follows:\n\t\t\t<ebnf>\n\t\t\t\tstring = \'"\' { (unicode-char - "\\" - line-feed) | escape } \'"\' ;\n\t\t\t\tescape = "\\" "\\"\n\t\t\t\t       | "\\" \'"\'\n\t\t\t\t       | "\\" "r"\n\t\t\t\t       | "\\" "n"\n\t\t\t\t       | "\\" "t"\n\t\t\t\t       | "\\" "f"\n\t\t\t\t       | "\\" "b"\n\t\t\t\t       | "\\" "/"\n\t\t\t\t       | "\\" "u" hex hex hex hex ;\n\t\t\t\thex = digit | "A" | "B" | "C" | "D" | "E" | "F"\n\t\t\t\t            | "a" | "b" | "c" | "d" | "e" | "f" ;\n\t\t\t</ebnf>\n\t\t\tA <a href="?doc#/language/expressions/literals/strings">string literal</a>\n\t\t\tcan consist of multiple such tokens.\n\t\t\t</p>\n\n\t\t\t<h2>Operators, Groupings, and Separators</h2>\n\t\t\t<p>\n\t\t\tFor these simple token types, we let the definition speak\n\t\t\tfor itself. Note that some operators start with a shorter\n\t\t\tsequence that also forms an operator. The token is always\n\t\t\tthe longest possible sequence.\n\t\t\t</p>\n\t\t\t<ebnf>\n\t\t\t\toperator = arithmetic_op | compare_op | assign-op ;\n\t\t\t\tbinary-op = "+" | "-" | "*" | "/" | "//" | "%" | "^" ;\n\t\t\t\tcompare_op = "==" | "!=" | "<" | "<=" | ">" | ">=" ;\n\t\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\t\tgrouping = "(" | ")" | "[" | "]" | "{" | "}" ;\n\t\t\t\tseparator = "," | "." | ";" ;\n\t\t\t</ebnf>\n\t\t',children:[]},{id:"keywords",name:"Keywords",title:"List of Keywords",content:"\n\t\t\t<p>\n\t\t\tCertain identifier names are disallowed, namely the\n\t\t\tso-called keywords. Here is a complete list of all TScript\n\t\t\tkeywords in alphabetical order:\n\t\t\t</p>\n\t\t\t<ul>\n\t\t\t\t<li><keyword>and</keyword></li>\n\t\t\t\t<li><keyword>break</keyword></li>\n\t\t\t\t<li><keyword>case</keyword></li>\n\t\t\t\t<li><keyword>catch</keyword></li>\n\t\t\t\t<li><keyword>class</keyword></li>\n\t\t\t\t<li><keyword>const</keyword></li>\n\t\t\t\t<li><keyword>constructor</keyword></li>\n\t\t\t\t<li><keyword>continue</keyword></li>\n\t\t\t\t<li><keyword>default</keyword></li>\n\t\t\t\t<li><keyword>do</keyword></li>\n\t\t\t\t<li><keyword>else</keyword></li>\n\t\t\t\t<li><keyword>enum</keyword></li>\n\t\t\t\t<li><keyword>export</keyword></li>\n\t\t\t\t<li><keyword>false</keyword></li>\n\t\t\t\t<li><keyword>for</keyword></li>\n\t\t\t\t<li><keyword>from</keyword></li>\n\t\t\t\t<li><keyword>function</keyword></li>\n\t\t\t\t<li><keyword>if</keyword></li>\n\t\t\t\t<li><keyword>import</keyword></li>\n\t\t\t\t<li><keyword>include</keyword></li>\n\t\t\t\t<li><keyword>module</keyword></li>\n\t\t\t\t<li><keyword>namespace</keyword></li>\n\t\t\t\t<li><keyword>not</keyword></li>\n\t\t\t\t<li><keyword>null</keyword></li>\n\t\t\t\t<li><keyword>operator</keyword></li>\n\t\t\t\t<li><keyword>or</keyword></li>\n\t\t\t\t<li><keyword>private</keyword></li>\n\t\t\t\t<li><keyword>protected</keyword></li>\n\t\t\t\t<li><keyword>public</keyword></li>\n\t\t\t\t<li><keyword>return</keyword></li>\n\t\t\t\t<li><keyword>static</keyword></li>\n\t\t\t\t<li><keyword>super</keyword></li>\n\t\t\t\t<li><keyword>switch</keyword></li>\n\t\t\t\t<li><keyword>then</keyword></li>\n\t\t\t\t<li><keyword>this</keyword></li>\n\t\t\t\t<li><keyword>throw</keyword></li>\n\t\t\t\t<li><keyword>true</keyword></li>\n\t\t\t\t<li><keyword>try</keyword></li>\n\t\t\t\t<li><keyword>use</keyword></li>\n\t\t\t\t<li><keyword>var</keyword></li>\n\t\t\t\t<li><keyword>while</keyword></li>\n\t\t\t\t<li><keyword>xor</keyword></li>\n\t\t\t</ul>\n\t\t\t<p>\n\t\t\tNot all keywords are used in the current version of the language,\n\t\t\tsome are reserved for future extensions.\n\t\t\t</p>\n\t\t",children:[]},{id:"comments",name:"Comments",title:"Line and Block Comments",content:'\n\t\t\t<p>\n\t\t\tComments are pieces of program code without any semantic\n\t\t\tmeaning. In other words, comments are ignored when running\n\t\t\tthe program. While being ignored by the machine, they are\n\t\t\tintended to be read by humans, usually for the purpose of\n\t\t\tdocumentation. In TScript there are two types of comments:\n\t\t\tline comments and block comments.\n\t\t\t</p>\n\t\t\t<h2>Line Comments</h2>\n\t\t\t<p>\n\t\t\tLine comments start with the token\n\t\t\t<code class="code">#</code> not immediately followed by\n\t\t\t<code class="code">*</code> and extend to the end of the\n\t\t\tline. One beneficial property of line comments is that they\n\t\t\tcan be nested, i.e.,\n\t\t\t<tscript>\n\t\t\t\t# # a nested line comment\n\t\t\t</tscript>\n\t\t\tis still a valid comment, since the fact that a comment is\n\t\t\tinside another comment is ignored.\n\t\t\t</p>\n\t\t\t<h2>Block Comments</h2>\n\t\t\t<p>\n\t\t\tBlock comments start with <code class="code">#*</code> and end with\n\t\t\t<code class="code">*#</code>. In contrast to line comments, block\n\t\t\tcomments are entirely free in their extent. They may span\n\t\t\tonly a small part of a line or even multiple lines. The price to pay is that\n\t\t\tblock comments cannot be nested, since in\n\t\t\t<div class="code"><pre class="code"><code class="code"><span class="code-comment">#* a broken #* block *#</span> comment *#</code></pre></div>\n\t\t\tthe comment ends with the <i>first</i> occurrence of\n\t\t\t<code class="code">*#</code>, so that <code class="code">comment *</code> is\n\t\t\tinterpreted as program code (which is most probably malformed),\n\t\t\tand the final <code class="code">#</code> as the start of a\n\t\t\tline comment.\n\t\t\t</p>\n\t\t',children:[]},{id:"lexical-blocks",name:"Lexical Blocks and Separators",title:"Lexical Blocks and Separators",content:'\n\t\t\t<p>\n\t\t\tIn TScript, whitespace is useful for separating tokens, but\n\t\t\tit is insignificant for separating language constructs like\n\t\t\tdefinitions, statements, and directives. In particular,\n\t\t\tindentation is optional, and statements can extend beyond\n\t\t\tthe end of the current line. Instead, declarations and\n\t\t\tstatements are delimited by keywords and, in most cases,\n\t\t\twith a semicolon&nbsp;<tscript>;</tscript>. This means that\n\t\t\tin many cases the tokens in between semicolons form a single\n\t\t\tstatement.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAnother useful structural property of the TScript language that\n\t\t\tbecomes apparent already at the lexical level are parentheses\n\t\t\t<code class="code">( )</code>, square brackets <code class="code">[ ]</code>,\n\t\t\tand curly braces <code class="code">{ }</code>. The TScript syntax\n\t\t\tis designed so that opening and closing tokens must always match.\n\t\t\tFor example, when encountering the sequence of tokens\n\t\t\t<code class="code">{(</code> then <code class="code">)</code> is fine, while\n\t\t\tencountering <code class="code">}</code> first indicates a syntax error.\n\t\t\t</p>\n\t\t',children:[]},{id:"EBNF-syntax",name:"Complete EBNF Syntax",title:"Complete Formal EBNF Definition of the TScript Syntax",content:'\n\t\t\t<p>\n\t\t\tThis section collects all syntax rules for reference.\n\t\t\t</p>\n\n\t\t\t<ebnf>\n\t\t\twhitespace = " " | tabulator | carriage-return | line-feed ;\n\t\t\ttabulator = $ U+0009 $ ;\n\t\t\tcarriage-return = $ U+000A $ ;\n\t\t\tline-feed = $ U+000D $ ;\n\t\t\tcomment = line-comment | block-comment ;\n\t\t\tline-comment = "#" (unicode-char - "*" - line-feed)\n\t\t\t                   { unicode-char - line-feed } ;\n\t\t\tblock-comment = "#*" { (unicode-char - "*")\n\t\t\t                       | ("*" { "*" } (unicode-char - "#"))\n\t\t\t                     } "*#" ;\n\t\t\tunicode-char = $ any Unicode character U+0000 to U+FFFF $ ;\n\t\t\tidentifier = id_or_key - keyword ;\n\t\t\tid_or_key = (letter | "_") { letter | digit | "_" } ;\n\t\t\tletter = "A" | "B" | "C" | "D" | "E" | "F" | "G"\n\t\t\t       | "H" | "I" | "J" | "K" | "L" | "M" | "N"\n\t\t\t       | "O" | "P" | "Q" | "R" | "S" | "T" | "U"\n\t\t\t       | "V" | "W" | "X" | "Y" | "Z" | "a" | "b"\n\t\t\t       | "c" | "d" | "e" | "f" | "g" | "h" | "i"\n\t\t\t       | "j" | "k" | "l" | "m" | "n" | "o" | "p"\n\t\t\t       | "q" | "r" | "s" | "t" | "u" | "v" | "w"\n\t\t\t       | "x" | "y" | "z" ;\n\t\t\tdigit = "0" | "1" | "2" | "3" | "4" | "5" | "6"\n\t\t\t      | "7" | "8" | "9" ;\n\t\t\tkeyword = "and" | "break" | "catch" | "class" | "constructor"\n\t\t\t        | "continue" | "do" | "else" | "false" | "for" | "from"\n\t\t\t        | "function" | "if" | "namespace" | "not" | "null"\n\t\t\t        | "or" | "private" | "protected" | "public" | "return"\n\t\t\t        | "static" | "super" | "then" | "this" | "throw"\n\t\t\t        | "true" | "try" | "use" | "var" | "while" | "xor" ;\n\n\t\t\tinteger = digit { digit } ;\n\t\t\treal = integer "." integer\n\t\t\t\t | integer ("e" | "E") [ "+" | "-" ] integer\n\t\t\t     | integer "." integer ("e" | "E") [ "+" | "-" ] integer ;\n\t\t\tstring = \'"\' { (unicode-char - "\\" - line-feed) | escape } \'"\' ;\n\t\t\tescape = "\\" "\\"\n\t\t\t       | "\\" \'"\'\n\t\t\t       | "\\" "r"\n\t\t\t       | "\\" "n"\n\t\t\t       | "\\" "t"\n\t\t\t       | "\\" "f"\n\t\t\t       | "\\" "b"\n\t\t\t       | "\\" "/"\n\t\t\t       | "\\" "u" hex hex hex hex ;\n\t\t\thex = digit | "A" | "B" | "C" | "D" | "E" | "F"\n\t\t\t            | "a" | "b" | "c" | "d" | "e" | "f" ;\n\n\t\t\toperator = arithmetic_op | compare_op | assign-op ;\n\t\t\tbinary-op = "+" | "-" | "*" | "/" | "//" | "%" | "^" ;\n\t\t\tcompare_op = "==" | "!=" | "<" | "<=" | ">" | ">=" ;\n\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\tgrouping = "(" | ")" | "[" | "]" | "{" | "}" ;\n\t\t\tseparator = "," | "." | ";" ;\n\n\t\t\tdeclaration = var-decl\n\t\t\t            | func-decl\n\t\t\t            | class-decl\n\t\t\t            | namespace-decl ;\n\n\t\t\tvar-decl = "var" single-var { "," single-var } ";" ;\n\t\t\tsingle-var = identifier [ "=" expression ] ;\n\t\t\tfunc-decl = "function" identifier "(" param-list ")" func-body ;\n\t\t\tparam-list = [ param-decl { "," param-decl } ] ;\n\t\t\tparam-decl = identifier [ "=" constant-ex ] ;\n\t\t\tconstant-ex = $ expression that evaluates to a constant $ ;\n\t\t\tfunc-body = "{" { declaration | statement | directive } "}" ;\n\t\t\tclass-decl = "class" identifier [ ":" name ] class-body ;\n\t\t\tclass-body = "{" "}" | "{" visibility { visibility\n\t\t\t                                        | constructor\n\t\t\t                                        | [ "static" ] declaration\n\t\t\t                                        | directive }\n\t\t\t                         "}" ;\n\t\t\tvisibility = ("public" | "procected" | "private") ":" ;\n\t\t\tconstructor = "constructor" "(" param-list ")"\n\t\t\t         [ ":" "super" "(" [ expression { "," expression } ] ")" ]\n\t\t\t         func-body ;\n\t\t\tnamespace-decl = "namespace" identifier namespace-body ;\n\t\t\tnamespace-body = "{" { declaration | statement | directive } "}"\n\n\t\t\tdirective = use ;\n\t\t\tuse-directive = [ "from" name ] "use" name-import\n\t\t\t                                     { "," name-import } ";" ;\n\t\t\tname-import = ("namespace" use-name)\n\t\t\t            | (use-name [ "as" identifier ]) ;\n\t\t\tuse-name = identifier { "." identifier } ;\n\n\t\t\texpression = literal\n\t\t\t           | group\n\t\t\t           | unary-operator\n\t\t\t           | binary-operator\n\t\t\t           | function-call\n\t\t\t           | item-access\n\t\t\t           | member-access\n\t\t\t           | name ;\n\t\t\tliteral = null\n\t\t\t        | boolean\n\t\t\t        | integer\n\t\t\t        | real\n\t\t\t        | string { string }\n\t\t\t        | array\n\t\t\t        | dictionary\n\t\t\t        | lambda ;\n\t\t\tnull = "null" ;\n\t\t\tboolean = "true" | "false" ;\n\t\t\tarray = empty-array | nonempty-array ;\n\t\t\tempty-array = "[" "]" ;\n\t\t\tnonempty-array = "[" expression { "," expression } [ "," ] "]" ;\n\t\t\tdictionary = empty-dictionary | nonempty-dictionary ;\n\t\t\tempty-dictionary = "{" "}" ;\n\t\t\tnonempty-dictionary = "{" key-value { "," key-value } [ "," ] "}" ;\n\t\t\tkey-value = (string | identifier) ":" expression ;\n\t\t\tlambda = "function" [ closure ] "(" param-list ")" func-body ;\n\t\t\tclosure = "[" [ closure-param { "," closure-param } ] "]" ;\n\t\t\tclosure-param = [ identifier "=" ] expression ;\n\t\t\tparam-list = [ param-decl { "," param-decl } ] ;\n\t\t\tparam-decl = identifier [ "=" constant-ex ] ;\n\t\t\tconstant-ex = $ expression that evaluates to a constant $ ;\n\t\t\tfunc-body = "{" { declaration | statement | directive } "}" ;\n\t\t\tname = ("super" "." identifier) | (identifier {"." identifier})\n\n\t\t\tblock = "{" { declaration | statement | directive } "}" ;\n\t\t\tassignment = lhs assign-op expression ";" ;\n\t\t\tlhs = name\n\t\t\t        | expression "[" expression "]"\n\t\t\t        | expression "." identifier ;\n\t\t\tassign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\tcondition = "if" expression "then" statement\n\t\t\t                          [ "else" statement ] ;\n\t\t\tfor-loop = "for" [ loop-var "in" ] expression "do" statement ;\n\t\t\tloop-var = ("var" identifier) | name ;\n\t\t\twhile-do-loop = "while" expression "do" statement ;\n\t\t\tdo-while-loop = "do" statement "while" expression ";" ;\n\t\t\tbreak = "break" ";" ;\n\t\t\tcontinue = "continue" ";" ;\n\t\t\treturn = "return" [ expression ] ";" ;\n\t\t\tthrow = "throw" expression ";" ;\n\t\t\ttry-catch = "try" statement\n\t\t\t            "catch" "var" identifier "do" statement ;\n\n\t\t\tprogram = { declaration | statement | directive } ;\n\t\t\t</ebnf>\n\t\t',children:[]}]},{id:"declarations",name:"Declarations",title:"Declarations",content:"\n\t\t<p>\n\t\tA declaration defines a named entity. Possible entities are variables,\n\t\tfunctions, classes, and namespaces. Hence, a declaration is defined\n\t\tformally as follows:\n\t\t<ebnf>\n\t\t\tdeclaration = var-decl\n\t\t\t            | func-decl\n\t\t\t            | class-decl\n\t\t\t            | namespace-decl ;\n\t\t</ebnf>\n\t\tThe terms on the right hand side are defined in the following\n\t\tsub-sections.\n\t\t</p>\n\t",children:[{id:"variables",name:"Variables",title:"Variables",content:'\n\t\t\t<p>\n\t\t\tA variable is a named entity referencing a value.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tVariables are declared with following syntax:\n\t\t\t<ebnf>\n\t\t\t\tvar-decl = "var" single-var { "," single-var } ";" ;\n\t\t\t\t  single-var = identifier [ "=" expression ] ;\n\t\t\t</ebnf>\n\t\t\tThey are referenced by their name.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a, b=5, c=b+1;\n\t\t\t\t\tprint(a);\n\t\t\t\t\tprint(b + c);\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tAt each time, a variable references exactly one value. Variables\n\t\t\tare untyped; they can refer to a values of any type, and the type\n\t\t\tcan change during runtime.\n\t\t\tIf a variable is not initialized (like <code class="code">a</code>\n\t\t\tin the above example), then it is implicitly set to\n\t\t\t<keyword>null</keyword>. Therefore the following two statements\n\t\t\tare equivalent:\n\t\t\t<tscript>\n\t\t\t\tvar x;\n\t\t\t</tscript>\n\t\t\t<tscript>\n\t\t\t\tvar x = null;\n\t\t\t</tscript>\n\t\t\tThe variable name must not appear anywhere in its initializer,\n\t\t\ti.e., in the expression on the right hand side of the equals sign.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tMultiple variables can refer to the same value.\n\t\t\t<a href="?doc#/language/statements/assignments">Assigning</a> a value\n\t\t\tto a variable only references the value, it does not copy the value.\n\t\t\tIt is different from initialization, and the variable itself may\n\t\t\tappear on the right hand side, referring to the old value before\n\t\t\tthe actual assignment takes place:\n\t\t\t<tscript>\n\t\t\t\tvar x = 3;       # initialization\n\t\t\t\tx = 2 * x + 1;   # assignment\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tParameters of functions are also variables, although they are\n\t\t\tdeclared without <keyword>var</keyword>\n\t\t\t(see <a href="?doc#/language/declarations/functions">functions</a>).\n\t\t\tThey are initialized to a value provided by the function\n\t\t\tcall or to their default value, if present. Default values\n\t\t\tare limited to constant expressions.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tVariables inside classes are called attributes. These variables\n\t\t\tcan be initialized, but the initializer must evaluate to a\n\t\t\tconstant. Variable that should be initialized to a value\n\t\t\tcomputed at runtime can be set in the constructor.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClosure parameters are somewhere in between the above two cases.\n\t\t\tThey are stored inside the function closure like attributes in\n\t\t\tan object. Whenever the closure is called they are copied, and\n\t\t\tthe copies become parameters of the function.\n\t\t\t</p>\n\n\t\t\t<h2>Lifetime of Variables</h2>\n\t\t\t<p>\n\t\t\tTScript distinguishes three types of variables:\n\t\t\t<ul>\n\t\t\t\t<li>Global variables are declared at global scope, in a namespace, or as static attributes of global classes. They are available for the whole runtime of the program.</li>\n\t\t\t\t<li>Local variables are declared in a non-global non-class scope, or as parameters of a function or closure. They are available inside their defining scope, or for closure parameters, inside the function body. After the scope is left they "go out of scope" and cannot be accessed any more.</li>\n\t\t\t\t<li>Attributes are declared in a class scope. Non-static attributes are part of an object, and hence their lifetime is bound to the lifetime of the object.</li>\n\t\t\t</ul>\n\t\t\tIt may seem at first glance that binding a variable to a closure extends its lifetime to the lifetime of the closure. This is not the case. Instead, values are <i>copied</i> into closure parameters, which are independent variables, as demonstrated here:\n\t\t\t<tscript>\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tvar x = 42;\n\t\t\t\t\tvar ret = function [x] () { return x; };\n\t\t\t\t\tx *= 2;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\tprint(f()());   # prints 42, not 84\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"functions",name:"Functions",title:"Functions",content:'\n\t\t\t<p>\n\t\t\tA function is a named block of code that can be invoked arbitrarily\n\t\t\toften, possibly with different parameter values.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tFunctions are declared with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tfunc-decl = "function" identifier "(" param-list ")" func-body ;\n\t\t\t\t  param-list = [ param-decl { "," param-decl } ] ;\n\t\t\t\t  param-decl = identifier [ "=" constant-ex ] ;\n\t\t\t\t  constant-ex = $ expression that evaluates to a constant $ ;\n\t\t\t\t  func-body = "{" { declaration | statement | directive } "}" ;\n\t\t\t</ebnf>\n\t\t\tIt is referenced by its name, and invoked by\n\t\t\t<a href="?doc#/language/expressions/function-calls">providing\n\t\t\tvalues for the parameters in parentheses</a>. The effect of invoking a\n\t\t\tfunction is that the control flow is transferred to the function body.\n\t\t\tAfter the function body is left with a <keyword>return</keyword>\n\t\t\tstatement or by reaching the end of the function body, the control flow\n\t\t\tis returned to the calling context.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction circleArea(radius)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn math.pi() * radius * radius;\n\t\t\t\t\t}\n\t\t\t\t\tvar func = circleArea;\n\t\t\t\t\tprint(circleArea(3));   # prints 9*pi = 28.2743...\n\t\t\t\t\tprint(func(3));         # prints 9*pi = 28.2743...\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tParameters of functions are always named, with an optional default value.\n\t\t\tAs can be seen in the above example, function names are valid expressions\n\t\t\t(of type <a href="?doc#/language/types/function">Function</a>).\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAn alternative way to define functions are\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous\n\t\t\tfunctions</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"classes",name:"Classes",title:"Classes",content:'\n\t\t\t<p>\n\t\t\tA class declaration adds a new type to the program. Values or objects\n\t\t\tof this type can be instantiated by calling the type like a function.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tA class is declared with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tclass-decl = "class" identifier [ ":" name ] class-body ;\n\t\t\t\t  class-body = "{" "}" | "{" visibility { visibility\n\t\t\t\t                                        | constructor\n\t\t\t\t                                        | [ "static" ] declaration\n\t\t\t\t                                        | directive }\n\t\t\t\t                         "}" ;\n\t\t\t\t  visibility = ("public" | "procected" | "private") ":" ;\n\t\t\t\t  constructor = "constructor" "(" param-list ")"\n\t\t\t\t         [ ":" "super" "(" [ expression { "," expression } ] ")" ]\n\t\t\t\t         func-body ;\n\t\t\t</ebnf>\n\t\t\tRefer to <a href="?doc#/language/declarations/functions">functions</a>\n\t\t\tfor a definition of <ebnf>param-list</ebnf> and <ebnf>func-body</ebnf>.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tclass Circle\n\t\t\t\t\t{\n\t\t\t\t\t\tuse namespace math;\n\n\t\t\t\t\tprivate:\n\t\t\t\t\t\tvar m_radius = 0;\n\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tconstructor(radius)\n\t\t\t\t\t\t{ m_radius = radius; }\n\t\t\t\t\t\tfunction radius()\n\t\t\t\t\t\t{ return m_radius; }\n\t\t\t\t\t\tfunction area()\n\t\t\t\t\t\t{ return pi() * m_radius * m_radius; }\n\t\t\t\t\t}\n\n\t\t\t\t\tvar c = Circle(3);\n\t\t\t\t\tprint("The circle has radius " + c.radius() +\n\t\t\t\t\t\t\t" and area " + c.area() + ".");\n\t\t\t\t</tscript>\n\t\t\t</div>\n\n\t\t\t<h2>The Constructor</h2>\n\t\t\t<p>\n\t\t\tThe constructor of a class is called whenever the class is instantiated,\n\t\t\ti.e., when a new object of that very class is created. Its role is to\n\t\t\tinitialize the object\'s state, comprised by its attributes. Attributes\n\t\t\tcan equally well be declared with a constant initializer. Non-constant\n\t\t\t(parameter-dependent) initialization is done in the constructor.\n\t\t\tOf course, the constructor can perform further tasks. Uninitialized\n\t\t\tmembers hold the value <keyword>null</keyword>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClasses with a public constructor can be instantiated from everywhere,\n\t\t\tand the same holds for classes without constructor (which implies the\n\t\t\tgeneration of a public default constructor). Constructors can also be\n\t\t\tprotected or private. A class with private constructor can be\n\t\t\tinstantiated only from within a method of the class, and the class\n\t\t\tcannot have sub-classes. A class with protected constructor can have\n\t\t\tsub-classes, since the constructor can be called from a sub-class\n\t\t\tconstructor.\n\t\t\t</p>\n\n\t\t\t<h2>Static and Non-Static Members</h2>\n\t\t\t<p>\n\t\t\tDeclarations inside the function body as known as members of the class.\n\t\t\tMembers can be declared <keyword>static</keyword>. Static members belong\n\t\t\tto the class, not to its objects. For a static variable (also called a\n\t\t\tclass variable) this means that a single instance of the variable with\n\t\t\tglobal lifetime exists, independent of the number of objects of the\n\t\t\tclass. In contrast, the liftime of attributes (non-static variables) is\n\t\t\tbound to the object. A non-static function member is called a method.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA public member of a class is referenced with the dot-operator, as seen\n\t\t\tin the example above. Inside the class, its members can be accessed by\n\t\t\ttheir names. The object itself, i.e., the left-hand-side of the\n\t\t\t<a href="?doc#/language/expressions/member-access">dot operator</a>,\n\t\t\tis available under the name <keyword>this</keyword>. A static function\n\t\t\tcan be invoked without referring to an instance of the class, and hence\n\t\t\t<keyword>this</keyword> is undefined in a static function. The following\n\t\t\texample demonstrates static members:\n\t\t\t<tscript>\n\t\t\t\tclass Counted\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tstatic var m_counter = 0;\n\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor() { m_counter += 1; }\n\t\t\t\t\tfunction doSomething() { #* dummy *# }\n\t\t\t\t\tstatic function numberOfInstances()\n\t\t\t\t\t{\n\t\t\t\t\t\t# doSomething();   # error; this is not defined\n\t\t\t\t\t\t# return this;     # error; this is not defined\n\t\t\t\t\t\treturn m_counter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar a = Counted(), b = Counted(), c = Counted();\n\t\t\t\tprint(Counted.numberOfInstances());\n\t\t\t\tprint(a.numberOfInstances());\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Dynamic Dispatching</h2>\n\t\t\t<p>\n\t\t\tMember name lookup of the form <code class="code">a.numberOfInstances</code>\n\t\t\tin the above code happens dynamically at runtime. The result of the\n\t\t\t<a href="?doc#/language/expressions/member-access">member access</a> (and\n\t\t\ttherefore, in this context, the invoked function) depends on the type\n\t\t\tof the left-hand-side, provided that multiple classes declare a member\n\t\t\tof the same name. This is an elegant mechanism for creating implicit\n\t\t\tswitches in code based on the type of data it encounters. Referencing\n\t\t\ta member name that does not exist in the type (more precisely, in its\n\t\t\tpublic interface) results in an error message.\n\t\t\t</p>\n\n\t\t\t<h2>Visibility of Members</h2>\n\t\t\t<p>\n\t\t\tTScript classes allow for proper information hiding, i.e., they can\n\t\t\thide implementation details behind a public or protected interface. From\n\t\t\toutside the class, only members declared <keyword>public</keyword> are\n\t\t\tvisible, i.e., members following a <keyword>public</keyword> declaration.\n\t\t\tIn addition, <keyword>protected</keyword> members are visible within\n\t\t\tsub-classes (see below), while <keyword>private</keyword> members are\n\t\t\tonly visible within the class itself. It is common practice to declare\n\t\t\tmost attributes as private to the class, and to provide access\n\t\t\tfacilities in terms of protected and public methods.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAlso inside classes, the general principle that declarations can be\n\t\t\tused only after they were declared is applied. Therefore it is common\n\t\t\tpractice to declare attributes towards the beginning of the class, so\n\t\t\tthat they can be accessed by methods declared below them.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHiding information is not always necessary, and sometimes\n\t\t\tover-complicates matters. In some cases simple classes consisting\n\t\t\tonly of public attributes are a meaningful choice. For example, the\n\t\t\tfollowing class may represent a point in a two-dimensional coordinate\n\t\t\tsystem:\n\t\t\t<tscript>\n\t\t\t\tclass Point\n\t\t\t\t{\n\t\t\t\tpublic:\n\t\t\t\t\tvar x, y;\n\n\t\t\t\t\tconstructor(x_, y_)\n\t\t\t\t\t{ x = x_; y = y_; }\n\t\t\t\t}\n\t\t\t\t\n\t\t\t</tscript>\n\t\t\tThe same data can of course be held in an array\n\t\t\t<code class="code">[x,y]</code> or a dictionary\n\t\t\t<code class="code">{"x":x,"y":y}</code>, but the class has the\n\t\t\tadvantages of making the role of the type and of its members explicit.\n\t\t\tThis makes code more readable and more maintainable. Furthermore it\n\t\t\tadds the ability of code to test for its the data type to clarify the\n\t\t\trole of a value, which is not possible with generic containers since\n\t\t\tthey are used for many purposes.\n\t\t\t</p>\n\n\t\t\t<h2>Inheritance</h2>\n\t\t\t<p>\n\t\t\tA class can be based on any other type, including all the\n\t\t\t<a href="?doc#/language/types">built-in types</a> (however, note that\n\t\t\taggregation is often preferable over inheriting an immutable type).\n\t\t\tThis means that the type, also known as the sub-class in this context,\n\t\t\tinherits all properties and members from its super-class.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSubclassing is a common mechanism for extending the functionality of\n\t\t\ta type, and for creating a set of types with a uniform interface.\n\t\t\tThe mechanism allows to override (generic) functionality of the base\n\t\t\tor super class with (specialized) functionality of the sub-class,\n\t\t\tsimply by declaring a method of the same name as in the super class.\n\t\t\tThis does not create a name conflict. When invoking such a method on\n\t\t\tan object of the sub-class then the dispatching rules dictate that the\n\t\t\tmethod declared in the sub-class is invoked, and the method in the\n\t\t\tsuper class is ignored.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen implementing sub-classes, there regularly is the demand to access\n\t\t\ta super-class member of the same name or the super class constructor.\n\t\t\tThis can be achieved with a special syntax for the constructor and for\n\t\t\tnames based on the <keyword>super</keyword> keyword, as follows:\n\t\t\t<tscript>\n\t\t\t\tclass Person\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tvar m_name;\n\t\t\t\t\tvar m_address;\n\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor(name, address)\n\t\t\t\t\t{\n\t\t\t\t\t\tm_name = name;\n\t\t\t\t\t\tm_address = address;\n\t\t\t\t\t}\n\n\t\t\t\t\tfunction description()\n\t\t\t\t\t{ return "name: " + m_name + "\\naddress: " + m_address + "\\n"; }\n\t\t\t\t}\n\n\t\t\t\tclass Customer : Person\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tvar m_customerID;\n\n\t\t\t\tpublic:\n\t\t\t\t\tconstructor(id, name, address)\n\t\t\t\t\t: super(name, address)\n\t\t\t\t\t{ m_customerID = id; }\n\n\t\t\t\t\tfunction description()\n\t\t\t\t\t{ return "id: " + m_customerID + "\\n" + super.description(); }\n\t\t\t\t}\n\n\t\t\t\tvar c = Customer("1357", "Joe", "city center");\n\t\t\t\tprint(c.description());\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"namespaces",name:"Namespaces",title:"Namespaces",content:'\n\t\t\t<p>\n\t\t\tA namespace is a named scope designed to organize declarations.\n\t\t\t</p>\n\n\t\t\t<h2>Syntax</h2>\n\t\t\tNamespaces are declared with the following syntax:\n\t\t\t<p>\n\t\t\t<ebnf>\n\t\t\t\tnamespace-decl = "namespace" identifier namespace-body ;\n\t\t\t\t  namespace-body = "{" { declaration | statement | directive } "}" ;\n\t\t\t</ebnf>\n\t\t\tNamespaces can only be declared at global scope or within other\n\t\t\tnamespaces. However, the same namespace can be declared multiple\n\t\t\ttimes. The different declarations are treated as parts of the same\n\t\t\tnamespace.\n\t\t\t</p>\n\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tnamespace distributions\n\t\t\t\t\t{\n\t\t\t\t\t\tnamespace detail\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfunction gaussian()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar g = math.sin(2 * math.pi() * math.random());\n\t\t\t\t\t\t\t\tg *= math.sqrt(-2 * math.log(math.random()));\n\t\t\t\t\t\t\t\treturn g;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction uniform(lower, upper)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn lower + (upper - lower) * math.random();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction exponential(lambda)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn -math.log(math.random()) / lambda;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction gaussian(mu, sigma)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn mu + sigma * detail.gaussian();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor var i in 0:20 do print(distributions.gaussian(1.5, 0.1));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tNamespaces allow to keep globally accessible names out of the global\n\t\t\tscope. For large collections of declarations this greatly reduces the\n\t\t\tchance of name collisions. This is particularly important when working\n\t\t\twith large software libraries.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAs a price, the full names of declarations get longer, since the\n\t\t\tnamespace name is prepended to the declared name, separated with a dot.\n\t\t\tThis is not necessarily an issue since individual names and even whole\n\t\t\tnamespaces can be <a href="?doc#/language/directives/use">imported</a> into\n\t\t\tthe scopes where they are used. Since import is usually selective, name\n\t\t\tcollisions are still rate.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"directives",name:"Directives",title:"Directives",content:'\n\t\t<p>\n\t\tA directive is an instruction to the TScript language that is\n\t\tnot directly related to the program flow itself. It is neither a\n\t\tdeclaration nor a statement.\n\t\t<ebnf>\n\t\t\tdirective = use ;\n\t\t</ebnf>\n\t\tCurrently, the only directive is the\n\t\t<a href="?doc#/language/directives/use">use</a> directive. There exist\n\t\tplans to add directives for including external files and libraries\n\t\tin the future.\n\t\t</p>\n\t',children:[{id:"use",name:"Using Names from Namespaces with Use Directives",title:"Using Names from Namespaces with Use Directives",content:'\n\t\t\t<p>\n\t\t\tA <keyword>use</keyword> directive imports names declared in a\n\t\t\tnamespace directly into the current scope. This allows for\n\t\t\teasier access to names that are otherwise lengthy to write\n\t\t\tout. The syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\tuse-directive = [ "from" name ] "use" name-import\n\t\t\t\t                                     { "," name-import } ";" ;\n\t\t\t\tname-import = ("namespace" use-name)\n\t\t\t\t            | (use-name [ "as" identifier ]) ;\n\t\t\t\tuse-name = identifier { "." identifier } ;\n\t\t\t</ebnf>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA <ebnf>name</ebnf> refers to a declaration inside\n\t\t\ta namespace, possibly to a namespace itself. The first form\n\t\t\t<ebnf>"namespace" name</ebnf> imports all names <i>inside</i>\n\t\t\tthe the referenced namespace into the current scope. The\n\t\t\tsecond form <ebnf>name ["as" identifier]</ebnf> imports a\n\t\t\tsingle name. In the latter case the optional identifier is\n\t\t\ta new alias name under which the original declaration is\n\t\t\tmade available. If it is not provided, then the last identifier\n\t\t\tof the fully qualified name is used, e.g., <code class="code">c</code>\n\t\t\tis used when importing the name <code class="code">a.b.c</code>.\n\t\t\tIf <ebnf>"from" name</ebnf> is provided,\n\t\t\tthen all subsequent names are looked up in the context of\n\t\t\tthe given namespace, not in the context of the current\n\t\t\tscope.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tnamespace a {\n\t\t\t\t\t    namespace b {\n\t\t\t\t\t        var y = "hello";\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\t\t\t\t\t# all of the print statements output "hello":\n\t\t\t\t\tprint(a.b.y);\n\t\t\t\t\t{\n\t\t\t\t\t    use namespace a;\n\t\t\t\t\t    print(b.y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    use namespace a.b;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    use a.b.y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a use namespace b;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a use b.y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a.b use y;\n\t\t\t\t\t    print(y);\n\t\t\t\t\t}\n\t\t\t\t\t{\n\t\t\t\t\t    from a.b use y as z;\n\t\t\t\t\t    print(z);\n\t\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]}]},{id:"expressions",name:"Expressions",title:"Expressions",content:'\n\t\t<p>\n\t\tAn expression is a computation that produces a value. The simplest atomic\n\t\texpressions are constants and names referring to declarations. Expressions\n\t\tcan be combined by means of operators into more complex expressions.\n\t\t</p>\n\n\t\t<h2>Syntax</h2>\n\t\t<p>\n\t\tHere we list groups of expression types, which are further differentiated\n\t\tin a number of sub-sections.\n\t\t<ebnf>\n\t\t\texpression = literal\n\t\t\t           | group\n\t\t\t           | unary-operator\n\t\t\t           | binary-operator\n\t\t\t           | function-call\n\t\t\t           | item-access\n\t\t\t           | member-access\n\t\t\t           | name ;\n\t\t</ebnf>\n\t\t</p>\n\n\t\t<h2>Side Effects</h2>\n\t\t<p>\n\t\tSome expressions have side effects. A side effect is defined as an effect\n\t\tthat is unrelated to the computation of the expression result. In many\n\t\tcases, the only purpose of evaluating such expressions is to invoke the\n\t\tside effects. A simple example is the\n\t\t<a href="?doc#/library/core">print</a> function:\n\t\tit prints its argument as a side effect and return <keyword>null</keyword>.\n\t\tIn order to facilitate the invocation of such functions,\n\t\t<a href="?doc#/language/statements/expressions">expressions can be used as\n\t\tstatements</a>.\n\t\t</p>\n\t',children:[{id:"literals",name:"Literals",title:"Literals",content:"\n\t\t<p>\n\t\tTScript knows five types of atomic literals. From these,\n\t\tcontainer-valued composite literals can be created. In addition,\n\t\tlambda functions are considered a special type of literal:\n\t\t<ebnf>\n\t\t\tliteral = null\n\t\t\t        | boolean\n\t\t\t        | integer\n\t\t\t        | real\n\t\t\t        | string { string }\n\t\t\t        | array\n\t\t\t        | dictionary\n\t\t\t        | lambda ;\n\t\t</ebnf>\n\t\t</p>\n\t\t",children:[{id:"null",name:"The Null Literal",title:"The Null Literal",content:'\n\t\t\t\t<p>\n\t\t\t\tThere is only one value of type\n\t\t\t\t<a href="?doc#/language/types/null">Null</a>,\n\t\t\t\tdenoted by the keyword <keyword>null</keyword>:\n\t\t\t\t<ebnf>\n\t\t\t\t\tnull = "null" ;\n\t\t\t\t</ebnf>\n\t\t\t\tIt is commonly used to represent a "meaningless" value,\n\t\t\t\tor a yet uninitialized value.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a;             # a is implicitly set to null\n\t\t\t\t\t\tvar b = null;      # b is explicitly set to null\n\t\t\t\t\t\tif b == null then print("b is null.");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"booleans",name:"Boolean Literals",title:"Boolean Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tThe <a href="?doc#/language/types/boolean">Boolean</a> type represent the\n\t\t\t\tlogical values <keyword>true</keyword> and <keyword>false</keyword>,\n\t\t\t\tboth of which are keywords. They result from comparisons, and act as\n\t\t\t\tinput to if-conditions and loop-statements:\n\t\t\t\t<ebnf>\n\t\t\t\t\tboolean = "true" | "false" ;\n\t\t\t\t</ebnf>\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = true;\n\t\t\t\t\t\tvar b = false;\n\t\t\t\t\t\tvar c = 3 == 5;     # assignment of false\n\t\t\t\t\t\tif c then\n\t\t\t\t\t\t    print("3 equals 5");\n\t\t\t\t\t\telse\n\t\t\t\t\t\t    print("3 differs from 5");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"integers",name:"Integer Literals",title:"Integer Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tAn Integer literal represents a constant of type\n\t\t\t\t<a href="?doc#/language/types/integer">Integer</a>. It is denoted by\n\t\t\t\tan integer <a href="?doc#/language/syntax/tokens">token</a>.\n\t\t\t\tThe value must lie in the integer range, i.e., it must not exceed\n\t\t\t\t2<sup>31</sup> - 1 = 2147483647.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = 0;\n\t\t\t\t\t\tvar b = 42;\n\t\t\t\t\t\tvar c = -99;             # negated literal 99\n\t\t\t\t\t\t# var d = -2147483648;   # error, range exceeded\n\t\t\t\t\t\tvar e = -2147483647-1;\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"reals",name:"Real Literals",title:"Real Literals",content:'\n\t\t\t\t<p>\n\t\t\t\tA Real literal represents a constant of type\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>. It is denoted by a\n\t\t\t\treal <a href="?doc#/language/syntax/tokens">token</a>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThere is no syntax for denoting the special IEEE floating point\n\t\t\t\tvalues INF (infinity) and NaN (not a number) as literals. Instead\n\t\t\t\tthe functions <a href="?doc#/language/types/real">Real.inf()</a> and\n\t\t\t\t<a href="?doc#/language/types/real">Real.nan()</a> can be used to create such\n\t\t\t\tliterals. The methods <a href="?doc#/language/types/real">Real.isFinite()</a>,\n\t\t\t\t<a href="?doc#/language/types/real">Real.isInfinite()</a>, and\n\t\t\t\t<a href="?doc#/language/types/real">Real.isNan()</a> test for degenerate values.\n\t\t\t\tReal numbers that exceed the range specified in the\n\t\t\t\t<a href="https://de.wikipedia.org/wiki/IEEE_754" target="_blank">IEEE 754 standard</a>\n\t\t\t\toverflow to positive or negative infinity, or underflow to zero.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = 4;             # not a real, but an integer\n\t\t\t\t\t\tvar b = 4.0;           # real literal representing 4\n\t\t\t\t\t\tvar c = 4e0;           # real literal representing 4\n\t\t\t\t\t\tvar d = 400e-2;        # real literal representing 4\n\t\t\t\t\t\tvar e = 0.04e2;        # real literal representing 4\n\t\t\t\t\t\tvar f = -123.456e+78;  # negated literal 123.456e+78\n\t\t\t\t\t\tvar g = 1E1000;        # overflow to infinity\n\t\t\t\t\t\tvar h = 1E-1000;       # underflow to zero\n\t\t\t\t\t\tvar pi = 3.1415926535897931;   # full precision literal\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"strings",name:"String Literals",title:"String Literals",content:'\n\t\t\t\t<p>A <a href="?doc#/language/types/string">String</a>\n\t\t\t\tliteral consists of a sequence of\n\t\t\t\t<a href="?doc#/language/syntax/tokens">string tokens</a>,\n\t\t\t\teach of which is text enclosed in double quotes within a\n\t\t\t\tsingle line of code. String tokens must be separated only\n\t\t\t\tby whitespace including newlines, and comments.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tEvery\n\t\t\t\t<a href="?doc#/language/syntax/character-set">character</a>\n\t\t\t\tin between the double quotes is a part of the text\n\t\t\t\tbelonging to the string literal, with one exception: the\n\t\t\t\tbackslash \'\' acts as a so-called escape character. This\n\t\t\t\tcharacter introduces an escape sequence with a special\n\t\t\t\tmeaning, as follows:\n\t\t\t\t</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><code class="code">\\\\</code> represents a single backslash (ASCII 92)</li>\n\t\t\t\t\t<li><code class="code">\\"</code> represents double quotes (ASCII 34)</li>\n\t\t\t\t\t<li><code class="code">\\t</code> represents a horizontal tabulator (ASCII 9)</li>\n\t\t\t\t\t<li><code class="code">\\r</code> represents a carriage return (ASCII 13)</li>\n\t\t\t\t\t<li><code class="code">\\n</code> represents a line feed (ASCII 10)</li>\n\t\t\t\t\t<li><code class="code">\\f</code> represents a form feed (ASCII 12)</li>\n\t\t\t\t\t<li><code class="code">\\b</code> represents a backspace (ASCII 8)</li>\n\t\t\t\t\t<li><code class="code">\\/</code> represents a slash (ASCII 47)</li>\n\t\t\t\t\t<li><code class="code">\\uXXXX</code> represents any Unicode character, where XXXX is the 4-digit hexadecimal code of the character (or code point)</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tprint("hello world");\n\t\t\t\t\t\tprint("this string prints "\n\t\t\t\t\t\t        "on a single line");\n\t\t\t\t\t\tprint("this string prints\\non two lines");\n\t\t\t\t\t\tprint("a quote \\"Alea iacta est!\\" inside a string");\n\t\t\t\t\t\tprint("escaped Euro sign: \\u20AC");\n\t\t\t\t\t\tprint("multi "\n\t\t\t\t\t\t      "line "\n\t\t\t\t\t\t      "string "\n\t\t\t\t\t\t      "literal");\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t',children:[]},{id:"arrays",name:"Array Literals",title:"Array Literals",content:'\n\t\t\t\t<p><a href="?doc#/language/types/array">Array</a>\n\t\t\t\tliterals are comma-separated sequences of expressions enclosed\n\t\t\t\tin square brackets. The results of evaluating the expressions\n\t\t\t\tbecome the items of the array literal:\n\t\t\t\t<ebnf>\n\t\t\t\t\tarray = empty-array | nonempty-array ;\n\t\t\t\t\t  empty-array = "[" "]" ;\n\t\t\t\t\t  nonempty-array = "[" expression { "," expression } [ "," ] "]" ;\n\t\t\t\t</ebnf>\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = [];                     # empty array\n\t\t\t\t\t\tvar b = [16, true, "hello"];\n\t\t\t\t\t\tvar c = [["nested", "array"], "literal"];\n\t\t\t\t\t\tvar d = [c, 7*b[0], 2^10];\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tIf all items are constants, then the whole array is a constant.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"dictionaries",name:"Dictionary Literals",title:"Dictionary Literals",content:'\n\t\t\t\t<p><a href="?doc#/language/types/dictionary">Dictionary</a>\n\t\t\t\tliterals are comma-separated sequences of key-value pairs enclosed\n\t\t\t\tin curly braces. A key-value pair consists of a key, which is either\n\t\t\t\ta string or an identifier, and a value, which is the result of an\n\t\t\t\tarbitrary expression:\n\t\t\t\t<ebnf>\n\t\t\t\t\tdictionary = empty-dictionary | nonempty-dictionary ;\n\t\t\t\t\t  empty-dictionary = "{" "}" ;\n\t\t\t\t\t  nonempty-dictionary = "{" key-value { "," key-value } [ "," ] "}" ;\n\t\t\t\t\t  key-value = (string | identifier) ":" expression ;\n\t\t\t\t</ebnf>\n\t\t\t\tThe key-value pairs become the items of the\n\t\t\t\tdictionary literal. Importantly, the identifier is not looked up as\n\t\t\t\ta name, but it represents the string that would arise if it were\n\t\t\t\tenclosed in double quotes, so using identifiers instead of strings\n\t\t\t\tfor keys is merely syntactic sugar that saves typing the double\n\t\t\t\tquotes. Keys are string tokens, not string literals, and hence cannot\n\t\t\t\tspan multiple lines.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote that not all keys can be represented with the identifier\n\t\t\t\tshort-notation, simply because they are not valid identifiers. Also\n\t\t\t\tnote that this means that string variables cannot act as keys in\n\t\t\t\tstring literals; this can be achieved with the\n\t\t\t\t<a href="?doc#/language/expressions/item-access">item access operator</a>.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar a = {};             # empty dictionary\n\t\t\t\t\t\t# identifier keys:\n\t\t\t\t\t\tvar b = {name: "Sam", phone: "911", age: 35};\n\t\t\t\t\t\t# non-identifier keys:\n\t\t\t\t\t\tvar c = {"name": "Sam", "phone": "911", "age": 35};\n\t\t\t\t\t\tvar d = {"---": math.sin(2), "true": math.cos(2)};\n\n\t\t\t\t\t\t# item access:\n\t\t\t\t\t\tprint(b["name"]);\n\t\t\t\t\t\tprint(c["name"]);\n\t\t\t\t\t\tprint(d["---"]);\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tIf all values are constants, then the whole dictionary is a constant.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"anonymous-functions",name:"Anonymous Functions",title:"Anonymous Functions",content:'\n\t\t\t\t<p>\n\t\t\t\tAn anonymous function or lambda function follows the syntax:\n\t\t\t\t<ebnf>\n\t\t\t\t\tlambda = "function" [ closure ] "(" param-list ")" func-body ;\n\t\t\t\t\t  closure = "[" [ closure-param { "," closure-param } ] "]" ;\n\t\t\t\t\t  closure-param = [ identifier "=" ] expression ;\n\t\t\t\t\t  param-list = [ param-decl { "," param-decl } ] ;\n\t\t\t\t\t  param-decl = identifier [ "=" constant-ex ] ;\n\t\t\t\t\t  constant-ex = $ expression that evaluates to a constant $ ;\n\t\t\t\t\t  func-body = "{" { declaration | statement | directive } "}" ;\n\t\t\t\t</ebnf>\n\t\t\t\tIn contrast to a <a href="?doc#/language/declarations/functions">function\n\t\t\t\tdeclaration</a> it does not have a name by which is could be referenced.\n\t\t\t\tHowever, being an expression it can be stored in a variable or returned\n\t\t\t\tfrom a function. An anonymous function is of type\n\t\t\t\t<a href="?doc#/language/types/function">Function</a>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tAnonymous functions can enclose variables from their surrounding scopes,\n\t\t\t\twhich are stored in the function object. In fact, the result of arbitrary\n\t\t\t\texpressions can be stored. These expressions are evaluated when the\n\t\t\t\tanonymous function is created. They are available from inside the\n\t\t\t\tfunction body when the function is invoked, which can be at a later time\n\t\t\t\tand, importantly, from a different scope. In the following (somewhat\n\t\t\t\tcontrived) example, the variable <code class="code">square</code> is not\n\t\t\t\taccessible from the global scope where <code class="code">lambda</code>\n\t\t\t\tis defined, yet the variable is available inside the anonymous function\n\t\t\t\tbecause its value is enclosed in the function as a closure parameter.\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tfunction createAreaCalculator(radius)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar square = radius * radius;\n\t\t\t\t\t\t\treturn function [square] ()\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn math.pi() * square;\n\t\t\t\t\t\t\t\t};  # the semicolon terminates the first return statement\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar lambda = createAreaCalculator(3);\n\t\t\t\t\t\tprint(lambda());   # prints 9*pi = 28.2743...\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tThe abilities of anonymous functions to be declared in-place as an\n\t\t\t\texpression and to enclose values from a surrounding scope are\n\t\t\t\tparticularly well-suited for callbacks.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tLambda functions do not have a name, therefore they cannot be referred\n\t\t\t\tto by name. This is a problem when writing recursive algorithms, since\n\t\t\t\tthe function must be able to call itself. To allow for recursion, the\n\t\t\t\t<keyword>this</keyword> keyword refers to the function itself. Hence,\n\t\t\t\tthe following code computes the factorial of a number:\n\t\t\t\t</p>\n\t\t\t\t<div class="example">\n\t\t\t\t\t<h3>Example</h3>\n\t\t\t\t\t<tscript>\n\t\t\t\t\t\tvar fac = function(n)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif n == 0\n\t\t\t\t\t\t\t\tthen return 1;\n\t\t\t\t\t\t\t\telse return n * this(n-1);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\tprint(fac(7));   # 5040\n\t\t\t\t\t</tscript>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\tNote that writing the else-case as\n\t\t\t\t<code class="code">else return n * fac(n-1);</code> does not work\n\t\t\t\tbecause <code class="code">fac</code> is a variable that cannot be\n\t\t\t\tused until it is fully initialized, and the else-statement is part\n\t\t\t\tof the initializer.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWhen invoking a lambda function, all closure variables are\n\t\t\t\t<i>copied</i> into the local frame. Hence, any modification of a\n\t\t\t\tclosure variable is limited to the duration of the function\n\t\t\t\texecution.\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"unary-operators",name:"Unary Operators",title:"Unary Operators",content:"\n\t\t\t<p>\n\t\t\tThere are three unary operators, all of which are left-unary operators\n\t\t\tbinding to an argument on their right-hand side.\n\t\t\t</p>\n\t\t",children:[{id:"not",name:"Logical or Bitwise Negation",title:"Logical or Bitwise Negation",content:'\n\t\t\t\t<p>\n\t\t\t\t<code class="code">operator not</code> performs a logical or bitwise\n\t\t\t\tnegation of its argument. For <keyword>true</keyword> it returns\n\t\t\t\t<keyword>false</keyword> and for <keyword>false</keyword> it returns\n\t\t\t\t<keyword>true</keyword>, and it flips all 32 bits of an integer.\n\t\t\t\tWhen applied to a value that is not a\n\t\t\t\t<a href="?doc#/language/types/boolean">Boolean</a> or an\n\t\t\t\t<a href="?doc#/language/types/integer">Integer</a> then the operator\n\t\t\t\treports an error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote: For an integer x, <code class="code">(not x)</code> is\n\t\t\t\tequivalent to <code class="code">(-1 - x)</code>.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"plus",name:"Arithmetic Positive",title:"Arithmetic Positive",content:'\n\t\t\t\t<p>\n\t\t\t\tThe unary <code class="code">operator +</code> represents "no sign\n\t\t\t\tchange". In other words, it returns its argument unaltered.\n\t\t\t\tWhen applied to a non-numeric argument, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, the operator reports an\n\t\t\t\terror.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"minus",name:"Arithmetic Negation",title:"Arithmetic Negation",content:'\n\t\t\t\t<p>\n\t\t\t\tThe unary <code class="code">operator -</code> represents algebraic\n\t\t\t\tnegation, which is a change of sign; it returns "minus" its argument.\n\t\t\t\tWhen applied to a non-numeric argument, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, the operator reports an\n\t\t\t\terror.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tWhen applied to an <a href="?doc#/language/types/integer">Integer</a>,\n\t\t\t\tthen the operator is subject to integer overflow. Overflow happens\n\t\t\t\tonly in a single case:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = -2^31;\n\t\t\t\t\tprint(a);        # -2147483648\n\t\t\t\t\tprint(-a);       # -2147483648 due to overflow\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"binary-operators",name:"Binary Operators",title:"Binary Operators",content:"\n\t\t\t<p>\n\t\t\tTScript defines a total of 17 binary operators. There are seven\n\t\t\tarithmetic operators, six comparison operators, three logical\n\t\t\toperators, and the range operator.\n\t\t\t</p>\n\t\t",children:[{id:"addition",name:"Addition",title:"Addition",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator +</code> returns the sum of\n\t\t\t\tits arguments. If at least one argument is a string, then the\n\t\t\t\tconcatenation of the arguments converted to strings.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, and if not at least one of\n\t\t\t\tthe arguments is a <a href="?doc#/language/types/string">String</a>,\n\t\t\t\tthen the operator reports an error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are added as integers, and two reals are added as\n\t\t\t\treals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tFor string concatenation, a non-string arguments is first converted\n\t\t\t\tto a string with the <a href="?doc#/language/types/string">String</a>\n\t\t\t\tconstructor. For core types like booleans, numeric types, array\n\t\t\t\tand dictionary containers and ranges this usually gives the desired\n\t\t\t\tresult.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"subtraction",name:"Subtraction",title:"Subtraction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator -</code> returns the\n\t\t\t\tdifference between its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are subtracted as integers, and two reals are subtracted\n\t\t\t\tas reals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"multiplication",name:"Multiplication",title:"Multiplication",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator *</code> returns the\n\t\t\t\tproduct of its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tTwo integers are multiplied as integers, and two reals are multiplied\n\t\t\t\tas reals. Mixed cases are always treated as reals. This means that\n\t\t\t\tonly in the first case the result is an integer. The corresponding\n\t\t\t\toverflow rules apply.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"real-division",name:"Real Division",title:"Real Division",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator /</code> returns the\n\t\t\t\tquotient of its arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThe arguments are always treated as reals. This means that the result\n\t\t\t\tis always a real, which can have a fractional part.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"integer-division",name:"Integer Division",title:"Integer Division",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator //</code> returns the\n\t\t\t\tquotient of its arguments, rounded down to the nearest integer.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers then the result of the division is an\n\t\t\t\tinteger. Integer division overflows only in a single case:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = -2^31;\n\t\t\t\t\tprint(a);        # -2147483648\n\t\t\t\t\tprint(a / -1);   # 2147483648 (real)\n\t\t\t\t\tprint(a // -1);  # -2147483648 due to overflow\n\t\t\t\t</tscript>\n\t\t\t\tIf at least one argument is a real then the arguments are treated\n\t\t\t\tas reals, and the result is real.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"modulo",name:"Modulo",title:"Modulo",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator %</code> returns the\n\t\t\t\tremainder of the\n\t\t\t\t<a href="?doc#/language/expressions/binary-operators/integer-division">integer division</a>\n\t\t\t\tof its arguments:</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - (a // b) * b</code></br>\n\t\t\t\tIf one of the arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers then the result is an integer,\n\t\t\t\totherwise the operation is carried out in floating point\n\t\t\t\tarithmetics and the result is real. The result of the modulo\n\t\t\t\toperation is always in the range<br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">0 <= a % b < math.abs(b)</code></br>\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"power",name:"Power",title:"Power",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator ^</code> returns its\n\t\t\t\tleft argument to the power of its right arguments.\n\t\t\t\tIf one of its arguments is non-numeric, i.e., a value that is neither\n\t\t\t\tan integer <a href="?doc#/language/types/integer">Integer</a> nor a\n\t\t\t\t<a href="?doc#/language/types/real">Real</a>, then the operator reports\n\t\t\t\tan error.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tIf both arguments are integers and the right-hand-side is non-negative,\n\t\t\t\tthen the operation is performed with integer arithmetics. All other\n\t\t\t\tcases are treated as reals. This means that only in the first case the\n\t\t\t\tresult is an integer. The corresponding overflow rules apply.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThis behavior may not always be desired. The function\n\t\t\t\t<a href="?doc#/library/math">math.pow</a> performs the same operation, but it always\n\t\t\t\tapplies floating point arithmetics.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"equality",name:"Comparison for Equality",title:"Comparison for Equality",content:'\n\t\t\t\t<p>\n\t\t\t\tTwo values can be compared for equality with\n\t\t\t\t<code class="code">operator ==</code>. Given two arbitrary values, the\n\t\t\t\toperator returns a <a href="?doc#/language/types/boolean">Boolean</a>.\n\t\t\t\tEquivalently, <code class="code">operator !=</code> checks for inequality.\n\t\t\t\t<code class="code">a != b</code> is equivalent to\n\t\t\t\t<code class="code">not a == b</code>.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Definition of Value Equality</h2>\n\t\t\t\t<p>\n\t\t\t\tThe definition of value equality depends on the type. For built-in atomic\n\t\t\t\ttypes like boolean, integers, reals and strings, two values are equal if\n\t\t\t\tthey are of the same type and they hold the same boolean, number or string.\n\t\t\t\tIn particular the integer <code class="code">2</code> and the real number\n\t\t\t\t<code class="code">2.0</code> compare equal, but they differ from the\n\t\t\t\tstring <code class="code">"2"</code>.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tContainers are considered equal if they are of the same type and all of\n\t\t\t\ttheir keys and items are equal. Care must be taken to avoid recursive\n\t\t\t\treferences, see below.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tRanges are equal if begin and end are equal numbers. Types compare equal\n\t\t\t\tonly if they represent the same built-in type or class. Functions compare\n\t\t\t\tequal if calling them invokes the same TScript code. For methods, the\n\t\t\t\tobject must agree in addition, and for closures, all enclosed parameters\n\t\t\t\tmust compare equal.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tThere is currently no meaningful way to compare objects, even within the\n\t\t\t\tsame class. Therefore all objects are considered different, and the check\n\t\t\t\tfor equality coincides with the check for identity performed by the\n\t\t\t\tstandard library function <a href="">same</a>. Classes that inherit the\n\t\t\t\tbuilt-in types are compares like these, while their attributes are\n\t\t\t\tignored.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>A Note on Infinite Recursion</h2>\n\t\t\t\t<p>\n\t\t\t\tWarning: Comparing recursively defined containers results in an infinite\n\t\t\t\trecursion of the comparison! See the following example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar b = [a];\n\t\t\t\t\ta.push(b);         # now a refers to b and b refers to a\n\t\t\t\t\t# print(a == b);   # error due to infinite recursion\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"order",name:"Comparison for Order",title:"Comparison for Order",content:'\n\t\t\t\t<p>\n\t\t\t\tTwo values can be compared for order with\n\t\t\t\t<code class="code">operator &lt;</code>. Given two arbitrary values, the\n\t\t\t\toperator returns a <a href="?doc#/language/types/boolean">Boolean</a> if the\n\t\t\t\tvalues can be ordered. Otherwise it reports an error.\n\t\t\t\tEquivalently, <code class="code">operator &lt;=</code>,\n\t\t\t\t<code class="code">operator &gt;</code>, and\n\t\t\t\t<code class="code">operator &gt;=</code> can be used to compare for order,\n\t\t\t\twith the following identity:\n\t\t\t\t<code class="code">a &lt; b</code> is equivalent to\n\t\t\t\t<code class="code">not b &lt;= a</code>,\n\t\t\t\t<code class="code">b &gt; a</code>, and\n\t\t\t\t<code class="code">not a &gt;= b</code>.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>Definition of Order and Applicability</h2>\n\t\t\t\t<p>\n\t\t\t\tThe definition of value order depends on the type. Booleans cannot be\n\t\t\t\tordered. Numbers (integers and reals) are ordered in the usual way.\n\t\t\t\tStrings and arrays are ordered\n\t\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Lexicographical_order">lexicographically</a>.\n\t\t\t\tDictionaries, functions, ranges, types, and classes cannot be ordered.\n\t\t\t\t</p>\n\n\t\t\t\t<h2>A Note on Infinite Recursion</h2>\n\t\t\t\t<p>\n\t\t\t\tWarning: Comparing recursively defined arrays results in an infinite\n\t\t\t\trecursion of the comparison! See the following example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar b = [a];\n\t\t\t\t\ta.push(b);          # now a refers to b and b refers to a\n\t\t\t\t\t# print(a &lt; b);  # error due to infinite recursion\n\t\t\t\t</tscript>\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"and",name:"Conjunction",title:"Conjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator and</code> returns the\n\t\t\t\tlogical or bitwise conjunction of its arguments. Both arguments\n\t\t\t\tmust be <a href="?doc#/language/types/boolean">Boolean</a>s or\n\t\t\t\t<a href="?doc#/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>or</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>false</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>false</td><td>true</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"or",name:"Disjunction",title:"Disjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator or</code> returns the\n\t\t\t\t(non-exclusive) logical or bitwise disjunction of its arguments.\n\t\t\t\tBoth arguments must be\n\t\t\t\t<a href="?doc#/language/types/boolean">Boolean</a>s or\n\t\t\t\t<a href="?doc#/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>or</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>true</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>true</td><td>true</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"xor",name:"Exclusive Disjunction",title:"Exclusive Disjunction",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator xor</code> returns the\n\t\t\t\texclusive logical or bitwise disjunction of its arguments. Both\n\t\t\t\targuments must be <a href="?doc#/language/types/boolean">Boolean</a>s\n\t\t\t\tor <a href="?doc#/language/types/integer">Integer</a>s, otherwise\n\t\t\t\tthe operator reports an error. The result is defined as follows:\n\t\t\t\t<table class="nicetable">\n\t\t\t\t\t<tr><th>xor</th><th>false</th><th>true</th></tr>\n\t\t\t\t\t<tr><th>false</th><td>false</td><td>true</td></tr>\n\t\t\t\t\t<tr><th>true</th><td>true</td><td>false</td></tr>\n\t\t\t\t</table>\n\t\t\t\tIt applies to all 32 bits of an integer accordingly.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\tNote: For booleans, the operator is equivalent to\n\t\t\t\t<code class="code">operator !=</code>.\n\t\t\t\t</p>\n\t\t\t',children:[]},{id:"range",name:"Range Operator",title:"Range Operator",content:'\n\t\t\t\t<p>\n\t\t\t\tThe binary <code class="code">operator :</code> constructs a\n\t\t\t\t<a href="?doc#/language/types/range">Range</a> from its arguments.\n\t\t\t\tBoth arguments must be integers, or reals with equivalent values,\n\t\t\t\totherwise the operator reports an error. The left-hand-side becomes\n\t\t\t\tthe begin of the range, the right-hand-side becomes the end.\n\t\t\t\tApplying the operator is equivalent to passing the arguments to\n\t\t\t\tthe <a href="?doc#/language/types/range">Range</a> constructor.\n\t\t\t\t</p>\n\t\t\t',children:[]}]},{id:"function-calls",name:"Function Calls",title:"Function Calls",content:'\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tA function call is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tfunction-call = expression "(" argument { "," argument } ")" ";" ;\n\t\t\t\targument = [ identifier "=" ] expression ;\n\t\t\t</ebnf>\n\t\t\tThe first expression must resolve to a callable object, hereafter\n\t\t\treferred to as the function for short, which is a\n\t\t\t<a href="?doc#/language/declarations/functions">function</a> or\n\t\t\t<a href="?doc#/language/declarations/classes">method</a> declaration,\n\t\t\ta <a href="?doc#/language/types">type</a>, or an\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous function</a>.\n\t\t\tThe arguments must match the function\'s parameters.\n\t\t\t</p>\n\n\t\t\t<h2>Control Flow</h2>\n\t\t\t<p>\n\t\t\tThe effect of the call is that a new stack frame is created with\n\t\t\tone local variable per parameter. These parameter variables are\n\t\t\tinitialized to the values of the arguments. Then the control flow\n\t\t\tcontinues at the beginning of the function body. After the function\n\t\t\treturns, either by means of an explicit\n\t\t\t<a href="?doc#/language/statements/return">return</a> statement or when\n\t\t\treaching the end of its body, the return value becomes the value\n\t\t\tof the function call expression, the stack frame is removed, and\n\t\t\tthe program continues in the original frame.\n\t\t\t</p>\n\n\t\t\t<h2>Positional and Named Arguments</h2>\n\t\t\t<p>\n\t\t\tIn simple cases there is exactly one argument for each parameter\n\t\t\tof the function. The matting between arguments are parameters is\n\t\t\tdetermined by their order. Such arguments are called <i>positional</i>\n\t\t\targuments.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tIf a parameter of a function specifies a default value then the\n\t\t\tcorresponding argument can be dropped. A neat way of providing\n\t\t\tvalues only for some parameters is to use <i>named</i> arguments,\n\t\t\ti.e., arguments with <ebnf>identifier "="</ebnf>\n\t\t\tpresent. Named arguments must not be followed by positional arguments,\n\t\t\tsince that would be extremely confusing and error-prone. Also\n\t\t\targuments without default values can be specified by name, although\n\t\t\tthis is not required.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tfunction f(a, b=0, c=0) { print(a+b+c); }\n\t\t\t\t\tf(3, 4, 5);        # a=3, b=4, c=5\n\t\t\t\t\tf(3);              # a=3, b=0, c=0\n\t\t\t\t\tf(3, c=5);         # a=3, b=0, c=5\n\t\t\t\t\tf(a=3, c=5);       # a=3, b=0, c=5\n\t\t\t\t\tf(a=3, b=4, c=5);  # a=3, b=4, c=5\n\t\t\t\t\t# f(3, b=4, 5);    # error\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"item-access",name:"Item Access",title:"Item Access",content:'\n\t\t\t<p>\n\t\t\tAn item access is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\titem-access = expression "[" expression "]" ";" ;\n\t\t\t</ebnf>\n\t\t\tThe first (base) expression must resolve to a\n\t\t\t<a href="?doc#/language/types/string">string</a>,\n\t\t\t<a href="?doc#/language/types/array">array</a>,\n\t\t\t<a href="?doc#/language/types/dictionary">dictionary</a>, or\n\t\t\t<a href="?doc#/language/types/range">range</a>.\n\t\t\tThe second (index) expression must resolve to a valid\n\t\t\tindex or key, the type of which depends on the former one.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe result of an item access depends on the base type and\n\t\t\ton the key type as follows:\n\t\t\t<ul>\n\t\t\t<li>A string indexed with an integer returns the Unicode\n\t\t\tcode point of the character at the given (zero-based)\n\t\t\tposition.</li>\n\t\t\t<li>A string indexed with a range returns the corresponding\n\t\t\tsubstring.</li>\n\t\t\t<li>An array indexed with an integer returns the item at\n\t\t\tthe given (zero-based) position.</li>\n\t\t\t<li>An array indexed with a range returns the sub-array\n\t\t\tof items indexed by the range.</li>\n\t\t\t<li>A dictionary indexed with a string returns the value\n\t\t\tassociated with the corresponding key.</li>\n\t\t\t<li>A range behaves exactly like an array holding the\n\t\t\tvalues represented by the range as consecutive values,\n\t\t\thowever, when indexed with a range it returns another\n\t\t\trange.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t',children:[]},{id:"member-access",name:"Member Access",title:"Member Access",content:'\n\t\t\t<p>\n\t\t\tA member access is an expression with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tmember-access = expression "." identifier ;\n\t\t\t</ebnf>\n\t\t\tThe expression evaluates to a public member of the object to\n\t\t\twhich the <ebnf>expression</ebnf> evaluates. If the expression\n\t\t\tdoes not have a member with the name given by the\n\t\t\t<ebnf>identifier</ebnf> then an error is reported. If the\n\t\t\texpression evaluates to a type, then this syntax accesses its\n\t\t\tstatic public members.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe member access operator cannot be used to access private\n\t\t\tand protected members. This does not even work inside of a\n\t\t\tclass. These members can be accessed by name (with the\n\t\t\t<ebnf>identifier</ebnf> alone), or with\n\t\t\t<a href="?doc#/language/declarations/classes">super</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"names",name:"Names and Name Lookup",title:"Names and Name Lookup",content:'\n\t\t\t<p>\n\t\t\tA name has the syntax\n\t\t\t<ebnf>\n\t\t\t\tname = ("super" "." identifier) | (identifier {"." identifier})\n\t\t\t</ebnf>\n\t\t\twhere all but the last <ebnf>identifier</ebnf> must refer to\n\t\t\ta <a href="?doc#/language/declarations/namespaces">namespace</a>.\n\t\t\tThe keyword <keyword>super</keyword> refers to the super class\n\t\t\tof the enclosing\n\t\t\t<a href="?doc#/language/declarations/classes">class</a>, hence\n\t\t\tit can be used only inside of a class declaration.\n\t\t\tThe declaration a name refers to is determined by the name\n\t\t\tlookup rules found below.\n\t\t\t</p>\n\n\t\t\t<h2>Scopes and Visibility of Names</h2>\n\t\t\t<p>\n\t\t\tTScript imposes strict rules on the visibility of declarations\n\t\t\tbased on scopes.\n\t\t\tIn TScript, every block enclosed in curly braces is a scope.\n\t\t\tScopes can apparently be nested, as in the following example,\n\t\t\twhich contains five scopes: the global scope, a class, a\n\t\t\tfunction, and two blocks.\n\t\t\t<tscript>\n\t\t\t\tvar a;\n\t\t\t\t{\n\t\t\t\t\tvar x;\n\t\t\t\t\tclass Cl\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tfunction m()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tx = 99;\n\t\t\t\t\t\t\t# y = 99;  # error: y is not yet defined\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar y;\n\t\t\t\t\t{\n\t\t\t\t\t\t# z = 1;   # error: z is not yet defined\n\t\t\t\t\t\tvar z;\n\t\t\t\t\t\tz = 2;\n\t\t\t\t\t}\n\t\t\t\t\ta = 42;\n\t\t\t\t\tx = 42;\n\t\t\t\t\ty = 42;\n\t\t\t\t\t# z = 42;      # error: cannot access z from here\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\tNames of variables, functions, classes and namespaces declared\n\t\t\twithin a scope are only visible from within that scope, and from\n\t\t\twithin sub-scopes. They are neither visible before they are declared,\n\t\t\tnor after their enclosing scope ends. This makes it possible to have\n\t\t\tmultiple declarations of the same name, as along as they are found in\n\t\t\tdifferent scopes. The name always refers to the declaration in the\n\t\t\tinnermost scope:\n\t\t\t<tscript>\n\t\t\t\tvar a = 1;\n\t\t\t\t{\n\t\t\t\t\tprint(a);   # prints 1\n\t\t\t\t\tvar a = 2;\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(a);       # prints 2\n\t\t\t\t\t\tvar a = 3;\n\t\t\t\t\t\tprint(a);       # prints 3\n\t\t\t\t\t\t# var a = 4;    # error; the name \'a\' is already\n\t\t\t\t\t\t                # defined in this scope\n\t\t\t\t\t}\n\t\t\t\t\tprint(a);   # prints 2\n\t\t\t\t}\n\t\t\t\tprint(a);   # prints 1\n\t\t\t</tscript>\n\t\t\tThis means that declarations of the same name mask each other, but\n\t\t\tthey do not result in errors.\n\t\t\t</p>\n\n\t\t\t<h2>Namespaces</h2>\n\t\t\t<p>\n\t\t\tDeclarations defined inside a namespace are accessed with the dot\n\t\t\toperator:\n\t\t\t<tscript>\n\t\t\tnamespace N {\n\t\t\t\tvar a;\n\t\t\t\tfunction say() { print("a = " + a); }\n\t\t\t}\n\t\t\t# a = 7;     # the enclosing scope of \'a\' is not visible\n\t\t\t# say();     # the enclosing scope of \'say\' is not visible\n\t\t\tN.a = 7;     # works as desired\n\t\t\tN.say();     # works as desired\n\t\t\t</tscript>\n\t\t\tThis works because the <code class="code">namespace N</code> is visible\n\t\t\tfrom the perspective of the statement. Its members\n\t\t\t<code class="code">a</code> and <code class="code">say</code> are not directly visible,\n\t\t\thowever, they can be accessed as members of <code class="code">N</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen accessing members of a namespace many times it can be\n\t\t\tconvenient to make names from a namespace directly available in the\n\t\t\tcurrent scope:\n\t\t\t<tscript>\n\t\t\tnamespace N {\n\t\t\t\tvar a;\n\t\t\t\tfunction say() { print("a = " + a); }\n\t\t\t}\n\t\t\tuse namespace N;   # make all names from N visible\n\t\t\ta = 7;       # now this works!\n\t\t\tsay();       # now this works!\n\t\t\tN.a = 7;     # this also still works\n\t\t\tN.say();     # this also still works\n\t\t\t</tscript>\n\t\t\tNames can even be imported into classes. Then variables and functions\n\t\t\tdefined in the namespace can be accessed like static members of the\n\t\t\tclass.\n\t\t\t</p>\n\n\t\t\t<h2>Names in Classes and Super Classes</h2>\n\t\t\t<p>\n\t\t\tThe above rules also apply within classes. In particular, names must\n\t\t\tbe declared before they are used. This implies that in TScript\n\t\t\tattributes are usually declared first to make them accessible for\n\t\t\tmethods:\n\t\t\t<tscript>\n\t\t\tclass A\n\t\t\t{\n\t\t\tprivate:\n\t\t\t\tvar x;\n\t\t\tpublic:\n\t\t\t\tfunction f()\n\t\t\t\t{\n\t\t\t\t\tprint(x);\n\t\t\t\t\t# print(y);   # error; y was not declared yet\n\t\t\t\t}\n\t\t\tprivate:\n\t\t\t\tvar y;\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tInside a class it is possible to access the public and protected\n\t\t\tmembers of all super classes, although they are declared in unrelated\n\t\t\tscopes:\n\t\t\t<tscript>\n\t\t\tclass A\n\t\t\t{\n\t\t\tprotected:\n\t\t\t\tvar m, n;\n\t\t\t}\n\t\t\tclass B : A   # B inherits A, and therefore its members m and n\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar n;\n\t\t\t\tfunction set(value)\n\t\t\t\t{\n\t\t\t\t\tm = value;         # access to m works\n\t\t\t\t\tn = value;         # sets B.n\n\t\t\t\t\tsuper.n = value;   # sets A.n\n\t\t\t\t}\n\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Name Lookup</h2>\n\t\t\t<p>\n\t\t\tWhen TScript encounters a name, then it proceeds as follows.\n\t\t\tIt checks all scopes for a declaration with the given name,\n\t\t\tstarting from the innermost scope and moving towards enclosing\n\t\t\tscopes until the global scope is processed. For each scope, it\n\t\t\tdoes the following:\n\t\t\t<ul>\n\t\t\t\t<li>If the name is defined inside of the scope and before\n\t\t\t\t\tits use, then the lookup is successful.</li>\n\t\t\t\t<li>If the name is imported from a namespace into the scope\n\t\t\t\t\tbefore its use, then the lookup is successful.</li>\n\t\t\t\t<li>If the scope is a class, then loop through the chain of\n\t\t\t\t\tsuper classes, starting at the current class. If the\n\t\t\t\t\tname is defined in a class, or if it is imported from a\n\t\t\t\t\tnamespace, then the name lookup is successful.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThese rules imply that some names refer to objects that are not\n\t\t\taccessible, like in the following example:\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\tvar x = 7;\n\t\t\t\tfunction g()\n\t\t\t\t{\n\t\t\t\t\t# return x + 1;   # error!\n\t\t\t\t}\n\t\t\t\treturn g;\n\t\t\t}\n\t\t\tvar h = f();\n\t\t\tprint(h);     # prints &lt;Function g&gt;\n\t\t\tprint(h());\n\t\t\t</tscript>\n\t\t\tThe problem is that when g is called under the name h in the last\n\t\t\tline, then x has already gone out of scope. This can be avoided\n\t\t\tby turning g into a closure:\n\t\t\t<tscript>\n\t\t\tfunction f()\n\t\t\t{\n\t\t\t\tvar x = 7;\n\t\t\t\treturn function [x] ()\n\t\t\t\t{\n\t\t\t\t\treturn x + 1;   # works\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar h = f();\n\t\t\tprint(h);     # prints &lt;Function anonymous 4:11&gt;\n\t\t\tprint(h());   # prints 8\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"precedence",name:"Precedence of Operations",title:"Precedence of Operations",content:'\n\t\t\t<h2>Order of Evaluation of Expressions and Operators</h2>\n\t\t\t<p>\n\t\t\tDifferent operators have different precedence, i.e., binding\n\t\t\tstrength. In the following example, the order of operations\n\t\t\tdepends on the binding strength of the operators:\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\tvar x = [2, 3, 5, 7];\n\t\t\t\tvar i = 4 - 1 * 2;\n\t\t\t\tvar a = -2^x[i];\n\t\t\t</tscript>\n\t\t\t<p>\n\t\t\tIn the second line the usual mathematical convention that multiplication\n\t\t\tis computed before addition is expected. This is realized in TScript by\n\t\t\tgiving <code class="code">operator&nbsp;*</code> a higher precedence\n\t\t\t(binding strength) than <code class="code">operator&nbsp;+</code>.\n\t\t\tThough, a higher precedence is traditionally expressed by a lower number,\n\t\t\tsee the table below.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSimilarly, the minus sign in the last statement is applied to the\n\t\t\tpower, not only to its base, since the exponentiation\n\t\t\t<code class="code">operator&nbsp;^</code> binds stronger than the arithmetic negation\n\t\t\t<code class="code">operator&nbsp;-</code>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAlso for operators of the equal precedence the evaluation order can matter\n\t\t\tfor the result, as in <code class="code">7 - 4 - 3</code>. Furthermore,\n\t\t\texpressions can have side-effects, the order of which depends on the\n\t\t\tevaluation order. In TScript, the evaluation order is always well-defined.\n\t\t\tOperators of the same precedence and the expressions in between are\n\t\t\tevaluated either left-to-right or right-to-left.\n\t\t\t</p>\n\n\t\t\t<h2>Precedence and Evaluation Order Rules</h2>\n\t\t\t<p>\n\t\t\tThe precedence rules are summarized in the following table.\n\t\t\t</p>\n\t\t\t<table class="nicetable">\n\t\t\t\t<tr><th>precedence</th><th>operator type</th><th>operators</th><th>evaluation order</th></tr>\n\t\t\t\t<tr><td>0</td><td>right&nbsp;unary</td><td><code class="code">[]</code> <code class="code">.</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>0</td><td>right&nbsp;n-ary</td><td><code class="code">()</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>1</td><td>binary</td><td><code class="code">^</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>2</td><td>left&nbsp;unary</td><td><code class="code">+</code> <code class="code">-</code></td><td>right-to-left</td></tr>\n\t\t\t\t<tr><td>3</td><td>binary</td><td><code class="code">*</code> <code class="code">/</code> <code class="code">//</code> <code class="code">%</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>4</td><td>binary</td><td><code class="code">+</code> <code class="code">-</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>5</td><td>binary</td><td><code class="code">:</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>6</td><td>binary</td><td><code class="code">==</code> <code class="code">!=</code> <code class="code">&lt;</code> <code class="code">&lt;=</code> <code class="code">&gt;</code> <code class="code">&gt;=</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>7</td><td>left&nbsp;unary</td><td><code class="code">not</code></td><td>right-to-left</td></tr>\n\t\t\t\t<tr><td>8</td><td>binary</td><td><code class="code">and</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>9</td><td>binary</td><td><code class="code">or</code> <code class="code">xor</code></td><td>left-to-right</td></tr>\n\t\t\t\t<tr><td>10</td><td>assignment</td><td><code class="code">=</code> <code class="code">+=</code> <code class="code">-=</code> <code class="code">*=</code> <code class="code">/=</code> <code class="code">//=</code> <code class="code">%=</code> <code class="code">^=</code></td><td>right-to-left</td></tr>\n\t\t\t</table>\n\n\t\t\t<h2>Parentheses</h2>\n\t\t\t<p>\n\t\t\tEvery part of an expression can be enclosed in parentheses, which\n\t\t\tbind stronger than all operators. The most common reason is to\n\t\t\toverride operator precedence, as in the following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = 2;\n\t\t\t\tvar b = (3 + a) * 6;\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"constants",name:"Constants",title:"Constants",content:'\n\t\t\t<p>\n\t\t\tConstants are expressions that do not depend on the values\n\t\t\tof variables. Their main uses are as immediate values within\n\t\t\texpressions and as initializers of attributes. A further use\n\t\t\tis as default values of function parameters.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAll <a href="?doc#/language/expressions/literals">literals</a> of\n\t\t\tnon-container types are constants. This includes all\n\t\t\t<a href="?doc#/concepts/design">JSON</a> types, but also\n\t\t\tfunctions (excluding non-static methods). Array and dictionary\n\t\t\tliterals are constants if all of their items are constants:\n\t\t\t<tscript>\n\t\t\t\tvar c1 = null;                  # constant\n\t\t\t\tvar c2 = true;                  # constant\n\t\t\t\tvar c3 = 42;                    # constant\n\t\t\t\tvar c4 = 8.57e-7;               # constant\n\t\t\t\tvar c5 = "hello";               # constant\n\t\t\t\tvar c6 = print;                 # constant\n\t\t\t\tvar c7 = [true, 42];            # constant\n\t\t\t\tvar c8 = {"a": true, "b": 42};  # constant\n\t\t\t\tvar n = [c2, c3];               # not a constant\n\t\t\t</tscript>\n\t\t\tThe last expression is not a constant since c2 and c3 are\n\t\t\tvariables.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tOther expressions are de-facto constants, in particular the\n\t\t\treturn values of functions without side-effects with constant\n\t\t\tparameters, e.g.,\n\t\t\t<tscript>\n\t\t\t\tvar n = math.sqrt(2);           # not a constant\n\t\t\t</tscript>\n\t\t\tThe above expression is not considered a constant in TScript,\n\t\t\tsince it is evaluated at runtime. The core language does not\n\t\t\thave any knowledge about which functions have side effects\n\t\t\tand which ones do not.\n\t\t\t</p>\n\t\t',children:[]}]},{id:"statements",name:"Statements",title:"Statements",content:'\n\t\t<p>\n\t\tStatements are instructions that change the state of the\n\t\tprogram. For example, they can modify a variable or change the\n\t\tprogram flow. Besides assignments and constructs like\n\t\tconditionals and loops, also simple expressions are considered\n\t\tstatements since they can have side effects, e.g., by calling\n\t\t<code class="code">print</code> or <code class="code">wait</code>.\n\t\tStatements are formally defined as follows:\n\t\t<ebnf>\n\t\t\tstatement = block\n\t\t\t          | assignment\n\t\t\t          | expression ";"\n\t\t\t          | condition\n\t\t\t          | for-loop\n\t\t\t          | while-do-loop\n\t\t\t          | do-while-loop\n\t\t\t          | break\n\t\t\t          | continue\n\t\t\t          | return\n\t\t\t          | throw\n\t\t\t          | try-catch\n\t\t</ebnf>\n\t\t</p>\n\t',children:[{id:"blocks",name:"Blocks of Statements",title:"Blocks of Statements",content:'\n\t\t\t<p>\n\t\t\tA block of statements has the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tblock = "{" { declaration | statement | directive } "}" ;\n\t\t\t</ebnf>\n\t\t\tThe whole block can take the role of a single statement,\n\t\t\tallowing to execute multiple statements where a single one\n\t\t\tis specified by the formal syntax, i.e., in conditions,\n\t\t\tloops, and try/catch-blocks. Furthermore, beyond multiple\n\t\t\tstatements, a block can contain declarations and directives.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAt the same time, the block acts as a scope, so the usual\n\t\t\t<a href="?doc#/language/expressions/names">name lookup</a> rules\n\t\t\tapply. This means that declarations made inside the block\n\t\t\tbecome invalid as soon as the block is left. Of course,\n\t\t\tfunctions declared inside the block can be returned or\n\t\t\tassigned to variables declared outside the block, and the\n\t\t\tsame holds for objects of locally declared classes.\n\t\t\t</p>\n\t\t',children:[]},{id:"assignments",name:"Assignments",title:"Assignments",content:'\n\t\t\t<p>\n\t\t\tAssignments have the following form:\n\t\t\t<ebnf>\n\t\t\t\tassignment = lhs assign-op expression ";" ;\n\t\t\t\t  lhs = name\n\t\t\t\t        | expression "[" expression "]"\n\t\t\t\t        | expression "." identifier ;\n\t\t\t\t  assign-op = "=" | "+=" | "-=" | "*=" | "/=" | "%=" | "^=" ;\n\t\t\t</ebnf>\n\t\t\tThe expression <ebnf>lhs</ebnf> on the left-hand-side (lhs) of the\n\t\t\tassignment must refer to a variable. It must not refer to a function\n\t\t\tor to a constant.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tAssignments are evaluated from right to left: the <ebnf>expression</ebnf>\n\t\t\ton the right-hand-side (rhs) is evaluated before the <ebnf>lhs</ebnf>. The\n\t\t\teffect of an assignment with <code class="code">operator =</code> is\n\t\t\tthat the variable referenced by the <ebnf>lhs</ebnf> is overwritten\n\t\t\twith the result of the <ebnf>expression</ebnf>. In other words, after\n\t\t\tthe assignment the variable references the value to which the rhs\n\t\t\tevaluates. Note that an assignment does not copy the value represented by\n\t\t\tthe rhs, it only makes the lhs reference the same value, as can be seen in\n\t\t\tthe following example:\n\t\t\t<tscript>\n\t\t\t\tvar a = [2, 3, 5, 7];\n\t\t\t\tvar b = a;\n\t\t\t\ta[2] = 97;\n\t\t\t\tprint(b);   # prints [2,3,97,7]\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe assignment operators <code class="code">+= -= *= /= %= ^=</code> are\n\t\t\tcalled compound assignment operators. The statement\n\t\t\t<code class="code">a += 3;</code> is equivalent to\n\t\t\t<code class="code">a = a + 3;</code>, and the same applies to the other\n\t\t\tbinary arithmetic <a href="?doc#/language/expressions/binary-operators">operators</a>.\n\t\t\tHowever, this equivalence is not exact in general, since with compound\n\t\t\tassignment the lhs expression is evaluated only once. This difference\n\t\t\tis demonstrated in the following example:\n\t\t\t<tscript>\n\t\t\t\tvar counter = 0;\n\t\t\t\tvar a = [0, 0];\n\t\t\t\tfunction get()\n\t\t\t\t{\n\t\t\t\t\tcounter += 1;\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t\t\tget()[0] += 7;\n\t\t\t\tprint(a);                # prints [7, 0]\n\t\t\t\tprint(counter);          # prints 1\n\t\t\t\tget()[1] = get()[1] + 7;\n\t\t\t\tprint(a);                # prints [7, 7]\n\t\t\t\tprint(counter);          # prints 3\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t',children:[]},{id:"expressions",name:"Expressions",title:"Expressions",content:'\n\t\t\t<p>\n\t\t\tAn expression followed by a semicolon is a valid statement.\n\t\t\tFor many expressions this is rather pointless:\n\t\t\t<tscript>\n\t\t\t\t"hello world";\n\t\t\t\tmath.sqrt(81) == 9;\n\t\t\t</tscript>\n\t\t\tAn expression makes sense as a standalone statement if it has\n\t\t\tside-effects. Primary examples are calls to standard library\n\t\t\tfunctions:\n\t\t\t<tscript>\n\t\t\t\tprint("hello world");\n\t\t\t\tassert(math.sqrt(81) == 9);\n\t\t\t</tscript>\n\t\t\tOf course, a function call can result in an arbitrary sequence\n\t\t\tof commands being executed inside the function body and further\n\t\t\tfunctions called from there, and therefore the side effects can\n\t\t\tbecome arbitrarily complex.\n\t\t\t</p>\n\t\t',children:[]},{id:"if-then-else",name:"Conditions with if then else",title:"Conditions with if then else",content:'\n\t\t\t<p>\n\t\t\tA conditional control structure is denoted as follows:\n\t\t\t<ebnf>\n\t\t\tcondition = "if" expression "then" statement\n\t\t\t                          [ "else" statement ] ;\n\t\t\t</ebnf>\n\t\t\tThe <ebnf>expression</ebnf> must evaluate to a\n\t\t\t<a href="?doc#/language/types/boolean">Boolean</a>, otherwise an error\n\t\t\tis reported.\n\t\t\tIf the <ebnf>expression</ebnf> evaluates to <keyword>true</keyword>\n\t\t\tthen the <ebnf>statement</ebnf> following <keyword>then</keyword>\n\t\t\tis executed, otherwise the <ebnf>statement</ebnf> following\n\t\t\t<keyword>else</keyword> is executed, if present. It is common that\n\t\t\tthe statements are <a href="?doc#/language/statements/blocks">blocks</a>.\n\t\t\t</p>\n\t\t',children:[]},{id:"for-loops",name:"For-Loops",title:"For-Loops",content:'\n\t\t\t<p>\n\t\t\tA for-loop has the following syntax:\n\t\t\t<ebnf>\n\t\t\tfor-loop = "for" [ loop-var "in" ] expression "do" statement ;\n\t\t\t  loop-var = ("var" identifier) | name ;\n\t\t\t</ebnf>\n\t\t\tThe <ebnf>expression</ebnf> must evaluate to a\n\t\t\t<a href="?doc#/language/types/range">Range</a> or an\n\t\t\t<a href="?doc#/language/types/array">Array</a>, otherwise an error is\n\t\t\treported.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# print 9, 16, 25, 36, 49 in five lines\n\t\t\t\t\tfor var i in 3:8 do print(i*i);\n\n\t\t\t\t\t# print "hello" and "world" in two lines\n\t\t\t\t\tfor var i in ["hello", "world"] do print(i);\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tThe for-loop executes the <ebnf>statement</ebnf> exactly once for\n\t\t\teach value in the range or array. This value is assigned to the loop\n\t\t\tvariable. An already declared variable can be used as the loop\n\t\t\tvariable, which is referenced by the given <ebnf>name</ebnf>, so it\n\t\t\tcan even be declared in another namespace.\n\t\t\tAlternatively, a new variable can declared with the\n\t\t\t<ebnf>"var" identifier</ebnf> syntax. This variable belongs to the\n\t\t\tloop, which acts as its scope, hence its name does not collide with\n\t\t\tother declarations outside the loop, and the variable goes out of\n\t\t\tscope after the last loop iteration. It is common to execute\n\t\t\tmultiple statements in each loop iteration by using a\n\t\t\t<a href="?doc#/language/statements/blocks">block</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Repeated Execution</h2>\n\t\t\t<p>\n\t\t\tLooping over a range is the idiomatic way to execute code a number\n\t\t\tof times in a row. The loop counter provides an easy way to\n\t\t\tparameterize the repeated code:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:10 do print(10-i + "...");\n\t\t\t\tprint("now!");\n\t\t\t</tscript>\n\t\t\tIn simple contexts the loop variable is not needed. Consequently,\n\t\t\tit can be dropped:\n\t\t\t<tscript>\n\t\t\t\tfor 0:10 do print("wait...");\n\t\t\t\tprint("now!");\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Looping over Containers</h2>\n\t\t\t<p>\n\t\t\tLooping over an array works directly with a for-loop. For a\n\t\t\tdictionary it is not clear whether the loop variable shall hold\n\t\t\tkeys, values, or both. Therefore an explicit decision must be\n\t\t\tmade by the programmer, using the Dictionary methods\n\t\t\t<a href="?doc#/language/types/dictionary">keys</a> or\n\t\t\t<a href="?doc#/language/types/dictionary">values</a>, as shown in\n\t\t\tthe following example:\n\t\t\t<tscript>\n\t\t\t\tvar dict = {a: 3, b: 10, c: null};\n\t\t\t\tfor var i in dict.keys() do print(i + ": " + dict[i]);\n\t\t\t\tfor var i in dict.values() do print(i);\n\t\t\t</tscript>\n\t\t\tSince arrays also have keys and values() methods, this technique can\n\t\t\tloop over containers (arrays and dictionaries) in a generic fashion:\n\t\t\t<tscript>\n\t\t\t\tvar arr = [3, 10, null];\n\t\t\t\tvar dict = {a: 3, b: 10, c: null};\n\n\t\t\t\tfunction printContainer(container)\n\t\t\t\t{\n\t\t\t\t\tprint(Type(container));\n\t\t\t\t\tfor var i in container.keys() do\n\t\t\t\t\t{\n\t\t\t\t\t\tprint(i + ": " + container[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprintContainer(arr);\n\t\t\t\tprintContainer(dict);\n\t\t\t</tscript>\n\t\t\t</p>\n\n\t\t\t<h2>Modifying the Container in the Loop</h2>\n\t\t\t<p>\n\t\t\tIt is safe to modify the object iterated over during execution of the loop.\n\t\t\tThe loop is entirely unaffected by such modification because it iterates\n\t\t\tover a copy of the object. For example, the following is not an infinite loop:\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\tvar arr = ["foo"];\n\t\t\t\tfor var i in arr do arr.push(i);\n\t\t\t\tprint(arr);   # prints [foo,foo]\n\t\t\t</tscript>\n\n\t\t\t<h2>Changing the Control Flow</h2>\n\t\t\t<p>\n\t\t\tEqually well, modifying the loop variable does not have an effect on the\n\t\t\tcontrol flow, because in the next iteration the variable is assigned the\n\t\t\tnext value from the container:\n\t\t\t<tscript>\n\t\t\t\tfor var i in 0:10 do\n\t\t\t\t{\n\t\t\t\t\tif i == 3 then i = 7;   # attempt to skip 3,4,5,6 fails\n\t\t\t\t\tprint(i);   # prints 0, 1, 2, <span style="color:red">7</span>, 4, 5, 6, 7, 8, 9\n\t\t\t\t}\n\t\t\t</tscript>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSometimes it is necessary to change the control flow during execution\n\t\t\tof the loop. We have seen that modifying the loop variable and the\n\t\t\tloop object does not achieve this effect. Instead, the following two\n\t\t\toperations work.\n\t\t\tThe loop a a whole can be aborted with <a href="?doc#/language/statements/break-continue">break</a>.\n\t\t\tThe current iteration can be aborted with <a href="?doc#/language/statements/break-continue">continue</a>.\n\t\t\tIt is not possible to extend a for loop during execution. If this is\n\t\t\ta requirement then a\n\t\t\t<a href="?doc#/language/statements/while-do-loops">while-do-loop</a>\n\t\t\tcan be used.\n\t\t\t</p>\n\t\t',children:[]},{id:"while-do-loops",name:"While-Do-Loops",title:"While-Do-Loops",content:'\n\t\t\t<p>\n\t\t\tThe while-do-loop syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\twhile-do-loop = "while" expression "do" statement ;\n\t\t\t</ebnf>\n\t\t\tThe loop evaluates the <ebnf>expression</ebnf>. If it does not result in\n\t\t\ta <a href="?doc#/language/types/boolean">Boolean</a>, then an error is emitted.\n\t\t\tIf the expression evaluates to <keyword>false</keyword> then the loop is\n\t\t\tfinished. However, if it evaluates to <keyword>true</keyword> then the\n\t\t\t<ebnf>statement</ebnf> is executed and the loop starts over by re-evaluating\n\t\t\tthe expression. This scheme corresponds to a pre-checked loop, i.e., a loop\n\t\t\tthat checks the condition <i>before</i> executing the statement.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find a zero of a function with Newton\'s method\n\t\t\t\t\tfunction f(x)\n\t\t\t\t\t{ return x^5 - 7 * x^3 + 2 * x^2 + x + 4.2; }\n\t\t\t\t\tfunction df(x)\n\t\t\t\t\t{ return 5 * x^4 - 21 * x^2 + 4 * x + 1; }\n\n\t\t\t\t\tvar x = 0.0;\n\t\t\t\t\twhile math.abs(f(x)) > 1e-5 do\n\t\t\t\t\t{\n\t\t\t\t\t\tvar step = f(x) / df(x);\n\t\t\t\t\t\tx -= step;\n\t\t\t\t\t}\n\t\t\t\t\tprint("The zero of f is close to x=" + x);\n\t\t\t\t\tprint("The function value at x is f(x)=" + f(x));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tIt is easy to create an infinite while-do loop:\n\t\t\t<pre class="code"><code class="code">while true do { }</code></pre>\n\t\t\tThe construction can actually be useful if the loop is aborted with a\n\t\t\t<keyword>break</keyword> statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"do-while-loops",name:"Do-While-Loops",title:"Do-While-Loops",content:'\n\t\t\t<p>\n\t\t\tThe do-while-loop syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\tdo-while-loop = "do" statement "while" expression ";" ;\n\t\t\t</ebnf>\n\t\t\tThe loop executes the <ebnf>statement</ebnf>. Then it evaluates the\n\t\t\t<ebnf>expression</ebnf>. If it does not result in a\n\t\t\t<a href="?doc#/language/types/boolean">Boolean</a>, then an error is emitted.\n\t\t\tIf the expression evaluates to <keyword>false</keyword> then the loop is\n\t\t\tfinished. However, if it evaluates to <keyword>true</keyword> then the\n\t\t\tloop starts over. This scheme corresponds to a post-checked loop, i.e., a\n\t\t\tloop that checks the condition <i>after</i> executing the statement.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find a zero of a function with Newton\'s method\n\t\t\t\t\tfunction f(x)\n\t\t\t\t\t{ return x^5 - 7 * x^3 + 2 * x^2 + x + 4.2; }\n\t\t\t\t\tfunction df(x)\n\t\t\t\t\t{ return 5 * x^4 - 21 * x^2 + 4 * x + 1; }\n\n\t\t\t\t\tvar x = 0.0;\n\t\t\t\t\tdo\n\t\t\t\t\t{\n\t\t\t\t\t\tvar step = f(x) / df(x);\n\t\t\t\t\t\tx -= step;\n\t\t\t\t\t}\n\t\t\t\t\twhile math.abs(f(x)) > 1e-5;\n\t\t\t\t\tprint("The zero of f is close to x=" + x);\n\t\t\t\t\tprint("The function value at x is f(x)=" + f(x));\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tIt is easy to create an infinite while loop:\n\t\t\t<pre class="code"><code class="code">do { } while true;</code></pre>\n\t\t\tThe construction can actually be useful if the loop is aborted with a\n\t\t\t<keyword>break</keyword> statement.\n\t\t\t</p>\n\t\t',children:[]},{id:"break-continue",name:"Break and Continue",title:"Break and Continue",content:'\n\t\t\t<p>\n\t\t\tThe <keyword>break</keyword> and <keyword>continue</keyword> statements\n\t\t\tchange the control flow of the current innermost loop within the current\n\t\t\tfunction. The break statement exits the loop. The continue statement\n\t\t\tskips the remainder of a loop iteration. Their syntax is trivial:\n\t\t\t<ebnf>\n\t\t\t\tbreak = "break" ";" ;\n\t\t\t\tcontinue = "continue" ";" ;\n\t\t\t</ebnf>\n\t\t\tAfter a continue statement, the loop jumps to its check of the stopping\n\t\t\tcriterion. If it does not stop then it continues with the next loop\n\t\t\titeration, otherwise with the next statement following the loop body.\n\t\t\tBreak and continue statements outside of a loop body result in an error\n\t\t\tmessage.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\t# find all primes below some number\n\t\t\t\t\tvar N = 100;                  # look for primes up to this point\n\t\t\t\t\tvar primes = [];\n\t\t\t\t\tfor var i in 2:N do\n\t\t\t\t\t{\n\t\t\t\t\t\t# check whether i is prime by finding a factor\n\t\t\t\t\t\tvar factor = null;\n\t\t\t\t\t\tfor var p in primes do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif p * p > i then break;  # don\'t check too large primes\n\t\t\t\t\t\t\tif i % p == 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t# found a factor\n\t\t\t\t\t\t\t\tfactor = p;\n\t\t\t\t\t\t\t\tbreak;                # don\'t check further factors\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif factor != null then continue;  # skip non-primes\n\t\t\t\t\t\tprint(i + " is prime");\n\t\t\t\t\t\tprimes.push(i);\n\t\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]},{id:"return",name:"Return",title:"Return",content:'\n\t\t\t<p>\n\t\t\tThe return statement immediately returns from a function.\n\t\t\tIts syntax is as follows:\n\t\t\t<ebnf>\n\t\t\t\treturn = "return" [ expression ] ";" ;\n\t\t\t</ebnf>\n\t\t\tIf the optional <ebnf>expression</ebnf> is not present, then\n\t\t\t<keyword>null</keyword> is used as the default value.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tThe return statement first evaluates the expression, known as the\n\t\t\treturn value, then leaves the current function, and returns the\n\t\t\tvalue to the caller. In other words, the function call expression\n\t\t\tin the calling context evaluates to the return value.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tWhen executed at global scope, the return statement terminates the\n\t\t\tprogram. A constructor as well as the global scope do not return a\n\t\t\tvalue. Therefore, in these contexts, a return statement must not\n\t\t\tcontain a return value.\n\t\t\t</p>\n\t\t',children:[]},{id:"throw",name:"Throw",title:"Throw",content:'\n\t\t\t<h2>Syntax and Effect</h2>\n\t\t\t<p>\n\t\t\tAn exception is thrown with the following syntax:\n\t\t\t<ebnf>\n\t\t\t\tthrow = "throw" expression ";" ;\n\t\t\t</ebnf>\n\t\t\tThe result of evaluating the <ebnf>expression</ebnf> is called\n\t\t\tan exception.\n\t\t\tThe effect of throwing an exception is that execution continues\n\t\t\tin the <keyword>catch</keyword>-part of the closest enclosing \n\t\t\t<keyword>try</keyword>-<keyword>catch</keyword> block.\n\t\t\tThe search for the closest enclosing <keyword>try</keyword> block\n\t\t\tworks as follows. The current scope is left until a\n\t\t\t<keyword>try</keyword> block, global scope, or a function scope\n\t\t\tis found. In case of a <keyword>try</keyword> block the search\n\t\t\tis successful, and the exception is assigned to the variable\n\t\t\tdeclared in the <keyword>catch</keyword> block. Otherwise the\n\t\t\truntime system leaves the current function and continues the\n\t\t\tsearch in the calling function. If no <keyword>try</keyword>-block\n\t\t\tis found before global scope is encountered, then the program\n\t\t\tterminates with an error message, which contains a string\n\t\t\trepresentation of the exception.\n\t\t\t</p>\n\n\t\t\t<h2>Error Handling</h2>\n\t\t\t<p>\n\t\t\tExceptions are regularly used for error reporting across possibly\n\t\t\tdeeply nested function calls. The role of the exception is to\n\t\t\tprovide a useful description of the error, which can be either\n\t\t\thandled programmatically by the catch block, or reported to the\n\t\t\tuser. \n\t\t\t</p>\n\t\t\t<p>\n\t\t\tSometimes only certain types of errors should be handled in a\n\t\t\tspecific <keyword>catch</keyword> block. In this case the\n\t\t\texception can be caught, examined, and possibly re-thrown.\n\t\t\t</p>\n\t\t',children:[]},{id:"try-catch",name:"Try and Catch",title:"Try and Catch",content:'\n\t\t\t<h2>Syntax</h2>\n\t\t\t<p>\n\t\t\tThe syntax of a <keyword>try</keyword>-<keyword>catch</keyword>\n\t\t\tstatement is as follows:\n\t\t\t<ebnf>\n\t\t\t\ttry-catch = "try" statement\n\t\t\t\t            "catch" "var" identifier "do" statement ;\n\t\t\t</ebnf>\n\t\t\tUnder normal conditions, the try-catch-block executes only\n\t\t\tthe statement following <keyword>try</keyword>. This is nearly\n\t\t\talways a block of statements, also referred to as the try-block.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tHowever, if an exception is thrown in the try-block or in any\n\t\t\tfunction called from this block, then execution continues in\n\t\t\tthe statement following <keyword>do</keyword>. This is again\n\t\t\tusually a block of statements, called the catch-block. The value\n\t\t\tpassed to the <keyword>throw</keyword> instruction, known as the\n\t\t\t<i>exception</i>, is assigned to the variable declared after\n\t\t\t<keyword>catch</keyword>. Catch blocks are used to react to\n\t\t\terror conditions, which are reported by throwing an\n\t\t\texception.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\tvar sum = 0;\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\t# this sum is doomed to fail\n\t\t\t\t\tvar numbers = [3.2, 5.6, 0.0, 8.0, 2.4];\n\t\t\t\t\tfor var i in numbers do\n\t\t\t\t\t{\n\t\t\t\t\t\tfor var j in numbers do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (i == 0) then throw "division by zero";\n\t\t\t\t\t\t\telse sum += j / i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tprint(sum);\n\t\t\t\t}\n\t\t\t\tcatch var ex do\n\t\t\t\t{\n\t\t\t\t\t# and here we "handle" the error\n\t\t\t\t\tif ex == "division by zero" then\n\t\t\t\t\t\tprint("division by zero, partial sum: " + sum);\n\t\t\t\t\telse throw ex;\n\t\t\t\t}\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t',children:[]}]},{id:"types",name:"The Type System",title:"The Type System",content:"\n\t\t<p>\n\t\tA type defines a set of values, which are of similar nature.\n\t\tThey are associated with operations acting on the value, i.e.,\n\t\tevaluating or manipulating values. The available data types\n\t\ttherefore define how information can be represented natively,\n\t\twhich units of information can be processed atomically, and\n\t\thow information can be aggregated.\n\t\t</p>\n\t\t<p>\n\t\tTScript's core type system is rather minimal. It does not aim\n\t\tfor completeness, but it is extensible. For example, there is\n\t\tno built-in type representing a date, but it is easy enough to\n\t\tadd a class taking that role.\n\t\t</p>\n\t\t<p>\n\t\tNot all types represent typical units of information, like bits,\n\t\tnumbers, and strings. Two such types are Function and Type. The\n\t\tability to use functions as types enables powerful programming\n\t\ttechniques. Types as values are used to check for the types of\n\t\tvariables referenced by variables at runtime.\n\t\t</p>\n\t\t<p>\n\t\tProgrammers can extend the type system to new kinds of information\n\t\tby writing their own classes. Simple classes like a date class can\n\t\tbehave similar to atomic types. More complex classes can for\n\t\texample act as containers, or represent resources (like files).\n\t\tClasses support proper information hiding, which allows the\n\t\tprogrammer to separate implementation details from a public\n\t\tinterface.\n\t\t</p>\n\t\t<p>\n\t\tTScript does not distinguish between built-in types and classes,\n\t\tin the sense that all types are equally capable of taking each role.\n\t\tFor example, it is perfectly legal to use a built-in type like\n\t\tInteger as a super class, which might make sense for a date class.\n\t\tHowever, it is not possible to overload operators. For classes, the\n\t\tcapabilities of operators must therefore be emulated with functions.\n\t\t</p>\n\t",children:[{id:"null",name:"Null",title:"The Type <i>Null</i>",content:'\n\t\t\t<p>\n\t\t\tThe Null type has only a single value, the\n\t\t\t<a href="?doc#/language/expressions/literals/null">null literal</a>.\n\t\t\tThis value is immutable. It does not offer any operations.\n\t\t\tWhile it is clear that <keyword>null</keyword> cannot represent\n\t\t\tmuch useful information, is has a twofold role: first of all, it\n\t\t\tacts as a <i>default initializer</i> for all variables, and second,\n\t\t\tit is a canonical <i>marker</i> for an exceptional state, like an\n\t\t\terror condition or marking a process as incomplete. For example, a\n\t\t\tfunction that is expected to return an integer may use a return\n\t\t\tvalue of <keyword>null</keyword> to indicate that it was not\n\t\t\table to complete its task (for whatever reason).\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor()</code> creates a null\n\t\t\t\tvalue.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"boolean",name:"Boolean",title:"The Type <i>Boolean</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Boolean represents the two logical values, denoted by the\n\t\t\t<a href="?doc#/language/expressions/literals/booleans">literals</a>\n\t\t\t<keyword>true</keyword> and <keyword>false</keyword>. They are\n\t\t\timmutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\tBooleans offer a number of operations, namely the operators\n\t\t\t<a href="?doc#/language/expressions/unary-operators/not">not</a>,\n\t\t\t<a href="?doc#/language/expressions/binary-operators/and">and</a>,\n\t\t\t<a href="?doc#/language/expressions/binary-operators/or">or</a>, and\n\t\t\t<a href="?doc#/language/expressions/binary-operators/xor">xor</a>.\n\t\t\tThey can be compared for equality with the operators\n\t\t\t<code class="code">==</code> and <code class="code">!=</code>\n\t\t\t(and in fact, for Boolean, the operators\n\t\t\t<code class="code">xor</code> and <code class="code">!=</code>\n\t\t\tare equivalent), but they cannot be ordered. Booleans are\n\t\t\tdemanded by the language as conditions in\n\t\t\t<a href="?doc#/language/statements/if-then-else">conditionals</a>\n\t\t\tand <a href="?doc#/language/statements/while-do-loops">pre-</a> and\n\t\t\t<a href="?doc#/language/statements/do-while-loops">post-</a>checked\n\t\t\tloops. Furthermore, they are frequently used as flags, and they\n\t\t\tcan be used to represent single bits.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a copy\n\t\t\t\tof a boolean value.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"integer",name:"Integer",title:"The Type <i>Integer</i>",content:'\n\t\t\t<p>\n\t\t\tThere exist <i>2<sup>32</sup></i> values of type Integer, namely\n\t\t\tthe whole numbers in the range <i>-2147483648 = -2<sup>31</sup></i>\n\t\t\tto <i>2147483647 = 2<sup>31</sup>-1</i>. Non-negative integers can be\n\t\t\trepresented directly as\n\t\t\t<a href="?doc#/language/expressions/literals/integers">integer literals</a>.\n\t\t\tThe values are immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tIntegers can be combined with a number of unary and binary operators.\n\t\t\tWhen the result of such an operator is outside the integer range then\n\t\t\tthe result <i>underflows</i> or <i>overflows</i>, i.e., wraps around\n\t\t\tthe range, which can be understood as representatives of the integers\n\t\t\tmodulo <i>2<sup>32</sup></i>. Being aware of this behavior is important\n\t\t\twhen dealing with large numbers, in particular since the operations are\n\t\t\tnot fully consistent from an algebraic perspective.\n\t\t\t</p>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>unary&nbsp;+</th><td>\n\t\t\t\tThe operator is a no-operation, or more correctly, the identity\n\t\t\t\tmapping. It returns its argument unmodified. It merely exists for\n\t\t\t\tsymmetry with unary&nbsp;-, e.g., in the following situation:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [-1, +1];\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;-</th><td>\n\t\t\t\tThe operator negates its argument. This operation overflows only\n\t\t\t\tfor the value <i>-2<sup>31</sup> = -2147483648</i>, resulting in\n\t\t\t\tthe exact same value.\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;not</th><td>\n\t\t\t\tThe operator flips all 32 bits of its argument.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tAdd the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;-</th><td>\n\t\t\t\tSubtract the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;*</th><td>\n\t\t\t\tMultiply the arguments. The result is subject to under- and overflow,\n\t\t\t\twhich is particularly common for this operation. Example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(65535 * 65537);   # overflows to -1\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;/</th><td>\n\t\t\t\tDivide the arguments as reals. The arguments are first converted\n\t\t\t\tto reals, then they are divided as reals, and the result is of\n\t\t\t\ttype Real, even if the remainder of the integer division is zero.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 / 3);     # 2\n\t\t\t\t\tprint(5 / 3);     # 1.6666...\n\t\t\t\t\tprint(4 / 3);     # 1.3333...\n\t\t\t\t\tprint(1 / 3);     # 0.3333...\n\t\t\t\t\tprint(-1 / 3);    # -0.3333...\n\t\t\t\t\tprint(1 / -3);    # -0.3333...\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;//</th><td>\n\t\t\t\tDivide the arguments as integers, defined as</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a // b = math.floor(a / b)</code></br>\n\t\t\t\tNote that <code class="code">a * b = c</code> implies\n\t\t\t\t<code class="code">c // a = b</code> only if the multiplication\n\t\t\t\tdoes not overflow. Division is not well-defined in the modulo\n\t\t\t\tarithmetic implied by overflow!\n\t\t\t\tInstead "normal" integer division (without modulo) is assumed.\n\t\t\t\tThe result is rounded down to the closest integer. For example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 // 3);     # 2\n\t\t\t\t\tprint(5 // 3);     # 1\n\t\t\t\t\tprint(4 // 3);     # 1\n\t\t\t\t\tprint(1 // 3);     # 0\n\t\t\t\t\tprint(-1 // 3);    # -1, since we round down\n\t\t\t\t\tprint(1 // -3);    # -1 again\n\t\t\t\t\tprint(-(1 // 3));  # 0\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;%</th><td>\n\t\t\t\tRemainder of the integer division. The result is defined by\n\t\t\t\tthe following identity:</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - (a // b) * b</code></br>\n\t\t\t\tThis ensures that the result is always in the range</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">0 <= a % b < math.abs(b)</code></br>\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(6 % 3);     # 0\n\t\t\t\t\tprint(5 % 3);     # 2\n\t\t\t\t\tprint(4 % 3);     # 1\n\t\t\t\t\tprint(1 % 3);     # 1\n\t\t\t\t\tprint(-1 % 3);    # 2, not -1\n\t\t\t\t\tprint(1 % -3);    # 2 again, since 1//-3 = -1//3\n\t\t\t\t\tprint(-(1 % 3));  # -1\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;^</th><td>\n\t\t\t\tThe operation <i>n ^ m</i> computes the <i>m</i>-th power of\n\t\t\t\t<i>n</i>. If <i>m</i> is non-negative then the result is an\n\t\t\t\tinteger, which is subject to the usual under- and overflow rules.\n\t\t\t\tFor negative exponent both arguments are converted to reals\n\t\t\t\tbefore applying the same operator for reals. Examples:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(2 ^ 4);       # 16\n\t\t\t\t\tprint(-2 ^ 4);      # -16\n\t\t\t\t\tprint((-2) ^ 4);    # 16\n\t\t\t\t\tprint(2 ^ -2);      # 0.25\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;and</th><td>\n\t\t\t\tThe operator returns the bitwise conjunction applied independently\n\t\t\t\tto all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;or</th><td>\n\t\t\t\tThe operator returns the bitwise non-exclusive disjunction applied\n\t\t\t\tindependently to all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;xor</th><td>\n\t\t\t\tThe operator returns the bitwise exclusive disjunction applied\n\t\t\t\tindependently to all 32 bits of its arguments.\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tIntegers can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc#/language/expressions/binary-operators/order">ordered</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tNote: bitwise operators have a very low precedence, i.e., a low binding\n\t\t\tstrength. Therefore, in a condition like <code class="code">x and 64 == 0</code>\n\t\t\tthe comparison operator <code class="code">==</code> is executed\n\t\t\t<i>before</i> the bitwise operator <code class="code">and</code>. This\n\t\t\tis usually intended for logical operators, but not for bitwise operators.\n\t\t\tTherefore bitwise operators should always be used with parentheses:\n\t\t\t<code class="code">(x and 64) == 0</code>.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to an integer. For integers this amounts to copying, reals\n\t\t\t\tare rounded down, and strings are parsed as decimal numbers.\n\t\t\t\tThe result is subject to integer overflow. Other types as well as\n\t\t\t\tthe special Real values infinity and not-a-number raise an error.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"real",name:"Real",title:"The Type <i>Real</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Real represents floating point numbers according to the\n\t\t\t<a target="_blank" href="https://de.wikipedia.org/wiki/IEEE_754">IEEE 754 standard</a>.\n\t\t\tThis number format offers an excessive range and a precision of\n\t\t\tabout 15-16 decimal digits. Although the precision is more than\n\t\t\tsufficient for most tasks, one should be aware of its limitations\n\t\t\tlike rounding errors, which can result in catastrophic cancellation.\n\t\t\tThese aspects have been discussed in detail in\n\t\t\t<a target="_blank" href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">this classic article</a>.\n\t\t\tPositive reals can be represented directly as\n\t\t\t<a href="?doc#/language/expressions/literals/reals">real literals</a>.\n\t\t\tThe values are immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tReals can be combined with a number of unary and binary operators.\n\t\t\tWhen the result of such an operator is outside the floating point range\n\t\t\tthen the result <i>underflows</i> (to zero) or <i>overflows</i> (to\n\t\t\tpositive or negative infinity). Being aware of this behavior is important\n\t\t\twhen dealing with large numbers, in particular since the operations are\n\t\t\tnot fully consistent from an algebraic perspective. Computations with\n\t\t\tinfinite values easily result in undefined results, which are encoded by\n\t\t\tthe special value NaN (not-a-number).\n\t\t\t</p>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>unary&nbsp;+</th><td>\n\t\t\t\tThe unary <code class="code">operator +</code> is a no-operation,\n\t\t\t\tor more correctly, the identity mapping. It returns its argument\n\t\t\t\tunmodified. It merely exists for symmetry with unary&nbsp;-, i.e.,\n\t\t\t\tin the following situation:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [-1.0, +1.0];\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>unary&nbsp;-</th><td>\n\t\t\t\tThe unary <code class="code">operator -</code> negates its argument.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tAdd the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;-</th><td>\n\t\t\t\tSubtract the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;*</th><td>\n\t\t\t\tMultiply the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;/</th><td>\n\t\t\t\tDivide the arguments. The result is subject to under- and overflow.\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;//</th><td>\n\t\t\t\tDivide the arguments and round the result down to the closest integer.\n\t\t\t\tYet, the result is of type Real. This operator is compatible with\n\t\t\t\tinteger division and with the modulo operation defined below.\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3.5 // 1.5);      # 2\n\t\t\t\t\tprint(-3.5 // 1.5);     # -3\n\t\t\t\t\tprint(-(3.5 // 1.5));   # -2\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;%</th><td>\n\t\t\t\tRemainder of the division, pretending that the quotient had been\n\t\t\t\trounded down to the nearest integer. The result is defined as</br>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code class="code">a % b = a - b * (a // b)</code></br>\n\t\t\t\t(for positive denominator, otherwise the result is negated).\n\t\t\t\tFor example:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(3.5 % 1.5);      # 0.5\n\t\t\t\t\tprint(-3.5 % 1.5);     # 1\n\t\t\t\t\tprint(-(3.5 % 1.5));   # -0.5\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>binary&nbsp;^</th><td>\n\t\t\t\tThe operation <i>n&nbsp;^&nbsp;m</i> computes the <i>m</i>-th power of\n\t\t\t\t<i>n</i>. Note that raising a negative number to a non-integer power is\n\t\t\t\tnot a well-defined operation, yielding the result NaN.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tReals can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc#/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tAll operations on reals can mix integers and reals. The integer is then\n\t\t\tconverted to a real, and the operation is executed with floating-point\n\t\t\tlogic, even if the numbers represented by the reals could be converted\n\t\t\tto integers without loss of precision.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to a real. For reals this amounts to copying, integers\n\t\t\t\tare converted, and strings are parsed as decimal numbers.\n\t\t\t\tThe result is subject to roundoff errors. All other types\n\t\t\t\tand all error conditions result in not-a-number.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isFinite</th><td>\n\t\t\t\t<code class="code">isFinite()</code> test whether the value\n\t\t\t\tis finite. This is the case if it is neither infinite nor\n\t\t\t\tNaN.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isInfinite</th><td>\n\t\t\t\t<code class="code">isInfinite()</code> test whether the value\n\t\t\t\tis infinite. This is the case if it equals positive or\n\t\t\t\tnegative infinity.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isNan</th><td>\n\t\t\t\t<code class="code">isNan()</code> test whether the value\n\t\t\t\tis not-a-number.\n\t\t\t</td></tr>\n\t\t\t<tr><th>inf</th><td>\n\t\t\t\t<code class="code">static inf()</code> returns positive\n\t\t\t\tinfinity.\n\t\t\t</td></tr>\n\t\t\t<tr><th>nan</th><td>\n\t\t\t\t<code class="code">static nan()</code> returns not-a-number.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"string",name:"String",title:"The Type <i>String</i>",content:'\n\t\t\t<p>\n\t\t\tThe type String represents text. A string is a sequence of\n\t\t\t<a href="?doc#/language/syntax/character-set">characters</a> of\n\t\t\tarbitrary length, also known as the <i>size</i> of the string.\n\t\t\tAlthough strings can contain any Unicode code point in the\n\t\t\trange U+0000 to U+FFFF,\n\t\t\t<a href="?doc#/language/expressions/literals/strings">string\n\t\t\tliterals</a> allow to encode all characters with plain ASCII.\n\t\t\tDespite their sequence nature, strings are immutable. Hence\n\t\t\twhen the need for modifying a string arises then a new string\n\t\t\tmust be constructed.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>binary&nbsp;+</th><td>\n\t\t\t\tConcatenate two strings as sequences of characters. Only one of the\n\t\t\t\toperands needs to be a string in order to trigger the application of\n\t\t\t\tthis operator; the other operand is converted to a string as if it\n\t\t\t\thad been passed to the String constructor. The following two\n\t\t\t\tstatements are equivalent:\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("pi = " + math.pi());\n\t\t\t\t\tprint("pi = " + String(math.pi()));\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tIf the index is of type Integer then the single character at the\n\t\t\t\tspecified (zero-based) position is returned. The position must be\n\t\t\t\tvalid, i.e., it must neither be negative nor exceed the size of\n\t\t\t\tthe string. The character is returned as an integer in the range\n\t\t\t\t0 to 65535 representing the unicode code point.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("hello world"[5]); # prints 32, the code of " "\n\t\t\t\t</tscript>\n\t\t\t\tIf the index is of type Range then the substring described by the\n\t\t\t\trange is extracted. Parts of the range that lie outside the valid\n\t\t\t\tindex range are ignored.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint("hello world"[6:100]); # prints "world"\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tStrings can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc#/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tStrings are equal if they have the same length and all characters\n\t\t\tcoincide. They are ordered lexicographically.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(value)</code> converts the\n\t\t\t\tvalue to a string.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe string, which is the number of characters in the sequence.\n\t\t\t</td></tr>\n\t\t\t<tr><th>find</th><td>\n\t\t\t\tThe <code class="code">function find(searchterm, start=0, backward=false)</code>\n\t\t\t\tsearches for the string <i>searchterm</i> inside the string.\n\t\t\t\tIf <i>backward</i> is <keyword>false</keyword> then it returns\n\t\t\t\tthe first position not smaller than <i>start</i> where it encounters\n\t\t\t\t<i>searchterm</i> inside the string, or <keyword>null</keyword>\n\t\t\t\tif it is not found. If <i>backward</i> is <keyword>true</keyword>\n\t\t\t\tthen the last position no larger than <i>start</i> where\n\t\t\t\t<i>searchterm</i> is found inside the string is returned.\n\t\t\t</td></tr>\n\t\t\t<tr><th>split</th><td>\n\t\t\t\tThe <code class="code">function split(separator)</code> splits\n\t\t\t\tthe string into substrings, separated by the separator string.\n\t\t\t\tIt returns the substrings as an array. In case of two consecutive\n\t\t\t\tseparators or a separator at the beginning or end of the string\n\t\t\t\tthe resulting substring is empty. Example:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar s = "hello,A,,B,";\n\t\t\t\t\tvar a = s.split(",");\n\t\t\t\t\t# a = ["hello", "A", "", "B", ""]\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>fromUnicode</th><td>\n\t\t\t\tThe <code class="code">static function fromUnicode(characters)</code>\n\t\t\t\tconverts a single integer or an array of integers into a string\n\t\t\t\tthe character codes of which coincide with the integers.\n\t\t\t\t<tscript>\n\t\t\t\t\tprint(String.fromUnicode([50, 8364])); # prints "2€"\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"array",name:"Array",title:"The Type <i>Array</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Array is a container capable of holding multiple values,\n\t\t\tcalled items of the array. Items are arranged in a sequence. They\n\t\t\tare accessed by integer-valued indices. Arrays are mutable: items\n\t\t\tcan be inserted, deleted, and overwritten. Arrays can be created\n\t\t\tas <a href="?doc#/language/expressions/literals/arrays">literals</a>.\n\t\t\tThese literals can contain arbitrary expressions (not necessarily\n\t\t\tliterals), which evaluate to the items.\n\t\t\t</p>\n\n\t\t\t<h2>Indexing</h2>\n\t\t\t<p>\n\t\t\tAn array with <i>n</i> items has size <i>n</i>. The items are accessed with\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Zero-based_numbering#Computer_programming">zero-based indices</a>\n\t\t\tin the range 0 to <i>n-1</i>.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tIf the index is of type Integer then the single item at the\n\t\t\t\tspecified (zero-based) position is returned. The position must be\n\t\t\t\tvalid, i.e., it must neither be negative nor exceed the size of\n\t\t\t\tthe array.\n\t\t\t\tIf the index is of type Range then the sub-array described by the\n\t\t\t\trange is extracted. Parts of the range that lie outside the valid\n\t\t\t\tindex range are ignored.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tArrays can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>\n\t\t\tand they are <a href="?doc#/language/expressions/binary-operators/order">ordered</a>,\n\t\t\tif all of their items are ordered.\n\t\t\tArrays are equal if they have the same length and all items compare\n\t\t\tequal. They are ordered lexicographically. Ordering two array with\n\t\t\titems that are not ordered results in an error message.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(size_or_other=0, value=null)</code>\n\t\t\t\tcreates a new array. If <i>size_or_other</i> is an integer then the\n\t\t\t\tarray contains <i>size_or_other</i> copies of <i>value</i>.\n\t\t\t\tIf <i>size_or_other</i> is an array then the array is copied.\n\t\t\t\tif <i>size_or_other</i> is a range then an array is created\n\t\t\t\tthat contains the elements are the range as items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe array, which is the number of items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>push</th><td>\n\t\t\t\tThe <code class="code">function push(item)</code> appends the\n\t\t\t\tgiven item to the array.\n\t\t\t</td></tr>\n\t\t\t<tr><th>pop</th><td>\n\t\t\t\tThe <code class="code">function pop()</code> removes and returns\n\t\t\t\tthe last item from the array. When applied to the empty array it\n\t\t\t\traises an error.\n\t\t\t</td></tr>\n\t\t\t<tr><th>insert</th><td>\n\t\t\t\tThe <code class="code">function insert(position, item)</code>\n\t\t\t\tinserts a new item at a given position. The index must be\n\t\t\t\tnon-negative and it must not exceed the array size.\n\t\t\t</td></tr>\n\t\t\t<tr><th>remove</th><td>\n\t\t\t\tThe <code class="code">function remove(range)</code> removes\n\t\t\t\tthe indicated range of items from the array. If range is an\n\t\t\t\tinteger, then it is interpreted as range:range+1.\n\t\t\t</td></tr>\n\t\t\t<tr><th>sort</th><td>\n\t\t\t\tThe <code class="code">function sort(comparator=null)</code>\n\t\t\t\tsorts the array in-place. Sorting is stable, i.e., the order of\n\t\t\t\tequivalent items is preserved. If <i>comparator</i> equals\n\t\t\t\t<keyword>null</keyword> then the built-in\n\t\t\t\t<a href="?doc#/language/expressions/binary-operators/order">order\n\t\t\t\trelation</a> is used for sorting, which means that all items\n\t\t\t\tin the array must be ordered. Otherwise <i>comparator</i> is\n\t\t\t\tassumed to be a function of two arguments (denoted lhs and rhs)\n\t\t\t\tthat returns a numeric value. A negative return value means that\n\t\t\t\t<i>lhs</i> should appear before <i>rhs</i>, a positive return\n\t\t\t\tvalue means <i>lhs</i> should appear after <i>rhs</i>, and zero\n\t\t\t\tindicates that the order does not matter, i.e., <i>lhs</i> and\n\t\t\t\t<i>rhs</i> are equivalent with respect to the order relation.\n\t\t\t\tThe <i>compare</i> function is assumed to induce a\n\t\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Weak_ordering#Strict_weak_orderings">strict weak order relation</a>.\n\t\t\t\tIf this assumption is not fulfilled then there is no guarantee\n\t\t\t\tthat the function will manage to sort the array.\n\t\t\t</td></tr>\n\t\t\t<tr><th>keys</th><td>\n\t\t\t\tThe <code class="code">function keys()</code> returns the\n\t\t\t\trange <code class="code">0:size()</code>. Its main purpose is\n\t\t\t\tcompatibility with\n\t\t\t\t<a href="?doc#/language/types/dictionary">Dictionary.keys</a>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>values</th><td>\n\t\t\t\tThe <code class="code">function values()</code> returns the\n\t\t\t\tarray itself. Its main purpose is compatibility with\n\t\t\t\t<a href="?doc#/language/types/dictionary">Dictionary.values</a>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>concat</th><td>\n\t\t\t\t<code class="code">static function concat(first, second)</code>\n\t\t\t\tconcatenates two arrays. It returns the concatenated array.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"dictionary",name:"Dictionary",title:"The Type <i>Dictionary</i>",content:'\n\t\t\t<p>\n\t\t\tThe type Dictionary is a container capable of holding multiple\n\t\t\tvalues, called items of the dictionary. Items are accessed with\n\t\t\tstring-valued keys. Dictionaries are mutable: items can be inserted,\n\t\t\tdeleted, and overwritten. Dictionaries can be created as\n\t\t\t<a href="?doc#/language/expressions/literals/dictionaries">literals</a>.\n\t\t\tThese literals can contain arbitrary expressions (not necessarily\n\t\t\tliterals), which evaluate to the items.\n\t\t\t</p>\n\n\t\t\t<h2>Indexing</h2>\n\t\t\t<p>\n\t\t\tA dictionary with <i>n</i> items has size <i>n</i>. The items are\n\t\t\taccessed with keys. Any two different strings form two different\n\t\t\tkeys, which can refer to different items. The empty string is a\n\t\t\tlegal key. Of course, not every possible string refers to an item,\n\t\t\tbut only keys that were explicitly defined.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tConceptually, keys in a dictionary are not ordered. In particular,\n\t\t\tthe lexicographical order of strings does not apply. Instead, the\n\t\t\t<code class="code">keys()</code> and <code class="code">values()</code>\n\t\t\tmethods report items chronologically, i.e., in the order they were\n\t\t\tinserted. This order also applies when converting a dictionary to\n\t\t\ta string.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>item&nbsp;access&nbsp;[]</th><td>\n\t\t\t\tThe index is expected to be of type string. The string must be\n\t\t\t\ta valid key, i.e., an item with that key must have been defined\n\t\t\t\tbefore. The operator returns the value stored with the key.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tDictionaries can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>,\n\t\t\tbut they are not <a href="?doc#/language/expressions/binary-operators/order">ordered</a>.\n\t\t\tTwo dictionaries compare equal if they contain the same keys, and if\n\t\t\tthe items associated with these keys compare equal.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\t<code class="code">constructor(other=null)</code>\n\t\t\t\tcreates a new dictionary. If <i>other</i> is null then the\n\t\t\t\tdictionary is empty. If <i>other</i> is a dictionary then it\n\t\t\t\tis copied.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\tThe <code class="code">function size()</code> returns the size of\n\t\t\t\tthe dictionary, which is the number of items.\n\t\t\t</td></tr>\n\t\t\t<tr><th>has</th><td>\n\t\t\t\tThe <code class="code">function has(key)</code> tests whether\n\t\t\t\t<i>key</i> is the key of an item.\n\t\t\t</td></tr>\n\t\t\t<tr><th>remove</th><td>\n\t\t\t\tThe <code class="code">function remove(key)</code> removes the\n\t\t\t\titem with the given key.\n\t\t\t</td></tr>\n\t\t\t<tr><th>keys</th><td>\n\t\t\t\tThe <code class="code">function keys()</code> returns an array\n\t\t\t\tof strings holding all keys of the dictionary. This method\n\t\t\t\tprovides an easy way of iterating over all items of a dictionary:\n\t\t\t\t<tscript>\n\t\t\t\t\tvar d = {a: 6, b: "foo", c: true};\n\t\t\t\t\tfor var key in d.keys() do\n\t\t\t\t\t\tprint(key + ": " + d[key]);\n\t\t\t\t</tscript>\n\t\t\t</td></tr>\n\t\t\t<tr><th>values</th><td>\n\t\t\t\tThe <code class="code">function values()</code> returns an array\n\t\t\t\tholding all values of the dictionary. The order of the values\n\t\t\t\tis the same as the order of keys returned by\n\t\t\t\t<code class="code">function keys()</code>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>merge</th><td>\n\t\t\t\t<code class="code">static function merge(first, second)</code>\n\t\t\t\tmerges two dictionaries, i.e., it joins the key/value pairs from\n\t\t\t\tboth dictionaries into a single dictionary. If a key appears in\n\t\t\t\tboth dictionaries then the value from the second one prevails.\n\t\t\t\tThe function returns the merged dictionary.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t</table>\n\t\t',children:[]},{id:"function",name:"Function",title:"The Type <i>Function</i>",content:'\n\t\t\t<p>\n\t\t\tThe Function type represents\n\t\t\t<a href="?doc#/language/declarations/functions">function declarations</a>,\n\t\t\t<a href="?doc#/language/declarations/classes">member function\n\t\t\tdeclarations</a> applied to an object, and\n\t\t\t<a href="?doc#/language/expressions/literals/anonymous-functions">anonymous\n\t\t\tfunctions</a>, possibly with enclosed parameters. This summarizes\n\t\t\tall blocks of code that can be\n\t\t\t<a href="?doc#/language/expressions/function-calls">called or invoked</a>\n\t\t\tby providing parameters in parentheses.\n\t\t\tFunctions are immutable. The only operation they provide is the call\n\t\t\toperator.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>function&nbsp;call&nbsp;()</th><td>\n\t\t\t\tCalls the function. See\n\t\t\t\t<a href="?doc#/language/expressions/function-calls">function calls</a>\n\t\t\t\tfor details.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t<p>\n\t\t\tFunctions can be\n\t\t\t<a href="?doc#/language/expressions/binary-operators/equality">compared for equality</a>,\n\t\t\tbut they are not <a href="?doc#/language/expressions/binary-operators/order">ordered</a>.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a copy\n\t\t\t\tof a function value.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"range",name:"Range",title:"The Type <i>Range</i>",content:'\n\t\t\t<p>\n\t\t\tThe Range type represents a range of integers. It is defined by\n\t\t\ttwo integers, <i>begin</i> and <i>end</i>. They define the half-open\n\t\t\trange<br/>\n\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>{x in N | begin &lt;= x &lt; end}</i>.<br/>\n\t\t\tConsequently, in case\n\t\t\tof <i>begin&nbsp;&gt;=&nbsp;end</i> the range is empty. Begin and end\n\t\t\tcan be any values in the valid <a href="?doc#/language/types/integer">integer</a>\n\t\t\trange; in particular, they can be negative.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tA range can be\n\t\t\tconstructed with the range constructor or with the\n\t\t\t<a href="?doc#/language/expressions/binary-operators/range">range operator&nbsp;:</a>.\n\t\t\tThe two options are equivalent:\n\t\t\t<tscript>\n\t\t\t\tvar r1 = Range(10, 15);\n\t\t\t\tvar r2 = 10:15;\n\t\t\t\tprint(r1 == r2);   # prints true\n\t\t\t</tscript>\n\t\t\tOnce constructed, a range is immutable.\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tRanges offer two rather trivial operations, both by means of the\n\t\t\t<a href="?doc#/language/expressions/item-access">item access operator</a>,\n\t\t\tnamely access of items by index and slicing. The behavior is designed\n\t\t\tto mimic that of an array holding the elements of the range as items:\n\t\t\t<tscript>\n\t\t\t\tvar range = 10:15;   # pretend: var range = [10,11,12,13,14];\n\t\t\t\tprint(range[3]);     # prints 13\n\t\t\t\tprint(range[-2:2]);  # prints 10:12\n\t\t\t</tscript>\n\t\t\tItem access with an integer index requires that the index is valid,\n\t\t\ti.e., it is non-negative and less than the size of the range, which\n\t\t\tis defined as max(<i>end-begin</i>,&nbsp;0). Slicing access with another\n\t\t\trange does not require all indices to be valid, and the resulting range\n\t\t\tis clipped to the valid range.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tTwo ranges compare equal if and\n\t\t\tonly if begin and end coincide. This means that two empty ranges with\n\t\t\tdifferent begin and end do not compare equal, although they represent the\n\t\t\tsame (empty) set of integers. Ranges are not ordered.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(begin, end)</code> creates a\n\t\t\t\tnew range from begin to end. Both arguments must be integers, or\n\t\t\t\treals representing integer values.\n\t\t\t</td></tr>\n\t\t\t<tr><th>size</th><td>\n\t\t\t\t<code class="code">function size()</code> returns the size of\n\t\t\t\tthe range.\n\t\t\t</td></tr>\n\t\t\t<tr><th>begin</th><td>\n\t\t\t\t<code class="code">function begin()</code> returns the begin of\n\t\t\t\tthe range.\n\t\t\t</td></tr>\n\t\t\t<tr><th>end</th><td>\n\t\t\t\t<code class="code">function end()</code> returns the end of\n\t\t\t\tthe range.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"type",name:"Type",title:"The Type <i>Type</i>",content:'\n\t\t\t<p>\n\t\t\tThe values of type Type represent types, i.e., built-in types and\n\t\t\tclasses. They are immutable. A type value can be constructed from\n\t\t\tany value.\n\t\t\t</p>\n\t\t\t<div class="example">\n\t\t\t\t<h3>Example</h3>\n\t\t\t\t<tscript>\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tvar t = Type(a);\n\t\t\t\t\tprint(t);       # &lt;Type Array&gt;\n\t\t\t\t\tprint(Array);   # &lt;Type Array&gt;\n\t\t\t\t\tif t == Array then print("a is an array");\n\n\t\t\t\t\tvar tt = Type(t);\n\t\t\t\t\tprint(tt);      # &lt;Type Type&gt;\n\t\t\t\t\tvar ttt = Type(tt);\n\t\t\t\t\tprint(ttt);     # &lt;Type Type&gt;\n\n\t\t\t\t\tvar b = t(3:8); # construct a new Array from a range using "t"\n\t\t\t\t\tprint(b);       # [3,4,5,6,7]\n\t\t\t\t</tscript>\n\t\t\t</div>\n\t\t\t<p>\n\t\t\tType values are useful for three purposes:\n\t\t\t<ol>\n\t\t\t<li>\n\t\t\t\tTesting at runtime whether a value is of a specific type.\n\t\t\t\tFor example, this allows to test whether a number is an\n\t\t\t\tinteger or a real, and hence for determining whether\n\t\t\t\t<a href="?doc#/language/types/integer">integer</a> or\n\t\t\t\t<a href="?doc#/language/types/real">floating point</a> arithmetic\n\t\t\t\tis used when applying an operator.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tConstructing new objects of a type determined at runtime,\n\t\t\t\te.g., in a factory pattern.\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\tType values can access static members of classes:\n\t\t\t\t<tscript>\n\t\t\t\t\tclass A\n\t\t\t\t\t{\n\t\t\t\t\tpublic:\n\t\t\t\t\t\tstatic var s = 18;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar a = A();\n\t\t\t\t\tvar t = Type(a);\n\t\t\t\t\tprint(a.s);   # prints 18\n\t\t\t\t\tprint(t.s);   # prints 18\n\t\t\t\t</tscript>\n\t\t\t</li>\n\t\t\t</ol>\n\t\t\t</p>\n\n\t\t\t<h2>Operations</h2>\n\t\t\t<p>\n\t\t\tType values do not offer any operations other than the function call\n\t\t\toperator, which invokes the constructor of the type, and the member\n\t\t\taccess operator, which accesses static members of the class.\n\t\t\tTwo type values compare equal if they refer to the same type. Types\n\t\t\tare not ordered.\n\t\t\t</p>\n\n\t\t\t<h2>Methods</h2>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>constructor</th><td>\n\t\t\t\tThe <code class="code">constructor(value)</code> creates a new\n\t\t\t\ttype object. It describes the type of <i>value</i>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>superclass</th><td>\n\t\t\t\t<code class="code">static function superclass(type)</code>\n\t\t\t\treturns a type object representing the direct super class of\n\t\t\t\tthe given <i>type</i>, or null if the it does not have a super\n\t\t\t\tclass.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isOfType</th><td>\n\t\t\t\t<code class="code">static function isOfType(value, type)</code>\n\t\t\t\ttests whether <i>value</i> is of type <i>type</i> or a derived\n\t\t\t\tclass. This test is equivalent to\n\t\t\t\t<code class="code">Type.isDerivedFrom(Type(value), type)</code>.\n\t\t\t</td></tr>\n\t\t\t<tr><th>isDerivedFrom</th><td>\n\t\t\t\t<code class="code">static function isDerivedFrom(subclass, superclass)</code>\n\t\t\t\ttests whether <i>subclass</i> inherits <i>superclass</i> as a direct\n\t\t\t\tor indirect base (including the case that the types coincide).\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t',children:[]},{id:"class",name:"Classes",title:"Classes",content:'\n\t\t\t<p>\n\t\t\tA Class is a user-defined type. It is created through a\n\t\t\t<a href="?doc#/language/declarations/classes">class declaration</a>;\n\t\t\tthe technical aspects of class declarations are discussed right\n\t\t\tthere.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\tClasses allow the programmer to extend the\n\t\t\t<a href="?doc#/language/types">system of built-in types</a>. They open\n\t\t\tup the whole world of\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented programming</a>,\n\t\t\ta programming paradigm in which data and functionality is organized\n\t\t\tinto objects, which are instances of classes. Objects organize data\n\t\t\tinto semantically meaningful units. Classes bind functions operating\n\t\t\ton these chunks to the corresponding object. Classes define a public\n\t\t\t(possibly a protected) interface, defining the functionality. The\n\t\t\timplementation of the functionality is opaque to the user of a class\n\t\t\tor object, and hence allows the implementer to modify implementation\n\t\t\tdetails without affecting the outside world. This principle is known\n\t\t\tas "encapsulation" or "information hiding". Furthermore, classes can\n\t\t\textend existing types through (single) inheritance.\n\t\t\t</p>\n\n\t\t\t<h2>Demonstration of Class Features</h2>\n\t\t\t<p>\n\t\t\tThe following is a non-trivial example of a (rather minimal) class\n\t\t\trepresenting a date.\n\t\t\t</p>\n\t\t\t<tscript>\n\t\t\t\t# The Date class represents a date as the number of days since\n\t\t\t\t# 01.01.1970. The range is limited to years 1970 to 2099, for\n\t\t\t\t# ease of leap year handling. Objects store this value in an\n\t\t\t\t# integer, not in a member variable, but by inheriting type\n\t\t\t\t# Integer. In an object oriented view this means that a Date\n\t\t\t\t# *is* an integer. This design makes the integer operators\n\t\t\t\t# for arithmetics and comparison available for dates. The\n\t\t\t\t# class is based on the Gregorian calendar, and the date\n\t\t\t\t# format is European: "day.month.year", not "year, month day".\n\t\t\t\tclass Date : Integer\n\t\t\t\t{\n\t\t\t\tprivate:\n\t\t\t\t\tstatic var month_start = [0, 31, 59, 90, 120, 151,\n\t\t\t\t\t        181, 212, 243, 273, 304, 334, 365];\n\t\t\t\t\tstatic var weekdays = ["Monday", "Tuesday", "Wednesday",\n\t\t\t\t\t\t\t"Thursday", "Friday", "Saturday", "Sunday"];\n\n\t\t\t\tpublic:\n\t\t\t\t\t# construct a date from the number of days since 1.1.1970\n\t\t\t\t\tconstructor(daysSince1970) : super(daysSince1970)\n\t\t\t\t\t{ assert(daysSince1970 >= 0, "invalid date"); }\n\n\t\t\t\t\t# construct a date from day, month, and year\n\t\t\t\t\tstatic function fromDMY(day, month, year)\n\t\t\t\t\t{\n\t\t\t\t\t\tassert(Type(year) == Integer, "invalid date");\n\t\t\t\t\t\tassert(Type(month) == Integer, "invalid date");\n\t\t\t\t\t\tassert(Type(day) == Integer, "invalid date");\n\t\t\t\t\t\tassert(year >= 1970 and year < 2100, "invalid date");\n\t\t\t\t\t\tassert(month >= 1 and month <= 12, "invalid date");\n\t\t\t\t\t\tvar leapyears = (year - 1 - 1968) // 4;\n\t\t\t\t\t\tvar leapyear = year % 4 == 0;\n\t\t\t\t\t\tvar mlen = month_start[month] - month_start[month - 1];\n\t\t\t\t\t\tif month == 2 and leapyear then mlen += 1;\n\t\t\t\t\t\tassert(day >= 1 and day <= mlen, "invalid date");\n\n\t\t\t\t\t\tvar x = 365 * (year - 1970) + leapyears\n\t\t\t\t\t\t          + month_start[month - 1] + (day - 1);\n\t\t\t\t\t\tif leapyear and month > 2 then x += 1;\n\t\t\t\t\t\treturn Date(x);\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the date x days later\n\t\t\t\t\tfunction advance(x)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn Date(this + x);\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the year component of the date\n\t\t\t\t\tfunction year()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn Integer((this + 0.5) / 365.25) + 1970;\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the month component of the date\n\t\t\t\t\tfunction month()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar y = year();\n\t\t\t\t\t\tvar r;\n\t\t\t\t\t\tif (this < 2*365) then r = (this % 365);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tr = Integer((this - 2*365) % 365.25);\n\t\t\t\t\t\t\tif y % 4 == 0 and r >= 31 + 28 then r -= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor var i in 0:12 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar m = 11 - i;\n\t\t\t\t\t\t\tif r >= month_start[m] then return m + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the day component of the date\n\t\t\t\t\tfunction day()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar y = year();\n\t\t\t\t\t\tvar r, feb29 = 0;\n\t\t\t\t\t\tif (this < 2*365) then r = (this % 365);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tr = Integer((this - 2*365) % 365.25);\n\t\t\t\t\t\t\tif y % 4 == 0 then\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif r == 59 then feb29 = 1;\n\t\t\t\t\t\t\t\tif r >= 59 then r -= 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor var i in 0:12 do\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar m = 11 - i;\n\t\t\t\t\t\t\tif r >= month_start[m] then\n\t\t\t\t\t\t\t\treturn r - month_start[m] + 1 + feb29;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t# return the day-of-week as a string\n\t\t\t\t\tfunction dayOfWeek()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn weekdays[(this + 3) % 7];\n\t\t\t\t\t}\n\n\t\t\t\t\t# return a nice string representation of the date\n\t\t\t\t\tfunction prettyString()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn dayOfWeek() + ", " + day()\n\t\t\t\t\t\t                    + "." + month()\n\t\t\t\t\t\t                    + "." + year();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t# construct various dates\n\t\t\t\tvar daysSince1970 = Integer(time() // 86400000);\n\t\t\t\tvar today = Date(daysSince1970);\n\t\t\t\tvar release = Date.fromDMY(version()["day"],\n\t\t\t\t                           version()["month"],\n\t\t\t\t                           version()["year"]);\n\t\t\t\tvar ch = Date.fromDMY(24, 12, 1990);\n\t\t\t\tvar ny = ch.advance(8);\n\n\t\t\t\t# operations on dates\n\t\t\t\tprint("Days since TScript release: " + (today - release));\n\t\t\t\tif release > ny then print("TScript was released after 1990.");\n\n\t\t\t\t# date methods\n\t\t\t\tprint("Christmas day 1990 was " + ch.dayOfWeek() + ", "\n\t\t\t\t\t\t+ ch.day() + "."\n\t\t\t\t\t\t+ ch.month() + "."\n\t\t\t\t\t\t+ ch.year());\n\t\t\t\tprint("Newyear\'s day 1991 was " + ny.prettyString());\n\t\t\t</tscript>\n\t\t',children:[]}]}]}},6777:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_legal=void 0,e.doc_legal={id:"legal",name:"Legal Information",title:"Legal Information",content:'\n\t<p>\n\tThis is the reference implementation of the TScript programming language.\n\tThe software/website is provided under an\n\t<a target="_blank" href="https://en.wikipedia.org/wiki/MIT_License">MIT license</a>.\n\t</p>\n\n\t<h2>License</h2>\n\t<p>\n\tCopyright (C) by Tobias Glasmachers.\n\t</p>\n\t<p>\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the "Software"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\t</p>\n\t<p>\n\tThe above copyright notice and this permission notice shall be included in\n\tall copies or substantial portions of the Software.\n\t</p>\n\t<p>\n\tTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n\tTHE SOFTWARE.\n\t</p>\n\n\t<h2>Acknowledgments</h2>\n\t<p>\n\tThe TScript IDE uses the following libraries:\n\t<ul>\n\t\t<li>\n\t\t\tThe <a target="_blank" href="https://codemirror.net">CodeMirror</a>\n\t\t\teditor is used under an\n\t\t\t<a target="_blank" href="https://codemirror.net/LICENSE">MIT license</a>.\n\t\t</li>\n\t\t<li>\n\t\t\tThe <a target="_blank" href="http://interactjs.io/">interact</a>\n\t\t\tlibrary is used under an\n\t\t\t<a target="_blank" href="https://github.com/taye/interact.js/blob/master/LICENSE">MIT license</a>.\n\t\t</li>\n\t</ul>\n\tThanks to <a href="https://github.com/manuel-fischer">Manuel Fischer</a>,\n\t<a href="https://github.com/TheHllm">The Hllm</a>,\n\tand\n\t<a href="https://github.com/Jartreg">Jartreg</a>\n\tfor contributions.\n\t</p>\n',children:[]}},4688:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc_stdlib=void 0,e.doc_stdlib={id:"library",name:"The TScript Standard Library",title:"Reference Documentation for the TScript Standard Library",content:"\n\t<p>\n\tThis is the reference documentation of the TScript standard library.\n\tIts core consists of a hand full of general utility functions and a set\n\tof standard mathematical functions. Further parts of the library cover\n\tturtle and canvas graphics.\n\t</p>\n",children:[{id:"core",name:"Core Functions",title:"Core Functions",content:'\n\t\t<p>\n\t\tThe functions described in this section perform essential core tasks.\n\t\tInstead of being library functions, they could equally well be\n\t\timplemented as language features.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>terminate</th><td>\n\t\t\tThe <code class="code">function terminate()</code> immediately\n\t\t\tterminates the program. This is considered &quot;normal&quot;\n\t\t\ttermination, in contrast to termination due to an error.\n\t\t</td></tr>\n\t\t<tr><th>assert</th><td>\n\t\t\tThe <code class="code">function assert(condition, message)</code>\n\t\t\ttests whether <i>condition</i> evaluates to false. In that case it\n\t\t\tstops the program and emits <i>message</i> as an error message.\n\t\t\tThis function should be used to verify that invariants of the\n\t\t\tprogram are fulfilled. Ideally, an assertion should never fail,\n\t\t\tand if it does then it indicates a bug. Assertions should not be\n\t\t\tused to check user input or other error conditions. An exception\n\t\t\tshould be thrown in that case.\n\t\t</td></tr>\n\t\t<tr><th>error</th><td>\n\t\t\tThe <code class="code">function error(message)</code>\n\t\t\tstops the program and emits <i>message</i> as an error message.\n\t\t\tThis function should be used to report unrecoverable errors. As\n\t\t\tsuch, errors have a different role than exceptions, which should\n\t\t\tindicate recoverable errors.\n\t\t</td></tr>\n\t\t<tr><th>same</th><td>\n\t\t\tThe <code class="code">function same(first, second)</code> tests\n\t\t\twhether its arguments refer to the same object.\n\t\t</td></tr>\n\t\t<tr><th>version</th><td>\n\t\t\tThe <code class="code">function version()</code> returns a\n\t\t\tdictionary describing the current TScript version. The\n\t\t\treturned dictionary holds the following fields:\n\t\t\t<ul>\n\t\t\t<li>type: release type (string)</li>\n\t\t\t<li>major: first and most significant part of the version number</li>\n\t\t\t<li>minor: middle part of the version number</li>\n\t\t\t<li>patch: last and least significant part of the version number</li>\n\t\t\t<li>day: day of the release date</li>\n\t\t\t<li>month: month of the release date</li>\n\t\t\t<li>year: year of the release date</li>\n\t\t\t<li>full: human-readable version string</li>\n\t\t\t</ul>\n\t\t</td></tr>\n\t\t<tr><th>print</th><td>\n\t\t\tThe <code class="code">function print(text)</code> outputs its\n\t\t\targument as a new line into the message area. For this purpose,\n\t\t\tthe argument is converted to a string.\n\t\t</td></tr>\n\t\t<tr><th>alert</th><td>\n\t\t\tThe <code class="code">function alert(text)</code> opens a modal\n\t\t\tmessage box presenting the text to the user. For this purpose,\n\t\t\tthe argument is converted to a string. The program continues\n\t\t\tafter the user has closed the message box.\n\t\t</td></tr>\n\t\t<tr><th>confirm</th><td>\n\t\t\tThe <code class="code">function confirm(text)</code> opens a\n\t\t\tmodal message box presenting the text to the user. For this\n\t\t\tpurpose, the argument is converted to a string. The user can\n\t\t\teither confirm or cancel the dialog, resulting in a return\n\t\t\tvalue of <code class="code">true</code> or\n\t\t\t<code class="code">false</code>, respectively. The program\n\t\t\tcontinues after the user has processed the message box.\n\t\t</td></tr>\n\t\t<tr><th>prompt</th><td>\n\t\t\tThe <code class="code">function prompt(text)</code> opens a\n\t\t\tmodal message box presenting the text to the user. For this\n\t\t\tpurpose, the argument is converted to a string. The user can\n\t\t\tinput a string in response, which is returned by the function.\n\t\t\tThe program continues after the user has processed the message\n\t\t\tbox.\n\t\t</td></tr>\n\t\t<tr><th>wait</th><td>\n\t\t\tThe <code class="code">function wait(ms)</code> delays program\n\t\t\texecution for <i>ms</i> milliseconds.\n\t\t</td></tr>\n\t\t<tr><th>time</th><td>\n\t\t\tThe <code class="code">function time()</code> returns the number\n\t\t\tof milliseconds since midnight 01.01.1970\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a>\n\t\t\tas a real.\n\t\t</td></tr>\n\t\t<tr><th>localtime</th><td>\n\t\t\tThe <code class="code">function localtime()</code> returns the number\n\t\t\tof milliseconds since midnight 01.01.1970\n\t\t\tas a real. The value refers to local time, i.e., taking the\n\t\t\tlocal time zone and daylight saving time into account.\n\t\t</td></tr>\n\t\t<tr><th>exists</th><td>\n\t\t\tThe <code class="code">function exists(key)</code> returns\n\t\t\t<keyword>true</keyword> if a value was stored with the given\n\t\t\tkey, and <keyword>false</keyword> otherwise. This is analogous\n\t\t\tto checking whether a file exists in the file system.\n\t\t</td></tr>\n\t\t<tr><th>load</th><td>\n\t\t\tThe <code class="code">function load(key)</code> returns the\n\t\t\tvalue that was stored with the given key. If the key does\n\t\t\tnot exist then the function reports an error. This is\n\t\t\tanalogous to loading data from a file into memory.\n\t\t</td></tr>\n\t\t<tr><th>save</th><td>\n\t\t\tThe <code class="code">function save(key, value)</code> stores\n\t\t\tthe value with the given key to a persistent storage. The\n\t\t\tstored value remains stored even after the program terminates.\n\t\t\tIt can be loaded at any later time, even by a different program.\n\t\t\tThis is analogous to storing data in a file. The stored data is\n\t\t\trestricted to JSON format. This means that the value must be of\n\t\t\ttype Null, Boolean, Integer, Real, or String, or it must be an\n\t\t\tArray or Dictionary holding JSON values. JSON values must not\n\t\t\tform cycles: an Array or Dictionary value may not be nested,\n\t\t\ti.e., be contained as an item inside itself or one of its\n\t\t\tsub-items.\n\t\t</td></tr>\n\t\t<tr><th>listKeys</th><td>\n\t\t\tThe <code class="code">function listKeys()</code> returns an array containing the keys to all stored values.\n\t\t</td></tr>\n\t\t<tr><th>deepcopy</th><td>\n\t\t\t<p>\n\t\t\tThe <code class="code">function deepcopy(value)</code> creates\n\t\t\ta deep copy of a container. If the container holds other\n\t\t\tcontainers as values then they are deep copied, too. The copied\n\t\t\tdata structure must fulfill the following requirements:\n\t\t\t<ul>\n\t\t\t\t<li>It must not contain functions.</li>\n\t\t\t\t<li>It must not contain objects.</li>\n\t\t\t\t<li>It must not contain a loop, i.e., contain a value as its own sub-value.</li>\n\t\t\t</ul>\n\t\t\t</p>\n\t\t</td></tr>\n\t\t<tr><th>setEventHandler</th><td>\n\t\t\tThe <code class="code">function setEventHandler(event, handler)</code>\n\t\t\tsets an event handler for a named event. The handler is a callback\n\t\t\tfunction that is called with an event parameter whenever the\n\t\t\tcorresponding event is triggered. The event name is provided\n\t\t\tas a string. The most common use of this function is to handle\n\t\t\tGUI-related events emitted by the <a href="?doc#/library/canvas">canvas</a>.\n\t\t\tThe standard library provides a &quot;timer&quot; event,\n\t\t\twhich is fired roughly every 20 milliseonds.\n\t\t\t<tscript>\n\t\t\t\tfunction onTick(event)\n\t\t\t\t{\n\t\t\t\t\tprint("tick...");\n\t\t\t\t}\n\t\t\t\tsetEventHandler("timer", onTick);\n\t\t\t\tenterEventMode();\n\t\t\t</tscript>\n\t\t\tEvents are triggered and handled only after calling\n\t\t\t<code class="code">enterEventMode</code>. The event handler is\n\t\t\tcalled with an event parameter, the type of which depends on the\n\t\t\tevent type. For the timer event, the event is simply a\n\t\t\t<keyword>null</keyword> value. Calling\n\t\t\t<code class="code">setEventHandler</code> with\n\t\t\t<code class="code">handler = null</code> removes the handler for\n\t\t\tthe given event type.\n\t\t\t\n\t\t\tWhen events take more than 20 milliseconds to complete,\n\t\t\tthe &quot;timer&quot; event only gets called once for this timespan.\n\t\t</td></tr>\n\t\t<tr><th>enterEventMode</th><td>\n\t\t\tThe <code class="code">function enterEventMode()</code> puts the\n\t\t\tprogram into event handling mode. The function returns only after\n\t\t\tcalling <code class="code">quitEventMode</code> from within an\n\t\t\tevent handler. The program still continues to run, handling all\n\t\t\tevents received from external sources, like mouse and keyboard\n\t\t\tevents for the canvas. Of course, at least one event handler\n\t\t\tshould be registered before calling this function.\n\t\t</td></tr>\n\t\t<tr><th>quitEventMode</th><td>\n\t\t\tThe <code class="code">function quitEventMode(result = null)</code>\n\t\t\tputs the program back into normal processing mode. It is usually\n\t\t\tcalled from within an event handler. The program handles all\n\t\t\tqueued events, then it continues with the next statement\n\t\t\tfollowing <code class="code">enterEventMode</code>. The parameter\n\t\t\t<code class="code">result</code> becomes the return value of\n\t\t\t<code class="code">function enterEventMode()</code>.\n\t\t</td></tr>\n\t\t</table>\n\t',children:[]},{id:"math",name:"Math Functions",title:"Math Functions",content:'\n\t\t<p>\n\t\tThe <code class="code">namespace math</code> contains a number\n\t\tof functions computing powers, logarithms, trigonometric and\n\t\thyperbolic functions. Unless stated differently, all functions\n\t\toperate on real numbers, and integers are converted to reals.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>pi</th><td>\n\t\t\tThe <code class="code">function math.pi()</code> returns the constant\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Pi">pi</a>.\n\t\t</td></tr>\n\t\t<tr><th>e</th><td>\n\t\t\tThe <code class="code">function math.e()</code> returns Euler\'s constant\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/E_(mathematical_constant)">e</a>.\n\t\t</td></tr>\n\t\t<tr><th>abs</th><td>\n\t\t\tThe <code class="code">function math.abs(x)</code> returns the absolute\n\t\t\tvalue of its argument. For an integer argument the result is of type\n\t\t\tinteger. The function overflows only for the value <code class="code">-2147483648</a>.\n\t\t</td></tr>\n\t\t<tr><th>sqrt</th><td>\n\t\t\tThe <code class="code">function math.sqrt(x)</code> returns the square\n\t\t\troot of its argument.\n\t\t</td></tr>\n\t\t<tr><th>cbrt</th><td>\n\t\t\tThe <code class="code">function math.cbrt(x)</code> returns the cubic\n\t\t\troot of its argument.\n\t\t</td></tr>\n\t\t<tr><th>floor</th><td>\n\t\t\tThe <code class="code">function math.floor(x)</code> returns the argument\n\t\t\trounded down, i.e., the closest integer not larger than <i>x/<i>.\n\t\t</td></tr>\n\t\t<tr><th>round</th><td>\n\t\t\tThe <code class="code">function math.round(x)</code> returns the argument\n\t\t\trounded to the nearest integer.\n\t\t</td></tr>\n\t\t<tr><th>ceil</th><td>\n\t\t\tThe <code class="code">function math.ceil(x)</code> returns the argument\n\t\t\trounded up, i.e., the closest integer not smaller than <i>x/<i>.\n\t\t</td></tr>\n\t\t<tr><th>sin</th><td>\n\t\t\tThe <code class="code">function math.sin(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>cos</th><td>\n\t\t\tThe <code class="code">function math.cos(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>tan</th><td>\n\t\t\tThe <code class="code">function math.tan(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>sinh</th><td>\n\t\t\tThe <code class="code">function math.sinh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>cosh</th><td>\n\t\t\tThe <code class="code">function math.cosh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>tanh</th><td>\n\t\t\tThe <code class="code">function math.tanh(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>asin</th><td>\n\t\t\tThe <code class="code">function math.asin(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>acos</th><td>\n\t\t\tThe <code class="code">function math.acos(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>atan</th><td>\n\t\t\tThe <code class="code">function math.atan(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>atan2</th><td>\n\t\t\tThe <code class="code">function math.atan2(y, x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Trigonometric_functions">tangent</a>\n\t\t\tof <i>y/x</i>. This is the angle between the vectors (x, y) and (1, 0) in radians.\n\t\t</td></tr>\n\t\t<tr><th>asinh</th><td>\n\t\t\tThe <code class="code">function math.asinh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic sine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>acosh</th><td>\n\t\t\tThe <code class="code">function math.acosh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic cosine</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>atanh</th><td>\n\t\t\tThe <code class="code">function math.atanh(x)</code> returns the inverse\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic tangent</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>exp</th><td>\n\t\t\tThe <code class="code">function math.exp(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/Exponential_function">exponential function</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log</th><td>\n\t\t\tThe <code class="code">function math.log(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Natural_logarithm">natural logarithm</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log2</th><td>\n\t\t\tThe <code class="code">function math.log2(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Logarithm">logarithm with base 2</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>log10</th><td>\n\t\t\tThe <code class="code">function math.log10(x)</code> returns the\n\t\t\t<a target="_blank" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Logarithm">logarithm with base 10</a>\n\t\t\tof its argument.\n\t\t</td></tr>\n\t\t<tr><th>pow</th><td>\n\t\t\tThe <code class="code">function math.pow(b, e)</code> returns the <i>e</i>-th power of <i>b</i>.\n\t\t\tIt is an alternative to <a href="?doc#/language/expressions/binary-operators/power">operator ^</a> that always works with reals.\n\t\t</td></tr>\n\t\t<tr><th>sign</th><td>\n\t\t\tThe <code class="code">function math.sign(x)</code> returns the\n\t\t\tsign of its argument, encoded as <i>-1</i>, <i>0</i>, or <i>+1</i>.\n\t\t\tThe return type is an integer if the argument is, otherwise it is real.\n\t\t</td></tr>\n\t\t<tr><th>min</th><td>\n\t\t\tThe <code class="code">function math.min(a, b)</code> returns the smaller\n\t\t\tof its two arguments. The function is applicable to non-numeric arguments\n\t\t\tas long as they are ordered. It is equivalent to<br/>\n\t\t\t<code class="code">if a <= b then return a; else return b;</code>\n\t\t</td></tr>\n\t\t<tr><th>max</th><td>\n\t\t\tThe <code class="code">function math.max(a, b)</code> returns the larger\n\t\t\tof its two arguments. The function is applicable to non-numeric arguments\n\t\t\tas long as they are ordered. It is equivalent to<br/>\n\t\t\t<code class="code">if a >= b then return a; else return b;</code>\n\t\t</td></tr>\n\t\t<tr><th>random</th><td>\n\t\t\tThe <code class="code">function math.random()</code> returns a real number\n\t\t\tdrawn from the uniform distribution on the half-open unit interval [0,&nbsp;1[.\n\t\t</td></tr>\n\t\t</table>\n\t',children:[]},{id:"turtle",name:"Turtle Graphics",title:"Turtle Graphics",content:'\n\t\t<p>\n\t\tThe functions in this section control the "turtle", an imaginary robot\n\t\tequipped with a pen that can move around and draw lines. The turtle\n\t\tmoves in a two-dimensional area. It is described by a Cartesian\n\t\tcoordinate system with horizontal (x) and vertical (y) axes. The origin\n\t\tis at the center of the area, and the visible area extends from -100 to\n\t\t+100 in each direction. The turtle can leave the visible area.\n\t\t</p>\n\t\t<p>\n\t\tAt program start, the turtle is located at the origin of its coordinate\n\t\tsystem, it is equipped with a black pen, it and faces upwards, or in\n\t\tother words, along the positive y-axis. The turtle can move and turn.\n\t\tWhile doing so it can lower and raise a pen. While lowered, the pen\n\t\tdraws the path taken by the turtle. The result of such drawing is known\n\t\tas "turtle graphics". The color of the pen can be changed.\n\t\t</p>\n\t\t<table class="methods">\n\t\t<tr><th>reset</th><td>\n\t\t\tThe <code class="code">function reset(x=0, y=0, degrees=0, down=true)</code>\n\t\t\tplaces the turtle at position <i>(x, y)</i> on its drawing area.\n\t\t\tIts orientation is given by <i>degrees</i>, the color is set to\n\t\t\tblack, and the pen is active if <i>down</i> is true. Using this\n\t\t\tfunction for actual drawing is considered improper use, or "cheating",\n\t\t\tsince this operation is not available to an actual robot. The\n\t\t\tintended use is to initialize the turtle in a different position\n\t\t\tthan the center.\n\t\t</td></tr>\n\t\t<tr><th>move</th><td>\n\t\t\tThe <code class="code">function move(distance)</code> moves the\n\t\t\tturtle forward by the given distance, or backward if the distance\n\t\t\tis negative. If the pen is down in this state then a line is drawn.\n\t\t</td></tr>\n\t\t<tr><th>turn</th><td>\n\t\t\tThe <code class="code">function turn(degrees)</code> rotates the\n\t\t\tturtle clockwise, where 360 <i>degrees</i> are one full rotation.\n\t\t</td></tr>\n\t\t<tr><th>color</th><td>\n\t\t\tThe <code class="code">function color(red, green, blue)</code>\n\t\t\tsets the color of the pen, defined by red, green and blue components.\n\t\t\tAll values are clipped to the range [0,&nbsp;1].\n\t\t</td></tr>\n\t\t<tr><th>pen</th><td>\n\t\t\tThe <code class="code">function pen(down)</code> lifts the pen if\n\t\t\t<i>down</i> is false and lowers the pen if <i>down</i> is true.\n\t\t</td></tr>\n\t\t</table>\n\t',children:[]},{id:"canvas",name:"Canvas Graphics",title:"Canvas Graphics",content:'\n\t\t<p>\n\t\tThe functions in this section control the "canvas", a rectangular\n\t\tsurface for drawing geometric shapes and text. Canvas graphics is\n\t\tsignificantly more flexible than turtle graphics. The canvas\n\t\tprovides user-triggered mouse and keyboard events.\n\t\t</p>\n\t\t<p>\n\t\tThe canvas is a two-dimensional grid of pixels. Each pixel covers\n\t\tan area of size 1x1. The origin of the coordinate system is the\n\t\ttop/left corner of the top/left pixel. The x-coordinate grows\n\t\ttowards the right, while the y-coordinate grows towards the bottom.\n\t\tThe latter is in contrast to a standard mathematical coordinate\n\t\tsystem, however, the convention is common for computer screens.\n\t\tThe size of the canvas depends on the size of the window containing\n\t\tthe canvas. Drawing outside the canvas has no effect.\n\t\t</p>\n\t\t<p>\n\t\tNote that the above convention means that integer coordinates refer\n\t\tto the corners of pixels. Hence, the coordinates of the center of\n\t\tthe top/left pixel are (0.5, 0.5). All drawing operations are\n\t\tdefined in continuous coordinates. Conceptually, drawing a red line\n\t\tof width 1 from point (10, 10) to point (20, 10) spills red ink\n\t\tover the rectangle with corners (10, 9.5), (10, 10.5), (20, 10.5),\n\t\t(20, 9.5). Therefore the pixels in rows y=9 and y=10 are covered\n\t\tby 50% red ink. When drawing on top of white background, then the\n\t\tdrawing command results in two consecutive horizontal pixel rows\n\t\tof light red color. However, the intended is most probably to fill\n\t\ta single pixel row with fully red color. This is achieved by\n\t\tdrawing a line of width 1 from (10, 10.5) to (20, 10.5). This shift\n\t\tof 0.5 is a bit unintuitive at first, and it is caused by integer\n\t\tcoordinates referring to the corners of pixels, not to their centers.\n\t\t</p>\n\t\t<p>\n\t\tCanvas drawing is stateful. This means that properties of drawing\n\t\toperations like line and fill color and line width are set before\n\t\tthe actual drawing commands are issued. This makes it easy to draw,\n\t\te.g., many lines of the same width and color in sequence.\n\t\t</p>\n\t\t<p>\n\t\tThe canvas namespace provides a large number of functions. They are\n\t\tsplit into five categories: reading properties, setting properties,\n\t\ttransformations, drawing, and managing events.\n\t\t</p>\n\n\t\t<h3>Reading Properties</h3>\n\t\t<table class="methods">\n\t\t<tr><th>width</th><td>\n\t\t\tThe <code class="code">function width()</code> returns the current\n\t\t\twidth of the canvas in pixels.\n\t\t</td></tr>\n\t\t<tr><th>height</th><td>\n\t\t\tThe <code class="code">function height()</code> returns the current\n\t\t\theight of the canvas in pixels.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Setting Properties</h3>\n\t\t<table class="methods">\n\t\t<tr><th>setLineWidth</th><td>\n\t\t\tThe <code class="code">function setLineWidth(width)</code> sets\n\t\t\tthe line width. The parameter <code class="code">width</code>\n\t\t\tmust be a positive number.\n\t\t</td></tr>\n\t\t<tr><th>setLineColor</th><td>\n\t\t\tThe <code class="code">function setLineColor(red, green, blue, alpha)</code>\n\t\t\tsets the line color. All arguments are in the range 0 to 1. The\n\t\t\talpha (opacity) argument is optional, it defaults to 1.\n\t\t</td></tr>\n\t\t<tr><th>setFillColor</th><td>\n\t\t\tThe <code class="code">function setFillColor(red, green, blue, alpha)</code>\n\t\t\tsets the fill color. All arguments are in the range 0 to 1. The\n\t\t\talpha (opacity) argument is optional, it defaults to 1.\n\t\t</td></tr>\n\t\t<tr><th>setFont</th><td>\n\t\t\tThe <code class="code">function setFont(fontface, fontsize)</code>\n\t\t\tsets the current font. The fontface is a string, it must correspond\n\t\t\tto a font existing on the system. The fontsize is defined in pixels,\n\t\t\tit must be a positive number. The default font is a 16px Helvetica\n\t\t\tfont.\n\t\t</td></tr>\n\t\t<tr><th>setTextAlign</th><td>\n\t\t\tThe <code class="code">function setTextAlign(alignment)</code>\n\t\t\tsets the text alignment. Possible values are\n\t\t\t<code class="code">&quot;left&quot;</code> (the default),\n\t\t\t<code class="code">&quot;center&quot;</code>, and\n\t\t\t<code class="code">&quot;right&quot;</code>.\n\t\t\tThe position given in text drawing commands is relative to the\n\t\t\talignment.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Drawing</h3>\n\t\t<table class="methods">\n\t\t<tr><th>clear</th><td>\n\t\t\tThe <code class="code">function clear()</code> erases all drawn\n\t\t\tcontent by filling the entire canvas with the current fill color.\n\t\t\tIt also resets the transformation (see function reset() below).\n\t\t</td></tr>\n\t\t<tr><th>line</th><td>\n\t\t\tThe <code class="code">function line(x1, y1, x2, y2)</code> draws\n\t\t\ta line from (x1, y1) to (x2, y2) using the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>rect</th><td>\n\t\t\tThe <code class="code">function rect(left, top, width, height)</code>\n\t\t\tdraws the outline of a rectangle with the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>fillRect</th><td>\n\t\t\tThe <code class="code">function fillRect(left, top, width, height)</code>\n\t\t\tfills a rectangle with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameRect</th><td>\n\t\t\tThe <code class="code">function frameRect(left, top, width, height)</code>\n\t\t\tfills a rectangle with the current fill color and draws the outline with\n\t\t\tthe current line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>circle</th><td>\n\t\t\tThe <code class="code">function circle(x, y, radius)</code>\n\t\t\tdraws the outline of a circle with the current line width and\n\t\t\tline color.\n\t\t</td></tr>\n\t\t<tr><th>fillCircle</th><td>\n\t\t\tThe <code class="code">function fillCircle(x, y, radius)</code>\n\t\t\tfills a circle with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameCircle</th><td>\n\t\t\tThe <code class="code">function frameCircle(x, y, radius)</code>\n\t\t\tfills a circle with the current fill color and draws the outline with\n\t\t\tthe current line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>curve</th><td>\n\t\t\tThe <code class="code">function curve(points, closed)</code> draws\n\t\t\ta polygon given by the array <code class="code">points</code>, each\n\t\t\tentry of which is an array containing (x, y) coordinates. If the\n\t\t\toptional argument <code class="code">closed</code> is set to true then\n\t\t\tthe first and the last point are connected, resulting in a closed\n\t\t\tpolygon. The curve is drawn with the current line width and line color.\n\t\t</td></tr>\n\t\t<tr><th>fillArea</th><td>\n\t\t\tThe <code class="code">function fillArea(points)</code> fills the\n\t\t\tclosed polygon given by <code class="code">points</code> (see function\n\t\t\tcurve) with the current fill color.\n\t\t</td></tr>\n\t\t<tr><th>frameArea</th><td>\n\t\t\tThe <code class="code">function frameArea(points)</code> fills the\n\t\t\tclosed polygon given by <code class="code">points</code> (see function\n\t\t\tcurve) with the current fill color, and then draws the polygon outline\n\t\t\twith the given line color and line width.\n\t\t</td></tr>\n\t\t<tr><th>text</th><td>\n\t\t\tThe <code class="code">function text(x, y, str)</code> draws the string\n\t\t\t<code class="code">str</code> at position (x, y), relative to the\n\t\t\tcurrent text alignment, using the current font and fill color.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Transformations</h3>\n\t\t<table class="methods">\n\t\t<tr><th>reset</th><td>\n\t\t\tThe <code class="code">function reset()</code> resets the current\n\t\t\ttransformation. Afterwards the origin of the coordinate system is\n\t\t\tthe top left corner, with axes extending to the right and to the\n\t\t\tbottom.\n\t\t</td></tr>\n\t\t<tr><th>shift</th><td>\n\t\t\tThe <code class="code">function shift(dx, dy)</code> translates\n\t\t\tthe origin of the coordinate system by the vector (dx, dy).\n\t\t</td></tr>\n\t\t<tr><th>scale</th><td>\n\t\t\tThe <code class="code">function scale(factor)</code> scales the\n\t\t\tcoordinate system by the given factor.\n\t\t</td></tr>\n\t\t<tr><th>rotate</th><td>\n\t\t\tThe <code class="code">function rotate(angle)</code> rotates the\n\t\t\tcoordinate system clockwise by the given angle. The angle is given\n\t\t\tin radians, i.e., a full rotation corresponds to the angle\n\t\t\t<code class="code">2 * math.pi()</code>.\n\t\t</td></tr>\n\t\t<tr><th>transform</th><td>\n\t\t\tThe <code class="code">function transform(A, b)</code> transforms\n\t\t\tcoordinates (x, y) into new coordinates A (x, y) + b, where A is\n\t\t\tthe 2x2 matrix <code class="code">[[A11, A12], [A21, A22]]</code>\n\t\t\tand b is the vector <code class="code">[b1, b2]</code>.\n\t\t</td></tr>\n\t\t</table>\n\n\t\t<h3>Managing Events</h3>\n\t\t<p>\n\t\tThe canvas emits the following events:\n\t\t\t<table class="nicetable">\n\t\t\t<tr><th>event name</th><th>event type</th><th>meaning</th></tr>\n\t\t\t<tr><td>&quot;canvas.mousemove&quot;</td><td>MouseMoveEvent</td><td>mouse pointer moved to new position within the canvas</td></tr>\n\t\t\t<tr><td>&quot;canvas.mouseout&quot;</td><td>Null</td><td>mouse pointer left the canvas</td></tr>\n\t\t\t<tr><td>&quot;canvas.mousedown&quot;</td><td>MouseButtonEvent</td><td>mouse button pressed</td></tr>\n\t\t\t<tr><td>&quot;canvas.mouseup&quot;</td><td>MouseButtonEvent</td><td>mouse button released</td></tr>\n\t\t\t<tr><td>&quot;canvas.keydown&quot;</td><td>KeyboardEvent</td><td>keyboard key pressed</td></tr>\n\t\t\t<tr><td>&quot;canvas.keyup&quot;</td><td>KeyboardEvent</td><td>keyboard key released</td></tr>\n\t\t\t<tr><td>&quot;canvas.resize&quot;</td><td>ResizeEvent</td><td>canvas resized</td></tr>\n\t\t\t</table>\n\t\tThey can be received by setting corresponding event handlers with the\n\t\tstandard library function <code class="code">setEventHandler</code>.\n\t\t</p>\n\t\t<p>\n\t\tThe different event types are lightweight classes providing\n\t\tpublic attributes. They are defined as follows:\n\t\t</p><p>\n\t\t<tscript>\n\t\t\tclass MouseMoveEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar x;         # horizontal pointer position\n\t\t\t\tvar y;         # vertical pointer position\n\t\t\t\tvar buttons;   # array of pressed buttons\n\t\t\t\tvar shift;     # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;       # alt key pressed?\n\t\t\t\tvar meta;      # meta key pressed?\n\t\t\t}\n\n\t\t\tclass MouseButtonEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar x;         # horizontal pointer position\n\t\t\t\tvar y;         # vertical pointer position\n\t\t\t\tvar button;    # button that caused the event\n\t\t\t\tvar buttons;   # array of pressed buttons\n\t\t\t\tvar shift;     # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;       # alt key pressed?\n\t\t\t\tvar meta;      # meta key pressed?\n\t\t\t}\n\n\t\t\tclass KeyboardEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar key;       # name of the key that caused the event\n\t\t\t\tvar shift;     # shift key pressed?\n\t\t\t\tvar control;   # control key pressed?\n\t\t\t\tvar alt;       # alt key pressed?\n\t\t\t\tvar meta;      # meta key pressed?\n\t\t\t}\n\n\t\t\tclass ResizeEvent\n\t\t\t{\n\t\t\tpublic:\n\t\t\t\tvar width;     # new width of the canvas\n\t\t\t\tvar height;    # new height of the canvas\n\t\t\t}\n\t\t</tscript>\n\t\t</p><p>\n\t\tButtons are named <code class="code">"left"</code>,\n\t\t<code class="code">"middle"</code>, and <code class="code">"right"</code>.\n\t\tKeys are named according to the\n\t\t<a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values">JavaScript rules</a>.\n\t\t</p><p>\n\t\tMouse pointer coordinates always refer to <i>untransformed</i> canvas pixels:\n\t\tif a transformation has been performed before the event occurs (like\n\t\t<code class="code">shift(100, 100);</code>) then drawing actions inside the\n\t\tevent handler are affected by the transformation. However, the coordinates\n\t\treported in the event object are unaffected; they always refer to the\n\t\toriginal canvas coordinates.\n\t\t</p>\n\t',children:[]},{id:"audio",name:"Audio playback",title:"Audio playback",content:'\n\t\t\t<p>TScript supports playback of audio. The classes <code class="code">MonoAudio</code> and <code class="code">StereoAudio</code> allow the playback of arbitrary buffers consisting of reals with values from -1 to 1.\n\t\t\tThe playback is performed asynchronously, meaning that a call to <code class="code">play()</code> will return immediately regardless of sound duration.\n\t\t\t</p>\n\t\t\t<h3>Constructors</h3>\n\t\t\t<table class="methods">\n\t\t\t<tr><th>MonoAudio</th><td>\n\t\t\t\t<code class="code">MonoAudio(buffer, sampleRate)</code> where <code class="code">buffer</code> is an array containing the samples to be played, <code class="code">sampleRate</code> specifies the rate they are to be played at in Hz.\n\t\t\t</td></tr>\n\t\t\t<tr><th>StereoAudio</th><td>\n\t\t\t\t<code class="code">StereoAudio(leftBuffer, rightBuffer, sampleRate)</code> provides the same functionality as above, but allows playback of stereo audio.\n\t\t\t</td></tr>\n\t\t\t</table>\n\t\t\t\t\t\n\t\t\t<h3>Functions</h3>\n\t\t\t<tscript>\n\t\t\tfunction play(){}\n\t\t\tfunction pause(){}\n\t\t\tfunction setPlaybackRate(speed){}\n\t\t\t</tscript>\n\t\t\tAre available on <code class="code">MonoAudio</code> and <code class="code">StereoAudio</code>, they behave as expected.\n\t\t\t<h3> Example</h3>\n\t\t\t<p> The following code plays two different tones on the left and right channel. <code class="code">l_freq</code> and <code class="code"> r_freq</code> \n\t\t\tand the <code class="code"> sampleRate</code> can be modified to alter the tones.\n\t\t\t<tscript>\n\t\t\t\tuse namespace math;\n\t\t\t\tuse namespace audio;\n\n\t\t\t\tvar durationInSeconds = 0.2;\n\t\t\t\tvar l_freq = 440; # frequency in Hz \n\t\t\t\tvar r_freq = 554;\n\t\t\t\tvar sampleRate = 48000; # sampleRate in Hz\n\n\n\t\t\t\tvar l_samples = [];\n\t\t\t\tvar r_samples = [];\n\n\t\t\t\tfor var i in 0:(sampleRate * durationInSeconds) do\n\t\t\t\t{\n\t\t\t\t\tl_samples.push(sin( i * (l_freq / sampleRate) * 2 * pi()));\n\t\t\t\t}\n\n\t\t\t\tfor var i in 0:(sampleRate * durationInSeconds) do\n\t\t\t\t{\n\t\t\t\t\tr_samples.push(sin( i * (r_freq / sampleRate) * 2 * pi()));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar a = StereoAudio(l_samples, r_samples, sampleRate);\n\t\t\t\t# only play 0.1 of the 0.2 seconds\n\t\t\t\ta.play();\n\t\t\t\twait(100);\n\t\t\t\ta.pause();\n\t\t\t\t\n\t\t\t</tscript>\n\t\t',children:[]}]}},510:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.documentationData=void 0;const r=n(7826),i=n(8253),a=n(9792),o=n(976),s=n(7427),l=n(5662),c=n(6777),d=n(4688);let p={id:"",name:"TScript Documentation",title:"TScript Documentation",children:new Array,content:'\n<p>\nWelcome to TScript!\n</p>\n<p>\nTScript (&quot;teaching-script&quot;) is a programming language created\nspecifically for programming beginners. Its clean design yields a smooth\nlearning experience. It offers simple graphics manipulation\nenvironments, which greatly boost motivation and stimulate a playful and\nexplorative learning style.\n</p>\n\n<h2>Overview</h2>\n<p>\nBeing a reference documentation, this collection of documents is not\ndesigned for being read front to end, but rather as a resource for\nlooking up information. For programmers experienced with other\nprogramming languages, the section\n<a href="?doc#/concepts">core concepts</a> is a good starting point, the\n<a href="?doc#/cheatsheet">cheat sheet</a> provides the most\nimportant bits in compact form, and for the impatient there are a few\n<a href="?doc#/examples">examples</a>.\n</p>\n'};p.children.push(i.doc_concepts),p.children.push(s.doc_ide),p.children.push(l.doc_language),p.children.push(d.doc_stdlib),p.children.push(o.doc_examples),p.children.push(a.doc_errors),p.children.push(r.doc_cheatsheet),p.children.push(c.doc_legal),e.documentationData=p},9091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doc=void 0;const r=n(9074),i=n(4012),a=n(7567),o=n(6315),s=n(6906),l=n(7065),c=n(8412),d=n(7475),p=n(510),u=n(4043);e.doc=function(){let t=p.documentationData,n="",h=null;function f(t){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(t){}document.body.removeChild(e)}function m(t,r){let a={children:[],ids:[]};if(null===t)a.children.push(e.doc),a.ids.push("");else{a.opened=r.split("/").length<=2||n.substr(0,r.length)==r;for(var o=0;o<t.children.length;o++)a.children.push(t.children[o]),a.ids.push(r+"/"+t.children[o].id);a.element=i.tgui.createElement({type:"span"}),i.tgui.createElement({type:"span",parent:a.element,classname:r==n?"entry current":"entry",text:t.name})}return a}let g=function(t){let e=t.current();if(e>="A"&&e<="Z"||e>="a"&&e<="z"||"_"==e){for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"==e||"-"==e))break;t.advance()}return{type:"identifier"}}if('"'==e){for(t.advance();;){t.good()||t.error("syntax error in string literal; closing double quotes '\"' expected");let e=t.current();if("\r"==e||"\n"==e)t.error("syntax error in string literal; closing double quotes '\"' expected before end-of-line");else{if('"'==e){t.advance();break}t.advance()}}return{type:"literal"}}if("'"==e){for(t.advance();;){t.good()||t.error("syntax error in string literal; closing single quotes ' expected");let e=t.current();if("\r"==e||"\n"==e)t.error("syntax error in string literal; closing double quotes '\"' expected before end-of-line");else{if("'"==e){t.advance();break}t.advance()}}return{type:"literal"}}if("$"==e){for(t.advance();;){t.good()||t.error("syntax error in special; closing dollar sigh '$' expected");let e=t.current();if(t.advance(),"$"==e)break}return{type:"special"}}return t.advance(),"=-*|".indexOf(e)>=0?{type:"operator"}:"()[]{}".indexOf(e)>=0?{type:"grouping"}:";".indexOf(e)>=0?{type:"delimiter"}:void t.error("EBNF syntax error; invalid character '"+e+"'")},y=function(t){if("#"==t.current()){if(t.advance(),"*"==t.current()){for(t.advance();("*"!=t.current()||"#"!=t.next())&&""!=t.current();)t.advance();return t.advance(2),{type:"comment"}}for(;"\n"!=t.current()&&""!=t.current();)t.advance();return t.advance(),{type:"comment"}}{let e=s.Lexer.get_token(t,a.defaultOptions,!0);return t.advance(e.code.length),e}};function v(t,e,n){if(t.indexOf("\n")>=0){let r=t.split("\n"),i="",a=1e6;for(let t=0;t<r.length;t++){let e=r[t];if(a>=1e6){for(let t=0;t<e.length;t++)if(" \t\r".indexOf(e[t])<0){i=e.substr(0,t),a=t;break}}else for(let t=0;t<e.length&&!(t>=a);t++)if(i[t]!=e[t]){a=t,i=i.substr(0,a);break}}let o='<div class="'+e+'"><pre class="'+e+'">';for(let t=0;t<r.length;t++){let a=r[t];0==t&&a.length<=i.length||(a.length>i.length&&(o+=v(a.substr(i.length),e,n)),o+="\n")}for(;o.length>0&&"\n"==o[o.length-1];)o=o.substr(0,o.length-1);return o+="</pre></div>",o}{let r={source:t,pos:0,good:function(){return this.pos<this.source.length},bad:function(){return!this.good()},eof:function(){return this.pos>=this.source.length},indentation:function(){return 0},error:function(t,e){void 0===e&&(e=[]);let n="documentation internal error in code: '"+this.source+"'";throw new Error(n)},current:function(){return this.pos>=this.source.length?"":this.source[this.pos]},lookahead:function(t){return this.pos+t>=this.source.length?"":this.source[this.pos+t]},next:function(){return this.lookahead(1)},get:function(){return{pos:this.pos,line:this.line,ch:this.ch}},set:function(t){this.pos=t.pos,this.line=t.line,this.ch=t.ch},advance:function(t){void 0===t&&(t=1),this.pos+t>this.source.length&&(t=this.source.length-this.pos);for(let e=0;e<t;e++)"\n"==this.current()&&(this.line++,this.ch=0),this.pos++,this.ch++},skip:function(){for(;this.good();){let t=this.current();if("#"!=t){if(" "!=t&&"\t"!=t&&"\r"!=t&&"\n"!=t)break;"\n"==t?(this.line++,this.ch=0):this.ch++,this.pos++}else if(this.pos++,this.ch++,"*"==this.current()){this.pos++,this.ch++;let t=!1;for(;this.good();)if("\n"!=this.current()){if(t&&"#"==this.current()){this.pos++,this.ch++;break}t="*"==this.current(),this.pos++,this.ch++}else this.pos++,this.line++,this.ch=0,t=!1}else for(;this.good()&&"\n"!=this.current();)this.pos++,this.ch++}}},i='<code class="'+e+'">';for(;!r.eof();){for(;r.good();){let t=r.current();if(" \t\r".indexOf(t)<0)break;" "==t?i+=t:"\t"==t&&(i+="    "),r.advance()}if(r.eof())break;let a=r.pos,o=n(r),s=t.substr(a,r.pos-a);i+='<span class="'+e+"-"+o.type+'">'+s+"</span>"}return i+="</code>",i}}function b(t){let e=l.Parser.parse(t);if(e.hasOwnProperty("errors")&&e.errors.length>0)throw e.errors[0].message;let n=new o.Interpreter(e.program,u.defaultService);for(n.reset(),n.service.message=function(t){throw t},n.service.documentation_mode=!0;"running"==n.status||"waiting"==n.status;)n.exec_step();"finished"!=n.status&&alert("code sample failed to run:\n"+t)}function w(t){let n=t.split("/");if(""!=n[0])throw"invalid path: "+t;let r=null,i=null,a=-1,o=e.doc;for(let s=1;s<n.length;s++){if(!o.hasOwnProperty("children"))throw"invalid path: "+t;let l=o.children,c=null;for(let t=0;t<l.length;t++)if(l[t].id==n[s]){r=o,i=r==e.doc?"":i+"/"+r.id,a=t,c=l[t];break}if(null===c)throw"invalid path: "+t;o=c}return[o,r,i,a]}function x(t,e){let n=function(t){let e=t.toLowerCase(),n="",r=0;for(;r<t.length;){let i=e.indexOf("<",r);if(i<0){n+=t.substr(r);break}if(n+=t.substr(r,i-r),r=i,"<ebnf>"==e.substr(r,6)){r+=6;let t=e.indexOf("</ebnf>",r);if(t<0)throw"[doc] <ebnf> tag not closed";r=t+7,n+=" "}else if("<tscript>"==e.substr(r,10)){r+=10;let t=e.indexOf("</tscript>",r);if(t<0)throw"[doc] <tscript> tag not closed";r=t+11,n+=" "}else if("<h1>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h1>",r);if(i<0)throw"[doc] <h1> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a,n+=a,n+=a,n+=a}else if("<h2>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h2>",r);if(i<0)throw"[doc] <h2> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a,n+=a}else if("<h3>"==e.substr(r,4)){r+=4;let i=e.indexOf("</h3>",r);if(i<0)throw"[doc] <h3> tag not closed";let a=t.substr(r,i-r)+" ";r=i+5,n+=a,n+=a}else{let e=t.indexOf(">",r+1);if(e<0)throw"[doc] tag not closed";r=e+1,n+=" "}}return n}("<h1>"+e.title+"</h1>\n"+e.content);d.searchengine.add(t,n);for(let n=0;n<e.children.length;n++){let r=e.children[n];x(t+"/"+r.id,r)}}function T(t,e){let n=0;for(;;){let r=t.content.indexOf('href="',n);if(r<0)break;n=r+6,r=t.content.indexOf('"',n);let i=t.content.substr(n,r-n);if(n=r+1,i.length>0&&"#"==i[0])try{w(i.substr(1))}catch(t){alert("[link checker] broken link to '"+i+"' in document '"+e+"'")}}for(let n=0;n<t.children.length;n++)T(t.children[n],e+"/"+t.children[n].id)}return t.setpath=function(e){if(e||(e=""),e.length>0&&"#"==e[0]&&(e=e.substr(1)),"search/"==e.substr(0,7)){let r=e.substr(7).split("/"),i="<h2>Search Results for <i>&quot;";for(let t=0;t<r.length;t++)0!=t&&(i+=" "),i+=r[t];i+="&quot;</i></h2>";let a=d.searchengine.find(r);if(a.length>0){i+="<ul>";for(let t=0;t<a.length;t++){let e=a[t].id;i+='<li><a href="#'+e+'">'+w(e)[0].title+'</a><div class="searchresults">terms:<i>';let n=new Array;for(let e in a[t].matches)a[t].matches.hasOwnProperty(e)&&n.push([e,a[t].matches[e]]);n.sort((function(t,e){return e[1]-t[1]}));for(let t=0;t<n.length;t++)i+=" "+n[t][0];i+="</i></div></li>"}i+="</ul>"}else i+="<p>sorry, no results found</p>";t.dom_content.innerHTML=i,t.dom_content.scrollTop=0,n="",h.update(m)}else try{let r=w(e),i=r[0],a=r[1],o=r[2],s=r[3],l="<h1>"+i.title+"</h1>\n";if(i.hasOwnProperty("content")&&(l+=i.content+"\n"),i.hasOwnProperty("children")){if(l+='<div class="related">\n',l+="<h2>Related Topics</h2>\n<ul>\n",a){if(l+='back to enclosing topic: <a href="#'+o+'">'+a.name+"<a><br/>\n",s>0){let t=a.children[s-1];l+='previous topic: <a href="#'+o+"/"+t.id+'">'+t.name+"<a><br/>\n"}if(s+1<a.children.length){let t=a.children[s+1];l+='next topic: <a href="#'+o+"/"+t.id+'">'+t.name+"<a><br/>\n"}}if(i.children.length>0){l+="<h3>Subordinate Topics</h3>\n<ul>\n";for(let t=0;t<i.children.length;t++)l+='<li><a href="#'+e+"/"+i.children[t].id+'">'+i.children[t].name+"</a></li>\n";l+="</ul>\n"}l+="</div>\n"}l+='<div class="pad"></div>\n',t.dom_content.innerHTML=function(t){let e=t.toLowerCase(),n="",r=0;for(;r<t.length;){let i=e.indexOf("<",r);if(i<0){n+=t.substr(r);break}if(n+=t.substr(r,i-r),r=i,"<ebnf>"==e.substr(r,6)){r+=6;let i=e.indexOf("</ebnf>",r);if(i<0)throw"[doc] <ebnf> tag not closed";let a=t.substr(r,i-r);r=i+7,n+=v(a,"ebnf",g)}else if("<tscript>"==e.substr(r,9)){r+=9;let i=e.indexOf("</tscript>",r);if(i<0)throw"[doc] <tscript> tag not closed";let a=t.substr(r,i-r);r=i+10,b(a),n+=v(a,"code",y)}else if("<tscript do-not-run>"==e.substr(r,20)){r+=20;let i=e.indexOf("</tscript>",r);if(i<0)throw"[doc] <tscript> tag not closed";let a=t.substr(r,i-r);r=i+10,n+=v(a,"code",y)}else if("<keyword>"==e.substr(r,9)){r+=9;let i=e.indexOf("</keyword>",r);if(i<0)throw"[doc] <keyword> tag not closed";let a=t.substr(r,i-r);r=i+10,n+='<span class="keyword">'+a+"</span>"}else n+=t[r],r++}return n}(l),t.dom_content.scrollTop=0,n=e,h.update(m);let c=document.getElementsByTagName("pre");for(let t=0;t<c.length;t++){let e=c[t];if(e.className.indexOf("code")>=0){let t=e.textContent+"\n";e.parentNode.addEventListener("click",(function(e){f(t)}))}}}catch(t){throw t.message?alert(t.message):alert(t),t}},t.dom_container=null,t.dom_main=null,t.dom_sidebar=null,t.dom_version=null,t.dom_search=null,t.dom_searchtext=null,t.dom_tree=null,t.dom_content=null,t.embedded=!1,t.create=function(n,a){a||(a={embedded:!1}),t.embedded=a.embedded,a.embedded||(document.title="TScript Documentation"),t.dom_container=n,t.dom_main=i.tgui.createElement({type:"div",parent:n,id:"doc-main"}),t.dom_sidebar=i.tgui.createElement({type:"div",parent:n,id:"sidebar"}),t.dom_version=i.tgui.createElement({type:"div",parent:t.dom_sidebar,id:"version"}),t.dom_search=i.tgui.createElement({type:"div",parent:t.dom_sidebar,id:"search"}),t.dom_searchtext=i.tgui.createElement({type:"input",parent:t.dom_search,id:"searchtext",properties:{type:"text",placeholder:"search"}}),t.dom_tree=i.tgui.createElement({type:"div",parent:t.dom_sidebar,id:"tree"}),t.dom_content=i.tgui.createElement({type:"div",parent:n,id:"content"}),window.setTimeout((function(e){t.dom_version.innerHTML=c.Version.full(),t.dom_version.addEventListener("click",(function(e){let n=window.location.href.split("#")[0];window.location.href=n+"#/legal",t.setpath("/legal")}))}),100);let o=function(t,e=""){let n=["X","Y","Z","W","V"];if(!t.hasOwnProperty("name")){let i=r.ErrorHelper.errorTemplate(e).split("$$");t.name=i[0];for(let e=1;e<i.length;e++)t.name+=n[e-1]+i[e]}t.hasOwnProperty("title")||(t.title="Error Message: "+t.name);for(let n=0;n<t.children.length;n++)o(t.children[n],e+"/"+t.children[n].id)};for(let t=0;t<e.doc.children.length;t++)"errors"==e.doc.children[t].id&&o(e.doc.children[t]);if(h=i.tgui.createTreeControl({parent:t.dom_tree,info:m,nodeclick:function(e,n,r){if(!t.embedded){let t=window.location.href.split("#")[0];window.location.href=t+"#"+r}t.setpath(r)}}),d.searchengine.clear(),x("",e.doc),t.dom_searchtext.addEventListener("keypress",(function(e){if("Enter"!=e.key)return;let n=d.searchengine.tokenize(t.dom_searchtext.value),r="#search";for(let t=0;t<n.length;t++)r+="/"+n[t];t.embedded?(window.sessionStorage.setItem("docpath",r),t.setpath(r)):window.location.hash=r})),T(e.doc,"#"),a.embedded){let e=window.sessionStorage.getItem("docpath");e||(e="#"),t.setpath(e)}else{window.addEventListener("hashchange",(function(){let e=window.location.hash;t.setpath(e)}));let e=window.location.hash;t.setpath(e)}t.embedded&&document.addEventListener("click",(function(e){let n=e.target||e.srcElement;if("A"===n.tagName){let r=n.getAttribute("href");return 0==r.length||"#"!=r[0]||(window.sessionStorage.setItem("docpath",r),t.setpath(r),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1)}}))},t}()},7475:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchengine=void 0,e.searchengine=function(){let t={};function e(t,e){let n=new Array;for(let e=0;e<=t.length;e++)n.push(e);for(let r=1;r<=e.length;r++){let i=[r];for(let a=1;a<=t.length;a++)i.push(Math.min(Math.min(n[a-1]+(t[a-1]==e[r-1]?0:1),n[a]+1),i[a-1]+.5));n=i}return n.pop()}function n(t,e,n,r){let i=Math.min(1,1/(r+3))*t/(t+8*e);return n*i*i}return t.config={maxreldist:.3,minwordlength:2},t.doclength={},t.dictionary={},t.tokenize=function(e){let n=e.toLowerCase().match(/[a-z0-9äöüß-]+\w+/g),r=new Array;for(let e=0;e<n.length;e++){let i=n[e];i.length<t.config.minwordlength||r.push(i)}return r},t.clear=function(){t.doclength={},t.dictionary={}},t.add=function(e,n){if(t.doclength.hasOwnProperty(e))throw"[searchengine] document ID is already in use";let r=t.tokenize(n);t.doclength[e]=r.length;for(let n=0;n<r.length;n++){let i=r[n];t.dictionary.hasOwnProperty(i)||(t.dictionary[i]={docs:{},numdocs:0});let a=t.dictionary[i];a.docs.hasOwnProperty(e)||(a.numdocs++,a.docs[e]=0),a.docs[e]++}},t.find=function(r,i=10){if("string"==typeof r&&(r=t.tokenize(r)),0==r.length)return[];let a={};for(let i=0;i<r.length;i++){let o=r[i];for(let r in t.dictionary){if(!t.dictionary.hasOwnProperty(r))continue;let i=Math.floor(t.config.maxreldist*r.length),s=e(r,o);if(s>i)continue;let l=t.dictionary[r],c=l.numdocs;for(let t in l.docs){if(!l.docs.hasOwnProperty(t))continue;a.hasOwnProperty(t)||(a[t]={id:t,score:0,matches:{}});let e=n(r.length,s,l.docs[t],c);a[t].score+=e,a[t].matches.hasOwnProperty(r)||(a[t].matches[r]=0),a[t].matches[r]+=e}}}let o=new Array;for(let e in a){if(!a.hasOwnProperty(e))continue;let n=a[e];n.score=Math.log(n.score)/Math.log(t.doclength[e]),o.push(n)}return o.sort((function(t,e){return e.score-t.score})),o.slice(0,i)},t}()},6499:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssertionError=void 0;class n extends Error{constructor(t){super(),this.message=t,this.name="Assertion Error"}}e.AssertionError=n},9074:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.errors=e.ErrorHelper=void 0;const r=n(6499),i=n(5882);class a{static errorTemplate(t){let n=t.split("/");a.assert(""===n[0],"[getError] invalid path: "+t);let r=e.errors;for(let e=1;e<n.length;e++)a.assert(r.hasOwnProperty(n[e]),"[getError] invalid path: "+t),r=r[n[e]];return new String(r)}static composeError(t,e){let n=a.errorTemplate(t).split("$$");a.assert(n.length===e.length+1);let r=n[0];for(let t=0;t<e.length;t++)r+=e[t]+n[t+1];return r}static getError(t,e,n,r,o){void 0===n&&(n={length:0}),void 0===e&&(e=[]);let s=a.composeError(t,e),l="#/errors"+t,c=null,d=null;"number"==typeof r&&(c=r),"number"==typeof o&&(d=o);for(let t=n.length-1;t>=0;t--){let e=n[t];for(let t=e.pe.length-1;t>=0;t--){let n=e.pe[t];if(n&&n.where){c=n.where.line,d=n.where.ch;break}}if(null!==c)break}return new i.RuntimeError(s,c,d,l)}static error(t,e,n){throw a.getError(t,e,n)}static ex2string(t){if(void 0===t)return"undefined";if(null===t)return"null";if("object"==typeof t){if(t.hasOwnProperty("message"))return t.message;if(t.hasOwnProperty("name"))return t.name}return String(t)}static assert(t,e){if(e=void 0===e?"TScript internal assertion failed":"TScript internal assertion failed; "+e,!t)throw new r.AssertionError(e)}}e.ErrorHelper=a,e.errors={syntax:{"se-1":"syntax error in floating point literal","se-2":"syntax error in string literal; closing double quotes '\"' expected before end-of-line","se-3":"syntax error in string literal; invalid Unicode escape sequence","se-4":"syntax error in string literal; invalid escape sequence '\\$$'","se-5":"syntax error; invalid character '$$'","se-6":"syntax error; 'super' cannot be used outside of a class declaration","se-7":"syntax error; 'super' cannot be used in a class without super class","se-8":"syntax error in super reference; dot '.' expected after 'super'","se-9":"syntax error in super reference; identifier expected after dot '.'","se-10":"syntax error in $$; name (identifier or super name) expected","se-11":"syntax error in namespace reference; identifier expected after dot '.'","se-13":"error in $$; $$ '$$' requires a 'this' object and hence cannot be accessed from a static context","se-14":"syntax error in argument list; positional argument follows named argument","se-15":"syntax error in argument list; expected comma ',' or closing parenthesis ')'","se-16":"error in function call; attempt to call a value of type '$$'; 'function' or 'type' expected","se-21":"operators are not allowed on the left-hand side of an assignment","se-22":"syntax error in expression; missing closing parenthesis ')'","se-23":"syntax error in integer literal: maximal value of 2147483647 exceeded","se-24":"syntax error in array; comma ',' or closing bracket ']' expected","se-25":"syntax error in array; unexpected end-of-file","se-26":"syntax error in dictionary; duplicate key '$$'","se-27":"syntax error in dictionary; comma ',' or closing brace '}' expected","se-28":"syntax error in dictionary key; string constant or identifier expected","se-29":"syntax error in dictionary; colon ':' expected","se-30":"syntax error in dictionary; unexpected end-of-file","se-31":"syntax error in closure parameter declaration; comma ',' or closing bracket ']' expected","se-32":"syntax error in closure parameter declaration; identifier expected as the parameter name","se-33":"syntax error in parameter declaration; identifier expected as the parameter name","se-35":"syntax error in anonymous function; opening bracket '[' or opening parenthesis '(' expected","se-36":"syntax error in $$; opening parenthesis '(' expected","se-37":"syntax error in parameter declaration; comma ',' or closing parenthesis ')' expected","se-38":"error in parameter declaration; default value must be a constant","se-40":"syntax error in $$; opening brace '{' expected","se-41":"syntax error in expression; unexpected keyword '$$', expression expected","se-42":"syntax error in expression; unexpected token '$$', expression expected","se-43":"syntax error in member access: identifier expected right of the dot '.'","se-44":"syntax error in item access: closing bracket ']' expected","se-47":"syntax error; 'this' cannot be used in this context","se-48":"syntax error in assignment; semicolon ';' expected","se-49":"syntax error in expression; operator or semicolon ';' expected","se-50":"syntax error in variable declaration; identifier expected as the variable name","se-51":"syntax error in variable declaration; expected initializer '=', comma ',' or semicolon ';'","se-51b":"syntax error in variable declaration; expected comma ',' or semicolon ';'","se-52":"syntax error in function declaration; identifier expected as the function name","se-53":"syntax error in constructor declaration; 'super' expected after colon ':'","se-54":"syntax error in class declaration; identifier expected as the class name","se-55":"syntax error in access modifier: colon ':' expected after '$$'","se-56":"syntax error in class declaration; member declaration without access modifier","se-57":"syntax error in class declaration; attribute initializer must be a constant","se-58":"error in class declaration; the super class has a private constructor, therefore it cannot be sub-classed","se-59":"error in class declaration; constructor cannot be static","se-59b":"error in class declaration; the constructor was already declared","se-60":"error in class declaration; class declaration cannot be static","se-61":"error in class declaration; use directive cannot be static","se-62":"syntax error in class declaration; member declaration, use directive, or access modifier expected","se-63":"syntax error in namespace declaration; a namespace may be declared only at global scope or within another namespace","se-64":"syntax error in namespace declaration; identifier expected as the namespace name","se-65":"syntax error in use directive: keyword 'use' expected","se-66":"syntax error in use directive; 'namespace' and 'as' cannot be combined","se-67":"syntax error in use directive; identifier expected after 'as'","se-68":"syntax error in use directive; comma ',' or semicolon ';' expected","se-69":"syntax error in conditional statement: 'then' expected","se-70":"syntax error in for-loop: identifier expected as the loop variable","se-71":"syntax error in for-loop: 'in' expected","se-72":"syntax error in for-loop: keyword 'do' expected","se-73":"syntax error in for-loop; 'in' or 'do' expected","se-74":"syntax error in do-while-loop: 'while' expected","se-75":"syntax error in do-while-loop: semicolon ';' expected","se-76":"syntax error in while-do-loop: 'do' expected","se-77":"syntax error; 'break' statement must not appear outside a loop body","se-78":"syntax error; 'continue' statement must not appear outside a loop body","se-79":"syntax error in return; a constructor does not return a value","se-80":"syntax error in return; the program does not return a value","se-81":"syntax error in return; semicolon ';' expected","se-81b":"syntax error in break; semicolon ';' expected","se-81c":"syntax error in continue; semicolon ';' expected","se-82":"syntax error in try-catch statement: 'catch' expected","se-84":"syntax error in try-catch statement: 'var' expected after 'catch'","se-85":"syntax error in try-catch statement: identifier expected after 'var'","se-86":"syntax error in try-catch statement: 'do' expected after exception","se-87":"syntax error in throw; semicolon ';' expected","se-88":"syntax error; unexpected closing brace '}'","se-89":"syntax error; unexpected keyword '$$', statement expected","se-90":"syntax error; unexpected token '$$', statement expected"},"argument-mismatch":{"am-1":"argument type mismatch; parameter '$$' of '$$' must be a $$; found '$$'","am-2":"cannot logically negate type '$$'","am-3":"cannot apply unary plus to type '$$'","am-4":"cannot arithmetically negate type '$$'","am-5":"cannot add '$$' and '$$'","am-6":"cannot subtract '$$' from '$$'","am-7":"cannot multiply '$$' with '$$'","am-8":"cannot divide '$$' by '$$'","am-9":"cannot compute the remainder '$$' by '$$'","am-10":"cannot compute power of '$$' by '$$'","am-11":"arguments of operator : must be integers","am-12":"cannot apply logic operator '$$' to '$$' and '$$'","am-13":"cannot convert infinity or not-a-number to integer","am-14":"failed to parse string into an integer","am-15":"division by zero","am-16":"cannot order type '$$'","am-16b":"cannot order types '$$' and '$$'","am-17":"cannot construct an array of negative size","am-18":"parameter 'position' of 'Array.insert' is out of range; position is $$, array size is $$","am-18b":"'Array.pop' cannot be applied to an empty array","am-19":"the 'comparator' function passed to 'Array.sort' must return a numeric value, found '$$'","am-20":"invalid string index '$$' of type '$$', 'Integer' or 'Range' expected","am-21":"string index '$$' out of range; index must not be negative","am-22":"string index '$$' out of range; must be less than the string size of $$","am-23":"array index '$$' out of range; index must not be negative","am-24":"array index '$$' out of range; must be less than array size of $$","am-25":"invalid array index '$$' of type '$$', 'integer' expected","am-26":"invalid array index '$$' of type '$$', 'integer' or 'range' expected","am-27":"dictionary index '$$' is not a key of the dictionary","am-28":"invalid dictionary index of type '$$', 'string' expected","am-29":"range index '$$' out of range; must be non-negative and less than the range size of $$","am-30":"invalid range index '$$' of type '$$', 'Integer' or 'Range' expected","am-31":"attempt to access an item of type '$$'; string, array, dictionary, or range expected","am-31b":"attempt to access an item of type '$$'; string, array, or dictionary expected","am-32":"cannot assign to $$","am-33":"condition in conditional statement is not boolean but rather of type '$$'","am-34":"attempt to loop over the non-iterable type '$$', 'Range' or 'Array' expected","am-35":"error in for-loop; '$$' does not refer to a variable, but to a $$","am-36":"condition in do-while-loop is not boolean but rather of type '$$'","am-37":"condition in while-do-loop is not boolean but rather of type '$$'","am-38":"loading the value failed, key '$$' does not exist","am-39":"saving the value failed, JSON expected","am-40":"invalid event name '$$'","am-41":"argument handler passed to setEventHandler must be a function with exactly one parameter","am-42":"deepcopy failed due to $$","am-43":"infinite recursion due to recursive data structure","am-44":"array '$$' contains unexpected data expected values of type '$$'"},name:{"ne-1":"error in function call; named parameter '$$' is already specified in call to function '$$'","ne-2":"error in function call; named parameter '$$' not found in function '$$'","ne-3":"error in function call; too many arguments for call to function '$$'","ne-4":"error in function call; parameter number $$ is missing when calling function '$$'","ne-5":"error in $$; '$$' is not defined","ne-6":"error in $$; cannot access variable '$$', which is declared in a different class","ne-7":"error in $$; cannot access variable '$$', which is declared in a different function","ne-8":"error in $$; '$$' cannot be accessed because it is a private member of type '$$'","ne-9":"error in namespace lookup; name '$$' not found in namespace '$$'","ne-11":"a name referring to a namespace is not allowed in this context","ne-12":"type '$$' does not have a public static member '$$'","ne-13":"type '$$' does not have a public member '$$'","ne-14":"declaration of variable '$$' conflicts with previous declaration; double use of the same name","ne-15":"declaration of function '$$' conflicts with previous declaration; double use of the same name","ne-16":"declaration of parameter '$$' conflicts with previous declaration; double use of the same name","ne-17":"declaration of closure parameter '$$' conflicts with previous declaration; double use of the same name","ne-18":"declaration of class '$$' conflicts with previous declaration; double use of the same name","ne-19":"declaration of namespace '$$' conflicts with previous declaration; double use of the same name","ne-21":"error in constructor declaration; super constructor call without a super class","ne-22":"error in super class declaration; '$$' does not refer to a type","ne-23":"error in use directive; '$$' is not a namespace","ne-24":"use of identifier '$$' conflicts with previous declaration; double use of the same name","ne-25":"error in constructor call; the constructor of type '$$' is declared $$","ne-26":"error in super class declaration; class '$$' inherits itself"},logic:{"le-1":"too much recursion","le-2":"enterEventMode failed; the program is already in event mode","le-3":"quitEventMode failed; the program is not in event mode"},user:{"ue-1":"assertion failed; $$","ue-2":"runtime error; $$","ue-3":"uncaught exception; $$"},style:{"ste-1":"coding style violation; invalid line indentation","ste-2":"coding style violation; inconsistent block indentation","ste-3":"coding style violation; the $$ name '$$' should start with a lowercase letter or with an underscore","ste-4":"coding style violation; the class name '$$' should start with a capital letter"},internal:{"ie-1":"internal parser error; $$","ie-2":"internal interpreter error; $$"}}},5882:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RuntimeError=void 0;class n extends Error{constructor(t,e,n,r){super(),this.message=t,this.name="Runtime Error",void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=""),this.line=e,this.ch=n,this.href=r}}e.RuntimeError=n},9603:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.cmtsmode=void 0;let i=r(n(4631)).default;e.cmtsmode=i.defineMode("text/tscript",(function(t,e){const n={var:!0,function:!0,if:!0,then:!0,else:!0,for:!0,do:!0,while:!0,break:!0,continue:!0,return:!0,not:!0,and:!0,or:!0,xor:!0,null:!0,true:!0,false:!0,try:!0,catch:!0,throw:!0,class:!0,public:!0,protected:!0,private:!0,static:!0,constructor:!0,this:!0,super:!0,namespace:!0,use:!0,from:!0,module:!0,include:!0,import:!0,export:!0,const:!0,switch:!0,case:!0,default:!0,enum:!0,operator:!0},r={Null:!0,Boolean:!0,Integer:!0,Real:!0,String:!0,Array:!0,Dictionary:!0,Function:!0,Range:!0,Type:!0},a="0123456789",o="=<>!^+-*/%:";return{startState:function(){return{prev:null,blockcomment:!1,indent:0}},token:function(t,e){if(e.indent=t.indentation(),e.prev=null,t.eatSpace(),e.blockcomment){let n=!1;for(;!t.eol();){let r=t.next();if("#"==r&&n){e.blockcomment=!1;break}n="*"==r}return"comment"}var i="",s=null,l=!1;let c=t.next();if(c>="A"&&c<="Z"||c>="a"&&c<="z"||"_"==c){for(s="variable",i+=c;!t.eol();){let e=t.next();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"==e)){t.backUp(1);break}i+=e}n.hasOwnProperty(i)?s="keyword":r.hasOwnProperty(i)&&(s="builtin")}else if(c>="0"&&c<="9"){for(s="atom",i+=c;!t.eol();){if(c=t.next(),!(a.indexOf(c)>=0)){t.backUp(1);break}i+=c}if(!t.eol()){if(!t.eol())if(c=t.next(),"."==c)if(i+=c,s="number",t.eol())l=!0;else for(c=t.next(),a.indexOf(c)>=0?i+=c:l=!0;!t.eol();){if(c=t.next(),!(a.indexOf(c)>=0)){t.backUp(1);break}i+=c}else t.backUp(1);if(!t.eol())if(c=t.next(),"e"==c||"E"==c)for(i+=c,s="number",c=t.next(),"+"!=c&&"-"!=c||(i+=c,c=t.next()),a.indexOf(c)<0?l=!0:null!==c&&(i+=c);!t.eol();){if(c=t.next(),!(a.indexOf(c)>=0)){t.backUp(1);break}i+=c}else t.backUp(1)}try{let t=parseFloat(i);"atom"==s&&t>2147483647&&(s="number")}catch(t){l=!0}}else if('"'==c)for(s="string";;){if(t.eol()){l=!0;break}if(c=t.next(),"\\"==c)c=t.next(),"r"==c?c="\r":"n"==c?c="\n":"t"==c?c="\t":"\\"==c?c="\\":l=!0;else if('"'==c)break}else if(o.indexOf(c)>=0)for(s="operator",i+=c;!t.eol();){if(c=t.next(),!(o.indexOf(c)>=0)){t.backUp(1);break}i+=c}else if("#"==c)if(s="comment",t.eol()||"*"!=t.next())t.skipToEnd();else{let n=!1;for(;!t.eol();){if(c=t.next(),"#"==c&&n)return s;n="*"==c}e.blockcomment=!0}else"()[]{}".indexOf(c)>=0?(e.prev=c,s="bracket"):",;.".indexOf(c)>=0&&(s="punctuation");return t.eatSpace(),l?s?s+" error":"error":s},indent:function(t,e){return e&&"}"==e[0]?"{"==t.prev?t.indent:t.indent-4:"{"==t.prev?t.indent+4:i.Pass},electricInput:/^\s*[{}]$/,blockCommentStart:"#*",blockCommentEnd:"*#",lineComment:"#",fold:"brace"}}))+1},7431:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{l(r.next(t))}catch(t){a(t)}}function s(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ide=void 0;const a=n(4672),o=n(3365),s=n(4012),l=n(7065),c=n(6315),d=n(4043),p=i(n(4631));n(9603).cmtsmode;let u=p.default;e.ide=function(){if(""!=window.location.search&&"?run"!==window.location.search)return null;let t={},n={};function i(){let t=document.createElement("span");return t.style.color="#a00",t.innerHTML="●",t}function p(t,e,n){for(;t;)e-=t.offsetLeft,n-=t.offsetTop,t=t.offsetParent;return{x:e,y:n}}function h(e){if(e||(e=""),t.onDocumentationClick)t.onDocumentationClick(e);else{t.documentationWindow&&(t.documentationWindow.close(),t.documentationWindow=null);let n=location.pathname.substring(location.pathname.lastIndexOf("/")+1);t.documentationWindow=window.open(n+"?doc"+e,"TScript documentation")}}t.onDocumentationClick=null,t.documentationWindow=null,t.document={filename:"",dirty:!1},t.interpreter=null;let f=function(e,n){void 0===n&&(n=0),t.sourcecode.setCursor(e-1,n),t.sourcecode.focus();let r=t.sourcecode.getScrollInfo(),i=t.sourcecode.charCoords({line:e-1,ch:0},"local").top,a=t.sourcecode.getScrollerElement().offsetHeight;(i<r.top+.1*r.clientHeight||i>=r.top+.9*r.clientHeight)&&(i=i-.5*a-5,t.sourcecode.scrollTo(null,i))};const m=["ide-keyword","ide-keyword","ide-integer","ide-real","ide-string","ide-collection","ide-collection","ide-builtin","ide-builtin","ide-builtin","ide-builtin"];function g(e,n){let r={children:[],ids:[]};if(!t.interpreter)return r;if(null===e)for(let e=t.interpreter.stack.length-1;e>=0;e--)r.children.push({nodetype:"frame",index:e,frame:t.interpreter.stack[e]}),r.ids.push("/"+e);else{if(!e.hasOwnProperty("nodetype"))throw"[stacktree.update] missing value.nodetype";if("frame"===e.nodetype){r.opened=!0;let t=e.frame.pe[0];r.element=document.createElement("span"),s.tgui.createElement({type:"span",parent:r.element,text:"["+e.index+"] ",classname:"ide-index"}),s.tgui.createText(t.petype+" "+o.TScript.displayname(t),r.element);let i=e.frame.pe[e.frame.pe.length-1];if(i.hasOwnProperty("where")){let t=i.where;t.line,t.ch,s.tgui.createElement({type:"span",parent:r.element,text:" ("+t.line+":"+t.ch+")",classname:"ide-index"}),r.element.addEventListener("click",(function(e){return f(t.line,t.ch),!1}))}e.frame.object&&(r.children.push({nodetype:"typedvalue",index:"this",typedvalue:e.frame.object}),r.ids.push(n+"/this"));for(let i=0;i<e.frame.variables.length;i++)e.frame.variables[i]&&(r.children.push({nodetype:"typedvalue",index:o.TScript.displayname(t.variables[i]),typedvalue:e.frame.variables[i]}),r.ids.push(n+"/"+t.variables[i].name));e.frame.temporaries.length>0&&(r.children.push({nodetype:"temporaries",index:"temporaries",frame:e.frame}),r.ids.push(n+"/<temporaries>"))}else if("typedvalue"===e.nodetype){r.opened=!1,r.element=document.createElement("span");let t=r.opened?e.typedvalue.type.name:o.TScript.previewValue(e.typedvalue);if(e.typedvalue.type.id===a.Typeid.typeid_array){for(let t=0;t<e.typedvalue.value.b.length;t++)r.children.push({nodetype:"typedvalue",index:t,typedvalue:e.typedvalue.value.b[t]}),r.ids.push(n+"/"+t);t="Array("+r.children.length+") "+t}else if(e.typedvalue.type.id===a.Typeid.typeid_dictionary){for(let t in e.typedvalue.value.b)e.typedvalue.value.b.hasOwnProperty(t)&&(r.children.push({nodetype:"typedvalue",index:t,typedvalue:e.typedvalue.value.b[t]}),r.ids.push(n+"/"+t));t="Dictionary("+r.children.length+") "+t}else if(e.typedvalue.type.id===a.Typeid.typeid_function){if(e.typedvalue.value.b.hasOwnProperty("object")&&(r.children.push({nodetype:"typedvalue",index:"this",typedvalue:e.typedvalue.value.b.object}),r.ids.push(n+"/this")),e.typedvalue.value.b.hasOwnProperty("enclosed"))for(let t=0;t<e.typedvalue.value.b.enclosed.length;t++)r.children.push({nodetype:"typedvalue",index:e.typedvalue.value.b.func.closureparams[t].name,typedvalue:e.typedvalue.value.b.enclosed[t]}),r.ids.push(n+"/"+e.typedvalue.value.b.func.closureparams[t].name)}else if(e.typedvalue.type.id>=a.Typeid.typeid_class){let t=e.typedvalue.type,i=[];for(;t;)i.unshift(t),t=t.superclass;for(let a=0;a<i.length;a++)if(t=i[a],t.variables)for(let i=0;i<t.variables.length;i++)r.children.push({nodetype:"typedvalue",index:t.variables[i].name,typedvalue:e.typedvalue.value.a[t.variables[i].id]}),r.ids.push(n+"/"+t.variables[i].name)}s.tgui.createElement({type:"span",parent:r.element,text:e.index+": ",classname:"ide-index"}),s.tgui.createElement({type:"span",parent:r.element,classname:e.typedvalue.type.id<m.length?m[e.typedvalue.type.id]:"ide-userclass",text:t})}else{if("temporaries"!==e.nodetype)throw"[stacktree.update] unknown nodetype: "+e.nodetype;{r.opened=!0,r.element=s.tgui.createElement({type:"span",parent:r.element,text:"[temporaries]"});let t=0;for(let i=0;i<e.frame.temporaries.length;i++)e.frame.temporaries[i]&&e.frame.temporaries[i].hasOwnProperty("type")&&e.frame.temporaries[i].hasOwnProperty("value")&&(r.children.push({nodetype:"typedvalue",index:i,typedvalue:e.frame.temporaries[i]}),r.ids.push(n+"/"+t),t++)}}}return r}function y(e,n){let r={children:[],ids:[]};if(!t.interpreter)return r;if(0===t.interpreter.stack.length)return r;let i=t.interpreter.stack[t.interpreter.stack.length-1],a=i.pe[i.pe.length-1],l=new Set;for(let t=0;t<i.pe.length;t++)l.add(i.pe[t]);if(null===e)r.children.push(t.interpreter.program),r.ids.push("");else{r.opened=!0;let t=e;for("expression"===t.petype&&(t=t.sub);"group"===t.petype;)t=t.sub;r.element=document.createElement("div");let i="",c="";i+=t.petype,t.name&&(i+=" "+t.name);let d=String(t.petype);if("global scope"===d||"scope"===d||"namespace"===d)for(let e=0;e<t.commands.length;e++)t.commands[e].hasOwnProperty("builtin")&&t.commands[e].builtin||"breakpoint"!==t.commands[e].petype&&(r.children.push(t.commands[e]),r.ids.push(n+"/"+r.children.length));else if("conditional statement"===d)r.children.push(t.condition),r.ids.push(n+"/"+r.children.length),r.children.push(t.then_part),r.ids.push(n+"/"+r.children.length),t.else_part&&(r.children.push(t.else_part),r.ids.push(n+"/"+r.children.length));else if("for-loop"===d)r.children.push(t.iterable),r.ids.push(n+"/"+r.children.length),r.children.push(t.body),r.ids.push(n+"/"+r.children.length);else if("do-while-loop"===d||"while-do-loop"===d)r.children.push(t.condition),r.ids.push(n+"/"+r.children.length),r.children.push(t.body),r.ids.push(n+"/"+r.children.length);else if("break"===d);else if("continue"===d);else if("return"===d)t.argument&&(r.children.push(t.argument),r.ids.push(n+"/"+r.children.length));else if("variable declaration"===d)for(let e=0;e<t.vars.length;e++)r.children.push(t.vars[e]),r.ids.push(n+"/"+r.children.length);else if("variable"===d||"attribute"===d)t.initializer&&(r.children.push(t.initializer),r.ids.push(n+"/"+r.children.length));else if("function"===d||"method"===d){for(let e=0;e<t.params.length;e++){let i=t.names[t.params[e].name];i&&(r.children.push(i),r.ids.push(n+"/"+r.children.length))}for(let e=0;e<t.commands.length;e++)"breakpoint"!==t.commands[e].petype&&(r.children.push(t.commands[e]),r.ids.push(n+"/"+r.children.length))}else if("type"===d){r.children.push(t.class_constructor),r.ids.push(n+"/"+r.children.length);for(let e in t.members)t.members.hasOwnProperty(e)&&(r.children.push(t.members[e]),r.ids.push(n+"/"+r.children.length));for(let e in t.staticmembers)t.staticmembers.hasOwnProperty(e)&&(r.children.push(t.staticmembers[e]),r.ids.push(n+"/"+r.children.length))}else if("constant"===d)i=o.TScript.previewValue(t.typedvalue),c=t.typedvalue.type.id<m.length?m[t.typedvalue.type.id]:"ide-userclass";else if("name"===d);else if("this"===d);else if("closure"===d){r.children.push(t.func),r.ids.push(n+"/"+r.children.length);for(let e=0;e<t.func.closureparams.length;e++)r.children.push(t.func.closureparams[e].initializer),r.ids.push(n+"/"+r.children.length)}else if("array"===d)for(let e=0;e<t.elements.length;e++)r.children.push(t.elements[e]),r.ids.push(n+"/"+r.children.length);else if("dictionary"===d)for(let e=0;e<t.values.length;e++)r.children.push(t.values[e]),r.ids.push(n+"/"+r.children.length);else if("function call"===d){r.children.push(t.base),r.ids.push(n+"/"+r.children.length);for(let e=0;e<t.arguments.length;e++)r.children.push(t.arguments[e]),r.ids.push(n+"/"+r.children.length)}else if("named argument"===d)i=t.name,t.argument&&(r.children.push(t.argument),r.ids.push(n+"/"+r.children.length));else if("item access"===d)r.children.push(t.base),r.ids.push(n+"/"+r.children.length),r.children.push(t.argument),r.ids.push(n+"/"+r.children.length);else if("access of member "===d.substr(0,17))r.children.push(t.object),r.ids.push(n+"/"+r.children.length);else if("assignment "===d.substr(0,11))r.children.push(t.lhs),r.ids.push(n+"/"+r.children.length),r.children.push(t.rhs),r.ids.push(n+"/"+r.children.length);else if("left-unary operator "===d.substr(0,20))r.children.push(t.argument),r.ids.push(n+"/"+r.children.length);else if("binary operator "===d.substr(0,16))r.children.push(t.lhs),r.ids.push(n+"/"+r.children.length),r.children.push(t.rhs),r.ids.push(n+"/"+r.children.length);else if("try-catch"===d)r.children.push(t.try_part),r.ids.push(n+"/"+r.children.length),r.children.push(t.catch_part),r.ids.push(n+"/"+r.children.length);else if("try"===d)r.children.push(t.command),r.ids.push(n+"/"+r.children.length);else if("catch"===d)r.children.push(t.command),r.ids.push(n+"/"+r.children.length);else if("throw"===d)r.children.push(t.argument),r.ids.push(n+"/"+r.children.length);else if("use"===d);else if("no-operation"!==d)throw"breakpoint"===d?"[programinfo] internal error; breakpoints should not be listed":"[programinfo] petype '"+d+"' not covered";l.has(t)&&(t===a?(c+=" ide-program-current",r.visible=!0):c+=" ide-program-ancestor"),s.tgui.createElement({type:"span",parent:r.element,classname:c,text:i}),t.where&&s.tgui.createElement({type:"span",parent:r.element,text:" ("+t.where.line+":"+t.where.ch+")",classname:"ide-index"})}return r}function v(){if(t.interpreter)if("running"===t.interpreter.status)t.interpreter.background?t.programstate.running():t.programstate.stepping();else if("waiting"===t.interpreter.status)t.programstate.waiting();else if("error"===t.interpreter.status)t.programstate.error();else{if("finished"!==t.interpreter.status)throw"internal error; unknown interpreter state";t.programstate.finished()}else""!=t.messages.innerHTML?t.programstate.error():t.programstate.unchecked();if(t.sourcecode){let e=t.interpreter&&("running"===t.interpreter.status||"waiting"===t.interpreter.status);if(t.sourcecode.getOption("readOnly")!=e){t.sourcecode.setOption("readOnly",e);let n=document.getElementsByClassName("CodeMirror"),r=e?.6:1;for(let t=0;t<n.length;t++)n[t].style.opacity=r}}}function b(){if(t.interpreter&&t.interpreter.stack.length>0){let e=t.interpreter.stack[t.interpreter.stack.length-1],n=e.pe[e.pe.length-1];n.where&&f(n.where.line,n.where.ch)}t.stacktree.update(g),t.programtree.update(y),v()}function w(){t.interpreter&&t.interpreter.stopthread(),t.interpreter=null,s.tgui.clearElement(t.messages);{let e=t.turtle.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.turtle.width,t.turtle.height)}t.interpreter&&t.interpreter.service.turtle.reset.call(t.interpreter,0,0,0,!0);let e=t.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.canvas.width,t.canvas.height),e.lineWidth=1,e.fillStyle="#000",e.strokeStyle="#000",e.font="16px Helvetica",e.textAlign="left",e.textBaseline="top"}t.addMessage=function(e,n,r,i,a){let o=s.tgui.createElement({type:"tr",parent:t.messages,classname:"ide",style:{"vertical-align":"top"}}),l=s.tgui.createElement({type:"th",parent:o,classname:"ide",style:{width:"20px"}}),c=s.tgui.createElement({type:"span",parent:l,style:{width:"20px",color:{print:"#00f",warning:"#f80",error:"#f00"}[e]},html:a?"&#128712;":"•"});a&&(c.style.cursor="pointer",c.addEventListener("click",(function(t){return h(a),!1})));let d=s.tgui.createElement({type:"td",parent:o,classname:"ide"}),p=n.split("\n");for(let n=0;n<p.length;n++){let a=p[n],o=s.tgui.createElement({type:"div",parent:d,classname:"ide ide-message"+("print"!=e?" ide-errormessage":""),text:a});void 0!==r&&(o.ide_line=r,o.ide_ch=i,o.addEventListener("click",(function(e){return f(e.target.ide_line,e.target.ide_ch),!t.interpreter||"running"==t.interpreter.status&&t.interpreter.background||b(),!1})))}t.messagecontainer.scrollTop=t.messagecontainer.scrollHeight,a&&t.sourcecode.focus()},t.prepare_run=function(){w();let e=t.sourcecode.getValue();0!=e.length&&"\n"!=e[e.length-1]&&(e+="\n",t.sourcecode.getDoc().replaceRange("\n",u.Pos(t.sourcecode.lastLine())));let r=l.Parser.parse(e,n),a=r.program,o=r.errors;if(o)for(let e=0;e<o.length;e++){let n=o[e];t.addMessage(n.type,n.type+" in line "+n.line+": "+n.message,n.line,n.ch,n.href)}if(a){t.interpreter=new c.Interpreter(a,d.defaultService),t.interpreter.service.documentation_mode=!1,t.interpreter.service.print=function(e){t.addMessage("print",e)},t.interpreter.service.alert=function(t){alert(t)},t.interpreter.service.confirm=function(t){return confirm(t)},t.interpreter.service.prompt=function(t){return prompt(t)},t.interpreter.service.message=function(e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=""),t.addMessage("error",e,n,r,i)},t.interpreter.service.statechanged=function(e){e?b():v(),"finished"===t.interpreter.status&&t.sourcecode.focus()},t.interpreter.service.breakpoint=function(){b()},t.interpreter.service.turtle.dom=t.turtle,t.interpreter.service.canvas.dom=t.canvas,t.interpreter.eventnames["canvas.resize"]=!0,t.interpreter.eventnames["canvas.mousedown"]=!0,t.interpreter.eventnames["canvas.mouseup"]=!0,t.interpreter.eventnames["canvas.mousemove"]=!0,t.interpreter.eventnames["canvas.mouseout"]=!0,t.interpreter.eventnames["canvas.keydown"]=!0,t.interpreter.eventnames["canvas.keyup"]=!0,t.interpreter.eventnames.timer=!0,t.interpreter.reset();let e=new Array;for(let n=1;n<=t.sourcecode.lineCount();n++)t.sourcecode.lineInfo(n-1).gutterMarkers&&e.push(n);let n=t.interpreter.defineBreakpoints(e);if(null!==n){for(let e=1;e<=t.sourcecode.lineCount();e++)t.sourcecode.lineInfo(e-1).gutterMarkers?n.hasOwnProperty(e)||t.sourcecode.setGutterMarker(e-1,"breakpoints",null):n.hasOwnProperty(e)&&t.sourcecode.setGutterMarker(e-1,"breakpoints",i());alert("Note: breakpoints were moved to valid locations")}}};let x=function(){if(t.interpreter&&("running"===t.interpreter.status||"waiting"===t.interpreter.status))return;let n=e.ide.sourcecode.getValue();w();let r=l.Parser.parse(n),i=r.program,a=r.errors;if(a&&a.length>0){for(let e=0;e<a.length;e++){let n=a[e];t.addMessage(n.type,n.type+" in line "+n.line+": "+n.message,n.line,n.ch,n.href)}return}if(!i)return void alert("internal error during export");let o=t.document.filename;o&&""!==o||(o="tscript-export");let c=o;c.endsWith("html")||c.endsWith("HTML")||c.endsWith("htm")||c.endsWith("HTM")||(c+=".html");let d=M("export program as webpage",{width:"calc(max(400px, 50vw))",height:"calc(max(260px, 50vh))"}),p=s.tgui.createElement({parent:d,type:"div",text:"status: preparing ...",style:{position:"absolute",width:"80%",left:"10%",height:"40px","line-height":"35px",top:"40px",color:"#000",padding:"2px 10px","vertical-align":"middle",border:"1px solid #000"}}),u=s.tgui.createElement({parent:d,type:"a",properties:{target:"_blank",download:c},text:"download standalone turtle application",style:{position:"absolute",width:"80%",left:"10%",height:"40px","line-height":"35px",top:"100px",background:"#fff",color:"#44c","font-decoration":"underline",padding:"2px 10px","vertical-align":"middle",border:"1px solid #000",display:"none"}}),h=s.tgui.createElement({parent:d,type:"a",properties:{target:"_blank",download:c},text:"download standalone canvas application",style:{position:"absolute",width:"80%",left:"10%",height:"40px","line-height":"35px",top:"160px",background:"#fff",color:"#44c","font-decoration":"underline",padding:"2px 10px","vertical-align":"middle",border:"1px solid #000",display:"none"}});s.tgui.createElement({parent:d,type:"button",style:{position:"absolute",right:"10px",bottom:"10px",width:"100px",height:"25px"},text:"Close",classname:"tgui-dialog-button"}).addEventListener("click",O(null)),s.tgui.startModal(d),n=escape(n);var f=new XMLHttpRequest;f.open("GET",window.location.href,!0),f.overrideMimeType("text/html"),f.onreadystatechange=function(){if(4===f.readyState){let t=f.responseText,e=t.indexOf("<head>")+"<head>".length,r=t.substr(0,e),i=t.substr(e),a='window.TScript = {}; window.TScript.code = unescape("'+n+'"); window.TScript.mode = ',s=';window.TScript.name = unescape("'+escape(o)+'")',l=function(t){let e=document.createElement("script");e.innerHTML=a+'"'+escape(t)+'"'+s;let n=e.outerHTML,o=new Blob([r+n+i],{type:"text/html"});return URL.createObjectURL(o)};p.innerHTML="status: ready for download",u.href=l("turtle"),u.style.display="block",h.href=l("canvas"),h.style.display="block"}},f.send()},T=function(){""!==t.document.filename?(localStorage.setItem("tscript.code."+t.document.filename,t.sourcecode.getValue()),t.document.dirty=!1):k()},k=function(){A("save file as ...",t.document.filename,!0,(function(e){t.editor_title.innerHTML="editor &mdash; ",s.tgui.createText(e,t.editor_title),t.document.filename=e,T(),t.sourcecode.focus()}))};function _(t){t.strokeStyle="#333",t.fillStyle="#fff",t.lineWidth=1,t.beginPath(),t.moveTo(4.5,7.5),t.lineTo(8.5,3.5),t.lineTo(14.5,3.5),t.lineTo(14.5,16.5),t.lineTo(4.5,16.5),t.closePath(),t.fill(),t.stroke(),t.beginPath(),t.moveTo(4.5,7.5),t.lineTo(8.5,7.5),t.lineTo(8.5,3.5),t.stroke()}function S(t){t.fillStyle="#36d",t.strokeStyle="#139",t.beginPath(),t.moveTo(3.5,3.5),t.lineTo(16.5,3.5),t.lineTo(16.5,16.5),t.lineTo(5.5,16.5),t.lineTo(3.5,14.5),t.closePath(),t.fill(),t.stroke(),t.fillStyle="#eef",t.fillRect(7,11,6,5),t.fillStyle="#36d",t.fillRect(8,12,2,3),t.fillStyle="#fff",t.fillRect(6,4,8,5)}let E=[{click:function(){t.document.dirty&&!confirm("The document may have unsaved changes.\nDo you want to discard the code?")||(w(),t.editor_title.innerHTML="editor",t.document.filename="",t.sourcecode.setValue(""),t.sourcecode.getDoc().clearHistory(),t.document.dirty=!1,b(),t.sourcecode.focus())},draw:function(t){let e=t.getContext("2d");_(e),e.strokeStyle="#030",e.fillStyle="#0a0",e.beginPath(),e.arc(14,14,4.75,0,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke(),e.strokeStyle="#fff",e.lineWidth=2,e.beginPath(),e.moveTo(14,17),e.lineTo(14,11),e.stroke(),e.beginPath(),e.moveTo(11,14),e.lineTo(17,14),e.stroke()},tooltip:"new document",hotkey:"shift-control-n"},{click:function(){t.document.dirty&&!confirm("The document has unsaved changes.\nDo you want to discard the code?")||A("load file",t.document.filename,!1,(function(e){w(),t.editor_title.innerHTML="editor &mdash; ",s.tgui.createText(e,t.editor_title),t.document.filename=e,t.sourcecode.setValue(localStorage.getItem("tscript.code."+e)),t.sourcecode.getDoc().setCursor({line:0,ch:0}),t.sourcecode.getDoc().clearHistory(),t.document.dirty=!1,b(),t.sourcecode.focus()}))},draw:function(t){let e=t.getContext("2d");e.fillStyle="#ec5",e.strokeStyle="#330",e.lineWidth=1,e.beginPath(),e.moveTo(2.5,4.5),e.lineTo(7.5,4.5),e.lineTo(9.5,6.5),e.lineTo(15.5,6.5),e.lineTo(15.5,15.5),e.lineTo(2.5,15.5),e.closePath(),e.fill(),e.stroke(),e.fillStyle="#fd6",e.strokeStyle="#330",e.lineWidth=1,e.beginPath(),e.moveTo(5.5,8.5),e.lineTo(17.5,8.5),e.lineTo(15.5,15.5),e.lineTo(3.5,15.5),e.closePath(),e.fill(),e.stroke()},tooltip:"open document",hotkey:"control-o"},{click:T,draw:function(t){S(t.getContext("2d"))},tooltip:"save document",hotkey:"control-s"},{click:k,draw:function(t){let e=t.getContext("2d");S(e),function(t){t.strokeStyle="#0005",t.lineWidth=3,t.beginPath(),t.moveTo(8,8),t.lineTo(18,18),t.stroke(),t.fillStyle="#fc9",t.beginPath(),t.moveTo(8,6),t.lineTo(11,7),t.lineTo(9,9),t.fill(),t.fillStyle="#000",t.beginPath(),t.moveTo(8,6),t.lineTo(9.5,6.5),t.lineTo(8.5,7.5),t.fill(),t.strokeStyle="#000",t.lineWidth=3,t.beginPath(),t.moveTo(10,8),t.lineTo(18,16),t.stroke(),t.strokeStyle="#dd0",t.lineWidth=2,t.beginPath(),t.moveTo(10,8),t.lineTo(18,16),t.stroke(),t.fillStyle="#000",t.beginPath(),t.arc(18,16,1.5,1.75*Math.PI,2.75*Math.PI,!1),t.fill(),t.fillStyle="#f33",t.beginPath(),t.arc(18,16,1,0,2*Math.PI,!1),t.fill()}(e)},tooltip:"save document as ...",hotkey:"shift-control-s"},{click:function(){(!t.interpreter||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)&&t.prepare_run(),t.interpreter&&(t.interpreter.run(),t.canvas.parentElement.focus())},draw:function(t){let e=t.getContext("2d");e.fillStyle="#080",e.beginPath(),e.moveTo(5,5),e.lineTo(15,10),e.lineTo(5,15),e.fill()},tooltip:"run/continue program",hotkey:"F7"},{click:function(){!t.interpreter||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status||t.interpreter.interrupt()},draw:function(t){let e=t.getContext("2d");e.fillStyle="#c00",e.fillRect(5,5,4,10),e.fillRect(11,5,4,10)},tooltip:"interrupt program",hotkey:"shift-F7"},{click:function(){w(),b()},draw:function(t){let e=t.getContext("2d");e.fillStyle="#c00",e.fillRect(5,5,10,10)},tooltip:"abort program",hotkey:"F10"},{click:function(){(!t.interpreter||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)&&t.prepare_run(),t.interpreter&&(t.interpreter.running||t.interpreter.step_into())},draw:function(t){let e=t.getContext("2d");e.fillStyle="#000",e.fillRect(10,3,7,2),e.fillRect(13,6,4,2),e.fillRect(13,9,4,2),e.fillRect(13,12,4,2),e.fillRect(10,15,7,2),e.lineWidth=1,e.strokeStyle="#00f",e.beginPath(),e.moveTo(8,4),e.lineTo(3,4),e.lineTo(3,10),e.lineTo(6,10),e.stroke(),e.fillStyle="#00f",e.beginPath(),e.moveTo(5,7),e.lineTo(5,13),e.lineTo(9.5,10),e.fill()},tooltip:"run current command, step into function calls",hotkey:"shift-control-F11"},{click:function(){(!t.interpreter||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)&&t.prepare_run(),t.interpreter&&(t.interpreter.running||t.interpreter.step_over())},draw:function(t){let e=t.getContext("2d");e.fillStyle="#000",e.fillRect(10,3,7,2),e.fillRect(13,6,4,2),e.fillRect(13,9,4,2),e.fillRect(13,12,4,2),e.fillRect(10,15,7,2),e.lineWidth=1,e.strokeStyle="#00f",e.beginPath(),e.moveTo(8,4),e.lineTo(3,4),e.lineTo(3,16),e.lineTo(6,16),e.stroke(),e.fillStyle="#00f",e.beginPath(),e.moveTo(5,13),e.lineTo(5,19),e.lineTo(9.5,16),e.fill()},tooltip:"run current line of code, do no step into function calls",hotkey:"control-F11"},{click:function(){(!t.interpreter||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)&&t.prepare_run(),t.interpreter&&(t.interpreter.running||t.interpreter.step_out())},draw:function(t){let e=t.getContext("2d");e.fillStyle="#000",e.fillRect(10,3,7,2),e.fillRect(13,6,4,2),e.fillRect(13,9,4,2),e.fillRect(13,12,4,2),e.fillRect(10,15,7,2),e.lineWidth=1,e.strokeStyle="#00f",e.beginPath(),e.moveTo(11,10),e.lineTo(3,10),e.lineTo(3,16),e.lineTo(6,16),e.stroke(),e.fillStyle="#00f",e.beginPath(),e.moveTo(5,13),e.lineTo(5,19),e.lineTo(9.5,16),e.fill()},tooltip:"step out of current function",hotkey:"shift-F11"},{click:function(){let e=t.sourcecode,n=e.doc.getCursor().line;if(t.interpreter){let r=t.interpreter.toggleBreakpoint(n+1);null!==r&&(n=r.line,e.setGutterMarker(n-1,"breakpoints",r.active?i():null),t.sourcecode.scrollIntoView({line:n-1},40))}else e.setGutterMarker(n,"breakpoints",e.lineInfo(n).gutterMarkers?null:i())},draw:function(t){let e=t.getContext("2d");e.fillStyle="#c00",e.arc(10,10,3.9,0,2*Math.PI,!1),e.fill()},tooltip:"toggle breakpoint",hotkey:"F8"}];function C(){let t={options:n,hotkeys:[]};for(let e=0;e<E.length;e++)t.hotkeys.push(E[e].hotkey);localStorage.setItem("tscript.ide.config",JSON.stringify(t))}function O(t){return function(e){return null!=t&&t(),s.tgui.stopModal(),e&&(e.preventDefault(),e.stopPropagation()),!1}}function M(t,e,n){let r=s.tgui.createElement({type:"div",style:{width:e.width,height:e.height,background:"#eee",overflow:"hidden"}});return function(t,e,n){let r=s.tgui.createElement({parent:t,type:"div",style:{position:"absolute",width:"100%",left:"0",height:"24px",top:"0"},classname:"tgui-modal-titlebar"});s.tgui.createElement({parent:r,type:"span",style:{},classname:"tgui-modal-titlebar-title",text:e}),s.tgui.createButton({parent:r,click:function(){return O(n)(null)},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=2,e.strokeStyle="#000",e.beginPath(),e.moveTo(4,4),e.lineTo(14,14),e.stroke(),e.beginPath(),e.moveTo(4,14),e.lineTo(14,4),e.stroke()},classname:"tgui-panel-dockbutton","tooltip-right":"close"})}(r,t,n),r.onKeyDown=function(t){if("Escape"==t.key)return O(n)(t)},r}function P(){let t=M("configuration",{width:"calc(max(370px, 50vw))",left:"25vw",height:"calc(max(270px, 50vh))",top:"25vh"},C),e=(s.tgui.createElement({parent:t,type:"div",html:'<h3 style="margin-top: 20px;">Configure Hotkeys</h3><p>Click a button to configure its hotkey.</p>'}),[]),r=s.tgui.createElement({parent:t,type:"div"});for(let t=0;t<E.length;t++){let n=Object.assign({},E[t]);n.width=20,n.height=20,n.style={height:"22px"},n.hotkey&&(n.tooltip+=" ("+n.hotkey+")"),delete n.hotkey,n.parent=r;{let r=t;n.click=function(){let t=M("set hotkey",{width:"calc(max(340px, 30vw))",height:"calc(max(220px, 30vh))"});s.tgui.createCanvasIcon({parent:t,width:20,height:20,draw:E[r].draw,style:{position:"absolute",left:"15px",top:"40px"}}),s.tgui.createElement({parent:t,type:"label",text:E[r].tooltip,style:{position:"absolute",left:"50px",top:"40px"}}),s.tgui.createElement({parent:t,type:"label",text:"current hotkey: "+(E[r].hotkey?E[r].hotkey:"<None>"),style:{position:"absolute",left:"50px",top:"70px"}}),s.tgui.createElement({parent:t,type:"label",text:"press the hotkey to assign, or press escape to remove the current hotkey",style:{position:"absolute",left:"15px",top:"130px"}}),t.onKeyDown=function(t){t.preventDefault(),t.stopPropagation();let n=t.key;if("Shift"!==n&&"Control"!==n&&"Alt"!==n&&"OS"!==n&&"Meta"!==n)return E[r].hotkey&&(s.tgui.setTooltip(E[r].control.dom,E[r].tooltip),s.tgui.setTooltip(e[r].dom,E[r].tooltip),s.tgui.releaseHotkey(E[r].hotkey),delete E[r].hotkey),"Escape"===n?(s.tgui.stopModal(),!1):(t.altKey&&(n="alt-"+n),t.ctrlKey&&(n="control-"+n),t.shiftKey&&(n="shift-"+n),n=s.tgui.normalizeHotkey(n),s.tgui.hotkey(n)?alert("hotkey "+n+" is already in use"):(E[r].hotkey=n,s.tgui.setHotkey(n,E[r].click),s.tgui.setTooltip(E[r].control.dom,E[r].tooltip+" ("+n+")"),s.tgui.setTooltip(e[r].dom,E[r].tooltip+" ("+n+")"),s.tgui.stopModal()),!1)},s.tgui.createElement({parent:t,type:"button",style:{position:"absolute",right:"10px",bottom:"10px",width:"100px",height:"25px"},text:"Cancel",classname:"tgui-dialog-button"}).addEventListener("click",O(C)),s.tgui.startModal(t)}}e.push(s.tgui.createButton(n))}r=s.tgui.createElement({parent:t,type:"div"}),s.tgui.createElement({parent:r,type:"h3",style:{"margin-top":"20px"},text:"Coding Style"});let i=s.tgui.createElement({parent:r,type:"p"}),a=s.tgui.createElement({parent:i,type:"label",html:" enable style errors "}),o=s.tgui.createElement({parent:a,type:"input",properties:{type:"checkbox"},click:function(t){n.checkstyle=o.checked}});n.checkstyle&&(o.checked=!0),s.tgui.createElement({parent:t,type:"button",style:{position:"absolute",right:"10px",bottom:"10px",width:"100px",height:"25px"},text:"Close",classname:"tgui-dialog-button"}).addEventListener("click",O(C)),s.tgui.startModal(t)}function A(t,e,n,i){let a=new Array;for(let t in localStorage)"tscript.code."===t.substr(0,13)&&a.push(t.substr(13));a.sort();let o=M(t,{width:"calc(max(440px, 50vw))",left:"25vw",height:"calc(max(260px, 70vh))",top:"15vh"}),l=s.tgui.createElement({parent:o,type:"div",classname:"tgui-modal-content",style:{display:"flex","flex-direction":"column","justify-content":"space-between"}}),c=s.tgui.createElement({parent:l,type:"div",style:{width:"100%",height:"25px","margin-top":"7px"}}),d=(s.tgui.createElement({parent:c,type:"button",style:{width:"100px",height:"100%","margin-left":"10px"},text:"Delete file",click:()=>g(p.value),classname:"tgui-dialog-button"}),s.tgui.createElement({parent:c,type:"button",style:{width:"100px",height:"100%","margin-left":"10px"},text:"Export",click:()=>function(t){!function(t,e,n="text/plain"){var r=document.createElement("a");r.setAttribute("href","data:"+n+";charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(t+".tscript",localStorage.getItem("tscript.code."+t))}(p.value),classname:"tgui-dialog-button"}),s.tgui.createElement({parent:c,type:"button",style:{width:"100px",height:"100%","margin-left":"10px"},text:"Import",click:()=>function(){let t=document.createElement("input");t.type="file",t.multiple=!0,t.style.display="none",t.accept=".tscript",t.addEventListener("change",(t=>r(this,void 0,void 0,(function*(){if(t.target.files)for(let e of t.target.files){let t=e.name.split(".tscript")[0];a.includes(t);let n=yield e.text();if(localStorage.setItem("tscript.code."+t,n),!a.includes(t)){a.push(t);let e=new Option(t,t);d.appendChild(e)}}})))),t.click()}(),classname:"tgui-dialog-button"}),s.tgui.createElement({parent:c,type:"label",style:{width:"100px",height:"100%","margin-left":"10px"},text:(a.length>0?a.length:"No")+" document"+(1==a.length?"":"s"),classname:"tgui-status-box"}),s.tgui.createElement({parent:l,type:a.length>0?"select":"text",properties:{size:Math.max(2,a.length)},classname:"tgui-list-box",style:{flex:"auto",background:"#fff",margin:"7px 10px",overflow:"scroll"}})),p={value:e};n&&(p=s.tgui.createElement({parent:l,type:"input",style:{height:"25px",background:"#fff",margin:"0 10px 7px 10px"},classname:"tgui-text-box",text:e,properties:{type:"text",placeholder:"Filename"}}));let u=s.tgui.createElement({parent:l,type:"div",style:{width:"100%",height:"25px","margin-bottom":"7px",display:"flex","justify-content":"flex-end"}}),h=s.tgui.createElement({parent:u,type:"button",style:{width:"100px",height:"100%","margin-right":"10px"},text:"Okay",classname:"tgui-dialog-button"}),f=s.tgui.createElement({parent:u,type:"button",style:{width:"100px",height:"100%","margin-right":"10px"},text:"Cancel",classname:"tgui-dialog-button"});for(let t=0;t<a.length;t++){let e=new Option(a[t],a[t]);d.options[t]=e}d.addEventListener("change",(function(t){t.target&&t.target.value&&(p.value=t.target.value)})),d.addEventListener("keydown",(function(t){if("Backspace"===t.key||"Delete"===t.key)return t.preventDefault(),t.stopPropagation(),g(p.value),!1}));let m=function(t){t.preventDefault(),t.stopPropagation();let e=p.value;return""!=e&&(n||a.indexOf(e)>=0)&&(s.tgui.stopModal(),i(e)),!1};return d.addEventListener("dblclick",m),h.addEventListener("click",m),f.addEventListener("click",O(null)),o.onKeyDown=function(t){if("Escape"===t.key)return s.tgui.stopModal(),t.preventDefault(),t.stopPropagation(),!1;if("Enter"===t.key){t.preventDefault(),t.stopPropagation();let e=p.value;return""!=e&&(n||a.indexOf(e)>=0)&&(s.tgui.stopModal(),i(e)),!1}},s.tgui.startModal(o),(n?p:d).focus(),o;function g(t){let e=a.indexOf(t);e>=0&&confirm('Delete file "'+t+'"\nAre you sure?')&&(localStorage.removeItem("tscript.code."+t),a.splice(e,1),d.remove(e))}}return function(){let t=localStorage.getItem("tscript.ide.config");if(t){let e=JSON.parse(t);if(e.hasOwnProperty("hotkeys")){let t=Math.min(E.length,e.hotkeys.length);for(let n=0;n<t;n++)E[n].hotkey=e.hotkeys[n]}e.hasOwnProperty("options")&&(n=e.options)}}(),t.create=function(e,n){n||(n={"export-button":!0,"documentation-button":!0}),s.tgui.releaseAllHotkeys(),t.main=s.tgui.createElement({type:"div",parent:e,classname:"ide ide-main"}),s.tgui.setHotkeyElement(t.main),t.toolbar=s.tgui.createElement({type:"div",parent:t.main,classname:"ide ide-toolbar"}),n["export-button"]&&E.push({click:x,draw:function(t){let e=t.getContext("2d");e.strokeStyle="#080",e.lineWidth=2,e.beginPath(),e.moveTo(3,7),e.lineTo(10,7),e.lineTo(10,3),e.lineTo(17,10),e.lineTo(10,17),e.lineTo(10,13),e.lineTo(3,13),e.closePath(),e.stroke()},tooltip:"export program as webpage"});let r=[!1,!1,!1,!0,!1,!1,!0,!1,!1,!1,!0,!0];for(let e=0;e<E.length;e++){let n=Object.assign({},E[e]);n.width=20,n.height=20,n.style={float:"left",height:"22px"},n.hotkey&&(n.tooltip+=" ("+n.hotkey+")"),n.parent=t.toolbar,E[e].control=s.tgui.createButton(n),r[e]&&s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui tgui-control tgui-toolbar-separator"})}s.tgui.createButton({click:function(){return P(),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.fillStyle="#000",e.strokeStyle="#000",e.arc(10,10,2,0,2*Math.PI,!1),e.fill(),e.lineWidth=2,e.strokeStyle="#000",e.beginPath(),e.arc(10,10,5.7,0,2*Math.PI,!1),e.closePath(),e.stroke(),e.lineWidth=2,e.beginPath();for(let t=0;t<12;t++){let n=(t+.5)*Math.PI/6;e.moveTo(10+6*Math.cos(n),10+6*Math.sin(n)),e.lineTo(10+9.4*Math.cos(n),10+9.4*Math.sin(n))}e.stroke()},parent:t.toolbar,style:{float:"left"},tooltip:"configuration"}),s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui tgui-control tgui-toolbar-separator"}),t.programstate=s.tgui.createLabel({parent:t.toolbar,style:{float:"left",width:"calc(min(250px, max(20px, 50vw - 270px)))",height:"23px","white-space":"nowrap",overflow:"hidden",direction:"rtl","text-overflow":"ellipsis clip","text-align":"center",background:"#fff"}}),t.programstate.unchecked=function(){this.setText("program has not been checked").setBackground("#ee8")},t.programstate.error=function(){this.setText("an error has occurred").setBackground("#f44")},t.programstate.running=function(){this.setText("program is running").setBackground("#8e8")},t.programstate.waiting=function(){this.setText("program is waiting").setBackground("#aca")},t.programstate.stepping=function(){this.setText("program is in stepping mode").setBackground("#8ee")},t.programstate.finished=function(){this.setText("program has finished").setBackground("#88e")},t.programstate.unchecked(),s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui tgui-control tgui-toolbar-separator"}),s.tgui.createButton({click:function(){for(let t=0;t<s.tgui.panels.length;t++){let e=s.tgui.panels[t];"editor"===e.title||"messages"===e.title?e.dock("left"):e.dock("right")}return s.tgui.savePanelData(),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=1,e.fillStyle="#fff",e.strokeStyle="#aaa",e.beginPath(),e.rect(2.5,2.5,15,15),e.fill(),e.stroke(),e.fillStyle="#ccc",e.fillRect(11,3,1,14),e.fillStyle="#77f",e.fillRect(3,3,14,1),e.fillRect(3,12,8,1),e.strokeStyle="#222",e.lineWidth=1.7,e.beginPath(),e.arc(9.5,10.5,4,1.25*Math.PI,2.6*Math.PI),e.stroke(),e.fillStyle="#222",e.beginPath(),e.moveTo(5,5),e.lineTo(5,10),e.lineTo(10,10),e.fill()},parent:t.toolbar,style:{float:"left"},tooltip:"restore panels"}),s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui tgui-control tgui-toolbar-separator"}),t.iconlist=s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui",style:{float:"left",width:"200px",height:"100%",border:"none",margin:"3px"}}),s.tgui.createElement({type:"div",parent:t.toolbar,classname:"tgui tgui-control tgui-toolbar-separator"}),n["documentation-button"]&&(s.tgui.createButton({click:()=>h(""),text:"documentation",parent:t.toolbar,style:{position:"absolute",right:"0px"}}),s.tgui.setHotkey("F1",(function(){let e=M("open documentation",{width:"calc(max(300px, 20vw))",height:"calc(max(150px, 15vh))"}),n=t.sourcecode.getSelection();if(!n){let e=t.sourcecode.getCursor(),r=t.sourcecode.findWordAt(e);n=t.sourcecode.getRange(r.anchor,r.head)}n=n.substr(0,30);let r=n.match(/[a-z]+/gi),i="";r&&(i="#search/"+r.join("/")),s.tgui.createElement({parent:e,type:"div",style:{"margin-top":"20px"},text:"Open the documentation in another tab?"}),r&&s.tgui.createElement({parent:e,type:"div",style:{"margin-top":"10px"},text:'Search for "'+r.join(" ")+'"?'});let a=s.tgui.createElement({parent:e,type:"button",style:{position:"absolute",right:"120px",bottom:"10px",width:"100px",height:"25px"},text:"Okay",classname:"tgui-dialog-button"});a.addEventListener("click",(t=>(s.tgui.stopModal(),t.preventDefault(),t.stopPropagation(),h(i),!1))),s.tgui.createElement({parent:e,type:"button",style:{position:"absolute",right:"10px",bottom:"10px",width:"100px",height:"25px"},text:"Cancel",classname:"tgui-dialog-button"}).addEventListener("click",O(null)),s.tgui.startModal(e),a.focus()})));let a=s.tgui.createElement({type:"div",parent:t.main,classname:"ide ide-panel-area"});s.tgui.preparePanels(a,t.iconlist);let l=s.tgui.createPanel({title:"editor",state:"left",fallbackState:"float",dockedheight:600,onArrange:function(){t.sourcecode&&t.sourcecode.refresh()},icondraw:function(t){let e=t.getContext("2d");_(e),e.fillStyle="#777",e.fillRect(10,5,3,1),e.fillRect(10,7,2,1),e.fillRect(7,9,4,1),e.fillRect(6,11,7,1),e.fillRect(9,13,4,1)}});l.textarea=s.tgui.createElement({type:"textarea",parent:l.content,classname:"ide ide-sourcecode"}),t.sourcecode=u.fromTextArea(l.textarea,{gutters:["CodeMirror-linenumbers","breakpoints"],lineNumbers:!0,matchBrackets:!0,styleActiveLine:!0,mode:"text/tscript",indentUnit:4,tabSize:4,indentWithTabs:!0,extraKeys:{"Ctrl-D":"toggleComment","Cmd-D":"toggleComment","Ctrl-R":"replace",F3:"findNext","Shift-F3":"findPrev","Ctrl-Up":"scrollUp","Ctrl-Down":"scrollDown","Shift-Tab":"unindent"}}),t.sourcecode.on("change",(function(e,n){t.document.dirty=!0,t.interpreter&&(w(),b())})),t.sourcecode.on("gutterClick",(function(e,n){if(t.interpreter){let r=t.interpreter.toggleBreakpoint(n+1);null!==r&&(n=r.line,e.setGutterMarker(n-1,"breakpoints",r.active?i():null),t.sourcecode.scrollIntoView({line:n},40))}else e.setGutterMarker(n,"breakpoints",e.lineInfo(n).gutterMarkers?null:i())})),t.editor_title=l.titlebar;let c=s.tgui.createPanel({title:"messages",state:"left",dockedheight:200,icondraw:function(t){let e=t.getContext("2d");e.fillStyle="#fff",e.strokeStyle="#222",e.beginPath(),e.ellipse(9.5,8.5,7,6,0,.73*Math.PI,2.57*Math.PI,!1),e.lineTo(4.5,17),e.closePath(),e.fill(),e.stroke(),e.fillStyle="#777",e.fillRect(8,6,3,1),e.fillRect(6,8,2,1),e.fillRect(9,8,5,1),e.fillRect(7,10,4,1)}});t.messagecontainer=s.tgui.createElement({type:"div",parent:c.content,classname:"ide ide-messages"}),t.messages=s.tgui.createElement({type:"table",parent:t.messagecontainer,classname:"ide",style:{width:"100%"}});let d=s.tgui.createPanel({title:"stack",state:"icon",fallbackState:"right",icondraw:function(t){let e=t.getContext("2d");e.strokeStyle="#222",e.lineWidth=.6,e.fillStyle="#fff",e.beginPath(),e.moveTo(4,5.5),e.lineTo(10,8.5),e.lineTo(16,5.5),e.lineTo(10,2.5),e.fill(),e.fillStyle="#bbb",e.beginPath(),e.moveTo(4,5.5),e.lineTo(4,14.5),e.lineTo(10,17.5),e.lineTo(10,8.5),e.fill(),e.fillStyle="#999",e.beginPath(),e.moveTo(10,17.5),e.lineTo(16,14.5),e.lineTo(16,5.5),e.lineTo(10,8.5),e.fill();for(let t=8;t<17;t+=3)e.beginPath(),e.moveTo(3,t+.5),e.lineTo(10,t+3.5),e.lineTo(17,t+.5),e.stroke();e.beginPath(),e.moveTo(3.5,5.3),e.lineTo(3.5,5.7),e.lineTo(10,8.5),e.lineTo(16.5,5.7),e.lineTo(16.5,5.3),e.lineTo(10,2.5),e.closePath(),e.stroke()}});t.stacktree=s.tgui.createTreeControl({parent:d.content});let m=s.tgui.createPanel({title:"program",state:"icon",fallbackState:"right",icondraw:function(t){let e=t.getContext("2d");e.fillStyle="#eeeeeec0",e.moveTo(3,2),e.lineTo(13,2),e.lineTo(13,5),e.lineTo(15,5),e.lineTo(15,8),e.lineTo(17,8),e.lineTo(17,12),e.lineTo(13,12),e.lineTo(13,14),e.lineTo(15,14),e.lineTo(15,18),e.lineTo(5,18),e.lineTo(5,15),e.lineTo(3,15),e.lineTo(3,11),e.lineTo(7,11),e.lineTo(7,9),e.lineTo(5,9),e.lineTo(5,6),e.lineTo(3,6),e.fill(),e.fillStyle="#000",e.fillRect(4,3,8,2),e.fillRect(6,6,8,2),e.fillRect(8,9,8,2),e.fillRect(4,12,8,2),e.fillRect(6,15,8,2)}});t.programtree=s.tgui.createTreeControl({parent:m.content,nodeclick:function(t,e,n){e.where&&f(e.where.line,e.where.ch)}});let g=s.tgui.createPanel({title:"turtle",state:"right",fallbackState:"float",icondraw:function(t){let e=t.getContext("2d");e.fillStyle="#2c3",e.strokeStyle="#070",e.beginPath(),e.ellipse(9.5,5,2,2.5,0,0*Math.PI,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke(),e.lineWidth=1.6,e.beginPath(),e.moveTo(3.5,6),e.lineTo(9.5,11),e.lineTo(15.5,6),e.stroke(),e.beginPath(),e.moveTo(4.5,17),e.lineTo(9.5,10),e.lineTo(14.5,17),e.stroke(),e.lineWidth=1.3,e.beginPath(),e.moveTo(9.5,17),e.lineTo(8.5,19),e.stroke(),e.lineWidth=1,e.beginPath(),e.ellipse(9.5,11.5,4,5,0,0*Math.PI,2*Math.PI,!1),e.closePath(),e.fill(),e.stroke(),e.strokeStyle="#0709",e.beginPath(),e.ellipse(8.7,10.7,4,5,0,-.3*Math.PI,.8*Math.PI,!1),e.stroke()}});t.turtle=s.tgui.createElement({type:"canvas",parent:g.content,properties:{width:600,height:600},classname:"ide ide-turtle"}),t.turtle.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1}));let y=function(){let e=t.turtle.parentElement.offsetWidth,n=t.turtle.parentElement.offsetHeight,r=Math.min(e,n);t.turtle.style.width=r+"px",t.turtle.style.height=r+"px",t.turtle.style.marginLeft=(e>r?Math.floor((e-r)/2):0)+"px",t.turtle.style.marginTop=(n>r?Math.floor((n-r)/2):0)+"px"};function v(e,n){if(!t.interpreter)throw new Error("[createTypedEvent] internal error");let r=t.interpreter.program;for(let i=10;i<r.types.length;i++){let a=r.types[i];if(a.displayname===e){let e={type:a,value:{a:[]}},i={type:r.types[t.typeid_null],value:{b:null}};for(let t=0;t<a.objectsize;t++)e.value.a.push(i);for(let r in a.members)n.hasOwnProperty(r)&&(e.value.a[a.members[r].id]=o.TScript.json2typed.call(t.interpreter,n[r]));return e}}throw new Error("[createTypedEvent] unknown type "+e)}g.onArrange=y,g.onResize=y;let T=s.tgui.createPanel({title:"canvas",state:"icon",fallbackState:"right",onResize:function(e,n){if(!t.hasOwnProperty("standalone")&&t.canvas&&(t.canvas.width=e,t.canvas.height=n),t.interpreter){let r={width:e,height:n};r=v("canvas.ResizeEvent",r),t.interpreter.enqueueEvent("canvas.resize",r)}},icondraw:function(t){let e=t.getContext("2d");e.fillStyle="#333",e.fillRect(3,2,14,16),e.fillStyle="#fff",e.fillRect(4,3,12,14),e.fillStyle="#00c8",e.strokeStyle="#00cc",e.beginPath(),e.rect(5.5,5.5,6,6),e.fill(),e.stroke(),e.fillStyle="#c008",e.strokeStyle="#c00c",e.beginPath(),e.arc(11,11,3.5,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}});function k(t){return 0===t?"left":1===t?"middle":"right"}function S(t){let e=new Array;return 1&t&&e.push("left"),4&t&&e.push("middle"),2&t&&e.push("right"),e}t.canvas=s.tgui.createElement({type:"canvas",parent:T.content,properties:{width:T.content.clientWidth,height:T.content.clientHeight},classname:"ide ide-canvas"}),t.canvas.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),T.content.tabIndex=-1,T.size=[0,0];let C=t.canvas.getContext("2d");C.lineWidth=1,C.fillStyle="#000",C.strokeStyle="#000",C.font="16px Helvetica",C.textAlign="left",C.textBaseline="top",t.canvas.addEventListener("mousedown",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={button:k(e.button),buttons:S(e.buttons),shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey};n=Object.assign(n,p(t.canvas,e.pageX,e.pageY)),n=v("canvas.MouseButtonEvent",n),t.interpreter.enqueueEvent("canvas.mousedown",n)})),t.canvas.addEventListener("mouseup",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={button:k(e.button),buttons:S(e.buttons),shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey};n=Object.assign(n,p(t.canvas,e.pageX,e.pageY)),n=v("canvas.MouseButtonEvent",n),t.interpreter.enqueueEvent("canvas.mouseup",n)})),t.canvas.addEventListener("mousemove",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={button:0,buttons:S(e.buttons),shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey};n=Object.assign(n,p(t.canvas,e.pageX,e.pageY)),n=v("canvas.MouseMoveEvent",n),t.interpreter.enqueueEvent("canvas.mousemove",n)})),t.canvas.addEventListener("mouseout",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={type:t.interpreter.program.types[t.typeid_null],value:{b:null}};t.interpreter.enqueueEvent("canvas.mouseout",n)})),T.content.addEventListener("keydown",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={key:e.key,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey};n=v("canvas.KeyboardEvent",n),t.interpreter.enqueueEvent("canvas.keydown",n)})),T.content.addEventListener("keyup",(function(e){if(!t.interpreter||!t.interpreter.background||"running"!=t.interpreter.status&&"waiting"!=t.interpreter.status)return;let n={key:e.key,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey};n=v("canvas.KeyboardEvent",n),t.interpreter.enqueueEvent("canvas.keyup",n)})),s.tgui.arrangePanels(),t.sourcecode.focus()},t}(),window.onbeforeunload=function(t){String(document.title).startsWith("TScript IDE")&&(t.preventDefault(),t.returnValue="")}},7968:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleCanvas=e.handleTurtle=void 0;const r=n(7431),i=n(4012);e.handleTurtle=function(){i.tgui.releaseAllHotkeys(),r.ide.turtle.parentNode.removeChild(r.ide.turtle),document.body.innerHTML="",document.body.appendChild(r.ide.turtle),r.ide.turtle.style.width="100vh",r.ide.turtle.style.height="100vh"},e.handleCanvas=function(){i.tgui.releaseAllHotkeys();let t=r.ide.canvas.parentNode;t.parentNode.removeChild(t),document.body.innerHTML="",document.body.appendChild(t),t.style.width="100vw",t.style.height="100vh",t.style.top="0px",setTimeout((()=>{t.width=250,t.height=250}),100)}},4012:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tgui=void 0;var r=n(8496);e.tgui=function(){let t={},n={},i=null;function a(e,n,r){let i=document.createElement(e);if(r&&(i.className=r),n.hasOwnProperty("id")&&(i.id=n.id),n.hasOwnProperty("properties"))for(let t in n.properties)n.properties.hasOwnProperty(t)&&(i[t]=n.properties[t]);if(n.hasOwnProperty("style"))for(let t in n.style)n.style.hasOwnProperty(t)&&(i.style[t]=n.style[t]);if(n.hasOwnProperty("text")&&i.appendChild(document.createTextNode(n.text)),n.hasOwnProperty("html")&&(i.innerHTML+=n.html),n.hasOwnProperty("tooltip")?t.setTooltip(i,n.tooltip):n.hasOwnProperty("tooltip-right")&&t.setTooltip(i,n["tooltip-right"],"right"),n.hasOwnProperty("click")&&(i.addEventListener("click",n.click),i.style.cursor="pointer"),n.hasOwnProperty("dblclick")&&i.addEventListener("dblclick",n.dblclick),n.hasOwnProperty("event"))for(let t in n.event)n.event.hasOwnProperty(t)&&i.addEventListener(t,n.event[t]);return n.parent&&n.parent.appendChild(i),i}function o(t,e,n,r){if(0==t.length)return;const i=100;let a=0;for(let e=0;e<t.length;e++){let n=t[e];a+=Math.max(i,n.dockedheight)}let o=a-i*t.length,s=r-i*t.length,l=0;for(let r=0;r<t.length;r++){let a=t[r],c=a.dockedheight-i,d=0==o?Math.round(s/t.length):Math.round(s*c/o);d<0&&(d=0);let p=i+d;a.dom.style.left=e+"px",a.dom.style.top=l+"px",a.dom.style.width=n+"px",a.dom.style.height=p+"px",a.pos=[e,l],a.size[0]==n&&a.size[1]==p||(a.size=[n,p],a.dockedheight=p,a.onResize(n,Math.max(0,p-22))),a.onArrange(),l+=p}}t.normalizeHotkey=function(t){let e=t.lastIndexOf("-")+1,n=t.substr(e);return 1==n.length?t.substr(0,e)+n.toLowerCase():t},t.hotkey=function(e){return n.hasOwnProperty(t.normalizeHotkey(e))},t.setHotkey=function(e,r){if(e){if(e=t.normalizeHotkey(e),n.hasOwnProperty(e))throw"[tgui.setHotkey] hotkey conflict; key '"+e+"' is already taken";n[e]=r}},t.releaseHotkey=function(e){e&&delete n[t.normalizeHotkey(e)]},t.releaseAllHotkeys=function(){n={}},t.setHotkeyElement=function(t){i=t},t.setTooltip=function(t,e="",n="left"){let r=t.getElementsByClassName("tgui-tooltip");for(let e=0;e<r.length;e++)t.removeChild(r[e]);a("div",{parent:t,text:e},"tgui tgui-tooltip tgui-tooltip-"+n)},t.clearElement=function(t){t.innerHTML=""},t.createText=function(t,e=null){let n=document.createTextNode(t);return e&&e.appendChild(n),n},t.createElement=function(t){return a(t.type,t,t.classname)},t.createLabel=function(e){return{dom:a("span",e,"tgui tgui-control tgui-label"),setText:function(e){return t.clearElement(this.dom),t.createText(e,this.dom),this},setBackground:function(t){return this.dom.style.background=t,this}}},t.createCanvasIcon=function(e){let n={display:"block",width:e.width+"px",height:e.height+"px"};e.hasOwnProperty("style")&&Object.assign(n,e.style);let r=t.createElement({type:"canvas",parent:e.parent,classname:"tgui",style:n});return r.width=e.width,r.height=e.height,r.width*=2,r.height*=2,r.getContext("2d").scale(2,2),e.draw(r),r},t.createButton=function(e){let n=a("button",e,"tgui tgui-control tgui-button"+(e.text?"-text":"-canvas")+(e.classname?" "+e.classname:""));if(e.draw)t.createCanvasIcon({parent:n,draw:e.draw,width:e.width,height:e.height});else if(!e.text)throw"[tgui.createButton] either .text or .draw are required";return t.setHotkey(e.hotkey,e.click),{dom:n}},t.createTreeControl=function(e){let n=a("div",e,"tgui tgui-control tgui-tree"),r={value:null,id:"",open:!0,expanded:!1,main:n,childrows:[],toggle:null,element:null,children:[]},i={dom:n,info:e.info?e.info:null,update:null,value:null,state:r,visible:null,numberOfNodes:0,nodeclick:e.nodeclick?e.nodeclick:null,element2state:{},id2state:{},id2open:{}};function o(t){t.element&&(this.element2state[t.element.id]=t),t.id&&(this.id2state[t.id]=t);for(let e=0;e<t.children.length;e++)o.call(this,t.children[e])}function s(e,n){for(let r=0;r<n.children.length;r++){let i=n.children[r],a=n.ids[r],o=l.call(this,i,a);if(e.children.push(o),null===e.value)e.main.appendChild(o.main);else{let n=t.createElement({type:"tr",parent:e.main,classname:"tgui"});t.createElement({type:"td",parent:n,classname:"tgui tgui-tree-cell-toggle"}),t.createElement({type:"td",parent:n,classname:"tgui tgui-tree-cell-content"}).appendChild(o.main),e.childrows.push(n)}}e.expanded=!0}function l(e,n){let r=this.info(e,n),a={value:e,id:n,open:null===e||(this.id2open.hasOwnProperty(n)?this.id2open[n]:r.opened),expanded:!1,main:null===e?this.dom:t.createElement({type:"table",classname:"tgui tgui-tree-main"}),childrows:[],toggle:null===e?null:t.createElement({type:"div",classname:"tgui tgui-tree-toggle"}),element:null===e?null:r.element,children:[]};if(null!==e){let e=t.createElement({type:"tr",parent:a.main,classname:"tgui"}),n=t.createElement({type:"td",parent:e,classname:"tgui tgui-tree-cell-toggle"}),l=t.createElement({type:"td",parent:e,classname:"tgui tgui-tree-cell-content"});n.appendChild(a.toggle),l.appendChild(a.element),a.element.id="tgui.id."+(Math.random()+1),a.element.className="tgui tgui-tree-element";let c=r.children.length>0?a.open?"▾":"▸":"▫";a.toggle.innerHTML=c,r.children.length>0&&(n.style.cursor="pointer",n.addEventListener("click",(function(t){let e=this.parentNode.childNodes[1].childNodes[0],n=i.element2state[e.id];if(n.open)for(let t=0;t<n.childrows.length;t++)n.childrows[t].className="tgui tgui-hidden";else{if(!n.expanded){let t=i.info(n.value,n.id);s.call(i,n,t),o.call(i,n)}for(let t=0;t<n.childrows.length;t++)n.childrows[t].className="tgui"}n.open=!n.open,i.id2open[n.id]=n.open;let r=n.open?"▾":"▸";n.toggle.innerHTML=r}))),this.nodeclick&&(l.style.cursor="pointer",l.addEventListener("click",(function(t){let e=this.childNodes[0],n=i.element2state[e.id];i.nodeclick(t,n.value,n.id)})))}return r.visible&&(this.visible=this.numberOfNodes),this.numberOfNodes++,a.open&&(s.call(this,a,r),a.expanded=!0),a}return i.update=function(e){this.info=e,this.visible=null,this.numberOfNodes=0,t.clearElement(this.dom),this.state=l.call(this,null,""),this.element2state={},this.id2state={},o.call(this,this.state),null!==this.visible&&window.setTimeout((function(){let t=i.dom.clientHeight,e=i.dom.scrollHeight*i.visible/i.numberOfNodes;(e<i.dom.scrollTop+.1*t||e>=i.dom.scrollTop+.9*t)&&(e-=.666*t,e<0&&(e=0),i.dom.scrollTop=e)}),0)},i.value=function(t){if(!this.element2state.hasOwnProperty(t.id))throw"[tgui TreeControl.get] unknown element";return this.element2state[t.id].value},i.info&&i.update.call(i,i.info),i},t.panels=[],t.panels_left=[],t.panels_right=[],t.panels_float=[],t.panel_max=null,t.panelcontainer=null,t.iconcontainer=null,t.savePanelData=function(){let e={};for(let n=0;n<t.panels.length;n++){let r=t.panels[n],i={};i.state=r.state,i.fallbackState=r.fallbackState,i.pos=r.pos,i.size=r.size,i.floatingpos=r.floatingpos,i.floatingsize=r.floatingsize,i.dockedheight=r.dockedheight,e[r.title]=i}localStorage.setItem("tgui.panels",JSON.stringify(e))},t.preparePanels=function(e,n){t.panelcontainer=e,t.iconcontainer=n};let s=0,l=0,c=(new Date).getTime();t.arrangePanels=function(){(new Date).getTime()<c||(c=(new Date).getTime()+200,window.setTimeout((function(){c-=200,function(){if(!t.panelcontainer)return;let e=t.panelcontainer.clientWidth,n=t.panelcontainer.clientHeight;s=e,l=n;let r=Math.round(.6*e),i=e-r;if(t.panel_max){let r=t.panel_max,i=[e,n],a=i[0]!=r.size[0]||i[1]!=r.size[1];r.pos=[0,0],a&&(r.size=i,r.dom.style.width=i[0]+"px",r.dom.style.height=i[1]+"px",r.onResize(r.size[0],Math.max(0,r.size[1]-22))),r.onArrange()}for(let r=0;r<t.panels_float.length;r++){let i=t.panels_float[r],a=i.floatingpos[0],o=i.floatingpos[1],s=i.floatingsize[0],l=i.floatingsize[1];s>=e?(a=0,s=e):a+s>=e&&(a=e-s),l>=n?(o=0,l=n):o+l>=n&&(o=n-l),a==i.pos[0]&&o==i.pos[1]||(i.dom.style.left=a+"px",i.dom.style.top=o+"px",i.pos=[a,o],i.floatingpos=i.pos),s==i.size[0]&&l==i.size[1]||(i.size=[s,l],i.floatingsize=i.size,i.dom.style.width=s+"px",i.dom.style.height=l+"px",i.onResize(s,Math.max(0,l-22))),i.onArrange()}o(t.panels_left,0,t.panels_right.length>0?r:e,n),o(t.panels_right,t.panels_left.length>0?r:0,t.panels_left.length>0?i:e,n),t.savePanelData()}()}),200))},window.addEventListener("resize",t.arrangePanels),window.setTimeout((function e(){if(t.panelcontainer){let e=t.panelcontainer.clientWidth,n=t.panelcontainer.clientHeight;0!=e&&0!=n&&(e==s&&n==l||t.arrangePanels())}window.setTimeout(e,200)}),1e3);let d=1;t.createPanel=function(n){let i=function(t){let e=localStorage.getItem("tgui.panels");if(e){let n=JSON.parse(e);if(n.hasOwnProperty(t))return n[t]}return null}(n.title);i?(n.pos=i.pos,n.size=i.size,n.floatingpos=i.floatingpos,n.floatingsize=i.floatingsize,n.dockedheight=i.dockedheight,n.state=i.state,n.fallbackState=i.fallbackState):(n.hasOwnProperty("floatingpos")||(n.floatingpos=[100+20*t.panels.length,100+10*t.panels.length]),n.hasOwnProperty("floatingsize")||(n.floatingsize=[400,250]),n.hasOwnProperty("dockedheight")||(n.dockedheight=200),n.hasOwnProperty("state")||(n.state="float"),n.hasOwnProperty("fallbackState")||(n.fallbackState="float"),n.pos=n.floatingpos,n.size=n.floatingsize,!n.hasOwnProperty("dockedheight")||"left"!=n.state&&"right"!=n.state||(n.size[1]=n.dockedheight));let a=Object.assign({},n);a.state="disabled";let s=e.tgui.createElement({type:"div",classname:"tgui-panel-container"});a.dom=s,a.panelID=d,d++,a.hasOwnProperty("icondraw")||(a.icondraw=function(t){let e=t.getContext("2d");e.lineWidth=1,e.fillStyle="#fff",e.fillRect(2.5,2.5,15,15),e.strokeStyle="#000",e.beginPath(),e.rect(2.5,2.5,15,15),e.fillStyle="#00c",e.fillRect(2.5,2.5,15,3),e.stroke()}),t.panels.push(a),a.titlebar_container=e.tgui.createElement({type:"div",parent:s,classname:"tgui tgui-panel-titlebar"}),a.titlebar_icon=e.tgui.createCanvasIcon({parent:a.titlebar_container,draw:a.icondraw,width:20,height:20,style:{left:"1px",top:"1px",cursor:"pointer"}}),a.titlebar_icon.addEventListener("dblclick",(function(t){return a.dock("icon"),!1})),a.titlebar=e.tgui.createElement({type:"span",dblclick:function(t){return a.dock("max"==a.state?a.fallbackState:"max"),!1},parent:a.titlebar_container,text:a.title,classname:"tgui-panel-titlebar-title"}),a.button_left=e.tgui.createButton({click:function(){return a.dock("left"),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=1,e.strokeStyle="#666",e.beginPath(),e.rect(2.5,2.5,13,13),e.stroke(),e.fillStyle="#fff",e.fillRect(2.5,2.5,7,13),e.strokeStyle="#000",e.beginPath(),e.rect(2.5,2.5,7,13),e.fillStyle="#00c",e.fillRect(2.5,2.5,7,3),e.stroke()},parent:a.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"dock left"}),a.button_right=e.tgui.createButton({click:function(){return a.dock("right"),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=1,e.strokeStyle="#666",e.beginPath(),e.rect(2.5,2.5,13,13),e.stroke(),e.fillStyle="#fff",e.fillRect(8.5,2.5,7,13),e.strokeStyle="#000",e.beginPath(),e.rect(8.5,2.5,7,13),e.fillStyle="#00c",e.fillRect(8.5,2.5,7,3),e.stroke()},parent:a.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"dock right"}),a.button_max=e.tgui.createButton({click:function(){return a.dock("max"),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=1,e.fillStyle="#fff",e.fillRect(2.5,2.5,13,13),e.strokeStyle="#000",e.beginPath(),e.rect(2.5,2.5,13,13),e.fillStyle="#00c",e.fillRect(2.5,2.5,13,3),e.stroke()},parent:a.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"maximize"}),a.button_float=e.tgui.createButton({click:function(){return a.dock("float"),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=1,e.strokeStyle="#666",e.beginPath(),e.rect(2.5,2.5,13,13),e.stroke(),e.fillStyle="#fff",e.fillRect(4.5,5.5,9,8),e.strokeStyle="#000",e.beginPath(),e.rect(4.5,5.5,9,8),e.fillStyle="#00c",e.fillRect(4.5,5.5,9,3),e.stroke()},parent:a.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"floating"}),a.button_icon=e.tgui.createButton({click:function(t){return a.dock("icon"),!1},width:20,height:20,draw:function(t){let e=t.getContext("2d");e.lineWidth=2.5,e.strokeStyle="#000",e.beginPath(),e.moveTo(3,14.5),e.lineTo(15,14.5),e.stroke()},parent:a.titlebar_container,classname:"tgui-panel-dockbutton","tooltip-right":"minimize"}),a.content=e.tgui.createElement({type:"div",parent:s,classname:"tgui tgui-panel-content"}),a.icon=e.tgui.createButton({click:function(){return a.dock(a.fallbackState),!1},width:20,height:20,draw:a.icondraw,tooltip:a.title,style:{margin:"0 0 0 1px",padding:0,width:"22px",height:"22px"}});let l=a.icon.dom;a.hasOwnProperty("onResize")||(a.onResize=function(t,e){}),a.hasOwnProperty("onArrange")||(a.onArrange=function(){});var c=function(e){"float"==a.state&&t.panelcontainer.lastChild!==s&&t.panelcontainer.appendChild(s)};return s.addEventListener("focusin",c),s.addEventListener("mousedown",c),a.dock=function(e,n=!1){if(!n){if(e==this.state)return;r(s).unset(),s.style.zIndex=0,l.parentNode&&l.parentNode.removeChild(l),s.parentNode&&s.parentNode.removeChild(s),"left"==this.state&&t.panels_left.splice(t.panels_left.indexOf(this),1),"right"==this.state&&t.panels_right.splice(t.panels_right.indexOf(this),1),"float"==this.state&&t.panels_float.splice(t.panels_float.indexOf(this),1),t.panel_max==this&&(t.panel_max=null),s.classList.remove("tgui-panel-float")}if("left"==e){t.panelcontainer.appendChild(s),s.style.position="absolute",s.style.left=0,s.style.top=0,s.style.width="60%",s.style.height="100%",s.style.zIndex=0,this.fallbackState=e,t.panels_left.push(this),t.panels_left.sort((function(t,e){return t.panelID-e.panelID}));let n=this;r(s).resizable({edges:{bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{height:100}},inertia:!1,onmove:function(e){if(t.panels_left[t.panels_left.length-1]==n)return;a.dockedheight=e.rect.height;let r=t.panelcontainer.clientWidth,i=t.panelcontainer.clientHeight,s=Math.round(.6*r);o(t.panels_left,0,s,i),t.savePanelData()}})}else if("right"==e){t.panelcontainer.appendChild(s),s.style.position="absolute",s.style.left="60%",s.style.top=0,s.style.width="40%",s.style.height="100%",s.style.zIndex=0,this.fallbackState=e,t.panels_right.push(this),t.panels_right.sort((function(t,e){return t.panelID-e.panelID}));let n=this;r(s).resizable({edges:{bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{height:100}},inertia:!1,onmove:function(e){if(t.panels_right[t.panels_right.length-1]==n)return;a.dockedheight=e.rect.height;let r=t.panelcontainer.clientWidth,i=t.panelcontainer.clientHeight,s=Math.round(.6*r),l=r-s;o(t.panels_right,s,l,i),t.savePanelData()}})}else if("max"==e)t.panel_max&&t.panel_max.dock(t.panel_max.fallbackState),t.panelcontainer.appendChild(s),s.style.position="absolute",s.style.left=0,s.style.top=0,s.style.width="100%",s.style.height="100%",s.style.zIndex=2,t.panel_max=this;else if("float"==e){t.panelcontainer.appendChild(s),s.style.position="absolute",s.style.left=this.pos[0]+"px",s.style.top=this.pos[1]+"px",s.style.width=this.size[0]+"px",s.style.height=this.size[1]+"px",s.style.zIndex=1,this.fallbackState=e,t.panels_float.push(this),s.classList.add("tgui-panel-float");var i=function(t){if("float"==a.state){let e=a.pos[0]+t.dx,n=a.pos[1]+t.dy;s.style.left=e+"px",s.style.top=n+"px",a.pos=[e,n],a.floatingpos=[e,n]}};r(s).draggable({inertia:!1,allowFrom:".tgui-panel-titlebar-title",restrict:{restriction:"parent",endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!1,onmove:i,onend:i}).resizable({edges:{right:!0,bottom:!0},restrictEdges:{outer:"parent",endOnly:!1},restrictSize:{min:{width:250,height:100}},inertia:!1,onmove:function(t){let e=t.rect.width,n=t.rect.height;s.style.width=e+"px",s.style.height=n+"px",a.size=[e,n],"float"==a.state?a.floatingsize=[e,n]:"left"!=a.state&&"right"!=a.state||(a.dockedheight=n),a.onResize(e,Math.max(0,n-22))}})}else if("icon"==e)"disabled"!=a.state&&(a.fallbackState=a.state),t.iconcontainer.appendChild(a.icon.dom);else if("disabled"!=e)throw"[createPanel] invalid state: "+e;a.state=e,t.arrangePanels(),n&&a.onResize(a.size[0],Math.max(0,a.size[1]-22))},"disabled"!=n.state&&a.dock(n.state,!0),a};let p=t.createElement({type:"div",id:"tgui-separator",classname:"tgui tgui-separator",click:function(t){return!1}}),u=new Array;return t.startModal=function(t){0==u.length?document.body.appendChild(p):u[u.length-1].style.zIndex=0,t.style.display="block",t.style.zIndex=100,t.className+=" tgui tgui-modal",document.body.appendChild(t),u.push(t)},t.stopModal=function(){if(0==u.length)throw"[tgui.stopModel] no modal dialog to close";let t=u.pop();document.body.removeChild(t),0==u.length?document.body.removeChild(p):u[u.length-1].style.zIndex=100},document.addEventListener("keydown",(function(e){if(u.length>0){let t=u[u.length-1];if(t.hasOwnProperty("onKeyDown"))return t.onKeyDown(e),!1}else{if(i&&(0==(r=i.getBoundingClientRect()).width||0==r.height||r.top>=(window.innerHeight||document.documentElement.clientHeight)||r.bottom<0||r.left>=(window.innerWidth||document.documentElement.clientWidth)||r.right<0))return!0;let a=e.key;if(e.altKey&&(a="alt-"+a),e.ctrlKey&&(a="control-"+a),e.shiftKey&&(a="shift-"+a),a=t.normalizeHotkey(a),n.hasOwnProperty(a))return n[a](e),e.preventDefault(),e.stopPropagation(),!1}var r;return!0})),t}()},7567:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.Options=void 0;class n{constructor(){this.checkstyle=!1,this.maxstacksize=1e4}}e.Options=n,e.defaultOptions=new n},4449:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recApply=void 0;const r=n(4672);e.recApply=function(t,e,n){return function t(i,a){if(i.type.id===r.Typeid.typeid_array){if(a.has(i))throw"recursive data structure";let e=new Set(a);e.add(i);let r=Array();for(let n=0;n<i.value.b.length;n++){let a=t.call(this,i.value.b[n],e);r.push(a)}return n.call(this,r)}if(i.type.id===r.Typeid.typeid_dictionary){if(a.has(i))throw"recursive data structure";let e=new Set(a);e.add(i);let r={};for(let n in i.value.b){if(!i.value.b.hasOwnProperty(n))continue;let a=t.call(this,i.value.b[n],e);r[n]=a}return n.call(this,r)}return e.call(this,i)}.call(this,t,new Set)}},9164:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simtrue=e.simfalse=void 0,e.simfalse=function(){return!1},e.simtrue=function(){return!0}},4672:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.Typeid=void 0,(n=e.Typeid||(e.Typeid={}))[n.typeid_null=0]="typeid_null",n[n.typeid_boolean=1]="typeid_boolean",n[n.typeid_integer=2]="typeid_integer",n[n.typeid_real=3]="typeid_real",n[n.typeid_string=4]="typeid_string",n[n.typeid_array=5]="typeid_array",n[n.typeid_dictionary=6]="typeid_dictionary",n[n.typeid_function=7]="typeid_function",n[n.typeid_range=8]="typeid_range",n[n.typeid_type=9]="typeid_type",n[n.typeid_class=10]="typeid_class"},3607:(t,e,n)=>{"use strict";const r=n(7431),i=n(9091),a=n(7968);n(9186),n(6871),n(6404),n(648),window.addEventListener("load",(function(t){let e=document.getElementById("ide-container");e.innerHTML="";let n=window;if(void 0!==n.TScript){let t=n.TScript;switch(r.ide.standalone=!0,r.ide.create(e),r.ide.sourcecode.setValue(t.code),r.ide.prepare_run(),t.mode){case"canvas":a.handleCanvas();break;case"turtle":a.handleTurtle()}r.ide.interpreter.run()}else switch(window.location.search.slice(1)){case"doc":i.doc.create(e);break;case"run":fetch(decodeURI(window.location.hash.slice(1))).then((t=>t.text().then((t=>{r.ide.create(e),r.ide.sourcecode.setValue(t)})))).catch((t=>{r.ide.create(e),r.ide.sourcecode.setValue(t)}));break;default:r.ide.create(e)}}),!1)},4043:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultService=e.fakeLocalStorage=void 0;let n="undefined"==typeof window?void 0:window.AudioContext||window.webkitAudioContext;e.fakeLocalStorage={map:new Map,keys:function(){let t,e=new Array,n=this.map.keys();for(;!(t=n.next()).done;)e.push(t.value);return e},setItem:function(t,e){this.map.set(t,e)},getItem:function(t){let e=this.map.get(t);return void 0===e?null:e}},e.defaultService={turtle:{x:0,y:0,angle:0,down:!0,rgb:"rgb(0,0,0)",reset:function(t,e,n,r){this.turtle.x=t,this.turtle.y=e,this.turtle.angle=n,this.turtle.down=r,this.turtle.rgb="rgb(0,0,0)"},move:function(t){let e=Math.PI/180*this.turtle.angle,n=Math.sin(e),r=Math.cos(e),i=this.turtle.x+t*n,a=this.turtle.y+t*r;if(this.turtle.down&&this.turtle.dom){let t=this.turtle.dom.getContext("2d");t.lineWidth=1,t.strokeStyle=this.turtle.rgb,t.beginPath(),t.moveTo(300+3*this.turtle.x,300-3*this.turtle.y),t.lineTo(300+3*i,300-3*a),t.stroke()}this.turtle.x=i,this.turtle.y=a},turn:function(t){this.turtle.angle=(this.turtle.angle+t)%360},color:function(t,e,n){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),n<0?n=0:n>1&&(n=1),this.turtle.rgb="rgb("+Math.round(255*t)+","+Math.round(255*e)+","+Math.round(255*n)+")"},pen:function(t){this.turtle.down=t}},canvas:{font_size:16,width:function(){return this.canvas.dom?this.canvas.dom.width:0},height:function(){return this.canvas.dom?this.canvas.dom.height:0},setLineWidth:function(t){this.canvas.dom&&this.canvas.dom.getContext&&(this.canvas.dom.getContext("2d").lineWidth=t)},setLineColor:function(t,e,n,r){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let i=this.canvas.dom.getContext("2d"),a=Math.min(1,Math.max(0,t)),o=Math.min(1,Math.max(0,e)),s=Math.min(1,Math.max(0,n)),l=Math.min(1,Math.max(0,r));i.strokeStyle="rgba("+Math.round(255*a)+","+Math.round(255*o)+","+Math.round(255*s)+","+l+")"},setFillColor:function(t,e,n,r){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let i=this.canvas.dom.getContext("2d"),a=Math.min(1,Math.max(0,t)),o=Math.min(1,Math.max(0,e)),s=Math.min(1,Math.max(0,n)),l=Math.min(1,Math.max(0,r));i.fillStyle="rgba("+Math.round(255*a)+","+Math.round(255*o)+","+Math.round(255*s)+","+l+")"},setFont:function(t,e){this.canvas.dom&&this.canvas.dom.getContext&&(this.canvas.dom.getContext("2d").font=e+"px "+t,this.canvas.font_size=e)},setTextAlign:function(t){this.canvas.dom&&this.canvas.dom.getContext&&(this.canvas.dom.getContext("2d").textAlign=t)},clear:function(){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let t=this.canvas.dom.getContext("2d");t.setTransform(1,0,0,1,0,0),t.fillRect(0,0,this.canvas.dom.width,this.canvas.dom.height)},line:function(t,e,n,r){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let i=this.canvas.dom.getContext("2d");i.beginPath(),i.moveTo(t,e),i.lineTo(n,r),i.stroke()},rect:function(t,e,n,r){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let i=this.canvas.dom.getContext("2d");i.beginPath(),i.rect(t,e,n,r),i.stroke()},fillRect:function(t,e,n,r){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").fillRect(t,e,n,r)},frameRect:function(t,e,n,r){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let i=this.canvas.dom.getContext("2d");i.beginPath(),i.rect(t,e,n,r),i.fill(),i.stroke()},circle:function(t,e,n){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let r=this.canvas.dom.getContext("2d");r.beginPath(),r.arc(t,e,n,0,2*Math.PI,!1),r.stroke()},fillCircle:function(t,e,n){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let r=this.canvas.dom.getContext("2d");r.beginPath(),r.arc(t,e,n,0,2*Math.PI,!1),r.fill()},frameCircle:function(t,e,n){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let r=this.canvas.dom.getContext("2d");r.beginPath(),r.arc(t,e,n,0,2*Math.PI,!1),r.fill(),r.stroke()},curve:function(t,e){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let n=this.canvas.dom.getContext("2d");n.beginPath();let r=t.length;if(r>0){let e=t[0];n.moveTo(e[0],e[1]);for(let e=1;e<r;e++){let r=t[e];n.lineTo(r[0],r[1])}}e&&n.closePath(),n.stroke()},fillArea:function(t){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let e=this.canvas.dom.getContext("2d");e.beginPath();let n=t.length;if(n>0){let r=t[0];e.moveTo(r[0],r[1]);for(let r=1;r<n;r++){let n=t[r];e.lineTo(n[0],n[1])}}e.closePath(),e.fill()},frameArea:function(t){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let e=this.canvas.dom.getContext("2d");e.beginPath();let n=t.length;if(n>0){let r=t[0];e.moveTo(r[0],r[1]);for(let r=1;r<n;r++){let n=t[r];e.lineTo(n[0],n[1])}}e.closePath(),e.fill(),e.stroke()},text:function(t,e,n){if(!this.canvas.dom||!this.canvas.dom.getContext)return;let r=this.canvas.dom.getContext("2d");r.textBaseline="top";let i=n.split("\n");for(let n=0;n<i.length;n++)r.fillText(i[n],t,e),e+=this.canvas.font_size},reset:function(){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").setTransform(1,0,0,1,0,0)},shift:function(t,e){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").translate(t,e)},scale:function(t){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").scale(t,t)},rotate:function(t){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").rotate(t)},transform:function(t,e){this.canvas.dom&&this.canvas.dom.getContext&&this.canvas.dom.getContext("2d").transform(t[0][0],t[1][0],t[0][1],t[1][1],e[0],e[1])}},audioContext:void 0===n?void 0:new n,localStorage:"undefined"==typeof window||void 0===window.localStorage?e.fakeLocalStorage:window.localStorage}},6315:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interpreter=void 0;const r=n(9074),i=n(5882),a=n(3365),o=n(4672);e.Interpreter=class{constructor(t,e){this.thread=!1,this.stop=!1,this.background=!1,this.halt=null,this.status="",this.stack=[],this.breakpoints={},this.stepcounter=0,this.waittime=0,this.eventqueue=[],this.eventhandler={},this.eventnames={},this.eventmode=!1,this.hook=null,this.program=null,this.service=null,this.timerEventEnqueued=!1,this.program=t,this.service=e,this.options=t.options,this.thread=!0,setTimeout(this.chunk.bind(this),1)}chunk(){if(this.stop)return this.thread=!1,void(this.stop=!1);if("waiting"===this.status&&(new Date).getTime()>=this.waittime&&(this.status="running",this.service.statechanged&&this.service.statechanged(!1)),"running"===this.status){let t=(new Date).getTime();for(;this.background&&(new Date).getTime()-t<14&&"running"===this.status;)this.exec_step.bind(this)(),this.halt&&this.halt.call(this)&&(this.halt=null,this.background=!1,this.service.statechanged&&this.service.statechanged(!0));this.background&&!this.timerEventEnqueued&&(this.timerEventEnqueued=this.enqueueEvent("timer",{type:this.program.types[o.Typeid.typeid_null],value:{b:null}}))}"finished"!==this.status&&setTimeout(this.chunk.bind(this),1)}reset(){this.halt=null,this.background=!1,this.stack=[{pe:[this.program],ip:[0],temporaries:[],variables:[]}],this.status="running",this.service.statechanged&&this.service.statechanged(!1)}run(){"running"!==this.status&&"waiting"!==this.status||(this.background=!0,this.service.statechanged&&this.service.statechanged(!1))}interrupt(){this.halt=null,this.background=!1,this.service.statechanged&&this.service.statechanged(!0)}wait(t){return"running"===this.status&&(this.waittime=(new Date).getTime()+t,this.status="waiting",this.service.statechanged&&this.service.statechanged(!1),!0)}progress(){let t=this.stack.length;for(;this.stack.length>0;){let t=this.stack[this.stack.length-1];if(0!==t.ip.length){t.ip[t.ip.length-1]++;break}if(r.ErrorHelper.assert(0===t.temporaries.length,"[Interpreter.progress] temporaries stack is not empty at the end of the function scope"),this.stack.pop(),0===this.stack.length)break;this.stack[this.stack.length-1].temporaries.push({type:this.program.types[o.Typeid.typeid_null],value:{b:null}})}return t-this.stack.length}exec_step(){if("waiting"===this.status&&(new Date).getTime()>=this.waittime&&(this.status="running",this.service.statechanged&&this.service.statechanged(!1)),"running"===this.status){if(0===this.stack.length)return this.status="finished",void(this.service.statechanged&&this.service.statechanged(!0));if(this.hook)try{this.hook.call(this)}catch(t){console.log("[Interpreter] ignoring exception thrown by the hook")}try{let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];for(;this.stack.length>0&&("running"===this.status||"waiting"===this.status)&&(e.step.call(this,this.options)&&this.stepcounter++,this.progress.call(this),0!==this.stack.length)&&(t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],!e.sim.call(this)););}catch(t){if("Runtime Error"===t.name||"Parse Error"===t.name)this.halt=null,this.background=!1,this.service.message&&this.service.message("runtime error in line "+t.line+": "+t.message,t.line,t.ch,t.href),this.status="error",this.service.statechanged&&this.service.statechanged(!0);else{console.log("internal runtime error!"),console.log(t);let e=r.ErrorHelper.composeError("/internal/ie-2",[r.ErrorHelper.ex2string(t)]);this.service.message&&this.service.message(e,null,null,"#/errors/internal/ie-2"),this.halt=null,this.background=!1,this.status="error",this.service.statechanged&&this.service.statechanged(!0)}}}}step_into(){this.background||"running"!==this.status||(this.halt=function(){return!0},this.background=!0)}step_over(){if(this.background||"running"!==this.status)return;let t=this.stack.length;if(0===t)return this.halt=function(){return!0},void(this.background=!0);let e=this.stack[t-1],n=e.pe[e.pe.length-1],r=n.where?n.where.line:-1;this.halt=function(t,n){return function(){if(this.stack.length<t)return!0;if(this.stack.length===t){let t=e.pe[e.pe.length-1];if((t.where?t.where.line:-1)!==n)return!0}return!1}}(t,r),this.background=!0}step_out(){if(this.background||"running"!==this.status)return;let t=this.stack.length;this.halt=0===t?function(){return!0}:function(t){return function(){return this.stack.length<t}}(t),this.background=!0}stopthread(){this.stop=!0}enqueueEvent(t,e){return this.eventmode&&this.eventqueue.push({type:t,event:e}),this.eventmode}setEventHandler(t,e){if(e.type.id===o.Typeid.typeid_null)delete this.eventhandler[t];else{if(!a.TScript.isDerivedFrom(e.type,o.Typeid.typeid_function))throw new i.RuntimeError("[Interpreter.setEventHandler] invalid argument");if(1!==e.value.b.func.params.length)throw new i.RuntimeError("[Interpreter.setEventHandler] handler must be a function with exactly one parameter");this.eventhandler[t]=e.value.b}}defineBreakpoints(t){let e={},n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.program.breakpoints.hasOwnProperty(i))e[i]=!0;else for(n=!0;i<=this.program.lines;){if(this.program.breakpoints.hasOwnProperty(i)){e[i]=!0;break}i++}}for(let t in this.program.breakpoints)e.hasOwnProperty(t)?this.program.breakpoints[t].set():this.program.breakpoints[t].clear();return n?e:null}toggleBreakpoint(t){for(;t<=this.program.lines;){if(this.program.breakpoints.hasOwnProperty(t))return this.program.breakpoints[t].toggle(),{line:t,active:this.program.breakpoints[t].active()};t++}return null}error(t,e){r.ErrorHelper.error(t,e,this.stack)}assert(t,e){r.ErrorHelper.assert(t,e)}}},481:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.asConstant=e.get_context=e.get_type=e.get_function=e.get_program=e.create_breakpoint=e.scopestep=e.constantstep=e.copyconstant=e.deepcopy=void 0;const r=n(7632),i=n(9164),a=n(4672);function o(t){if(t.type.id===a.Typeid.typeid_array){let e=new Array;for(let n=0;n<t.value.b.length;n++)e.push(o.call(this,t.value.b[n]));return{type:this.program.types[a.Typeid.typeid_array],value:{b:e}}}if(t.type.id===a.Typeid.typeid_dictionary){let e={};for(let n in t.value.b)t.value.b.hasOwnProperty(n)&&(e[n]=o.call(this,t.value.b[n]));return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:e}}}return t}function s(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.temporaries.push(o.call(this,e.typedvalue)),t.pe.pop(),t.ip.pop(),!1}function l(t){for(;t.parent;)t=t.parent;return t}e.deepcopy=function t(e,n){if(void 0===n&&(n={}),Array.isArray(e)){let r=new Array;for(let i=0;i<e.length;i++)r.push(t(e[i],n));return r}if("object"==typeof e&&null!==e){let r={};for(let i in e)e.hasOwnProperty(i)&&(n.hasOwnProperty(i)||(r[i]=t(e[i],n)));return r}return e},e.copyconstant=o,e.constantstep=s,e.scopestep=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return n<e.commands.length?(e.commands[n].declaration||(t.pe.push(e.commands[n]),t.ip.push(-1)),!1):(t.pe.pop(),t.ip.pop(),"function"===e.petype?(this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1):"global scope"===e.petype&&(this.stack.pop(),!1))},e.create_breakpoint=function(t,e){let n=!1;return{petype:"breakpoint",parent:t,line:e.line,where:e.get(),active:function(){return n},set:function(){n=!0},clear:function(){n=!1},toggle:function(){n=!n},step:function(){let t=this.stack[this.stack.length-1];return n&&(this.interrupt(),this.service.breakpoint&&this.service.breakpoint()),t.pe.pop(),t.ip.pop(),!1},sim:()=>n}},e.get_program=l,e.get_function=function(t){for(;;){if("function"===t.petype||"method"===t.petype)return t;if("type"===t.petype)return null;if(!t.parent)return t;t=t.parent}},e.get_type=function(t){for(;t;){if("type"===t.petype)return t;t=t.parent}return null},e.get_context=function(t){for(;;){if("function"===t.petype||"method"===t.petype||"type"===t.petype||!t.parent)return t;t=t.parent}},e.asConstant=function t(e,n){if("constant"===e.petype)return e;if("array"===e.petype){let r=new Array;for(let i=0;i<e.elements.length;i++){let a=t(e.elements[i],n);if(null===a)return null;r.push(a.typedvalue)}return{petype:"constant",where:e.where,typedvalue:{type:l(e).types[a.Typeid.typeid_array],value:{b:r}},step:s,sim:i.simfalse}}if("dictionary"===e.petype){let r={};for(let i=0;i<e.keys.length;i++){let a=t(e.values[i],n);if(null===a)return null;r["#"+e.keys[i]]=a.typedvalue}return{petype:"constant",where:e.where,typedvalue:{type:l(e).types[a.Typeid.typeid_dictionary],value:{b:r}},step:s,sim:i.simfalse}}if("left-unary operator "===e.petype.substring(0,20)){let a=t(e.argument,n);if(null===a)return null;let o=e.petype.substring(20);return{petype:"constant",where:e.where,typedvalue:r.left_unary_operator_impl[o].call(n,a.typedvalue),step:s,sim:i.simfalse}}if("binary operator "===e.petype.substring(0,16)){let a=t(e.lhs,n);if(null===a)return null;let o=t(e.rhs,n);if(null===o)return null;let l=e.petype.substring(16);return{petype:"constant",where:e.where,typedvalue:r.binary_operator_impl[l].call(n,a.typedvalue,o.typedvalue),step:s,sim:i.simfalse}}return null}},6906:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lexer=void 0;class n{static get_token(t,e,r){let i=!!(r=void 0!==r&&r)&&t.get();t.skip();let a=t.line;if(t.eof())return{type:"end-of-file",value:"",code:"",line:a};let o=t.indentation(),s=null,l=t.current();if(l>="A"&&l<="Z"||l>="a"&&l<="z"||"_"===l){let e=t.pos;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"===e))break;t.advance()}let r=t.source.substring(e,t.pos);i?t.set(i):t.skip(),s={type:n.keywords.hasOwnProperty(r)?"keyword":"identifier",value:r,code:r,line:a}}else if(l>="0"&&l<="9"){let e=t.pos,n="0123456789",r="integer";for(;!t.eof()&&n.indexOf(t.current())>=0;)t.advance();if(!t.eof()){if("."===t.current())for(r="real",t.advance(),(t.eof()||t.current()<"0"||t.current()>"9")&&t.error("/syntax/se-1");!t.eof()&&t.current()>="0"&&t.current()<="9";)t.advance();if("e"===t.current()||"E"===t.current())for(r="real",t.advance(),"+"!==t.current()&&"-"!==t.current()||t.advance(),(t.current()<"0"||t.current()>"9")&&t.error("/syntax/se-1");!t.eof()&&t.current()>="0"&&t.current()<="9";)t.advance()}let o=t.source.substring(e,t.pos),l=parseFloat(o);i?t.set(i):t.skip(),s={type:r,value:l,code:o,line:a}}else if('"'===l){let e=t.pos,n="",r="";for(t.advance();;){t.good()||t.error("/syntax/se-2");let i=t.current();if("\\"===i){t.advance();let e=t.current();if(t.advance(),"\\"===e)e="\\";else if('"'===e)e='"';else if("r"===e)e="\r";else if("n"===e)e="\n";else if("t"===e)e="\t";else if("f"===e)e="\f";else if("b"===e)e="\b";else if("/"===e)e="/";else if("u"===e){const n="0123456789abcdefABCDEF";let r="";for(let e=0;e<4;e++)n.indexOf(t.current())<0&&t.error("/syntax/se-3"),r+=t.current(),t.advance();e=String.fromCharCode(parseInt(r,16))}else t.error("/syntax/se-4",[e]);r+=e}else if("\r"===i||"\n"===i)t.error("/syntax/se-2");else{if('"'===i){t.advance(),n=t.source.substring(e,t.pos);break}r+=i,t.advance()}}i?t.set(i):t.skip(),s={type:"string",value:r,code:n,line:a}}else{if(t.advance(),n.operators.indexOf(l)>=0){let e=l;"/"===t.current()&&"/"===l&&(t.advance(),e+="/"),"="===t.current()&&":"!==l&&(t.advance(),e+="="),"!"!==e&&(i?t.set(i):t.skip(),s={type:"operator",value:e,code:e,line:a})}if(null===s){let e=null;n.groupings.indexOf(l)>=0?e="grouping":n.delimiters.indexOf(l)>=0?e="delimiter":t.error("/syntax/se-5",[l]),i?t.set(i):t.skip(),s={type:e,value:l,code:l,line:a}}}if(e.checkstyle&&!t.builtin()&&("keyword"!==s.type||"public"!==s.value&&"protected"!==s.value&&"private"!==s.value))if("operator"===s.type&&":"===s.value);else{let e=t.indent[t.indent.length-1];e<0&&a!==-1-e?(o<=t.indent[t.indent.length-2]&&t.error("/style/ste-1"),t.indent[t.indent.length-1]=o):o<e&&"}"!==t.current()&&t.error("/style/ste-1")}return s}static peek_keyword(t){let e=t.get();if(t.skip(),t.eof())return"";let r=t.current();if(r>="A"&&r<="Z"||r>="a"&&r<="z"||"_"===r){let r=t.pos;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"===e))break;t.advance()}let i=t.source.substring(r,t.pos);return t.set(e),n.keywords.hasOwnProperty(i)?i:""}return t.set(e),""}}e.Lexer=n,n.keywords={var:!0,function:!0,if:!0,then:!0,else:!0,for:!0,do:!0,while:!0,break:!0,continue:!0,return:!0,not:!0,and:!0,or:!0,xor:!0,null:!0,true:!0,false:!0,try:!0,catch:!0,throw:!0,class:!0,public:!0,protected:!0,private:!0,static:!0,constructor:!0,this:!0,super:!0,namespace:!0,use:!0,from:!0,module:!0,include:!0,import:!0,export:!0,const:!0,switch:!0,case:!0,default:!0,enum:!0,operator:!0},n.operators="=<>!^+-*/%:",n.groupings="()[]{}",n.delimiters=",;."},1372:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_assignment_or_expression=void 0;const r=n(6906),i=n(7632),a=n(9164),o=n(4977),s=n(4533);e.parse_assignment_or_expression=function(t,e,n){let l=t.get(),c=o.parse_expression(t,e,n),d=r.Lexer.get_token(t,n);if("operator"===d.type&&i.assignments.hasOwnProperty(d.value)){t.set(l);let i=s.parse_lhs(t,e,n);l=t.get();let c=r.Lexer.get_token(t,n),p=o.parse_expression(t,e,n);return d=r.Lexer.get_token(t,n),"delimiter"===d.type&&";"===d.value||t.error("/syntax/se-48"),{petype:"assignment "+c.value,where:l,parent:e,operator:c.value,lhs:i,rhs:p,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(t.pe.push(e.rhs),t.ip.push(-1),!1):1===n?(t.temporaries.push(e.operator),t.pe.push(e.lhs),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:a.simfalse}}if("delimiter"===d.type&&";"===d.value)return{petype:"expression",where:l,parent:e,sub:c,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.sub),t.ip.push(-1),!1):(t.temporaries.pop(),t.pe.pop(),t.ip.pop(),!1)},sim:a.simfalse};t.error("/syntax/se-49")}},905:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_break=void 0;const r=n(9074),i=n(6906),a=n(9164);e.parse_break=function(t,e,n){let o=t.get(),s=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===s.type&&"break"===s.value,"[parse_break] internal error");let l=e;for(;l&&("function"!==l.petype&&"method"!==l.petype&&"global scope"!==l.petype||t.error("/syntax/se-77"),!(l.petype.indexOf("loop")>=0));)l=l.parent;return s=i.Lexer.get_token(t,n),"delimiter"===s.type&&";"===s.value||t.error("/syntax/se-81b"),{petype:"continue",where:o,parent:e,step:function(){let t=this.stack[this.stack.length-1];for(;t.pe.length>0;){t.ip.pop();let e=t.pe.pop();if(e.petype.indexOf("loop")>=0)return t.pe.push(e),t.ip.push(-3),!0}r.ErrorHelper.assert(!1,"internal error in break: no enclosing loop context found")},sim:a.simtrue}}},559:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callsim=e.callstep=e.parse_call=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(3365),s=n(9164),l=n(4672),c=n(4977);function d(t){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],i=e.ip[e.ip.length-1],s=n.arguments.length;if(0===i)return e.pe.push(n.base),e.ip.push(-1),!1;if(i<=s)return e.pe.push(n.arguments[i-1]),e.ip.push(-1),!1;if(i===s+1){let i=new Array(s);for(let t=0;t<s;t++)i[s-1-t]=e.temporaries.pop();let c=e.temporaries.pop(),d=null,p=null;if(o.TScript.isDerivedFrom(c.type,l.Typeid.typeid_function))p=c.value.b.func,c.value.b.hasOwnProperty("object")&&(d=c.value.b.object);else if(o.TScript.isDerivedFrom(c.type,l.Typeid.typeid_type))if(r.ErrorHelper.assert(c.value.b.hasOwnProperty("class_constructor"),"[callstep] internal error; type does not have a constructor"),p=c.value.b.class_constructor,"super call"===n.petype)d=e.object;else{let t=c.value.b;if(r.ErrorHelper.assert("type"===t.petype,"[callstep] cannot find class of constructor"),d={type:t,value:{}},t.objectsize>0){d.value.a=[];let e={type:this.program.types[l.Typeid.typeid_null],value:{b:null}};for(let n=0;n<t.objectsize;n++)d.value.a.push(e)}let n=t;for(;n&&n.variables;){for(let t=0;t<n.variables.length;t++)n.variables[t].hasOwnProperty("initializer")&&(d.value.a[n.variables[t].id]=a.copyconstant.call(this,n.variables[t].initializer.typedvalue));n=n.superclass}e.temporaries.push(d)}else r.ErrorHelper.error("/syntax/se-16",[o.TScript.displayname(c.type)]);let u=p.params.length,h=new Array(u);for(let t=0;t<s;t++)if("named argument"===n.arguments[t].petype){let e=n.arguments[t].name,a=!1;for(let n=0;n<u;n++)if(p.params[n].hasOwnProperty("name")&&p.params[n].name===e){void 0!==h[n]&&r.ErrorHelper.error("/name/ne-1",[e,o.TScript.displayname(p)]),h[n]=i[t],a=!0;break}a||r.ErrorHelper.error("/name/ne-2",[e,o.TScript.displayname(p)])}else t<h.length?h[t]=i[t]:r.ErrorHelper.error("/name/ne-3",[o.TScript.displayname(p)]);for(let t=0;t<u;t++)void 0===h[t]&&(p.params[t].hasOwnProperty("defaultvalue")?h[t]=p.params[t].defaultvalue:r.ErrorHelper.error("/name/ne-4",[t+1,o.TScript.displayname(p)]));c.value.b.hasOwnProperty("enclosed")&&(h=c.value.b.enclosed.concat(h));{let e={pe:[p],ip:[-1],temporaries:[],variables:h,object:null,enclosed:null};d&&(e.object=d),c.value.b.hasOwnProperty("enclosed")&&(e.enclosed=c.value.b.enclosed),this.stack.push(e),this.stack.length>=t.maxstacksize&&r.ErrorHelper.error("/logic/le-1")}return!0}return e.pe.pop(),e.ip.pop(),!1}function p(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]===e.arguments.length+1}e.parse_call=function(t,e,n,u){let h=t.get(),f=i.Lexer.get_token(t,u);r.ErrorHelper.assert("("===f.value,"[parse_call] internal error");let m=new Array;if(f=i.Lexer.get_token(t,u,!0),"grouping"===f.type&&")"===f.value)i.Lexer.get_token(t,u);else{let n=!1;for(;;){let r=t.get(),a=!1,o=i.Lexer.get_token(t,u);if("identifier"===o.type){let e=i.Lexer.get_token(t,u);"operator"===e.type&&"="===e.value?a=!0:t.set(r)}else t.set(r);n&&!a&&t.error("/syntax/se-14"),a&&(n=!0);let l=c.parse_expression(t,e,u);if(a){let t={petype:"named argument",where:r,parent:e,name:o.value,argument:l,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.argument),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:s.simfalse};m.push(t)}else m.push(l);if(f=i.Lexer.get_token(t,u),"grouping"===f.type&&")"===f.value)break;","!==f.value&&t.error("/syntax/se-15")}}if("constant"===n.petype){let r=null;if(o.TScript.isDerivedFrom(n.typedvalue.type,l.Typeid.typeid_function))r=n.typedvalue.value.b.func;else if(o.TScript.isDerivedFrom(n.typedvalue.type,l.Typeid.typeid_type)){let i=n.typedvalue.value.b;if("public"!==i.class_constructor.access){let n=a.get_type(e),r=!1;"private"===i.class_constructor.access?null!==n&&n.id===i.id||(r=!0):"protected"===i.class_constructor.access&&null!==n&&o.TScript.isDerivedFrom(n,i.id)||(r=!0),r&&t.error("/name/ne-25",[o.TScript.displayname(i),i.class_constructor.access])}r=n.typedvalue.value.b.class_constructor}else t.error("/syntax/se-16",[n.typedvalue.type]);let i=m.length,s=r.params.length,c=new Array;for(let t=0;t<s;t++)c.push(!1);for(let e=0;e<i;e++)if("named argument"===m[e].petype){let n=m[e].name,i=!1;for(let e=0;e<s;e++)if(r.params[e].hasOwnProperty("name")&&r.params[e].name===n){c[e]&&t.error("/name/ne-1",[n,o.TScript.displayname(r)]),c[e]=!0,i=!0;break}i||t.error("/name/ne-2",[n,o.TScript.displayname(r)])}else e<c.length?c[e]=m[e]:t.error("/name/ne-3",[o.TScript.displayname(r)]);for(let e=0;e<s;e++)c[e]||r.params[e].hasOwnProperty("defaultvalue")||t.error("/name/ne-4",[e+1,o.TScript.displayname(r)])}return{petype:"function call",where:h,parent:e,base:n,arguments:m,step:d,sim:p}},e.callstep=d,e.callsim=p},347:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_class=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(4672),l=n(559),c=n(438),d=n(7248),p=n(9268),u=n(445),h=n(3140);e.parse_class=function t(e,n,f){let m=e.get(),g=i.Lexer.get_token(e,f);r.ErrorHelper.assert("keyword"===g.type&&"class"===g.value,"[parse_class] internal error"),g=i.Lexer.get_token(e,f),"identifier"!==g.type&&e.error("/syntax/se-54");let y=g.value;n.names.hasOwnProperty(y)&&e.error("/name/ne-18",[y]),f.checkstyle&&!e.builtin()&&(y[0]<"A"||y[0]>"Z")&&e.error("/style/ste-4",[y]);let v={petype:"type",where:m,parent:n,objectsize:0,variables:new Array,staticvariables:new Array,members:{},staticmembers:{},name:y,names:{},step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],r=Object.keys(e.staticmembers);if(!(n<r.length))return t.pe.pop(),t.ip.pop(),!1;{let i=e.staticmembers[r[n]];if("type"===i.petype||"variable"===i.petype)return t.pe.push(i),t.ip.push(-1),!1}},sim:o.simfalse};n.names[y]=v;let b=a.get_program(n),w=b.types.length;if(v.id=w,b.types.push(v),g=i.Lexer.get_token(e,f),"operator"===g.type&&":"===g.value){let t=p.parse_name(e,n,f,"super class declaration");v.superclass=t.lookup,"type"!==v.superclass.petype&&e.error("/name/ne-22",[t.name]),v===v.superclass&&e.error("/name/ne-26",[t.name]),v.objectsize=v.superclass.objectsize,v.superclass.class_constructor&&"private"===v.superclass.class_constructor.access&&e.error("/syntax/se-58"),g=i.Lexer.get_token(e,f)}"grouping"===g.type&&"{"===g.value||e.error("/syntax/se-40",["class declaration"]),e.indent.push(-1-g.line);let x=null;for(;;){if(g=i.Lexer.get_token(e,f,!0),"grouping"===g.type&&"}"===g.value){if(e.indent.pop(),f.checkstyle&&!e.builtin()){let t=e.indentation(),n=e.indent[e.indent.length-1];n>=0&&n!==t&&e.error("/style/ste-2")}i.Lexer.get_token(e,f);break}if("keyword"===g.type&&("public"===g.value||"protected"===g.value||"private"===g.value)){x=g.value,i.Lexer.get_token(e,f),g=i.Lexer.get_token(e,f),"operator"===g.type&&":"===g.value||e.error("/syntax/se-55",[x]);continue}let r=!1;if("keyword"===g.type&&"static"===g.value&&(r=!0,i.Lexer.get_token(e,f),g=i.Lexer.get_token(e,f,!0)),"keyword"===g.type&&"var"===g.value){null===x&&e.error("/syntax/se-56");let t=h.parse_var(e,v,f,r?a.get_program(n):v);for(let n=0;n<t.vars.length;n++){let i=t.vars[n];i.hasOwnProperty("initializer")&&"constant"!==i.initializer.petype&&e.error("/syntax/se-57"),i.access=x,r?(i.displayname=y+"."+i.name,v.staticmembers[i.name]=i,v.staticvariables.push(i)):(i.petype="attribute",v.members[i.name]=i)}}else if("keyword"===g.type&&"function"===g.value){null===x&&e.error("/syntax/se-56");let t=d.parse_function(e,v,f,r?"function":"method");r&&(t.displayname=y+"."+t.name),t.access=x,r?v.staticmembers[t.name]=t:v.members[t.name]=t}else if("keyword"===g.type&&"constructor"===g.value){v.hasOwnProperty("class_constructor")&&e.error("/syntax/se-59b"),null===x&&e.error("/syntax/se-56"),r&&e.error("/syntax/se-59");let t=c.parse_constructor(e,v,f);t.access=x,v.class_constructor=t}else if("keyword"===g.type&&"class"===g.value){null===x&&e.error("/syntax/se-56"),r&&e.error("/syntax/se-60");let n=t(e,v,f);n.displayname=y+"."+n.name,n.access=x,v.staticmembers[n.name]=n}else"keyword"!==g.type||"use"!==g.value&&"from"!==g.value?e.error("/syntax/se-62"):(r&&e.error("/syntax/se-61"),u.parse_use(e,v,f))}if(!v.hasOwnProperty("class_constructor")&&(v.class_constructor={petype:"method",where:v.where,access:"public",declaration:!0,parent:v,commands:new Array,variables:new Array,name:"constructor",names:{},params:new Array,step:c.constructorstep,sim:o.simfalse},v.hasOwnProperty("superclass"))){let t={petype:"constant",where:e.get(),typedvalue:{type:a.get_program(n).types[s.Typeid.typeid_type],value:{b:v.superclass}},step:a.constantstep,sim:o.simfalse};v.class_constructor.supercall={petype:"super call",parent:v.class_constructor,base:t,arguments:new Array,step:l.callstep,sim:l.callsim}}return v}},438:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.constructorstep=e.parse_constructor=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(4672),l=n(559),c=n(4977),d=n(4243);function p(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(e.hasOwnProperty("supercall")&&(t.pe.push(e.supercall),t.ip.push(-1)),!1):n<e.commands.length+1?(e.commands[n-1].declaration||(t.pe.push(e.commands[n-1]),t.ip.push(-1)),!1):(t.pe.pop(),t.ip.pop(),this.stack.pop(),!1)}e.parse_constructor=function(t,e,n){r.ErrorHelper.assert("type"===e.petype,"[parse_constructor] internal error; parent is expected to be a type");let u=t.get(),h=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===h.type&&"constructor"===h.value,"[parse_constructor] internal error");let f={petype:"method",where:u,declaration:!0,parent:e,commands:new Array,variables:new Array,name:"constructor",names:{},params:new Array,step:p,sim:o.simfalse};for(h=i.Lexer.get_token(t,n),"grouping"===h.type&&"("===h.value||t.error("/syntax/se-36",["constructor declaration"]);;){let e=i.Lexer.get_token(t,n,!0);if("grouping"===e.type&&")"===e.value){i.Lexer.get_token(t,n);break}0!==f.params.length&&("delimiter"===e.type&&","===e.value||t.error("/syntax/se-37"),i.Lexer.get_token(t,n));let r=t.get();e=i.Lexer.get_token(t,n),"identifier"!==e.type&&t.error("/syntax/se-33");let a=e.value,o=f.variables.length,s={petype:"variable",where:r,parent:f,name:a,id:o,scope:"local"},l={name:a};if(e=i.Lexer.get_token(t,n,!0),"operator"===e.type&&"="===e.value){i.Lexer.get_token(t,n);let e=c.parse_expression(t,f,n);"constant"!==e.petype&&t.error("/syntax/se-38"),l.defaultvalue=e.typedvalue}f.names.hasOwnProperty(a)&&t.error("/name/ne-16",[a]),f.names[a]=s,f.variables[o]=s,f.params.push(l)}if(h=i.Lexer.get_token(t,n),e.hasOwnProperty("superclass")){let r={petype:"constant",where:t.get(),typedvalue:{type:a.get_program(e).types[s.Typeid.typeid_type],value:{b:e.superclass}},step:a.constantstep,sim:o.simfalse};"operator"===h.type&&":"===h.value?(h=i.Lexer.get_token(t,n),"keyword"===h.type&&"super"===h.value||t.error("/syntax/se-53"),f.supercall=l.parse_call(t,f,r,n),f.supercall.petype="super call",h=i.Lexer.get_token(t,n)):f.supercall={petype:"super call",where:u,parent:f,base:r,arguments:new Array,step:l.callstep,sim:l.callsim}}else"operator"===h.type&&":"===h.value&&t.error("/name/ne-21");for("grouping"===h.type&&"{"===h.value||t.error("/syntax/se-40",["constructor declaration"]),t.indent.push(-1-h.line);;){if(h=i.Lexer.get_token(t,n,!0),"grouping"===h.type&&"}"===h.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=d.parse_statement_or_declaration(t,f,n);f.commands.push(e)}if(0===f.commands.length){let e=new Array,n=f;for(;n.parent;)e.unshift(n.name),n=n.parent;let r=t.impl;for(let t=0;t<e.length;t++){if(!r.hasOwnProperty(e[t])){r=null;break}r=r[e[t]]}if(r)if("function"==typeof r)f.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.variables;return t.object&&n.unshift(t.object),e.body.apply(this,n),this.stack.pop(),!1},f.sim=o.simfalse,f.body=r;else{if(!r.hasOwnProperty("step"))throw"[parse_constructor] invalid built-in function";f.step=r.step,f.sim=r.hasOwnProperty("sim")?r.sim:o.simfalse}}return f},e.constructorstep=p},1141:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_continue=void 0;const r=n(9074),i=n(6906),a=n(9164);e.parse_continue=function(t,e,n){let o=t.get(),s=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===s.type&&"continue"===s.value,"[parse_continue] internal error");let l=e;for(;l&&("function"!==l.petype&&"method"!==l.petype&&"global scope"!==l.petype||t.error("/syntax/se-78"),!(l.petype.indexOf("loop")>=0));)l=l.parent;return s=i.Lexer.get_token(t,n),"delimiter"===s.type&&";"===s.value||t.error("/syntax/se-81c"),{petype:"continue",where:o,parent:e,step:function(){let t=this.stack[this.stack.length-1];for(;t.pe.length>0;){t.ip.pop();let e=t.pe.pop();if(e.petype.indexOf("loop")>=0)return t.pe.push(e),t.ip.push(-2),!0}r.ErrorHelper.assert(!1,"internal error in continue: no enclosing loop context found")},sim:a.simtrue}}},4143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_declaration=void 0;const r=n(7632),i=n(347),a=n(7248),o=n(7893),s=n(445),l=n(3140);e.parse_declaration=function(t,e,n){let c=r.peek_keyword(t);return"var"===c?l.parse_var(t,e,n):"function"===c?a.parse_function(t,e,n):"class"===c?i.parse_class(t,e,n):"namespace"===c?o.parse_namespace(t,e,n):"use"===c||"from"===c?s.parse_use(t,e,n):null}},7938:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_dowhile=void 0;const r=n(9074),i=n(6906),a=n(3365),o=n(4672),s=n(4977),l=n(6329);e.parse_dowhile=function(t,e,n){let c=t.get(),d=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===d.type&&"do"===d.value,"[parse_dowhile] internal error");let p={petype:"do-while-loop",where:c,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(-2===r)return e.pe.pop(),e.ip.pop(),!1;if(-1===r)return!1;if(0===r)return e.pe.push(n.body),e.ip.push(-1),!1;if(1===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(2===r){let n=e.temporaries.pop();return a.TScript.isDerivedFrom(n.type,o.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-36",[a.TScript.displayname(n.type)]),n.value.b?(e.ip.pop(),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};return p.body=l.parse_statement(t,p,n),d=i.Lexer.get_token(t,n),"keyword"===d.type&&"while"===d.value||t.error("/syntax/se-74"),p.condition=s.parse_expression(t,e,n),d=i.Lexer.get_token(t,n),"delimiter"===d.type&&";"===d.value||t.error("/syntax/se-75"),p}},4977:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_expression=void 0;const r=n(9074),i=n(6906),a=n(7632),o=n(481),s=n(3365),l=n(9164),c=n(4672),d=n(559),p=n(4243),u=n(9268);e.parse_expression=function t(e,n,h,f=!1){void 0===f&&(f=!1);let m=new Array;for(;;){let g=e.get(),y=i.Lexer.get_token(e,h);for(;("operator"===y.type||"keyword"===y.type)&&a.left_unary_operator_impl.hasOwnProperty(y.value);)f&&e.error("/syntax/se-21"),m.push({operator:y.value,unary:!0,precedence:a.left_unary_operator_precedence[y.value],where:g}),g=e.get(),y=i.Lexer.get_token(e,h);let v={parent:n,where:g};if("grouping"===y.type&&"("===y.value){v.petype="group",v.sub=t(e,n,h);let r=i.Lexer.get_token(e,h);"grouping"===r.type&&")"===r.value||e.error("/syntax/se-22"),v.step=function(){let t=this.stack[this.stack.length-1],e=t.ip[t.ip.length-1],n=t.pe[t.pe.length-1];return 0===e?(t.pe.push(n.sub),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},v.sim=l.simfalse}else if("keyword"===y.type&&"null"===y.value)v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_null],value:{b:null}},v.step=o.constantstep,v.sim=l.simfalse;else if("keyword"!==y.type||"true"!==y.value&&"false"!==y.value)if("integer"===y.type){let t=parseFloat(y.value);t>2147483647&&e.error("/syntax/se-23"),t|=0,v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_integer],value:{b:t}},v.step=o.constantstep,v.sim=l.simfalse}else if("real"===y.type){let t=parseFloat(y.value);v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_real],value:{b:t}},v.step=o.constantstep,v.sim=l.simfalse}else if("string"===y.type){let t=y.value;for(;y=i.Lexer.get_token(e,h,!0),"string"===y.type;)y=i.Lexer.get_token(e,h),t+=y.value;v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_string],value:{b:t}},v.step=o.constantstep,v.sim=l.simfalse}else if("["===y.value){v.petype="array",v.elements=new Array,v.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];if(n<e.elements.length)return t.pe.push(e.elements[n]),t.ip.push(-1),!1;{let n=new Array(e.elements.length);for(let r=0;r<e.elements.length;r++)n[e.elements.length-1-r]=t.temporaries.pop();return t.temporaries.push({type:this.program.types[c.Typeid.typeid_array],value:{b:n}}),t.pe.pop(),t.ip.pop(),!0}},v.sim=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]>=e.elements.length};let r=!0;for(;!e.eof();){let a=i.Lexer.get_token(e,h,!0);if("grouping"===a.type&&"]"===a.value){i.Lexer.get_token(e,h);break}if(r)r=!1;else if("delimiter"===a.type&&","===a.value||e.error("/syntax/se-24"),i.Lexer.get_token(e,h),a=i.Lexer.get_token(e,h,!0),"grouping"===a.type&&"]"===a.value){i.Lexer.get_token(e,h);break}v.elements.push(t(e,n,h))}e.eof()&&e.error("/syntax/se-25");let a=o.asConstant(v,e);null!==a&&(v=a)}else if("{"===y.value){v.petype="dictionary",v.keys=new Array,v.values=new Array,v.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],i=e.keys.length;if(n<i)return t.pe.push(e.values[n]),t.ip.push(-1),!1;{let n={};for(let a=0;a<i;a++){let o=e.keys[a],s=t.temporaries[t.temporaries.length-i+a];r.ErrorHelper.assert(!n.hasOwnProperty("#"+o),"internal error; duplicate key in dictionary"),n["#"+o]=s}return t.temporaries=t.temporaries.slice(0,t.temporaries.length-i),t.temporaries.push({type:this.program.types[c.Typeid.typeid_dictionary],value:{b:n}}),t.pe.pop(),t.ip.pop(),!0}},v.sim=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1]>=e.keys.length};let a=!0,s={};for(;!e.eof();){let r=i.Lexer.get_token(e,h,!0);if("grouping"===r.type&&"}"===r.value){i.Lexer.get_token(e,h);break}if(a)a=!1;else if("delimiter"===r.type&&","!==r.value&&e.error("/syntax/se-27"),i.Lexer.get_token(e,h),r=i.Lexer.get_token(e,h,!0),"grouping"===r.type&&"}"===r.value){i.Lexer.get_token(e,h);break}r=i.Lexer.get_token(e,h),"string"!==r.type&&"identifier"!==r.type&&e.error("/syntax/se-28"),s.hasOwnProperty("#"+r.value)&&e.error("/syntax/se-26",[r.value]),s["#"+r.value]=!0,v.keys.push(r.value),r=i.Lexer.get_token(e,h),"operator"===r.type&&":"===r.value||e.error("/syntax/se-29"),v.values.push(t(e,n,h))}e.eof()&&e.error("/syntax/se-30");let l=o.asConstant(v,e);null!==l&&(v=l)}else if("identifier"===y.type||"keyword"===y.type&&"super"===y.value){e.set(g);let t=u.parse_name(e,n,h,"expression"),i=t.name,a=t.lookup;v.petype="name",v.name=i,v.reference=a,"variable"===a.petype||"attribute"===a.petype?(v.scope=a.scope,v.id=a.id,v.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return t.ip[t.ip.length-1],"global"===e.scope?t.temporaries.push(this.stack[0].variables[e.id]):"local"===e.scope?t.temporaries.push(t.variables[e.id]):"object"===e.scope?t.temporaries.push(t.object.value.a[e.id]):r.ErrorHelper.assert(!1,"unknown scope: "+e.scope),t.pe.pop(),t.ip.pop(),!1},v.sim=l.simfalse):"function"===a.petype?(v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_function],value:{b:{func:a}}},v.step=o.constantstep,v.sim=l.simfalse):"method"===a.petype?(v.scope=a.scope,v.id=a.id,v.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=(t.ip[t.ip.length-1],{type:this.program.types[c.Typeid.typeid_function],value:{b:{func:e.reference,object:t.object}}});return t.temporaries.push(n),t.pe.pop(),t.ip.pop(),!1},v.sim=l.simfalse):"type"===a.petype?(v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_type],value:{b:a}},v.step=o.constantstep,v.sim=l.simfalse):r.ErrorHelper.assert(!1,"If this assertion fails then error ne-10 must be re-activated.")}else if("keyword"===y.type&&"this"===y.value){let t=o.get_function(n);if("method"===t.petype){let e=t.parent;r.ErrorHelper.assert("type"===e.petype,"cannot find class around this"),v.petype="this",v.step=function(){let t=this.stack[this.stack.length-1];return t.temporaries.push(t.object),t.pe.pop(),t.ip.pop(),!1},v.sim=l.simfalse}else"function"!==t.petype||t.hasOwnProperty("name")||"(anonymous)"!==t.displayname?e.error("/syntax/se-47"):(v.petype="this",v.step=function(){let e=this.stack[this.stack.length-1],n={type:this.program.types[c.Typeid.typeid_function],value:{b:{func:t}}};return e.enclosed&&(n.value.b.enclosed=e.enclosed),e.temporaries.push(n),e.pe.pop(),e.ip.pop(),!1},v.sim=l.simfalse)}else if("keyword"===y.type&&"function"===y.value){let r={petype:"function",parent:n,where:g,displayname:"(anonymous)",commands:new Array,variables:new Array,names:{},closureparams:new Array,params:new Array,step:o.scopestep,sim:l.simfalse};if(y=i.Lexer.get_token(e,h),"grouping"===y.type&&"["===y.value){for(;;){let a=e.get(),o=i.Lexer.get_token(e,h);if("grouping"===o.type&&"]"===o.value)break;0!==r.closureparams.length&&("delimiter"===o.type&&","===o.value||e.error("/syntax/se-31"),a=e.get(),o=i.Lexer.get_token(e,h)),"identifier"!==o.type&&e.error("/syntax/se-32");let s=o.value;r.names.hasOwnProperty(s)&&e.error("/name/ne-17",[s]);let l=r.variables.length,c={petype:"variable",where:a,parent:v,name:s,id:l,scope:"local"};o=i.Lexer.get_token(e,h,!0),"operator"===o.type&&"="===o.value?i.Lexer.get_token(e,h):("delimiter"===o.type&&","===o.value||"grouping"===o.type&&"]"===o.value||e.error("/syntax/se-31"),e.set(a));let d={name:s,initializer:t(e,n,h)};r.names[s]=c,r.variables[l]=c,r.closureparams.push(d)}y=i.Lexer.get_token(e,h)}else"grouping"===y.type&&"("===y.value||e.error("/syntax/se-35");for("grouping"===y.type&&"("===y.value||e.error("/syntax/se-36",["anonymous function"]);;){let a=i.Lexer.get_token(e,h,!0);if("grouping"===a.type&&")"===a.value){i.Lexer.get_token(e,h);break}0!==r.params.length&&("delimiter"===a.type&&","===a.value||e.error("/syntax/se-37"),i.Lexer.get_token(e,h));let o=e.get();a=i.Lexer.get_token(e,h),"identifier"!==a.type&&e.error("/syntax/se-33");let s=a.value,l=r.variables.length,c={petype:"variable",where:o,parent:r,name:s,id:l,scope:"local"},d={name:s};if(a=i.Lexer.get_token(e,h,!0),"operator"===a.type&&"="===a.value){i.Lexer.get_token(e,h);let r=t(e,n,h);"constant"!==r.petype&&e.error("/syntax/se-38"),d.defaultvalue=r.typedvalue}r.names.hasOwnProperty(s)&&e.error("/name/ne-16",[s]),r.names[s]=c,r.variables[l]=c,r.params.push(d)}for(y=i.Lexer.get_token(e,h),"grouping"===y.type&&"{"===y.value||e.error("/syntax/se-40",["anonymous function"]),e.indent.push(-1-y.line);;){if(y=i.Lexer.get_token(e,h,!0),"grouping"===y.type&&"}"===y.value){if(e.indent.pop(),h.checkstyle&&!e.builtin()){let t=e.indentation(),n=e.indent[e.indent.length-1];n>=0&&n>t&&e.error("/style/ste-2")}i.Lexer.get_token(e,h);break}let t=p.parse_statement_or_declaration(e,r,h);r.commands.push(t)}v.petype="closure",v.func=r,v.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1],r=e.func.closureparams.length;if(n<r)return t.pe.push(e.func.closureparams[n].initializer),t.ip.push(-1),!1;{let n=t.temporaries.slice(t.temporaries.length-r);return t.temporaries.splice(t.temporaries.length-r,r),t.temporaries.push({type:this.program.types[c.Typeid.typeid_function],value:{b:{func:e.func,enclosed:n}}}),t.pe.pop(),t.ip.pop(),!1}},v.sim=l.simfalse}else"keyword"===y.type?e.error("/syntax/se-41",[y.value]):e.error("/syntax/se-42",[y.value]);else v.petype="constant",v.typedvalue={type:o.get_program(n).types[c.Typeid.typeid_boolean],value:{b:"true"===y.value}},v.step=o.constantstep,v.sim=l.simfalse;for(;!e.eof();){let a=e.get();if(y=i.Lexer.get_token(e,h,!0),"delimiter"===y.type&&"."===y.value){i.Lexer.get_token(e,h);let t=i.Lexer.get_token(e,h);"identifier"!==t.type&&e.error("/syntax/se-43");let o={petype:"access of member "+t.value,where:a,parent:n,object:v,member:t.value,step:function(){let t=this.stack[this.stack.length-1],n=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return t.pe.push(n.object),t.ip.push(-1),!1;{let i=t.temporaries.pop(),a=null;if(s.TScript.isDerivedFrom(i.type,c.Typeid.typeid_type)){let t=i.value.b,r=t;for(;r;){if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){a=r.staticmembers[n.member];break}r=r.superclass}null===a&&e.error("/name/ne-12",[s.TScript.displayname(t),n.member])}else{let t=i.type,r=t;for(;r;){if(r.members.hasOwnProperty(n.member)&&"public"===r.members[n.member].access){a=r.members[n.member];break}if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){a=r.staticmembers[n.member];break}r=r.superclass}null===a&&e.error("/name/ne-13",[s.TScript.displayname(t),n.member])}return"method"===a.petype?t.temporaries.push({type:this.program.types[c.Typeid.typeid_function],value:{b:{func:a,object:i}}}):"attribute"===a.petype?t.temporaries.push(i.value.a[a.id]):"function"===a.petype?t.temporaries.push({type:this.program.types[c.Typeid.typeid_function],value:{b:{func:a}}}):"variable"===a.petype?t.temporaries.push(this.stack[0].variables[a.id]):"type"===a.petype?t.temporaries.push({type:this.program.types[c.Typeid.typeid_type],value:{b:a}}):r.ErrorHelper.assert(!1,"[member access] internal error; unknown member type "+a.petype),t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}};v.parent=o,v=o}else if("grouping"===y.type&&"("===y.value){let t=d.parse_call(e,n,v,h);v.parent=t,v=t}else{if("grouping"!==y.type||"["!==y.value)break;{i.Lexer.get_token(e,h);let r=t(e,n,h),o=i.Lexer.get_token(e,h);"grouping"===o.type&&"]"===o.value||e.error("/syntax/se-44");let l={petype:"item access",where:a,parent:n,base:v,argument:r,step:function(){let t=this.stack[this.stack.length-1],n=t.pe[t.pe.length-1],r=t.ip[t.ip.length-1];if(0===r)return t.pe.push(n.base),t.ip.push(-1),!1;if(1===r)return t.pe.push(n.argument),t.ip.push(-1),!1;if(2===r){let n=t.temporaries.pop(),r=t.temporaries.pop();if(s.TScript.isDerivedFrom(r.type,c.Typeid.typeid_string))if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_integer)){n.value.b<0?e.error("/argument-mismatch/am-21",[s.TScript.toString.call(this,n)]):n.value.b>=r.value.b.length&&e.error("/argument-mismatch/am-22",[s.TScript.toString.call(this,n),r.value.b.length]);let i=r.value.b.charCodeAt(n.value.b),a={type:this.program.types[c.Typeid.typeid_integer],value:{b:i}};t.temporaries.push(a)}else if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_range)){let e=n.value.b.begin,i=n.value.b.end;e<0&&(e=0),i>r.value.b.length&&(i=r.value.b.length);let a=r.value.b.substring(e,i),o={type:this.program.types[c.Typeid.typeid_string],value:{b:a}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-20",[s.TScript.toString.call(this,n),s.TScript.displayname(n.type)]);else if(s.TScript.isDerivedFrom(r.type,c.Typeid.typeid_array))if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_integer))n.value.b<0?e.error("/argument-mismatch/am-23",[s.TScript.toString.call(this,n)]):n.value.b>=r.value.b.length?e.error("/argument-mismatch/am-24",[s.TScript.toString.call(this,n),r.value.b.length]):t.temporaries.push(r.value.b[n.value.b]);else if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_range)){let e=n.value.b.begin,i=n.value.b.end;e<0&&(e=0),i>r.value.b.length&&(i=r.value.b.length);let a=new Array;for(let t=e;t<i;t++)a.push(r.value.b[t]);let o={type:this.program.types[c.Typeid.typeid_array],value:{b:a}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-26",[s.TScript.toString.call(this,n),s.TScript.displayname(n.type)]);else if(s.TScript.isDerivedFrom(r.type,c.Typeid.typeid_dictionary))s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_string)?r.value.b.hasOwnProperty("#"+n.value.b)?t.temporaries.push(r.value.b["#"+n.value.b]):e.error("/argument-mismatch/am-27",[n.value.b]):e.error("/argument-mismatch/am-28",[s.TScript.displayname(n.type)]);else if(s.TScript.isDerivedFrom(r.type,c.Typeid.typeid_range))if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_integer)){let i=Math.max(0,r.value.b.end-r.value.b.begin);(n.value.b<0||n.value.b>=i)&&e.error("/argument-mismatch/am-29",[s.TScript.toString.call(this,n),i]);let a={type:this.program.types[c.Typeid.typeid_integer],value:{b:r.value.b.begin+n.value.b}};t.temporaries.push(a)}else if(s.TScript.isDerivedFrom(n.type,c.Typeid.typeid_range)){let e=Math.max(0,r.value.b.end-r.value.b.begin),i=n.value.b.begin,a=n.value.b.end;i<0&&(i=0),a>e&&(a=e);let o={type:this.program.types[c.Typeid.typeid_range],value:{b:{begin:r.value.b.begin+i,end:r.value.b.begin+a}}};t.temporaries.push(o)}else e.error("/argument-mismatch/am-30",[s.TScript.toString.call(this,n),s.TScript.displayname(n.type)]);else e.error("/argument-mismatch/am-31",[s.TScript.displayname(r.type)]);return!0}return t.pe.pop(),t.ip.pop(),!1},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};v.parent=l,v=l}}}if(m.push(v),y=i.Lexer.get_token(e,h,!0),"operator"!==y.type&&"keyword"!==y.type||!a.binary_operator_impl.hasOwnProperty(y.value))break;f&&e.error("/syntax/se-21"),m.push({operator:y.value,unary:!1,precedence:a.binary_operator_precedence[y.value],where:g}),i.Lexer.get_token(e,h)}let g=function(t){r.ErrorHelper.assert(t>=0&&t<m.length,"[processBinary] index out of range"),r.ErrorHelper.assert(m[t].hasOwnProperty("precedence")&&!m[t].unary,"[processBinary] binary operator expected"),r.ErrorHelper.assert(a.binary_operator_impl.hasOwnProperty(m[t].operator),"[processBinary] cannot find binary operator "+m[t].operator),r.ErrorHelper.assert(t>0&&m.length>t+1,"[processBinary] corrupted stack"),r.ErrorHelper.assert(!m[t-1].hasOwnProperty("precedence"),"[processBinary] corrupted stack"),r.ErrorHelper.assert(!m[t+1].hasOwnProperty("precedence"),"[processBinary] corrupted stack");let i={petype:"binary operator "+m[t].operator,where:m[t].where,parent:n,operator:m[t].operator,lhs:m[t-1],rhs:m[t+1],step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];if(0===n)return t.pe.push(e.lhs),t.ip.push(-1),!1;if(1===n)return t.pe.push(e.rhs),t.ip.push(-1),!1;{let n=t.temporaries.pop(),r=t.temporaries.pop(),i=a.binary_operator_impl[e.operator].call(this,r,n);return t.temporaries.push(i),t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return t.ip[t.ip.length-1]>1}},s=o.asConstant(i,e);null!==s&&(i=s),m[t-1].parent=i,m[t+1].parent=i,m.splice(t-1,3,i)},y=function(t,i){if(r.ErrorHelper.assert(t<m.length,"[reduce] invalid position"),m[t].hasOwnProperty("precedence")&&(r.ErrorHelper.assert(m[t].unary,"[reduce] unary operator expected"),y(t+1,m[t].precedence),r.ErrorHelper.assert(!m[t+1].hasOwnProperty("precedence"),"[reduce] corrupted stack"),function(t){r.ErrorHelper.assert(t>=0&&t<m.length,"[processUnary] index out of range"),r.ErrorHelper.assert(m[t].hasOwnProperty("precedence")&&m[t].unary,"[processUnary] unary operator expected"),r.ErrorHelper.assert(a.left_unary_operator_impl.hasOwnProperty(m[t].operator),"[processUnary] cannot find left-unary operator "+m[t].operator),r.ErrorHelper.assert(m.length>t+1,"[processUnary] corrupted stack"),r.ErrorHelper.assert(!m[t+1].hasOwnProperty("precedence"),"[processUnary] corrupted stack");let i={petype:"left-unary operator "+m[t].operator,where:m[t].where,parent:n,operator:m[t].operator,argument:m[t+1],step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return t.pe.push(e.argument),t.ip.push(-1),!1;{let n=t.temporaries.pop();return t.temporaries.push(a.left_unary_operator_impl[e.operator].call(this,n)),t.pe.pop(),t.ip.pop(),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}},s=o.asConstant(i,e);null!==s&&(i=s),m[t+1].parent=i,m.splice(t,2,i)}(t),r.ErrorHelper.assert(!m[t].hasOwnProperty("precedence"),"[reduce] corrupted stack")),!(i<=0))for(;y(t,i-1),!(t+1>=m.length||(r.ErrorHelper.assert(m[t+1].hasOwnProperty("precedence")&&!m[t+1].unary&&m[t+1].precedence>=i,"[reduce] operator mismatch"),m[t+1].precedence>i));)r.ErrorHelper.assert(t+2<m.length,"[reduce] invalid RHS position"),y(t+2,i-1),g(t+1),r.ErrorHelper.assert(!m[t].hasOwnProperty("precedence"),"[reduce] corrupted stack")};return y(0,10),r.ErrorHelper.assert(1===m.length,"[parse_expression] stack was not reduced"),f&&("group"===m[0].petype&&e.error("/argument-mismatch/am-32",["expression in parentheses"]),"constant"===m[0].petype&&e.error("/argument-mismatch/am-32",["a constant"]),"function"===m[0].petype&&e.error("/argument-mismatch/am-32",["a function"]),"function call"===m[0].petype&&e.error("/argument-mismatch/am-32",["the result of a function call"])),m[0]}},7206:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve_name=void 0;const r=n(9074),i=n(481),a=n(3365);e.resolve_name=function(t,e,n,o){let s="/name/ne-5",l=[o,e],c=n;for(;c;){if(c.hasOwnProperty("names")&&c.names.hasOwnProperty(e)){let a=c.names[e];if("variable"===a.petype||"function"===a.petype||"attribute"===a.petype||"method"===a.petype){let s=i.get_context(c);"global scope"===s.petype?r.ErrorHelper.assert("variable"===a.petype||"function"===a.petype):"type"===s.petype?"attribute"!==a.petype&&"method"!==a.petype||i.get_type(n)!==s&&t.error("/name/ne-6",[o,e]):(r.ErrorHelper.assert("variable"===a.petype||"function"===a.petype),"variable"===a.petype&&i.get_function(n)!==s&&t.error("/name/ne-7",[o,e]))}return c}if("type"===c.petype){let t=c.superclass;for(;t;){if(t.names.hasOwnProperty(e)){if("private"!==t.names[e].access)return t;s="/name/ne-8",l=[o,e,a.TScript.displayname(t)]}t=t.superclass}}if(!c.hasOwnProperty("parent"))break;c=c.parent}t.error(s,l)}},7048:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_for=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(3365),s=n(4672),l=n(4977),c=n(6329),d=n(9268);e.parse_for=function(t,e,n){let p=t.get(),u=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===u.type&&"for"===u.value,"[parse_for] internal error");let h={petype:"for-loop",where:p,parent:e,names:{},step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],i=e.ip[e.ip.length-1];if(-2===i)return e.temporaries.pop(),e.temporaries.pop(),e.pe.pop(),e.ip.pop(),!1;if(-1===i)return e.ip[e.ip.length-1]=3,!1;if(0===i)return e.pe.push(n.iterable),e.ip.push(-1),!1;if(1===i){let n=e.temporaries.pop(),r=o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_range)?{rangemarker:null,begin:n.value.b.begin,end:n.value.b.end,length:Math.max(0,n.value.b.end-n.value.b.begin)}:new Array;if(o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_array))for(let t=0;t<n.value.b.length;t++)r.push(n.value.b[t]);else o.TScript.isDerivedFrom(n.type,s.Typeid.typeid_range)||t.error("/argument-mismatch/am-34",[o.TScript.displayname(n.type)]);return e.temporaries.push(r),e.temporaries.push(0),!1}if(2===i){let t=e.temporaries[e.temporaries.length-2],i=e.temporaries[e.temporaries.length-1];if(i>=t.length)e.temporaries.pop(),e.temporaries.pop(),e.pe.pop(),e.ip.pop();else if(n.hasOwnProperty("var_id")){let a=t.hasOwnProperty("rangemarker")?{type:this.program.types[s.Typeid.typeid_integer],value:{b:t.begin+i|0}}:t[i];"global"===n.var_scope?this.stack[0].variables[n.var_id]=a:"local"===n.var_scope?e.variables[n.var_id]=a:"object"===n.var_scope?e.object.value.a[n.var_id]=a:r.ErrorHelper.assert(!1,"unknown scope: "+n.var_scope)}return!0}return 3===i?(e.pe.push(n.body),e.ip.push(-1),!1):4===i?(e.temporaries[e.temporaries.length-1]++,e.ip[e.ip.length-1]=1,!1):void 0},sim:function(){let t=this.stack[this.stack.length-1];return 2===t.ip[t.ip.length-1]}};if(p=t.get(),u=i.Lexer.get_token(t,n,!0),"keyword"===u.type&&"var"===u.value){i.Lexer.get_token(t,n),u=i.Lexer.get_token(t,n),"identifier"!==u.type&&t.error("/syntax/se-70");let r=a.get_function(e),o=r.variables.length,s={petype:"variable",where:p,parent:h,name:u.value,id:o,scope:"local"};r.variables.push(s),h.names[u.value]=s,h.var_id=o,h.var_scope="local",u=i.Lexer.get_token(t,n),"identifier"===u.type&&"in"===u.value||t.error("/syntax/se-71"),h.iterable=l.parse_expression(t,e,n),u=i.Lexer.get_token(t,n),"keyword"===u.type&&"do"===u.value||t.error("/syntax/se-72")}else{let a=t.get(),o=l.parse_expression(t,h,n);if(u=i.Lexer.get_token(t,n),"identifier"===u.type&&"in"===u.value){t.set(a);let o=d.parse_name(t,e,n,"for-loop"),s=o.lookup;"variable"!==s.petype&&"attribute"!==s.petype&&t.error("/argument-mismatch/am-35",[o.name,o.lookup.petype]),h.var_id=s.id,h.var_scope=s.scope,u=i.Lexer.get_token(t,n),r.ErrorHelper.assert("identifier"===u.type&&"in"===u.value,"[parse_for] internal error"),h.iterable=l.parse_expression(t,e,n),u=i.Lexer.get_token(t,n),"keyword"===u.type&&"do"===u.value||t.error("/syntax/se-72")}else"keyword"===u.type&&"do"===u.value?h.iterable=o:t.error("/syntax/se-73")}return h.body=c.parse_statement(t,h,n),h}},7248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_function=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(4977),l=n(4243);e.parse_function=function(t,e,n,c){void 0===c&&(c="function");let d=t.get(),p=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===p.type&&"function"===p.value,"[parse_function] internal error"),p=i.Lexer.get_token(t,n),"identifier"!==p.type&&t.error("/syntax/se-52");let u=p.value;e.names.hasOwnProperty(u)&&t.error("/name/ne-15",[u]),n.checkstyle&&!t.builtin()&&u[0]>="A"&&u[0]<="Z"&&t.error("/style/ste-3",["function",u]);let h={petype:c,where:d,declaration:!0,parent:e,commands:new Array,variables:new Array,name:u,names:{},params:new Array,step:a.scopestep,sim:o.simfalse};for(e.names[u]=h,p=i.Lexer.get_token(t,n),"grouping"===p.type&&"("===p.value||t.error("/syntax/se-36",["function declaration"]);;){let e=i.Lexer.get_token(t,n,!0);if("grouping"===e.type&&")"===e.value){i.Lexer.get_token(t,n);break}0!==h.params.length&&("delimiter"===e.type&&","===e.value||t.error("/syntax/se-37"),i.Lexer.get_token(t,n));let r=t.get();e=i.Lexer.get_token(t,n),"identifier"!==e.type&&t.error("/syntax/se-33");let a=e.value,o=h.variables.length,l={petype:"variable",where:r,parent:h,name:a,id:o,scope:"local"},c={name:a};if(e=i.Lexer.get_token(t,n,!0),"operator"===e.type&&"="===e.value){i.Lexer.get_token(t,n);let e=s.parse_expression(t,h,n);"constant"!==e.petype&&t.error("/syntax/se-38"),c.defaultvalue=e.typedvalue}h.names.hasOwnProperty(a)&&t.error("/name/ne-16",[a]),h.names[a]=l,h.variables[o]=l,h.params.push(c)}for(p=i.Lexer.get_token(t,n),"grouping"===p.type&&"{"===p.value||t.error("/syntax/se-40",["function declaration"]),t.indent.push(-1-p.line);;){if(p=i.Lexer.get_token(t,n,!0),"grouping"===p.type&&"}"===p.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=l.parse_statement_or_declaration(t,h,n);h.commands.push(e)}if(0===h.commands.length){let e=new Array,n=h;for(;n.parent;)e.unshift(n.name),n=n.parent;let r=t.impl;for(let t=0;t<e.length;t++){if(!r.hasOwnProperty(e[t])){r=null;break}r=r[e[t]]}if(r)if("function"==typeof r)h.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.variables;t.object&&n.unshift(t.object);let r=e.body.apply(this,n);return 0===this.stack.length||(this.stack.pop(),t=this.stack[this.stack.length-1],t.temporaries.push(r)),!1},h.sim=o.simfalse,h.body=r;else{if(!r.hasOwnProperty("step"))throw"[parse_function] invalid built-in function";h.step=r.step,h.sim=r.hasOwnProperty("sim")?r.sim:o.simfalse}}return h}},535:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_ifthenelse=void 0;const r=n(9074),i=n(6906),a=n(7632),o=n(3365),s=n(9164),l=n(4672),c=n(4977),d=n(6329);e.parse_ifthenelse=function(t,e,n){let p=t.get(),u=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===u.type&&"if"===u.value,"[parse_ifthenelse] internal error");let h={petype:"conditional statement",where:p,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(0===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(1===r){let r=e.temporaries.pop();return o.TScript.isDerivedFrom(r.type,l.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-33",[o.TScript.displayname(r.type)]),r.value.b?(e.pe.push(n.then_part),e.ip.push(-1)):n.hasOwnProperty("else_part")?(e.pe.push(n.else_part),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!1}return e.pe.pop(),e.ip.pop(),!1},sim:s.simfalse};return h.condition=c.parse_expression(t,e,n),u=i.Lexer.get_token(t,n),"keyword"===u.type&&"then"===u.value||t.error("/syntax/se-69"),h.then_part=d.parse_statement(t,e,n),"else"===a.peek_keyword(t)&&(u=i.Lexer.get_token(t,n),r.ErrorHelper.assert("keyword"===u.type&&"else"===u.value,"[parse_ifthenelse] internal error"),h.else_part=d.parse_statement(t,e,n)),h}},4533:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_lhs=void 0;const r=n(9074),i=n(7632),a=n(3365),o=n(9164),s=n(4672),l=n(4977);e.parse_lhs=function(t,e,n){let c=l.parse_expression(t,e,n,!0);return"name"===c.petype?("variable"!==c.reference.petype&&"attribute"!==c.reference.petype&&t.error("/argument-mismatch/am-32",["name of type '"+c.reference.petype+"'"]),c.step=function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=(t.ip[t.ip.length-1],t.temporaries.pop()),a=t.temporaries.pop(),o=null;"global"===e.scope?o=this.stack[0].variables:"local"===e.scope?o=t.variables:"object"===e.scope?o=t.object.value.a:r.ErrorHelper.assert(!1,"unknown scope type "+e.scope);let s=e.id;if("="!==n){let t=n.substring(0,n.length-1);a=i.binary_operator_impl[t].call(this,o[s],a)}return o[s]={type:a.type,value:a.value},t.pe.pop(),t.ip.pop(),!0},c.sim=o.simtrue):"item access"===c.petype?(c.step=function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(0===r)return e.pe.push(n.base),e.ip.push(-1),!1;if(1===r)return e.pe.push(n.argument),e.ip.push(-1),!1;{let n,r=e.temporaries.pop(),o=e.temporaries.pop(),l=e.temporaries.pop(),c=e.temporaries.pop();if(a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_string)?t.error("/argument-mismatch/am-32",["a substring"]):a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_array)?a.TScript.isDerivedFrom(r.type,s.Typeid.typeid_integer)?(r.value.b<0?t.error("/argument-mismatch/am-23",[a.TScript.toString.call(this,r)]):r.value.b>=o.value.b.length&&t.error("/argument-mismatch/am-24",[a.TScript.toString.call(this,r),o.value.b.length]),n=r.value.b):t.error("/argument-mismatch/am-25",[a.TScript.toString.call(this,r),a.TScript.displayname(r.type)]):a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_dictionary)?(a.TScript.isDerivedFrom(r.type,s.Typeid.typeid_string)||t.error("/argument-mismatch/am-28",[a.TScript.displayname(r.type)]),n="#"+r.value.b):t.error("/argument-mismatch/am-31b",[o.type]),"="!==l){let e=l.substring(0,l.length-1);a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_dictionary)&&(o.value.b.hasOwnProperty(n)||t.error("/argument-mismatch/am-27",[r.value.b])),c=i.binary_operator_impl[e].call(this,o.value.b[n],c)}return o.value.b[n]={type:c.type,value:c.value},e.pe.pop(),e.ip.pop(),!0}},c.sim=function(){let t=this.stack[this.stack.length-1];return t.ip[t.ip.length-1]>1}):"access of member "===c.petype.substring(0,17)?(c.step=function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1];if(0===e.ip[e.ip.length-1])return e.pe.push(n.object),e.ip.push(-1),!1;{let o=e.temporaries.pop(),l=e.temporaries.pop(),c=e.temporaries.pop(),d=null;if(a.TScript.isDerivedFrom(o.type,s.Typeid.typeid_type)){let e=o.value.b,r=e;for(;r;){if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){d=r.staticmembers[n.member];break}r=r.superclass}null===d&&t.error("/name/ne-12",[a.TScript.displayname(e),n.member])}else{let e=o.type,r=e;for(;r;){if(r.members.hasOwnProperty(n.member)&&"public"===r.members[n.member].access){d=r.members[n.member];break}if(r.staticmembers.hasOwnProperty(n.member)&&"public"===r.staticmembers[n.member].access){d=r.staticmembers[n.member];break}r=r.superclass}null===d&&t.error("/name/ne-13",[a.TScript.displayname(e),n.member])}let p=null,u=null;if("method"===d.petype?t.error("/argument-mismatch/am-32",["a method"]):"attribute"===d.petype?(p=o.value.a,u=d.id):"function"===d.petype?t.error("/argument-mismatch/am-32",["a static method"]):"variable"===d.petype?(p=this.stack[0].variables,u=d.id):"type"===d.petype?t.error("/argument-mismatch/am-32",["a class"]):r.ErrorHelper.assert(!1,"[member access] internal error; unknown member type "+d.petype),"="!==l){let t=l.substring(0,l.length-1);c=i.binary_operator_impl[t].call(this,p[u],c)}return p[u]={type:c.type,value:c.value},e.pe.pop(),e.ip.pop(),!0}},c.sim=function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}):t.error("/argument-mismatch/am-32",[c.petype]),c}},9268:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_name=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(3365),s=n(7206);e.parse_name=function(t,e,n,l,c=!1){void 0===c&&(c=!1);let d=e,p=i.Lexer.get_token(t,n),u=!1;if("keyword"===p.type&&"super"===p.value){let r=a.get_type(e);null===r&&t.error("/syntax/se-6"),r.hasOwnProperty("superclass")||t.error("/syntax/se-7"),d=r.superclass,p=i.Lexer.get_token(t,n),"delimiter"===p.type&&"."===p.value||t.error("/syntax/se-8"),p=i.Lexer.get_token(t,n),"identifier"!==p.type&&t.error("/syntax/se-9"),u=!0}else"identifier"!==p.type&&t.error("/syntax/se-10",[l]);let h=p.value,f=s.resolve_name(t,p.value,d,l),m=f.names[p.value];for(u&&m.hasOwnProperty("access")&&"private"===m.access&&t.error("/name/ne-8",["name lookup",h,o.TScript.displayname(f)]);"namespace"===m.petype;){if(p=i.Lexer.get_token(t,n,!0),"delimiter"!==p.type||"."!==p.value){if(c)break;t.error("/name/ne-11")}i.Lexer.get_token(t,n),p=i.Lexer.get_token(t,n),"identifier"!==p.type&&t.error("/syntax/se-11"),m.names.hasOwnProperty(p.value)||t.error("/name/ne-9",[p.value,h]),h+="."+p.value,f=m,m=m.names[p.value]}if("attribute"===m.petype||"method"===m.petype){let n=a.get_type(e),i=a.get_type(m);r.ErrorHelper.assert(n&&o.TScript.isDerivedFrom(n,i.id));let s=a.get_function(e);s&&"method"!==s.petype&&t.error("/syntax/se-13",[l,m.petype,h])}return{name:h,pe:f,lookup:m}}},7893:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_namespace=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(4243);e.parse_namespace=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"namespace"===c.value,"[parse_namespace] internal error"),"global scope"!==e.petype&&"namespace"!==e.petype&&t.error("/syntax/se-63");let d="";{let t=e;for(;"namespace"===t.petype;)d=t.name+"."+d,t=t.parent}c=i.Lexer.get_token(t,n),"identifier"!==c.type&&t.error("/syntax/se-64");let p=c.value;n.checkstyle&&!t.builtin()&&p[0]>="A"&&p[0]<="Z"&&t.error("/style/ste-3",["namespace",p]);let u=null;e.names.hasOwnProperty(p)?(u=e.names[p],"namespace"!==u.petype&&t.error("/name/ne-19",[p])):(u={petype:"namespace",parent:e,name:p,displayname:d+p,names:{},declaration:!0},e.names[p]=u);let h={petype:"namespace",where:l,parent:e,names:u.names,commands:new Array,name:p,displayname:d+p,step:a.scopestep,sim:o.simfalse};for(c=i.Lexer.get_token(t,n),"grouping"===c.type&&"{"===c.value||t.error("/syntax/se-40",["namespace declaration"]),t.indent.push(-1-c.line);;){if(c=i.Lexer.get_token(t,n,!0),"grouping"===c.type&&"}"===c.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}i.Lexer.get_token(t,n);break}let e=s.parse_statement_or_declaration(t,h,n);e.hasOwnProperty("name")&&(e.displayname=d+p+"."+e.name),h.commands.push(e)}return h}},9682:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_return=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(4672),s=n(4977);e.parse_return=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"return"===c.value,"[parse_return] internal error");let d={petype:"return",where:l,parent:e,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];if(0===t.ip[t.ip.length-1])return e.hasOwnProperty("argument")?(t.pe.push(e.argument),t.ip.push(-1)):t.temporaries.push({type:this.program.types[o.Typeid.typeid_null],value:{b:null}}),!1;{let e=t.temporaries.pop();return this.stack.pop(),this.stack.length>0&&this.stack[this.stack.length-1].temporaries.push(e),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}};if(c=i.Lexer.get_token(t,n,!0),"delimiter"!==c.type||";"!==c.value){d.argument=s.parse_expression(t,e,n);let r=a.get_function(e);"constructor"===r.name&&t.error("/syntax/se-79"),"global scope"!==r.petype&&"namespace"!==r.petype||t.error("/syntax/se-80")}return c=i.Lexer.get_token(t,n),"delimiter"===c.type&&";"===c.value||t.error("/syntax/se-81"),d}},6329:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_statement=void 0;const r=n(6906),i=n(7632),a=n(481),o=n(9164),s=n(1372),l=n(905),c=n(1141),d=n(7938),p=n(7048),u=n(535),h=n(9682),f=n(4243),m=n(8993),g=n(9372),y=n(2402);e.parse_statement=function(t,e,n,v=!1){void 0===v&&(v=!1);let b=i.peek_keyword(t);if("if"===b)return u.parse_ifthenelse(t,e,n);if("for"===b)return p.parse_for(t,e,n);if("do"===b)return d.parse_dowhile(t,e,n);if("while"===b)return y.parse_whiledo(t,e,n);if("break"===b)return l.parse_break(t,e,n);if("continue"===b)return c.parse_continue(t,e,n);if("return"===b)return h.parse_return(t,e,n);if("try"===b)return g.parse_trycatch(t,e,n);if("throw"===b)return m.parse_throw(t,e,n);{let i=t.get(),l=r.Lexer.get_token(t,n,!0);if("identifier"===l.type)return s.parse_assignment_or_expression(t,e,n);if("keyword"===l.type&&("null"===l.value||"true"===l.value||"false"===l.value||"not"===l.value||"this"===l.value||"super"===l.value)||"grouping"===l.type&&("("===l.value||"["===l.value)||"operator"===l.type&&("+"===l.value||"-"===l.value)||"integer"===l.type||"real"===l.type||"string"===l.type)return s.parse_assignment_or_expression(t,e,n);if("delimiter"===l.type&&";"===l.value)return r.Lexer.get_token(t,n),{petype:"no-operation",where:i,step:function(){let t=this.stack[this.stack.length-1];return t.pe.pop(),t.ip.pop(),!1},sim:o.simfalse};if("grouping"===l.type&&"{"===l.value){r.Lexer.get_token(t,n),t.indent.push(-1-l.line);let s={petype:"scope",where:i,parent:e,commands:new Array,names:{},step:a.scopestep,sim:o.simfalse};for(;;){if(l=r.Lexer.get_token(t,n,!0),"grouping"===l.type&&"}"===l.value){if(t.indent.pop(),n.checkstyle&&!t.builtin()){let e=t.indentation(),n=t.indent[t.indent.length-1];n>=0&&n!==e&&t.error("/style/ste-2")}r.Lexer.get_token(t,n);break}let e=f.parse_statement_or_declaration(t,s,n);s.commands.push(e)}return s}"grouping"===l.type&&"}"===l.value?t.error("/syntax/se-88"):"keyword"===l.type?t.error("/syntax/se-89",[l.value]):t.error("/syntax/se-90",[l.value])}}},4243:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_statement_or_declaration=void 0;const r=n(481),i=n(4143),a=n(6329);e.parse_statement_or_declaration=function(t,e,n){function o(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)o(t[e]);else if(null!==t&&"object"==typeof t&&t.constructor===Object){if(t.hasOwnProperty("builtin")&&t.builtin)return;t.hasOwnProperty("petype")&&(t.hasOwnProperty("where")&&delete t.where,t.builtin=!0);for(let e in t)t.hasOwnProperty(e)&&"parent"!==e&&o(t[e])}}if(!t.builtin()&&(t.skip(),!t.program.breakpoints.hasOwnProperty(t.line))){let n=r.create_breakpoint(e,t);t.program.breakpoints[t.line]=n,e.commands.push(n)}let s=i.parse_declaration(t,e,n);return null!==s?(t.builtin()&&o(s),s):(s=a.parse_statement(t,e,n),t.builtin()&&o(s),s)}},8993:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_throw=void 0;const r=n(9074),i=n(6906),a=n(3365),o=n(4977);e.parse_throw=function(t,e,n){let s=t.get(),l=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===l.type&&"throw"===l.value,"[parse_throw] internal error");let c={petype:"throw",where:s,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1];if(0===e.ip[e.ip.length-1])return e.pe.push(n.argument),e.ip.push(-1),!1;{let n=e.temporaries.pop(),i=0,o=0;for(;;){let e=this.stack[this.stack.length-i-1];if("try"===e.pe[e.pe.length-1-o].petype)break;o++,o>=e.pe.length&&(o=0,i++,i>=this.stack.length&&t.error("/user/ue-3",[a.TScript.toString(n)]))}this.stack.splice(this.stack.length-i,i);let s=this.stack[this.stack.length-1];return r.ErrorHelper.assert(o<=s.pe.length-2,"[throw] corrupted stack"),s.pe.splice(s.pe.length-o-1,o+1),s.ip.splice(s.ip.length-o-2,o+2,1),s.temporaries.push(n),!0}},sim:function(){let t=this.stack[this.stack.length-1];return 0!==t.ip[t.ip.length-1]}};return c.argument=o.parse_expression(t,e,n),l=i.Lexer.get_token(t,n),"delimiter"===l.type&&";"===l.value||t.error("/syntax/se-87"),c}},9372:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_trycatch=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(6329);e.parse_trycatch=function(t,e,n){let l=t.get(),c=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===c.type&&"try"===c.value,"[parse_trycatch] internal error");let d={petype:"try-catch",where:l,parent:e,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?(t.pe.push(e.try_part),t.ip.push(-1),!1):2===n?(t.pe.push(e.catch_part),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse};d.try_part={petype:"try",parent:e,where:l,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.pe.push(e.command),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse},d.try_part.command=s.parse_statement(t,e,n);let p=t.get();c=i.Lexer.get_token(t,n),"keyword"===c.type&&"catch"===c.value||t.error("/syntax/se-82"),c=i.Lexer.get_token(t,n),"keyword"===c.type&&"var"===c.value||t.error("/syntax/se-84");let u=t.get();c=i.Lexer.get_token(t,n),"identifier"!==c.type&&t.error("/syntax/se-85");let h=c.value;c=i.Lexer.get_token(t,n),"keyword"===c.type&&"do"===c.value||t.error("/syntax/se-86"),d.catch_part={petype:"catch",parent:e,where:p,names:{},step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1];return 0===t.ip[t.ip.length-1]?(t.variables[e.var_id]=t.temporaries.pop(),t.pe.push(e.command),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse};let f=a.get_function(e),m=f.variables.length,g={petype:"variable",where:u,parent:d.catch_part,name:h,id:m,scope:"local"};return f.variables.push(g),d.catch_part.names[h]=g,d.catch_part.var_id=m,d.catch_part.command=s.parse_statement(t,d.catch_part,n),d}},445:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_use=void 0;const r=n(9074),i=n(6906),a=n(7632),o=n(9268);e.parse_use=function(t,e,n){let s=t.get(),l=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===l.type&&("use"===l.value||"from"===l.value),"[parse_use] internal error");let c={petype:"use",where:s,parent:e,declaration:!0},d=e;if("from"===l.value){let r=o.parse_name(t,e,n,"use directive",!0);d=r.lookup,c.from=d,"namespace"!==d.petype&&t.error("/name/ne-23",[r.name]),l=i.Lexer.get_token(t,n),"keyword"===l.type&&"use"===l.value||t.error("/syntax/se-65")}for(;;){let r=a.peek_keyword(t);"namespace"===r&&i.Lexer.get_token(t,n);let s=o.parse_name(t,d,n,"use directive",!0),c=s.name.split(".").pop();if(l=i.Lexer.get_token(t,n),"identifier"===l.type&&"as"===l.value&&("namespace"===r&&t.error("/syntax/se-66"),l=i.Lexer.get_token(t,n),"identifier"!==l.type&&t.error("/syntax/se-67"),c=l.value,l=i.Lexer.get_token(t,n)),"namespace"===r){"namespace"!==s.lookup.petype&&t.error("/name/ne-23",[s.name]);for(let n in s.lookup.names)s.lookup.names.hasOwnProperty(n)&&(e.names.hasOwnProperty(n)?e.names[n]!==s.lookup.names[n]&&t.error("/name/ne-24",[n]):e.names[n]=s.lookup.names[n])}else e.names.hasOwnProperty(c)?e.names[c]!==s.lookup&&t.error("/name/ne-24",[c]):e.names[c]=s.lookup;if("delimiter"===l.type&&";"===l.value)break;"delimiter"===l.type&&","===l.value||t.error("/syntax/se-68")}return c}},3140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_var=void 0;const r=n(9074),i=n(6906),a=n(481),o=n(9164),s=n(4672),l=n(4977);e.parse_var=function(t,e,n,c){c=void 0!==c?c:a.get_function(e);let d=t.get(),p=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===p.type&&"var"===p.value,"[parse_var] internal error");let u={petype:"variable declaration",where:d,parent:e,vars:new Array,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return n<e.vars.length?(t.pe.push(e.vars[n]),t.ip.push(-1),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:o.simfalse};for(;;){let a=t.get();p=i.Lexer.get_token(t,n),"identifier"!==p.type&&t.error("/syntax/se-50"),e.names.hasOwnProperty(p.value)&&t.error("/name/ne-14",[p.value]),n.checkstyle&&!t.builtin()&&p.value[0]>="A"&&p.value[0]<="Z"&&t.error("/style/ste-3",["variable",p.value]);let o="type"===c.petype?c.objectsize:c.variables.length,d={petype:"variable",where:a,parent:e,name:p.value,id:o,step:function(){let t=this.stack[this.stack.length-1],e=t.pe[t.pe.length-1],n=t.ip[t.ip.length-1];return 0===n?e.hasOwnProperty("initializer")?(t.pe.push(e.initializer),t.ip.push(-1),!1):(t.temporaries.push({type:this.program.types[s.Typeid.typeid_null],value:{b:null}}),!0):1===n?(t.variables[e.id]=t.temporaries.pop(),!1):(t.pe.pop(),t.ip.pop(),!1)},sim:function(){let t=this.stack[this.stack.length-1];return 0===t.ip[t.ip.length-1]&&!t.pe[t.pe.length-1].hasOwnProperty("initializer")}};if("global scope"===c.petype?d.scope="global":"function"===c.petype||"method"===c.petype?d.scope="local":"type"===c.petype?d.scope="object":r.ErrorHelper.assert(!1,"unknown variable scope"),p=i.Lexer.get_token(t,n),"operator"===p.type&&"="===p.value&&(d.initializer=l.parse_expression(t,e,n),p=i.Lexer.get_token(t,n)),c.variables.push(d),e.names[d.name]=d,u.vars.push(d),"type"===c.petype&&e.objectsize++,"delimiter"===p.type&&";"===p.value)break;"delimiter"===p.type&&","===p.value||t.error(d.initializer?"/syntax/se-51b":"/syntax/se-51")}return u}},2402:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse_whiledo=void 0;const r=n(9074),i=n(6906),a=n(3365),o=n(4672),s=n(4977),l=n(6329);e.parse_whiledo=function(t,e,n){let c=t.get(),d=i.Lexer.get_token(t,n);r.ErrorHelper.assert("keyword"===d.type&&"while"===d.value,"[parse_whiledo] internal error");let p={petype:"while-do-loop",where:c,parent:e,step:function(){let e=this.stack[this.stack.length-1],n=e.pe[e.pe.length-1],r=e.ip[e.ip.length-1];if(-2===r)return e.pe.pop(),e.ip.pop(),!1;if(-1===r)return!1;if(0===r)return e.pe.push(n.condition),e.ip.push(-1),!1;if(1===r){let r=e.temporaries.pop();return a.TScript.isDerivedFrom(r.type,o.Typeid.typeid_boolean)||t.error("/argument-mismatch/am-37",[a.TScript.displayname(r.type)]),r.value.b?(e.pe.push(n.body),e.ip.push(-1)):(e.pe.pop(),e.ip.pop()),!0}return 2===r?(e.ip.pop(),e.ip.push(-1),!1):void 0},sim:function(){let t=this.stack[this.stack.length-1];return 1===t.ip[t.ip.length-1]}};return p.condition=s.parse_expression(t,e,n),d=i.Lexer.get_token(t,n),"keyword"===d.type&&"do"===d.value||t.error("/syntax/se-76"),p.body=l.parse_statement(t,p,n),p}},7065:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;const r=n(9074),i=n(481),a=n(9127),o=n(4001),s=n(3471),l=n(6308),c=n(4435),d=n(9164),p=n(4243),u=n(7567);e.Parser=class{static parse(t,e=u.defaultOptions){let n={petype:"global scope",parent:null,commands:[],types:[],names:{},variables:[],breakpoints:{},lines:0,step:i.scopestep,sim:d.simfalse,options:e},h={program:n,source:"",pos:0,line:1,ch:0,indent:[0],errors:[],impl:{},builtin:function(){return Object.keys(this.impl).length>0},setSource:function(t,e){this.impl=void 0===e?{}:e,this.source=t,this.pos=0,this.line=1,this.ch=0,this.skip()},good:function(){return this.pos<this.source.length&&0===this.errors.length},bad:function(){return!this.good()},eof:function(){return this.pos>=this.source.length},error:function(t,e){void 0===e&&(e=[]);let n=r.ErrorHelper.composeError(t,e),i={type:"error",line:this.line,ch:this.ch,message:n,href:"#/errors"+t,name:"Parse Error"};throw this.errors.push(i),i},warning:function(t){this.errors.push({type:"warning",line:this.line,message:t})},current:function(){return this.pos>=this.source.length?"":this.source[this.pos]},lookahead:function(t){return this.pos+t>=this.source.length?"":this.source[this.pos+t]},next:function(){return this.lookahead(1)},get:function(){return{pos:this.pos,line:this.line,ch:this.ch}},set:function(t){this.pos=t.pos,this.line=t.line,this.ch=t.ch},indentation:function(){let t=0;for(let e=this.pos-this.ch;e<this.pos;e++){let n=this.source[e];if(" "===n)t++;else{if("\t"!==n)break;t+=4,t-=t%4}}return t},advance:function(t){void 0===t&&(t=1),this.pos+t>this.source.length&&(t=this.source.length-this.pos);for(let e=0;e<t;e++)"\n"===this.current()&&(this.line++,this.ch=0),this.pos++,this.ch++},skip:function(){let t=new Array;for(;this.good();){let e=this.current();if("#"!==e){if(" "!==e&&"\t"!==e&&"\r"!==e&&"\n"!==e)break;"\n"===e?(this.line++,this.ch=0,t.push(this.line)):this.ch++,this.pos++}else if(this.pos++,this.ch++,"*"===this.current()){this.pos++,this.ch++;let t=!1;for(;this.good();)if("\n"!==this.current()){if(t&&"#"===this.current()){this.pos++,this.ch++;break}t="*"===this.current(),this.pos++,this.ch++}else this.pos++,this.line++,this.ch=0,t=!1}else for(;this.good()&&"\n"!==this.current();)this.pos++,this.ch++}return t}},f=function(t,r){for(h.setSource(t,r),void 0===r&&(n.where=h.get());h.good();)n.commands.push(p.parse_statement_or_declaration(h,n,e));void 0===r&&(n.lines=h.line)};try{if(f(a.core.source,a.core.impl),f(s.lib_math.source,s.lib_math.impl),f(l.lib_turtle.source,l.lib_turtle.impl),f(o.lib_canvas.source,o.lib_canvas.impl),f(c.lib_audio.source,c.lib_audio.impl),f(t),h.skip(),!n.breakpoints.hasOwnProperty(h.line)){let t=i.create_breakpoint(n,h);n.breakpoints[h.line]=t,n.commands.push(t)}}catch(t){if("Parse Error"!==t.name)return{program:null,errors:[{type:"error",href:"#/errors/internal/ie-1",message:r.ErrorHelper.composeError("/internal/ie-1",[r.ErrorHelper.ex2string(t)])}]};if(h.errors.length>0)return{program:null,errors:h.errors}}return h.errors.length>0?{program:null,errors:h.errors}:{program:n,errors:[]}}}},7632:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.peek_keyword=e.binary_operator_impl=e.left_unary_operator_impl=e.binary_operator_precedence=e.left_unary_operator_precedence=e.assignments=void 0;const r=n(6906),i=n(3365),a=n(4672);e.assignments={"=":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"//=":!0,"%=":!0,"^=":!0},e.left_unary_operator_precedence={"+":2,"-":2,not:7},e.binary_operator_precedence={"+":4,"-":4,"*":3,"/":3,"//":3,"%":3,"^":1,":":5,"==":6,"!=":6,"<":6,"<=":6,">":6,">=":6,and:8,or:9,xor:9},e.left_unary_operator_impl={not:function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)?{type:this.program.types[a.Typeid.typeid_boolean],value:{b:!t.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:~t.value.b}}:void this.error("/argument-mismatch/am-2",[i.TScript.displayname(t.type)])},"+":function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_real)?{type:this.program.types[a.Typeid.typeid_real],value:{b:t.value.b}}:void this.error("/argument-mismatch/am-3",[i.TScript.displayname(t.type)])},"-":function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:0|-t.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_real)?{type:this.program.types[a.Typeid.typeid_real],value:{b:-t.value.b}}:void this.error("/argument-mismatch/am-4",[i.TScript.displayname(t.type)])}},e.binary_operator_impl={"+":function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b+e.value.b|0}}:i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type)?{type:this.program.types[a.Typeid.typeid_real],value:{b:t.value.b+e.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)?{type:this.program.types[a.Typeid.typeid_string],value:{b:i.TScript.toString.call(this,t)+i.TScript.toString.call(this,e)}}:void this.error("/argument-mismatch/am-5",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},"-":function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b-e.value.b|0}}:i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type)?{type:this.program.types[a.Typeid.typeid_real],value:{b:t.value.b-e.value.b}}:void this.error("/argument-mismatch/am-6",[i.TScript.displayname(e.type),i.TScript.displayname(t.type)])},"*":function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:i.TScript.mul32(t.value.b,e.value.b)}}:i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type)?{type:this.program.types[a.Typeid.typeid_real],value:{b:t.value.b*e.value.b}}:void this.error("/argument-mismatch/am-7",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},"/":function(t,e){if(i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type))return{type:this.program.types[a.Typeid.typeid_real],value:{b:t.value.b/e.value.b}};this.error("/argument-mismatch/am-8",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},"//":function(t,e){if(i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type))return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?(0===e.value.b&&this.error("/argument-mismatch/am-15"),{type:this.program.types[a.Typeid.typeid_integer],value:{b:0|Math.floor(t.value.b/e.value.b)}}):{type:this.program.types[a.Typeid.typeid_real],value:{b:Math.floor(t.value.b/e.value.b)}};this.error("/argument-mismatch/am-8",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},"%":function(t,e){if(i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type))return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:0|Math.round(i.TScript.mod.call(this,t.value.b,e.value.b))}}:{type:this.program.types[a.Typeid.typeid_real],value:{b:i.TScript.mod.call(this,t.value.b,e.value.b)}};this.error("/argument-mismatch/am-9",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},"^":function(t,e){if(i.TScript.isNumeric(t.type)&&i.TScript.isNumeric(e.type)){if(i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)&&e.value.b>=0){let n=1,r=t.value.b;for(let t=0;t<32;t++)1<<t&e.value.b&&(n=i.TScript.mul32(n,r)),r=i.TScript.mul32(r,r);return{type:this.program.types[a.Typeid.typeid_integer],value:{b:n}}}return{type:this.program.types[a.Typeid.typeid_real],value:{b:Math.pow(t.value.b,e.value.b)}}}this.error("/argument-mismatch/am-10",[i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},":":function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_real)&&i.TScript.isInt32(t.value.b)||this.error("/argument-mismatch/am-11"),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)&&i.TScript.isInt32(e.value.b)||this.error("/argument-mismatch/am-11"),{type:this.program.types[a.Typeid.typeid_range],value:{b:{begin:0|t.value.b,end:0|e.value.b}}}},"==":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:i.TScript.equal.call(this,t,e)}}},"!=":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:!i.TScript.equal.call(this,t,e)}}},"<":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:i.TScript.order.call(this,t,e)<0}}},"<=":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:i.TScript.order.call(this,t,e)<=0}}},">":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:i.TScript.order.call(this,t,e)>0}}},">=":function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:i.TScript.order.call(this,t,e)>=0}}},and:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)?{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t.value.b&&e.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b&e.value.b}}:void this.error("/argument-mismatch/am-12",["and",i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},or:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)?{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t.value.b||e.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b|e.value.b}}:void this.error("/argument-mismatch/am-12",["or",i.TScript.displayname(t.type),i.TScript.displayname(e.type)])},xor:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)?{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t.value.b!==e.value.b}}:i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer)&&i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b^e.value.b}}:void this.error("/argument-mismatch/am-12",["xor",i.TScript.displayname(t.type),i.TScript.displayname(e.type)])}},e.peek_keyword=function(t){let e=t.get();if(t.skip(),t.eof())return"";let n=t.current();if(n>="A"&&n<="Z"||n>="a"&&n<="z"||"_"===n){let n=t.pos;for(t.advance();t.good();){let e=t.current();if(!(e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"_"===e))break;t.advance()}let i=t.source.substring(n,t.pos);return t.set(e),r.Lexer.keywords.hasOwnProperty(i)?i:""}return t.set(e),""}},9127:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.core=void 0;const r=n(9074),i=n(3365),a=n(4672),o=n(8412),s=n(9164),l=n(816);e.core={source:l.tscript_core,impl:{Null:{constructor:function(t){t.value.b=null}},Boolean:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["value","Boolean.constructor","boolean",i.TScript.displayname(e.type)]),t.value.b=e.value.b}},Integer:{constructor:function(t,e){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean))t.value.b=e.value.b?1:0;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer))t.value.b=e.value.b;else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real))Number.isFinite(e.value.b)||this.error("/argument-mismatch/am-13"),t.value.b=0|Math.floor(e.value.b);else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)){let n=e.value.b.trim(),r=1;0===n.length&&this.error("/argument-mismatch/am-14"),"-"===n[0]?(r=-1,n=n.substr(1)):"+"===n[0]&&(n=n.substr(1)),(0===n.length||"0123456789.".indexOf(n[0])<0)&&this.error("/argument-mismatch/am-14"),r*=Number(n),Number.isFinite(r)||this.error("/argument-mismatch/am-13"),t.value.b=0|Math.floor(r)}else this.error("/argument-mismatch/am-1",["value","Integer.constructor","boolean, integer, real, or string",i.TScript.displayname(e.type)])}},Real:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)?t.value.b=e.value.b?1:0:i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)?t.value.b=e.value.b:i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)?t.value.b=Number(e.value.b):t.value.b=NaN},isFinite:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:Number.isFinite(t.value.b)}}},isInfinite:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t.value.b===Number.POSITIVE_INFINITY||t.value.b===Number.NEGATIVE_INFINITY}}},isNan:function(t){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:Number.isNaN(t.value.b)}}},inf:function(t,e){return{type:this.program.types[a.Typeid.typeid_real],value:{b:1/0}}},nan:function(t,e){return{type:this.program.types[a.Typeid.typeid_real],value:{b:NaN}}}},String:{constructor:function(t,e){t.value.b=i.TScript.toString.call(this,e)},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.length}}},find:function(t,e,n,r){let o;return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["searchterm","String.find","string",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["start","String.find","integer",i.TScript.displayname(n.type)]),i.TScript.isDerivedFrom(r.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["backward","String.find","boolean",i.TScript.displayname(r.type)]),o=r.value.b?t.value.b.lastIndexOf(e.value.b,n.value.b):t.value.b.indexOf(e.value.b,n.value.b),-1===o?{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}:{type:this.program.types[a.Typeid.typeid_integer],value:{b:o}}},split:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["separator","String.split","string",i.TScript.displayname(e.type)]);let n=t.value.b.split(e.value.b),r=new Array;for(let t=0;t<n.length;t++)r.push({type:this.program.types[a.Typeid.typeid_string],value:{b:n[t]}});return{type:this.program.types[a.Typeid.typeid_array],value:{b:r}}},fromUnicode:function(t){let e="";if(i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_integer))e+=String.fromCharCode(t.value.b);else if(i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array))for(let n=0;n<t.value.b.length;n++){let r=t.value.b[n];i.TScript.isDerivedFrom(r.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["characters","String.fromUnicode","integer or an array of integers","array containing '"+i.TScript.displayname(r.type)+"'"]),e+=String.fromCharCode(r.value.b)}else this.error("/argument-mismatch/am-1",["characters","String.fromUnicode","integer or an array of integers",i.TScript.displayname(t.type)]);return{type:this.program.types[a.Typeid.typeid_string],value:{b:e}}}},Array:{constructor:function(t,e,n){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)){e.value.b<0&&this.error("/argument-mismatch/am-17");let r=new Array;for(let t=0;t<e.value.b;t++)r.push(n);t.value.b=r}else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array))t.value.b=e.value.b.slice();else if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_range)){t.value.b=[];for(let n=e.value.b.begin;n<e.value.b.end;n++)t.value.b.push({type:this.program.types[a.Typeid.typeid_integer],value:{b:n}})}else this.error("/argument-mismatch/am-1",["size_or_other","Array.constructor","integer, an array, or a range",i.TScript.displayname(e.type)])},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.length}}},push:function(t,e){return t.value.b.push(e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},pop:function(t){return 0===t.value.b.length&&this.error("/argument-mismatch/am-18b"),t.value.b.pop()},insert:function(t,e,n){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||this.error("/argument-mismatch/am-1",["position","Array.insert","integer",i.TScript.displayname(e.type)]);let r=e.value.b;return(r<0||r>t.value.b.length)&&this.error("/argument-mismatch/am-18",[r,t.value.b.length]),t.value.b.splice(e.value.b,0,n),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},remove:function(t,e){let n,r;return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_range)?(n=e.value.b.begin,r=e.value.b.end):i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)?(n=e.value.b,r=e.value.b+1):this.error("/argument-mismatch/am-1",["range","Array.remove","range or an integer",i.TScript.displayname(e.type)]),n<0&&(n=0),r>t.value.b.length&&(r=t.value.b.length),t.value.b.splice(n,r-n),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},sort:{step:function(){let t=this.stack[this.stack.length-1],e=(t.pe[t.pe.length-1],t.ip[t.ip.length-1]);if(0!==e){if(1===e){let e=t.temporaries[t.temporaries.length-1],n=t.variables[0].value.b,r=[e.src[e.lb],e.src[e.rb]];n.hasOwnProperty("enclosed")&&(r=n.enclosed.concat(r));let i={pe:[n.func],ip:[-1],temporaries:[],variables:r,object:null,enclosed:null};return n.hasOwnProperty("object")&&(i.object=n.object),n.hasOwnProperty("enclosed")&&(i.enclosed=n.enclosed),this.stack.push(i),this.stack.length>=this.options.maxstacksize&&this.error("/logic/le-1"),!1}if(2===e){let e=t.temporaries.pop();i.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-19",[i.TScript.displayname(e.type)]);let n=t.temporaries[t.temporaries.length-1];if(e.value.b<=0){if(n.dst.push(n.src[n.lb]),n.lb++,n.lb===n.le)for(;n.rb<n.re;)n.dst.push(n.src[n.rb]),n.rb++}else if(n.dst.push(n.src[n.rb]),n.rb++,n.rb===n.re)for(;n.lb<n.le;)n.dst.push(n.src[n.lb]),n.lb++;if(n.lb===n.le)if(n.src.length-n.re<=n.chunksize){for(;n.re<n.src.length;)n.dst.push(n.src[n.re]),n.re++;if(n.chunksize*=2,n.lb=0,n.le=n.chunksize,n.rb=n.chunksize,n.re=Math.min(2*n.chunksize,n.src.length),n.src=n.dst,n.dst=[],n.chunksize>=n.src.length)return!1}else n.lb=n.dst.length,n.le=n.lb+n.chunksize,n.rb=n.le,n.re=Math.min(n.rb+n.chunksize,n.src.length);return t.ip[t.ip.length-1]=0,!1}{let e=t.temporaries[t.temporaries.length-1];return t.object.value.b=e.src,t.temporaries.pop(),r.ErrorHelper.assert(0===t.temporaries.length,"non-empty temporaries stack in return from Array.sort"),this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1}}if(t.object.value.b.length<=1)return this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1;if(i.TScript.isDerivedFrom(t.variables[0].type,a.Typeid.typeid_null)){let e=this;return t.object.value.b.sort((function(t,n){return i.TScript.order.call(e,t,n)})),this.stack.pop(),this.stack[this.stack.length-1].temporaries.push({type:this.program.types[a.Typeid.typeid_null],value:{b:null}}),!1}if(i.TScript.isDerivedFrom(t.variables[0].type,a.Typeid.typeid_function)&&2===t.variables[0].value.b.func.params.length){let e={src:t.object.value.b,dst:[],chunksize:1,lb:0,le:1,rb:1,re:2};return t.temporaries.push(e),!1}this.error("/argument-mismatch/am-1",["comparator","Array.sort","function of two arguments",i.TScript.displayname(t.variables[0].type)])},sim:s.simfalse},keys:function(t){return{type:this.program.types[a.Typeid.typeid_range],value:{b:{begin:0,end:t.value.b.length}}}},values:function(t){return t},concat:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||this.error("/argument-mismatch/am-1",["first","Array.concat","array",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||this.error("/argument-mismatch/am-1",["second","Array.concat","array",i.TScript.displayname(e.type)]);let n=new Array;for(let e=0;e<t.value.b.length;e++)n.push(t.value.b[e]);for(let t=0;t<e.value.b.length;t++)n.push(e.value.b[t]);return{type:this.program.types[a.Typeid.typeid_array],value:{b:n}}}},Dictionary:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_null)?t.value.b={}:i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_dictionary)?t.value.b=Object.assign({},e.value.b):this.error("/argument-mismatch/am-1",["other","Dictionary.constructor","null or a dictionary",i.TScript.displayname(e.type)])},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:Object.keys(t.value.b).length}}},has:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","Dictionary.has","string",i.TScript.displayname(e.type)]);let n=t.value.b.hasOwnProperty("#"+e.value.b);return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},remove:function(t,e){return i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","Dictionary.remove","string",i.TScript.displayname(e.type)]),delete t.value.b["#"+e.value.b],{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},keys:function(t){let e=new Array;for(let n in t.value.b)t.value.b.hasOwnProperty(n)&&e.push({type:this.program.types[a.Typeid.typeid_string],value:{b:n.substring(1)}});return{type:this.program.types[a.Typeid.typeid_array],value:{b:e}}},values:function(t){let e=new Array;for(let n in t.value.b)t.value.b.hasOwnProperty(n)&&e.push(t.value.b[n]);return{type:this.program.types[a.Typeid.typeid_array],value:{b:e}}},merge:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_dictionary)||this.error("/argument-mismatch/am-1",["first","Dictionary.merge","dictionary",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_dictionary)||this.error("/argument-mismatch/am-1",["second","Dictionary.merge","dictionary",i.TScript.displayname(e.type)]);let n={};for(let e in t.value.b)t.value.b.hasOwnProperty(e)&&(n[e]=t.value.b[e]);for(let t in e.value.b)e.value.b.hasOwnProperty(t)&&(n[t]=e.value.b[t]);return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:n}}}},Function:{constructor:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_function)||this.error("/argument-mismatch/am-1",["value","Function.constructor","function",i.TScript.displayname(e.type)]),t.value.b=e.value.b}},Range:{constructor:function(t,e,n){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)&&i.TScript.isInt32(e.value.b)||this.error("/argument-mismatch/am-1",["begin","Range.constructor","integer",i.TScript.displayname(e.type)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_real)&&i.TScript.isInt32(n.value.b)||this.error("/argument-mismatch/am-1",["end","Range.constructor","integer",i.TScript.displayname(n.type)]),t.value.b={begin:e.value.b,end:n.value.b}},size:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:Math.max(0,t.value.b.end-t.value.b.begin)}}},begin:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.begin}}},end:function(t){return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t.value.b.end}}}},Type:{constructor:function(t,e){t.value.b=e.type},superclass:function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["type","Type.superclass","type",i.TScript.displayname(t.type)]),t.value.b.hasOwnProperty("superclass")?{type:this.program.types[a.Typeid.typeid_type],value:{b:t.value.b.superclass}}:{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},isOfType:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["type","Type.isOfType","type",i.TScript.displayname(e.type)]);let n=!1,r=t.type,o=e.value.b;for(;;){if(r===o){n=!0;break}if(!r.hasOwnProperty("superclass"))break;r=r.superclass}return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},isDerivedFrom:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["subclass","Type.isDerivedFrom","type",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_type)||this.error("/argument-mismatch/am-1",["superclass","Type.isDerivedFrom","type",i.TScript.displayname(e.type)]);let n=!1,r=t.value.b,o=e.value.b;for(;;){if(r===o){n=!0;break}if(!r.hasOwnProperty("superclass"))break;r=r.superclass}return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}}},terminate:function(){this.status="finished",this.service.statechanged&&this.service.statechanged(!0)},assert:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)||this.error("/argument-mismatch/am-1",["condition","assert","boolean",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["message","assert","string",i.TScript.displayname(e.type)]),t.value.b||this.error("/user/ue-1",[e.value.b]),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},error:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["message","error","string",i.TScript.displayname(t.type)]),this.error("/user/ue-2",[t.value.b])},same:function(t,e){return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:t===e}}},version:function(){let t={"#type":{type:this.program.types[a.Typeid.typeid_string],value:{b:o.Version.type}},"#major":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.major}},"#minor":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.minor}},"#patch":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.patch}},"#day":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.day}},"#month":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.month}},"#year":{type:this.program.types[a.Typeid.typeid_integer],value:{b:o.Version.year}},"#full":{type:this.program.types[a.Typeid.typeid_string],value:{b:o.Version.full()}}};return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:t}}},print:function(t){let e=i.TScript.toString.call(this,t);return this.service.print&&this.service.print(e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},alert:function(t){let e=i.TScript.toString.call(this,t);return!this.service.documentation_mode&&this.service.alert&&this.service.alert(e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},confirm:function(t){let e=i.TScript.toString.call(this,t),n=!1;return!this.service.documentation_mode&&this.service.confirm&&(n=this.service.confirm(e)),{type:this.program.types[a.Typeid.typeid_boolean],value:{b:n}}},prompt:function(t){let e=i.TScript.toString.call(this,t),n=null;return!this.service.documentation_mode&&this.service.prompt?(n=this.service.prompt(e),null===n?{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}:{type:this.program.types[a.Typeid.typeid_string],value:{b:n}}):{type:this.program.types[a.Typeid.typeid_string],value:{b:""}}},wait:function(t){return i.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["milliseconds","wait","numeric argument",i.TScript.displayname(t.type)]),this.service.documentation_mode||this.wait(t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},time:function(){return{type:this.program.types[a.Typeid.typeid_real],value:{b:(new Date).getTime()}}},localtime:function(){let t=new Date;return{type:this.program.types[a.Typeid.typeid_real],value:{b:t.getTime()-6e4*t.getTimezoneOffset()}}},exists:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","exists","string",i.TScript.displayname(t.type)]);let e=null!==this.service.localStorage.getItem("tscript.data."+t.value.b);return{type:this.program.types[a.Typeid.typeid_boolean],value:{b:e}}},load:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","load","string",i.TScript.displayname(t.type)]);let e=this.service.localStorage.getItem("tscript.data."+t.value.b);null===e&&this.error("/argument-mismatch/am-38",[t.value.b]);let n=JSON.parse(e);return i.TScript.json2typed.call(this,n)},save:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["key","save","string",i.TScript.displayname(t.type)]);try{let n=i.TScript.typed2json.call(this,e),r=JSON.stringify(n);return this.service.localStorage.setItem("tscript.data."+t.value.b,r),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}catch(t){this.error("/argument-mismatch/am-39")}},listKeys:function(){return i.TScript.jsObject2typed.call(this,Object.keys(this.service.localStorage).filter((t=>t.startsWith("tscript.data."))).map((t=>t.substr("tscript.data.".length))))},deepcopy:function(t){try{return function t(e,n){if(e.type.id<a.Typeid.typeid_array)return e;if(e.type.id===a.Typeid.typeid_array){if(n.has(e))throw"recursive data structure";let r=new Set(n);r.add(e);let i=new Array;for(let n=0;n<e.value.b.length;n++){let a=t.call(this,e.value.b[n],r);i.push(a)}return{type:this.program.types[a.Typeid.typeid_array],value:{b:i}}}if(e.type.id===a.Typeid.typeid_dictionary){if(n.has(e))throw"recursive data structure";let r=new Set(n);r.add(e);let i={};for(let n in e.value.b){if(!e.value.b.hasOwnProperty(n))continue;let a=t.call(this,e.value.b[n],r);i[n]=a}return{type:this.program.types[a.Typeid.typeid_dictionary],value:{b:i}}}if(e.type.id===a.Typeid.typeid_function)throw"a function in the data structure";if(e.type.id===a.Typeid.typeid_range)return e;if(e.type.id===a.Typeid.typeid_type)return e;throw"an object in the data structure"}.call(this,t,new Set)}catch(t){this.error("/argument-mismatch/am-42",[t])}},setEventHandler:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||this.error("/argument-mismatch/am-1",["event","setEventHandler","string",i.TScript.displayname(t.type)]);let n=t.value.b;return this.service.documentation_mode||this.eventnames.hasOwnProperty(n)||this.error("/argument-mismatch/am-40",[n]),e.type.id===a.Typeid.typeid_null||i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_function)||this.error("/argument-mismatch/am-1",["handler","setEventHandler","Null or Function",i.TScript.displayname(e.type)]),e.value.b&&1!==e.value.b.func.params.length&&this.error("/argument-mismatch/am-41"),this.setEventHandler(n,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},enterEventMode:{step:function(){return this.service.documentation_mode?(this.status="finished",!1):(this.eventmode&&this.error("/logic/le-2"),this.eventmode=!0,this.stack[this.stack.length-1].pe.push({step:function(){let t=this.stack[this.stack.length-1];if(!this.eventmode)return this.stack.pop(),this.stack[this.stack.length-1].temporaries.push(this.eventmodeReturnValue),!0;if(t.ip[t.ip.length-1]--,t.temporaries=[],0===this.eventqueue.length)this.service.documentation_mode||this.wait(10);else{let t=this.eventqueue[0].type,e=this.eventqueue[0].event;if(this.eventqueue.splice(0,1),"timer"===t&&(this.timerEventEnqueued=!1),this.eventhandler.hasOwnProperty(t)){let n=this.eventhandler[t],r=new Array(1);r[0]=e,n.hasOwnProperty("enclosed")&&(r=n.enclosed.concat(r));let i={pe:[n.func],ip:[-1],temporaries:[],variables:r,object:null,enclosed:null};n.hasOwnProperty("object")&&(i.object=n.object),n.hasOwnProperty("enclosed")&&(i.enclosed=n.enclosed),this.stack.push(i),this.stack.length>=this.options.maxstacksize&&this.error("/logic/le-1")}}return!0},sim:s.simtrue}),!1)},sim:s.simfalse},quitEventMode:function(t){return this.eventmode||this.error("/logic/le-3"),this.eventmode=!1,this.eventmodeReturnValue=t,{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}}}},816:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_core=void 0,e.tscript_core='\nclass Null\n{\npublic:\n\tconstructor() { }\n}\n\nclass Boolean\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Integer\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Real\n{\npublic:\n\tconstructor(value) { }\n\tfunction isFinite() { }\n\tfunction isInfinite() { }\n\tfunction isNan() { }\n\tstatic function inf() { }\n\tstatic function nan() { }\n}\n\nclass String\n{\npublic:\n\tconstructor(value) { }\n\tfunction size() { }\n\tfunction find(searchterm, start = 0, backward = false) { }\n\tfunction split(separator) { }\n\tstatic function fromUnicode(characters) { }\n}\n\nclass Array\n{\npublic:\n\tconstructor(size_or_other, value = null) { }\n\tfunction size() { }\n\tfunction push(item) { }\n\tfunction pop() { }\n\tfunction insert(position, item) { }\n\tfunction remove(range) { }\n\tfunction sort(comparator = null) { }\n\tfunction keys() { }\n\tfunction values() { }\n\tstatic function concat(first, second) { }\n}\n\nclass Dictionary\n{\npublic:\n\tconstructor(other) { }\n\tfunction size() { }\n\tfunction has(key) { }\n\tfunction remove(key) { }\n\tfunction keys() { }\n\tfunction values() { }\n\tstatic function merge(first, second) { }\n}\n\nclass Function\n{\npublic:\n\tconstructor(value) { }\n}\n\nclass Range\n{\npublic:\n\tconstructor(begin, end) { }\n\tfunction size() { }\n\tfunction begin() { }\n\tfunction end() { }\n}\n\nclass Type\n{\npublic:\n\tconstructor(value) { }\n\tstatic function superclass(type) { }\n\tstatic function isOfType(value, type) { }\n\tstatic function isDerivedFrom(subclass, superclass) { }\n}\n\nfunction terminate() { }\nfunction assert(condition, message = "") { }\nfunction error(message) { }\nfunction same(first, second) { }\nfunction version() { }\nfunction print(text) { }\nfunction alert(text) { }\nfunction confirm(text) { }\nfunction prompt(text) { }\nfunction wait(milliseconds) { }\nfunction time() { }\nfunction localtime() { }\nfunction setEventHandler(event, handler) { }\nfunction enterEventMode() { }\nfunction quitEventMode(result = null) { }\nfunction exists(key) { }\nfunction load(key) { }\nfunction save(key, value) { }\nfunction listKeys(){}\nfunction deepcopy(value) { }\n'},4435:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_audio=void 0;const r=n(9074),i=n(3365),a=n(4672),o=n(1281);e.lib_audio={source:o.tscript_audio,impl:{audio:{MonoAudio:{constructor:function(t,e,n){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["buffer","audio.MonoAudio.constructor","array",i.TScript.displayname(e)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_integer)||r.ErrorHelper.error("/argument-mismatch/am-1",["sampleRate","audio.MonoAudio.constructor","integer",i.TScript.displayname(n)]),l(e)||r.ErrorHelper.error("/argument-mismatch/am-44",["buffer","real"]),!c.call(this))return;let o=this.service.audioContext.createBuffer(1,e.value.b.length,n.value.b);s(e,o.getChannelData(0));let d=this.service.audioContext.createBufferSource();d.buffer=o,d.connect(this.service.audioContext.destination),t.value.b=d},play:function(t){c.call(this)&&t.value.b.start()},pause:function(t){c.call(this)&&t.value.b.stop()},setPlaybackRate:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)||r.ErrorHelper.error("/argument-mismatch/am-1",["speed","audio.MonoAudio.setPlaybackRate","real",i.TScript.displayname(e)]),c.call(this)&&(t.value.b.playbackRate.value=e.value.b)}},StereoAudio:{constructor:function(t,e,n,o){if(i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["leftBuffer","audio.StereoAudio.constructor","array",i.TScript.displayname(e)]),i.TScript.isDerivedFrom(n.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["rightBuffer","audio.StereoAudio.constructor","array",i.TScript.displayname(n)]),i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_integer)||r.ErrorHelper.error("/argument-mismatch/am-1",["sampleRate","audio.StereoAudio.constructor","integer",i.TScript.displayname(o)]),l(n)||r.ErrorHelper.error("/argument-mismatch/am-44",["rightBuffer","real"]),l(e)||r.ErrorHelper.error("/argument-mismatch/am-44",["leftBuffer","real"]),!c.call(this))return;let d=this.service.audioContext.createBuffer(2,e.value.b.length,o.value.b);s(e,d.getChannelData(0)),s(n,d.getChannelData(1));let p=this.service.audioContext.createBufferSource();p.buffer=d,p.connect(this.service.audioContext.destination),t.value.b=p},play:function(t){c.call(this)&&t.value.b.start()},pause:function(t){c.call(this)&&t.value.b.stop()},setPlaybackRate:function(t,e){i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_real)||r.ErrorHelper.error("/argument-mismatch/am-1",["speed","audio.StereoAudio.setPlaybackRate","real",i.TScript.displayname(e)]),c.call(this)&&(t.value.b.playbackRate.value=e.value.b)}}}}};let s=function(t,e){for(let r=0;r<e.length;r++)e[r]=(-1,(n=t.value.b[r].value.b)>1?1:n<-1?-1:n);var n},l=function(t){for(let e=0;e<t.value.b.length;e++)if(!i.TScript.isDerivedFrom(t.value.b[e].type,a.Typeid.typeid_real))return!1;return!0};function c(){return void 0!==this.service.audioContext&&null!==this.service.audioContext}},1281:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_audio=void 0,e.tscript_audio="\nnamespace audio{\n\tclass MonoAudio\n\t{\n\t\tpublic:\n\t\tconstructor(buffer, sampleRate){}\n\t\tfunction play(){}\n\t\tfunction pause(){}\n\t\tfunction setPlaybackRate(speed){}\n\t}\n\tclass StereoAudio\n\t{\n\t\tpublic:\n\t\tconstructor(leftBuffer, rightBuffer, sampleRate){}\n\t\tfunction play(){}\n\t\tfunction pause(){}\n\t\tfunction setPlaybackRate(speed){}\n\t}\n}\n"},4001:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_canvas=void 0;const r=n(9074),i=n(3365),a=n(4672),o=n(7554);e.lib_canvas={source:o.tscipt_canvas,impl:{canvas:{width:function(){let t=this.service.canvas.width.call(this.service);return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t}}},height:function(){let t=this.service.canvas.height.call(this.service);return{type:this.program.types[a.Typeid.typeid_integer],value:{b:t}}},setLineWidth:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.setLineWidth","numeric argument",i.TScript.displayname(t.type)]),t.value.b<=0&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setLineWidth; width must be positive"]),this.service.canvas.setLineWidth.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setLineColor:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","canvas.setLineColor","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","canvas.setLineColor","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","canvas.setLineColor","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["alpha","canvas.setLineColor","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.setLineColor.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setFillColor:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","canvas.setFillColor","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","canvas.setFillColor","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","canvas.setFillColor","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["alpha","canvas.setFillColor","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.setFillColor.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setFont:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||r.ErrorHelper.error("/argument-mismatch/am-1",["fontface","canvas.setFont","string",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["fontsize","canvas.setFont","numeric argument",i.TScript.displayname(e.type)]),e.value.b<=0&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setFont; fontsize must be positive"]),this.service.canvas.setFont.call(this.service,t.value.b,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},setTextAlign:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_string)||r.ErrorHelper.error("/argument-mismatch/am-1",["alignment","canvas.setTextAlign","string",i.TScript.displayname(t.type)]);let e=t.value.b;return"left"!==e&&"center"!==e&&"right"!==e&&r.ErrorHelper.error("/user/ue-2",["error in canvas.setTextAlign; invalid alignment value"]),this.service.canvas.setTextAlign.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},clear:function(){return this.service.canvas.clear.call(this.service),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},line:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x1","canvas.line","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y1","canvas.line","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x2","canvas.line","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y2","canvas.line","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.line.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},rect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.rect","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.rect","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.rect","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.rect","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.rect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillRect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.fillRect","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.fillRect","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.fillRect","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.fillRect","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.fillRect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameRect:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["left","canvas.frameRect","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["top","canvas.frameRect","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["width","canvas.frameRect","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isNumeric(o.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["height","canvas.frameRect","numeric argument",i.TScript.displayname(o.type)]),this.service.canvas.frameRect.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},circle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.circle","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.circle","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.circle","numeric argument",i.TScript.displayname(n.type)]),this.service.canvas.circle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillCircle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.fillCircle","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.fillCircle","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.fillCircle","numeric argument",i.TScript.displayname(n.type)]),this.service.canvas.fillCircle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameCircle:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.frameCircle","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.frameCircle","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["radius","canvas.frameCircle","numeric argument",i.TScript.displayname(n.type)]),this.service.canvas.frameCircle.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},curve:function(t,e){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.curve","array",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["closed","canvas.curve","boolean",i.TScript.displayname(e.type)]);let n=new Array;for(let e=0;e<t.value.b.length;e++){let o=t.value.b[e];i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"]","canvas.curve","array",i.TScript.displayname(o.type)]),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.curve; point["+e+"] must be an array of size two."]);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"][0]","canvas.curve","numeric argument",i.TScript.displayname(s.type)]),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+e+"][1]","canvas.curve","numeric argument",i.TScript.displayname(l.type)]),n.push([s.value.b,l.value.b])}return this.service.canvas.curve.call(this.service,n,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},fillArea:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.fillArea","array",i.TScript.displayname(t.type)]);let e=new Array;for(let n=0;n<t.value.b.length;n++){let o=t.value.b[n];i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"]","canvas.fillArea","array",i.TScript.displayname(o.type)]),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.fillArea; point["+n+"] must be an array of size two."]);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][0]","canvas.fillArea","numeric argument",i.TScript.displayname(s.type)]),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][1]","canvas.fillArea","numeric argument",i.TScript.displayname(l.type)]),e.push([s.value.b,l.value.b])}return this.service.canvas.fillArea.call(this.service,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},frameArea:function(t){i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points","canvas.frameArea","array",i.TScript.displayname(t.type)]);let e=new Array;for(let n=0;n<t.value.b.length;n++){let o=t.value.b[n];i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"]","canvas.frameArea","array",i.TScript.displayname(o.type)]),2!==o.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.frameArea; point["+n+"] must be an array of size two."]);let s=o.value.b[0],l=o.value.b[1];i.TScript.isNumeric(s.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][0]","canvas.frameArea","numeric argument",i.TScript.displayname(s.type)]),i.TScript.isNumeric(l.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["points["+n+"][1]","canvas.frameArea","numeric argument",i.TScript.displayname(l.type)]),e.push([s.value.b,l.value.b])}return this.service.canvas.frameArea.call(this.service,e),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},text:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","canvas.text","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","canvas.text","numeric argument",i.TScript.displayname(e.type)]),this.service.canvas.text.call(this.service,t.value.b,e.value.b,i.TScript.toString(n)),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},reset:function(){return this.service.canvas.reset.call(this.service),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},shift:function(t,e){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dx","canvas.shift","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["dy","canvas.shift","numeric argument",i.TScript.displayname(e.type)]),this.service.canvas.shift.call(this.service,t.value.b,e.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},scale:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["factor","canvas.scale","numeric argument",i.TScript.displayname(t.type)]),this.service.canvas.scale.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},rotate:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["angle","canvas.rotate","numeric argument",i.TScript.displayname(t.type)]),this.service.canvas.rotate.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},transform:function(t,e){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["A","canvas.transform","array",i.TScript.displayname(t.type)]),i.TScript.isDerivedFrom(e.type,a.Typeid.typeid_array)||r.ErrorHelper.error("/argument-mismatch/am-1",["b","canvas.transform","array",i.TScript.displayname(e.type)]),2!==t.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A must be an array of size two."]),2!==t.value.b[0].value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A[0] must be an array of size two."]),2!==t.value.b[1].value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; A[1] must be an array of size two."]),i.TScript.isNumeric(t.value.b[0].value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0][0]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[0].value.b[0].type)]),i.TScript.isNumeric(t.value.b[0].value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[0][1]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[0].value.b[1].type)]),i.TScript.isNumeric(t.value.b[1].value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[1][0]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[1].value.b[0].type)]),i.TScript.isNumeric(t.value.b[1].value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["A[1][1]","canvas.transform","numeric argument",i.TScript.displayname(t.value.b[1].value.b[1].type)]),2!==e.value.b.length&&r.ErrorHelper.error("/user/ue-2",["error in canvas.transform; b must be an array of size two."]),i.TScript.isNumeric(e.value.b[0].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["b[0]","canvas.transform","numeric argument",i.TScript.displayname(e.value.b[0].type)]),i.TScript.isNumeric(e.value.b[1].type)||r.ErrorHelper.error("/argument-mismatch/am-1",["b[1]","canvas.transform","numeric argument",i.TScript.displayname(e.value.b[1].type)]),this.service.canvas.transform.call(this.service,[[t.value.b[0].value.b[0].value.b,t.value.b[0].value.b[1].value.b],[t.value.b[1].value.b[0].value.b,t.value.b[1].value.b[1].value.b]],[e.value.b[0].value.b,e.value.b[1].value.b]),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}}}}},7554:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscipt_canvas=void 0,e.tscipt_canvas="\nnamespace canvas {\n\tfunction width() { }\n\tfunction height() { }\n\tfunction setLineWidth(width) { }\n\tfunction setLineColor(red, green, blue, alpha = 1.0) { }\n\tfunction setFillColor(red, green, blue, alpha = 1.0) { }\n\tfunction setFont(fontface, fontsize) { }\n\tfunction setTextAlign(alignment) { }\n\tfunction clear() { }\n\tfunction line(x1, y1, x2, y2) { }\n\tfunction rect(left, top, width, height) { }\n\tfunction fillRect(left, top, width, height) { }\n\tfunction frameRect(left, top, width, height) { }\n\tfunction circle(x, y, radius) { }\n\tfunction fillCircle(x, y, radius) { }\n\tfunction frameCircle(x, y, radius) { }\n\tfunction curve(points, close = false) { }\n\tfunction fillArea(points) { }\n\tfunction frameArea(points) { }\n\tfunction text(x, y, str) { }\n\tfunction reset() { }\n\tfunction shift(dx, dy) { }\n\tfunction scale(factor) { }\n\tfunction rotate(angle) { }\n\tfunction transform(A, b) { }\n\tclass ResizeEvent\n\t{\n\tpublic:\n\t\tvar width;\n\t\tvar height;\n\t}\n\tclass MouseMoveEvent\n\t{\n\tpublic:\n\t\tvar x;\n\t\tvar y;\n\t\tvar buttons;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n\tclass MouseButtonEvent\n\t{\n\tpublic:\n\t\tvar x;\n\t\tvar y;\n\t\tvar button;\n\t\tvar buttons;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n\tclass KeyboardEvent\n\t{\n\tpublic:\n\t\tvar key;\n\t\tvar shift;\n\t\tvar control;\n\t\tvar alt;\n\t\tvar meta;\n\t}\n}\n"},3471:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_math=void 0;const r=n(3365),i=n(4672),a=n(1378);e.lib_math={source:a.tscript_math,impl:{math:{pi:function(t){return{type:this.program.types[i.Typeid.typeid_real],value:{b:3.141592653589793}}},e:function(t){return{type:this.program.types[i.Typeid.typeid_real],value:{b:2.718281828459045}}},abs:function(t){return r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?{type:this.program.types[i.Typeid.typeid_integer],value:{b:0|Math.abs(t.value.b)}}:r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_real)?{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.abs(t.value.b)}}:void this.error("/argument-mismatch/am-1",["x","math.abs","numeric argument",r.TScript.displayname(t.type)])},sqrt:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sqrt(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sqrt","numeric argument",r.TScript.displayname(t.type)])},cbrt:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cbrt(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cbrt","numeric argument",r.TScript.displayname(t.type)])},floor:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.floor(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.floor","numeric argument",r.TScript.displayname(t.type)])},round:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.round(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.round","numeric argument",r.TScript.displayname(t.type)])},ceil:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.ceil(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.ceil","numeric argument",r.TScript.displayname(t.type)])},sin:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sin(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sin","numeric argument",r.TScript.displayname(t.type)])},cos:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cos(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cos","numeric argument",r.TScript.displayname(t.type)])},tan:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.tan(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.tan","numeric argument",r.TScript.displayname(t.type)])},sinh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.sinh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sinh","numeric argument",r.TScript.displayname(t.type)])},cosh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.cosh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.cosh","numeric argument",r.TScript.displayname(t.type)])},tanh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.tanh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.tanh","numeric argument",r.TScript.displayname(t.type)])},asin:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.asin(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.asin","numeric argument",r.TScript.displayname(t.type)])},acos:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.acos(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.acos","numeric argument",r.TScript.displayname(t.type)])},atan:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atan(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.atan","numeric argument",r.TScript.displayname(t.type)])},atan2:function(t,e){return r.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["x","math.atan2","numeric argument",r.TScript.displayname(e.type)]),r.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-1",["x","math.atan2","numeric argument",r.TScript.displayname(t.type)]),{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atan2(t.value.b,e.value.b)}}},asinh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.asinh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.asinh","numeric argument",r.TScript.displayname(t.type)])},acosh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.acosh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.acosh","numeric argument",r.TScript.displayname(t.type)])},atanh:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.atanh(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.atanh","numeric argument",r.TScript.displayname(t.type)])},exp:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.exp(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.exp","numeric argument",r.TScript.displayname(t.type)])},log:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log","numeric argument",r.TScript.displayname(t.type)])},log2:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log2(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log2","numeric argument",r.TScript.displayname(t.type)])},log10:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.log10(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.log10","numeric argument",r.TScript.displayname(t.type)])},pow:function(t,e){return r.TScript.isNumeric(t.type)||this.error("/argument-mismatch/am-1",["base","math.pow","numeric argument",r.TScript.displayname(t.type)]),r.TScript.isNumeric(e.type)||this.error("/argument-mismatch/am-1",["exponent","math.pow","numeric argument",r.TScript.displayname(e.type)]),{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.pow(t.value.b,e.value.b)}}},sign:function(t){if(r.TScript.isNumeric(t.type))return{type:this.program.types[r.TScript.isDerivedFrom(t.type,i.Typeid.typeid_integer)?i.Typeid.typeid_integer:i.Typeid.typeid_real],value:{b:Math.sign(t.value.b)}};this.error("/argument-mismatch/am-1",["x","math.sign","numeric argument",r.TScript.displayname(t.type)])},min:function(t,e){return r.TScript.order.call(this,t,e)<=0?t:e},max:function(t,e){return r.TScript.order.call(this,t,e)>=0?t:e},random:function(){return{type:this.program.types[i.Typeid.typeid_real],value:{b:Math.random()}}}}}}},1378:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_math=void 0,e.tscript_math="\nnamespace math\n{\n\tfunction pi() { }\n\tfunction e() { }\n\tfunction abs(x) { }\n\tfunction sqrt(x) { }\n\tfunction cbrt(x) { }\n\tfunction floor(x) { }\n\tfunction round(x) { }\n\tfunction ceil(x) { }\n\tfunction sin(x) { }\n\tfunction cos(x) { }\n\tfunction tan(x) { }\n\tfunction sinh(x) { }\n\tfunction cosh(x) { }\n\tfunction tanh(x) { }\n\tfunction asin(x) { }\n\tfunction acos(x) { }\n\tfunction atan(x) { }\n\tfunction atan2(y, x) { }\n\tfunction asinh(x) { }\n\tfunction acosh(x) { }\n\tfunction atanh(x) { }\n\tfunction exp(x) { }\n\tfunction log(x) { }\n\tfunction log2(x) { }\n\tfunction log10(x) { }\n\tfunction pow(base, exponent) { }\n\tfunction sign(x) { }\n\tfunction min(a, b) { }\n\tfunction max(a, b) { }\n\tfunction random() { }\n}\n"},6308:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lib_turtle=void 0;const r=n(9074),i=n(3365),a=n(4672),o=n(9397);e.lib_turtle={source:o.tscript_turle,impl:{turtle:{reset:function(t,e,n,o){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["x","turtle.reset","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["y","turtle.reset","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["degrees","turtle.reset","numeric argument",i.TScript.displayname(n.type)]),i.TScript.isDerivedFrom(o.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["down","turtle.reset","boolean",i.TScript.displayname(o.type)]),this.service.turtle&&this.service.turtle.reset.call(this.service,t.value.b,e.value.b,n.value.b,o.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},move:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["distance","turtle.move","numeric argument",i.TScript.displayname(t.type)]),this.service.turtle&&this.service.turtle.move.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},turn:function(t){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["degrees","turtle.turn","numeric argument",i.TScript.displayname(t.type)]),this.service.turtle&&this.service.turtle.turn.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},color:function(t,e,n){return i.TScript.isNumeric(t.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["red","turtle.color","numeric argument",i.TScript.displayname(t.type)]),i.TScript.isNumeric(e.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["green","turtle.color","numeric argument",i.TScript.displayname(e.type)]),i.TScript.isNumeric(n.type)||r.ErrorHelper.error("/argument-mismatch/am-1",["blue","turtle.color","numeric argument",i.TScript.displayname(n.type)]),this.service.turtle&&this.service.turtle.color.call(this.service,t.value.b,e.value.b,n.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}},pen:function(t){return i.TScript.isDerivedFrom(t.type,a.Typeid.typeid_boolean)||r.ErrorHelper.error("/argument-mismatch/am-1",["down","turtle.pen","boolean",i.TScript.displayname(t.type)]),this.service.turtle&&this.service.turtle.pen.call(this.service,t.value.b),{type:this.program.types[a.Typeid.typeid_null],value:{b:null}}}}}}},9397:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tscript_turle=void 0,e.tscript_turle="\nnamespace turtle {\n\tfunction reset(x = 0, y = 0, degrees = 0, down = true) { }\n\tfunction move(distance) { }\n\tfunction turn(degrees) { }\n\tfunction color(red, green, blue) { }\n\tfunction pen(down) { }\n}\n"},3365:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TScript=void 0;const r=n(4672),i=n(4449),a=n(6315);class o{static displayname(t){return t.hasOwnProperty("displayname")?t.displayname:t.hasOwnProperty("name")?t.name:""}static isDerivedFrom(t,e){if("number"==typeof e)for(;t;){if(t.id===e)return!0;t=t.superclass}else if("string"==typeof e)for(;t;){if(o.displayname(t)===e)return!0;t=t.superclass}return!1}static isNumeric(t){for(;t;){if(o.isDerivedFrom(t,r.Typeid.typeid_integer)||o.isDerivedFrom(t,r.Typeid.typeid_real))return!0;t=t.superclass}return!1}static toString(t){try{return i.recApply.call(this,t,(function(t){if(o.isDerivedFrom(t.type,r.Typeid.typeid_null))return"null";if(o.isDerivedFrom(t.type,r.Typeid.typeid_boolean))return t.value.b?"true":"false";if(o.isDerivedFrom(t.type,r.Typeid.typeid_integer))return t.value.b.toString();if(o.isDerivedFrom(t.type,r.Typeid.typeid_real))return t.value.b.toString();if(o.isDerivedFrom(t.type,r.Typeid.typeid_string))return t.value.b;if(o.isDerivedFrom(t.type,r.Typeid.typeid_function)){let e="<Function";return t.value.b.func.displayname?e+=" "+t.value.b.func.displayname:t.value.b.func.name?e+=" "+t.value.b.func.name:t.value.b.func.where&&(e+=" anonymous "+t.value.b.func.where.line+":"+t.value.b.func.where.ch),e+=">",e}return o.isDerivedFrom(t.type,r.Typeid.typeid_range)?t.value.b.begin.toString()+":"+t.value.b.end.toString():o.isDerivedFrom(t.type,r.Typeid.typeid_type)?"<Type "+o.displayname(t.value.b)+">":"<"+o.displayname(t.type)+">"}),(function(t){if(Array.isArray(t)){let e="[";for(let n=0;n<t.length;n++)(n+=0)&&(e+=","),e+=t[n];return e+="]",e}if("object"==typeof t&&t.constructor===Object){let e="{",n=!0;for(let r in t)t.hasOwnProperty(r)&&(n?n=!1:e+=",",e+=r.substring(1)+":"+t[r]);return e+="}",e}this.assert(!1,"[TScript.toString] internal error")}))}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static isInt32(t){return Number.isInteger(t)&&t>=-2147483648&&t<=2147483647}static mul32(t,e){let n=65535&t;return((t-n)*e|0)+n*e|0}static mod(t,e){return 0===e?(this.error("/argument-mismatch/am-15"),0):e>0?t-e*Math.floor(t/e):e*Math.floor(t/e)-t}static jsObject2typed(t){let e=this;switch(typeof t){case"boolean":return{type:e.types[r.Typeid.typeid_boolean],value:{b:t}};case"number":return t%1==0?{type:e.types[r.Typeid.typeid_integer],value:{b:t}}:{type:e.types[r.Typeid.typeid_real],value:{b:t}};case"object":if(null===t)return{type:e.types[r.Typeid.typeid_null],value:{b:null}};if(Array.isArray(t))return{type:e.types[r.Typeid.typeid_array],value:{b:t.map(o.jsObject2typed.bind(this))}};break;case"string":return{type:e.types[r.Typeid.typeid_string],value:{b:t}};case"undefined":return{type:e.types[r.Typeid.typeid_null],value:{b:null}}}throw"value could not be converted."}static json2typed(t){let e;e=this instanceof a.Interpreter?this.program:this;let n=typeof t;if(null===t)return{type:e.types[r.Typeid.typeid_null],value:{b:t}};if("boolean"===n)return{type:e.types[r.Typeid.typeid_boolean],value:{b:t}};if("number"===n)return o.isInt32(t)?{type:e.types[r.Typeid.typeid_integer],value:{b:t}}:{type:e.types[r.Typeid.typeid_real],value:{b:t}};if("string"===n)return{type:e.types[r.Typeid.typeid_string],value:{b:t}};if(Array.isArray(t)){let n=Array();for(let r=0;r<t.length;r++)n.push(o.json2typed.call(e,t[r]));return{type:e.types[r.Typeid.typeid_array],value:{b:n}}}if("object"===n&&t.constructor===Object){let n={};for(let r in t)t.hasOwnProperty(r)&&(n["#"+r]=o.json2typed.call(e,t[r]));return{type:e.types[r.Typeid.typeid_dictionary],value:{b:n}}}throw new Error("[json2typed] invalid argument")}static typed2json(t){return i.recApply.call(this,t,(function(t){return this.assert(t.type.id===r.Typeid.typeid_null||t.type.id===r.Typeid.typeid_boolean||t.type.id===r.Typeid.typeid_integer||t.type.id===r.Typeid.typeid_real||t.type.id===r.Typeid.typeid_string,"[typed2json] invalid argument"),t.value.b}),(function(t){if(Array.isArray(t))return t;{let e={};for(let n in t)t.hasOwnProperty(n)&&(e[n.substring(1)]=t[n]);return e}}))}static equal(t,e){let n=function(t,e,i){if(t===e)return!0;if(t.type===e.type&&t.value===e.value)return!0;if(o.isDerivedFrom(t.type,r.Typeid.typeid_null)&&o.isDerivedFrom(e.type,r.Typeid.typeid_null))return!0;if(o.isDerivedFrom(t.type,r.Typeid.typeid_boolean)&&o.isDerivedFrom(e.type,r.Typeid.typeid_boolean))return t.value.b===e.value.b;if(o.isNumeric(t.type)&&o.isNumeric(e.type))return isNaN(t.value.b)&&isNaN(e.value.b)||t.value.b===e.value.b;if(o.isDerivedFrom(t.type,r.Typeid.typeid_string)&&o.isDerivedFrom(e.type,r.Typeid.typeid_string))return t.value.b===e.value.b;if(o.isDerivedFrom(t.type,r.Typeid.typeid_array)&&o.isDerivedFrom(e.type,r.Typeid.typeid_array)){if(t.value.b.length!==e.value.b.length)return!1;if(i.has(t))throw"recursive data structure";if(i.has(e))throw"recursive data structure";let r=new Set(i);r.add(t),r.add(e);for(let i=0;i<t.value.b.length;i++)if(!n.call(this,t.value.b[i],e.value.b[i],r))return!1;return!0}if(o.isDerivedFrom(t.type,r.Typeid.typeid_dictionary)&&o.isDerivedFrom(e.type,r.Typeid.typeid_dictionary)){if(i.has(t))throw"recursive data structure";if(i.has(e))throw"recursive data structure";let r=new Set(i);r.add(t),r.add(e);for(let n in t.value.b)if(t.value.b.hasOwnProperty(n)&&!e.value.b.hasOwnProperty(n))return!1;for(let i in e.value.b)if(e.value.b.hasOwnProperty(i)){if(!t.value.b.hasOwnProperty(i))return!1;if(!n.call(this,t.value.b[i],e.value.b[i],r))return!1}return!0}if(o.isDerivedFrom(t.type,r.Typeid.typeid_function)&&o.isDerivedFrom(e.type,r.Typeid.typeid_function)){if(t.value.b.func!==e.value.b.func)return!1;if(t.value.b.hasOwnProperty("object")&&t.value.b.object!==e.value.b.object)return!1;if(t.value.b.hasOwnProperty("enclosed")){if(i.has(t))throw"recursive data structure";if(i.has(e))throw"recursive data structure";let r=new Set(i);r.add(t),r.add(e);for(let i in e.value.b.enclosed)if(e.value.b.enclosed.hasOwnProperty(i)&&!n.call(this,t.value.b.enclosed[i],e.value.b.enclosed[i],r))return!1}return!0}return o.isDerivedFrom(t.type,r.Typeid.typeid_range)&&o.isDerivedFrom(e.type,r.Typeid.typeid_range)?t.value.b.begin===e.value.b.begin&&t.value.b.end===e.value.b.end:o.isDerivedFrom(t.type,r.Typeid.typeid_type)&&o.isDerivedFrom(e.type,r.Typeid.typeid_type)?t.value.b.id===e.value.b.id:t===e};try{return n.call(this,t,e,new Set)}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static order(t,e){try{return function t(e,n,i){if(e===n)return 0;if(o.isDerivedFrom(e.type,r.Typeid.typeid_null)&&o.isDerivedFrom(n.type,r.Typeid.typeid_null))return 0;if(o.isNumeric(e.type)&&o.isNumeric(n.type))return e.value.b<=n.value.b?e.value.b<n.value.b?-1:0:1;if(o.isDerivedFrom(e.type,r.Typeid.typeid_string)&&o.isDerivedFrom(n.type,r.Typeid.typeid_string))return e.value.b<=n.value.b?e.value.b<n.value.b?-1:0:1;if(o.isDerivedFrom(e.type,r.Typeid.typeid_array)&&o.isDerivedFrom(n.type,r.Typeid.typeid_array)){if(i.has(e))throw"recursive data structure";if(i.has(n))throw"recursive data structure";let r=new Set(i);r.add(e),r.add(n);let a=Math.min(e.value.b.length,n.value.b.length);for(let i=0;i<a;i++){let a=t.call(this,e.value.b[i],n.value.b[i],r);if(0!==a)return a}return e.value.b.length>a?1:n.value.b.length>a?-1:0}e.type.id===n.type.id?this.error("/argument-mismatch/am-16",[o.displayname(e.type)]):this.error("/argument-mismatch/am-16b",[o.displayname(e.type),o.displayname(n.type)])}.call(this,t,e,new Set)}catch(t){if("recursive data structure"!==t)throw t;this.error("/argument-mismatch/am-43")}}static previewValue(t,e=1){if(void 0===e&&(e=1),!t.hasOwnProperty("type")||!t.hasOwnProperty("value"))throw"[module.previewValue] invalid argument";if(t.type.id===r.Typeid.typeid_null)return"null";if(t.type.id===r.Typeid.typeid_boolean)return t.value.b?"true":"false";if(t.type.id===r.Typeid.typeid_integer)return t.value.b.toString();if(t.type.id===r.Typeid.typeid_real){let e=t.value.b.toString();return e.indexOf(".")<0&&e.indexOf("e")<0&&e.indexOf("E")<0&&(e+=".0"),e}if(t.type.id===r.Typeid.typeid_string)return'"'+t.value.b+'"';if(t.type.id===r.Typeid.typeid_array){if(0===e)return"[…]";let n="[",r=Math.min(t.value.b.length,3);for(let e=0;e<r;e++)(e+=0)&&(n+=","),n+=o.previewValue.call(this,t.value.b[e],0);return t.value.b.length>r&&(n+=",…"),n+="]",n}if(t.type.id===r.Typeid.typeid_dictionary){if(0===e)return"{…}";let n="{",r=0;for(let e in t.value.b)if(t.value.b.hasOwnProperty(e)){if(3===r){n+=",…";break}r>0&&(n+=","),n+=e.substring(1)+":"+o.previewValue.call(this,t.value.b[e],0),r++}return n+="}",n}if(t.type.id===r.Typeid.typeid_function){let e="<Function ";return t.value.b.hasOwnProperty("object")&&(this.assert("type"===t.value.b.func.parent.petype,"[previewValue] invalid method object"),e+=o.displayname(t.value.b.func.parent)+"."),t.value.b.func.displayname?e+=t.value.b.func.displayname:t.value.b.func.name?e+=t.value.b.func.name:(e+="anonymous",t.value.b.func.where&&(e+=" "+t.value.b.func.where.line+":"+t.value.b.func.where.ch)),e+=">",e}if(t.type.id===r.Typeid.typeid_range)return t.value.b.begin.toString()+":"+t.value.b.end.toString();if(t.type.id===r.Typeid.typeid_type)return"<Type "+o.displayname(t.value.b)+">";{let n="<"+o.displayname(t.type);if(0===e)return n+">";let r=0,i=t.type;for(;i&&i.variables;){for(let e=0;e<i.variables.length;e++){if(3===r){n+=" …";break}n+=" "+o.displayname(i.variables[e])+"="+o.previewValue(t.value.a[i.variables[e].id],0),r++}i=i.superclass}return n+=">",n}}}e.TScript=o},8412:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,e.Version={type:"beta",major:0,minor:6,patch:2,day:1,month:2,year:2021,full:function(){let t="TScript version "+this.major+"."+this.minor+"."+this.patch;return this.type&&(t+=" "+this.type),t+=" - released "+this.day+"."+this.month+"."+this.year+" - (C) Tobias Glasmachers 2018-"+this.year,t}}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(3607)})();</script><style type="text/css">.ide {
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

body {
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

a:link,
a:visited,
a:active,
a:hover
{
	color: #44c;
	text-decoration: underline;
}

li {
	margin-left: 3ex;
}

h1 {
	font-size: 24pt;
	margin-top: 20pt;
}

h2 {
	font-size: 16pt;
	margin-top: 20pt;
}

p {
	margin: 10px 0 10px 0;
}

button {
	border: black 1px solid;
}

.ide-main {
	min-width: 400px;
	min-height: 300px;
	color: #000;
	background: #f00;
	overflow: hidden;
	font-family: monospace;
	font-size: 10pt;
}

.ide-panel-area {
	position: absolute;
	left: 0;
	top: 30px;
	width: 100%;
	height: calc(100% - 30px);
	min-width: 650px;
	min-height: 300px;
	background: #aaa;
	overflow: hidden;
	box-shadow: inset 0px 1px 8px #00000030;
}

.ide-toolbar {
	width: 100%;
	height: 30px;
	background: #ccc;
	color: #000;
	border-bottom: #888 solid 1px;
	box-shadow: inset 0px -1px 0px #ddd;
	box-sizing: border-box;
}

.ide-sourcecode {
	/* overridden in file codemirror.css, class .CodeMirror */
	resize: none;
	width: 60%;
	height: calc(100% - 200px);
	background: #fff;
	color: #000;
	overflow: scroll;
}

.ide-stackview {
	background: #ffe;
	color: #000;
	border-left: #888 solid 2px;
	border-bottom: #888 solid 2px;
	overflow: hidden;
}

.ide-programview {
	background: #ffe;
	color: #000;
	overflow: hidden;
	border-left: #888 solid 2px;
}

.ide-messages {
	width: 100%;
	height: 100%;
	background: #eee;
	color: #000;
	overflow: scroll;
	padding: 0 5px 0 0;
	box-sizing: border-box;
}

.ide-message
{
	width: 100%;
	white-space: pre;
}

.ide-message:hover
{
	background: #cdf;
}

.ide-errormessage
{
	cursor: pointer;
	color: #f00;
	text-decoration: underline;
}

.ide-errormessage:hover
{
	font-weight: bold;
}

.ide-program-ancestor
{
	background: #fc8;
}

.ide-program-current
{
	background: #fa4;
	font-weight: bold;
}

.ide-turtle
{
	background: #eee;
	width: 100%;
	height: 100%;
}

.ide-index { color: #00f; }

.ide-integer { color: #088; }
.ide-real { color: #480; }
.ide-string { color: #c00; }
.ide-collection { color: #c60; }
.ide-keyword { color: #00c; }
.ide-builtin { color: #808; }
.ide-userclass { color: #000; }

.tgui
{
	margin: 0;
	padding: 0;
	border: 0;
	box-sizing: border-box;
}

.tgui-control
{
	font-family: sans-serif;
	font-size: 10pt;
	color: #000;
	border: none;
	margin: 3px;
	position: relative;
	margin: 3px calc(min(3px, max(0.5px, calc(0.5vw - 3px)))); /* TODO: only for toolbar items */
}

.tgui-hidden
{
	display: none;
}

.tgui-tooltip
{
	display: none;
	background-color: #eec;
	color: #000;
	font-family: sans-serif;
	font-size: 9pt;
	transition: opacity 0.5s;
	padding: 2px;
	border: 1px solid #000;
	border-radius: 3px;
	white-space: nowrap;
	z-index: 10;
}

.tgui-tooltip-left
{
	position: absolute;
	left: 1px;
	top: 25px;
}

.tgui-tooltip-right
{
	position: absolute;
	right: 1px;
	top: 25px;
}

.tgui-control:hover .tgui-tooltip
{
	display: block;
}

.tgui-toolbar-separator
{
	float: left;
	width: 1px;
	height: 22px;
	background: #999;
	margin: 3px calc(min(10px, max(1.5px, calc(1vw - 3px)))); /* TODO: only for toolbar items */
	
	box-shadow: 0px 1px 2px #ffffff80;
}

/* used for program status on the toolbar */
.tgui-label
{
	background: #ddd;

	border-width: 1px;
	border-style: solid;
	border-color: #999;

	box-shadow: inset 0px  1px 4px #00000030,
				inset 0px -1px 4px #ffffff50;
	
	text-align: center;
	padding: 2px 10px 2px 10px;
	border-radius: 2px;
}

.tgui-button-text
{
	cursor: pointer;

	background: #ddd;

	border-width: 1px;
	border-style: solid;
	
	border-color: #eee;
	box-shadow: 0px 1px 2px rgba(0,0,0,0.2);
	border-radius: 1.5px;

	text-align: center;
	padding: 2px 10px 2px 10px;
}

.tgui-button-text:hover
{
	background: #eee;
	border-color: #fff;
}

.tgui-button-text:active
{
	background: #bbb;	
	border-color: #888;
	box-shadow: inset 0px 0px 2px rgba(0,0,0,0.2);
}

.tgui-button-canvas
{
	cursor: pointer;

	background: #ddd;

	border-width: 1px;
	border-style: solid;
	border-color: #eee;
	
	box-shadow: 0px 1px 2px rgba(0,0,0,0.2);
	
	border-radius: 1.5px;
}

.tgui-button-canvas:hover
{
	background: #eee;
	border-color: #fff;
}

.tgui-button-canvas:active
{
	background: #bbb;	
	border-color: #888;
	box-shadow: inset 0px 0px 2px rgba(0,0,0,0.2),
				0px 0px 1px 1px #ffffff20;
}



.tgui-dialog-button
{
	cursor: pointer;
	
	background: #eee;
	border-width: 1px;
	border-color: #000;
	box-shadow: 0px 1px 3px rgba(0,0,0,0.2);
	
	border-radius: 2px;
}
.tgui-dialog-button:focus
{
	background: #eee;
	border-width: 2px;
}

.tgui-dialog-button:hover
{
	background: #fff;
	border-width: 2px;
}

.tgui-dialog-button:active
{
	background: #bbb;
	border-width: 2px;
	box-shadow: inset 0px 0px 3px rgba(0,0,0,0.4);
}

/* used in file dialog */
.tgui-status-box
{
	background: #eee;
	
	font-size: 10pt;
	
	padding: 4px
}


.tgui-list-box
{
	box-shadow: 0px 0px 2px #00000030;
	border-radius: 2px;
	border-style: solid;
	border-width: 1px;
	border-color: #ccc;
	padding: 3px;
}


.tgui-text-box
{
	box-shadow: 0px 0px 2px #00000030;
	border-radius: 2px;
	border-style: solid;
	border-width: 1px;
	border-color: #ccc;
	padding: 0 0 0 3px;
}

.tgui-tree
{
	width: 100%;
	height: 100%;
	font-family: monospace;
	font-size: 9pt;
	line-height: 13px;
	overflow: scroll;
}

.tgui-tree-main
{
	border-collapse: collapse;
}

.tgui-tree-cell-toggle
{
	display: block;
	width: 15px;
}

.tgui-tree-cell-content
{
	width: calc(100% - 15px);
	white-space: nowrap;
}

.tgui-tree-toggle
{
	vertical-align: middle;
	padding-right: 3px;
	color: #999;
	transition: color 0.5s;
}

.tgui-tree-toggle:hover
{
	color: #000;
}

.tgui-tree-element
{
}

.tgui-tree-element:hover
{
	background: #cdf;
}

.tgui-separator
{
	display: block;
	position: fixed;
	left: 0vw;
	top: 0vh;
	width: 100vw;
	height: 100vh;
	z-index: 99;
	background: rgba(64, 64, 64, 0.8);
}

.tgui-modal
{
	position: absolute;
	margin: auto;
	left: 0;
	right: 0;
	top: 0;
	bottom: 0;
	
	box-sizing: border-box;
	background: #fff;
	color: #000;
	font-family: sans-serif;
	font-size: 10pt;
	padding: 10px;
	border: 5px solid #888;
	overflow-y: scroll;
}

.tgui-modal-titlebar {
	
	display: flex;
	flex-direction: row;
	
	background: #008;
	color: #fff;
	padding: 2px 2px 2px 10px;
	
	font-weight: bold;
	font-size: 10pt;
	line-height: 24px;
	user-select: none;
}

.tgui-modal-titlebar-title {
	flex: auto;
	color: #fff;
	font-family: sans-serif;
	vertical-align: middle;
	padding: 2px;
	height: 100%;
	width: auto;
}

.tgui-modal-content
{
	position: absolute;
	left: 0;
	top: 24px;
	width: 100%;
	height: calc(100% - 24px)
}




.tgui-panel-container {
	overflow: hidden;
	touch-action: none;
	box-sizing: border-box;
}

/* this class is additionaly used for floating panels */
.tgui-panel-float {
	box-shadow: 0px 1px 8px #00000050,
				0px 0px 0px 1px #00000020;
}

.tgui-panel-titlebar {
	display: flex;
	flex-direction: row;
	
	position: absolute;
	width: 100%;
	height: 22px;
	line-height: 22px;
	padding: 1px;
	left: 0;
	top: 0;
	background: #00c;
	color: #fff;
	font-family: sans-serif;
	/*old style on browsers like firefox: font-family: serif; -- "sans" does not work and leads to "serif"*/
	font-weight: 600;
	font-size: 10pt;

	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

.tgui-panel-titlebar-title {
	flex: auto;
	color: #fff;
	font-family: sans-serif;
	vertical-align: middle;
	padding: 1px;
	height: 100%;
	width: auto;
}

.tgui-panel-dockbutton {
	padding: 0;
	width: 20px;
	height: 20px;
	margin: 0 0 0 1px;
	
	

	background: #ddd;

	border-width: 1px;
	border-style: solid;
	border-color: #eee #ccc #ccc #eee;
	
	box-shadow: inset -1px -1px 2px -2px #00000050,
				inset  1px  1px 2px -2px #fffffff0;
	
	border-radius: 1.5px;
}
.tgui-panel-dockbutton:active {
	background: #bbb;	
	border-color: #777;
	background-clip: padding-box;
	box-shadow: inset 1px  0px 3px -1px #00000040,
				inset 0px  2px 3px -1px #00000040;
}

.tgui-panel-content {
	position: absolute;
	width: 100%;
	height: calc(100% - 22px);
	left: 0;
	top: 22px;
	background: #ffe;
	color: #000;
	overflow: hidden;
}
/* BASICS */

.CodeMirror {
  /* Set height, width, borders, and global font properties here */
  width: 100%;
  height: 100%;
  font-family: monospace;
  color: black;
  direction: ltr;
}

/* PADDING */

.CodeMirror-lines {
  padding: 4px 0; /* Vertical padding around content */
}
.CodeMirror pre {
  padding: 0 4px; /* Horizontal padding of content */
}

.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: white; /* The little square between H and V scrollbars */
}

/* GUTTER */

.CodeMirror-gutters {
  border-right: 1px solid #ddd;
  background-color: #f7f7f7;
  white-space: nowrap;
}
.CodeMirror-linenumbers {}
.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #999;
  white-space: nowrap;
}

.breakpoints {
	width: 10px;
	background: #f0f0f0;
}

.CodeMirror-guttermarker { color: black; }
.CodeMirror-guttermarker-subtle { color: #999; }

/* CURSOR */

.CodeMirror-cursor {
  border-left: 1px solid black;
  border-right: none;
  width: 0;
}
/* Shown when moving in bi-directional text */
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid silver;
}
.cm-fat-cursor .CodeMirror-cursor {
  width: auto;
  border: 0 !important;
  background: #7e7;
}
.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}
.cm-fat-cursor-mark {
  background-color: rgba(20, 255, 20, 0.5);
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}
.cm-animate-fat-cursor {
  width: auto;
  border: 0;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
  background-color: #7e7;
}
@-moz-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@-webkit-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}

/* Can style cursor different in overwrite (non-insert) mode */
.CodeMirror-overwrite .CodeMirror-cursor {}

.cm-tab { display: inline-block; text-decoration: inherit; }

.CodeMirror-rulers {
  position: absolute;
  left: 0; right: 0; top: -50px; bottom: -20px;
  overflow: hidden;
}
.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  top: 0; bottom: 0;
  position: absolute;
}

/* DEFAULT THEME */

.cm-s-default .cm-header {color: blue;}
.cm-s-default .cm-quote {color: #090;}
.cm-negative {color: #d44;}
.cm-positive {color: #292;}
.cm-header, .cm-strong {font-weight: bold;}
.cm-em {font-style: italic;}
.cm-link {text-decoration: underline;}
.cm-strikethrough {text-decoration: line-through;}

.cm-s-default .cm-keyword {color: #00c;}
.cm-s-default .cm-atom {color: #088;}
.cm-s-default .cm-number {color: #480;}
.cm-s-default .cm-def {color: #00f;}
.cm-s-default .cm-variable {color: #000;}
.cm-s-default .cm-punctuation {color: #000;}
.cm-s-default .cm-property {color: #000;}
.cm-s-default .cm-operator {color: #000;}
.cm-s-default .cm-variable-2 {color: #05a;}
.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}
.cm-s-default .cm-comment {color: #888;}
.cm-s-default .cm-string {color: #800;}
.cm-s-default .cm-string-2 {color: #f50;}
.cm-s-default .cm-meta {color: #555;}
.cm-s-default .cm-qualifier {color: #555;}
.cm-s-default .cm-builtin {color: #808;}
.cm-s-default .cm-bracket {color: #080;}
.cm-s-default .cm-tag {color: #170;}
.cm-s-default .cm-attribute {color: #00c;}
.cm-s-default .cm-hr {color: #999;}
.cm-s-default .cm-link {color: #00c;}

.cm-s-default .cm-error {text-decoration: underline;}
.cm-invalidchar {color: #f00;}

.CodeMirror-composing { border-bottom: 2px solid; }

/* Default styles for common addons */

div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}
div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}
.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }
.CodeMirror-activeline-background {background: #cdf;}

/* STOP */

/* The rest of this file contains styles related to the mechanics of
   the editor. You probably shouldn't touch them. */

.CodeMirror {
  position: relative;
  overflow: hidden;
  background: white;
}

.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
  /* 30px is the magic margin used to hide the element's real scrollbars */
  /* See overflow: hidden in .CodeMirror */
  margin-bottom: -30px; margin-right: -30px;
  padding-bottom: 30px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
}
.CodeMirror-sizer {
  position: relative;
  border-right: 30px solid transparent;
}

/* The fake, visible scrollbars. Used to force redraw during scrolling
   before actual scrolling happens, thus preventing shaking and
   flickering artifacts. */
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  position: absolute;
  z-index: 6;
  display: none;
}
.CodeMirror-vscrollbar {
  right: 0; top: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.CodeMirror-hscrollbar {
  bottom: 0; left: 0;
  overflow-y: hidden;
  overflow-x: scroll;
}
.CodeMirror-scrollbar-filler {
  right: 0; bottom: 0;
}
.CodeMirror-gutter-filler {
  left: 0; bottom: 0;
}

.CodeMirror-gutters {
  position: absolute; left: 0; top: 0;
  min-height: 100%;
  z-index: 3;
}
.CodeMirror-gutter {
  white-space: normal;
  height: 100%;
  display: inline-block;
  vertical-align: top;
  margin-bottom: -30px;
}
.CodeMirror-gutter-wrapper {
  position: absolute;
  z-index: 4;
  background: none !important;
  border: none !important;
}
.CodeMirror-gutter-background {
  position: absolute;
  top: 0; bottom: 0;
  z-index: 4;
}
.CodeMirror-gutter-elt {
  position: absolute;
  cursor: default;
  z-index: 4;
}
.CodeMirror-gutter-wrapper ::selection { background-color: transparent }
.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }

.CodeMirror-lines {
  cursor: text;
  min-height: 1px; /* prevents collapsing before first draw */
}
.CodeMirror pre {
  /* Reset some styles that the rest of the page might have set */
  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;
  border-width: 0;
  background: transparent;
  font-family: inherit;
  font-size: inherit;
  margin: 0;
  white-space: pre;
  word-wrap: normal;
  line-height: inherit;
  color: inherit;
  z-index: 2;
  position: relative;
  overflow: visible;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-variant-ligatures: contextual;
  font-variant-ligatures: contextual;
}
.CodeMirror-wrap pre {
  word-wrap: break-word;
  white-space: pre-wrap;
  word-break: normal;
}

.CodeMirror-linebackground {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  z-index: 0;
}

.CodeMirror-linewidget {
  position: relative;
  z-index: 2;
  padding: 0.1px; /* Force widget margins to stay inside of the container */
}

.CodeMirror-widget {}

.CodeMirror-rtl pre { direction: rtl; }

.CodeMirror-code {
  outline: none;
}

/* Force content-box sizing for the elements where we expect it */
.CodeMirror-scroll,
.CodeMirror-sizer,
.CodeMirror-gutter,
.CodeMirror-gutters,
.CodeMirror-linenumber {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

.CodeMirror-measure {
  position: absolute;
  width: 100%;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}

.CodeMirror-cursor {
  position: absolute;
  pointer-events: none;
}
.CodeMirror-measure pre { position: static; }

div.CodeMirror-cursors {
  visibility: hidden;
  position: relative;
  z-index: 3;
}
div.CodeMirror-dragcursors {
  visibility: visible;
}

.CodeMirror-focused div.CodeMirror-cursors {
  visibility: visible;
}

.CodeMirror-selected { background: #d9d9d9; }
.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }
.CodeMirror-crosshair { cursor: crosshair; }
.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }
.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }

.cm-searching {
  background-color: #ffa;
  background-color: rgba(255, 255, 0, .4);
}

/* Used to force a border model for a node */
.cm-force-border { padding-right: .1px; }

@media print {
  /* Hide the cursor when printing */
  .CodeMirror div.CodeMirror-cursors {
    visibility: hidden;
  }
}

/* See issue #2901 */
.cm-tab-wrap-hack:after { content: ''; }

/* Help users use markselection to safely style text background */
span.CodeMirror-selectedtext { background: none; }


.CodeMirror-dialog {
  position: absolute;
  left: 30%; right: 106px;
  background: #ddf;
  z-index: 15;
  padding: 1px .6em;
  overflow: hidden;
  color: inherit;
  font-family: sans-serif;
}

.CodeMirror-dialog-top {
  box-shadow: inset 0px -1px 0px 0px #00000020;
  top: 0;
}

.CodeMirror-dialog-bottom {
  box-shadow: inset 0px 1px 0px 0px #00000020;
  bottom: 0;
}

.CodeMirror-dialog input {
  border: none;
  outline: none;
  background: transparent;
  width: 20em;
  height: 20px;
  color: inherit;
  border: 1px solid #888;
  font-family: monospace;
  padding-left: 1px;
}

.CodeMirror-dialog input:focus {
  border-color: #000;
}

.CodeMirror-dialog button {
  font-size: 90%;
  padding: 1px 3px;
}


/* general page styles */

*
{
	margin: 0;
	padding: 0;
	border: 0;
	line-height: 1.3em;
	box-sizing: border-box;
}

#doc-main
{
	font-family: sans-serif;
	font-size: 12pt;
	line-height: 140%;
	color: #000;
}

#searchtext
{
	margin: 10px 10px 10px 10px;
	padding: 0 10px 0 10px;
	width: calc(100% - 20px);
	height: 30px;
	vertical-align: middle;
	background: #eee;
	color: #444;
	border: 1px solid #888;
	border-radius: 4px;
	font-size: 10pt;
	line-height: 130%;
}

input:focus
{
	background: #fff;
	color: #000;
	border: 1px solid #000;
}

#sidebar
{
	box-sizing: border-box;
	position: absolute;
	left: 0;
	top: 0;
	width: 20%;
	height: 100%;
	background: #ddd;
}

#version
{
	left: 0;
	top: 0;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: 45px;
	line-height: 150%;
	color: #000;
	background: #ddd;
	padding: 2px;
	text-align: center;
	font-size: 7pt;
	cursor: pointer;
}

#search
{
	left: 0;
	top: 45px;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: 50px;
	color: #fff;
	background: #44c;
}

#tree
{
	left: 0;
	top: 95px;
	position: absolute;
	box-sizing: border-box;
	width: 100%;
	height: calc(100% - 100px);
	color: #000;
	background: #ddd;
}

#content
{
	box-sizing: border-box;
	display: block;
	position: absolute;
	left: 20%;
	top: 0;
	width: 80%;
	height: 100%;
	padding: 3% 5% 3% 5%;
	color: #000;
	background: #fff;
	overflow-x: hidden;
	overflow-y: scroll;
	border-left: solid 5px #88c;
	border-right: solid 5px #88c;
}

#content .pad
{
	box-sizing: border-box;
	margin-bottom: 10%;
}

.related
{
	margin-top: 10%;
	transform: scale(0.9);
	padding: 10px;
	background: #f4f4fc;
	border: 2px solid #44c;
	border-radius: 10px;
}


/* styles for the content */

a:link,
a:visited
{
	color: #44c;
	text-decoration: underline;
}

a:active,
a:hover
{
	color: #c44;
	text-decoration: underline;
}

h1 {
	font-size: 20pt;
	line-height: 130%;
	margin: 10pt 0 10pt 0;
}

h2 {
	font-size: 18pt;
	line-height: 130%;
	margin: 9pt 0 9pt 0;
}

h3 {
	font-size: 16pt;
	line-height: 130%;
	margin: 8pt 0 8pt 0;
}

p, ul, ol {
	margin: 8pt 0 8pt 0;
}

li {
	margin: 3pt 0 3pt 3ex;
}

pre {
	width: 100%;
	overflow-x: auto;
	padding: 5pt;
	margin: 3pt 0 3pt 0;
}

div.code {
	cursor: copy;
}

code {
	font-family: monospace;
}

hr {
	margin: 5% 0;
	height: 1px;
	background: #888;
}

.nicetable
{
	margin: 5px auto 5px auto;
	border-collapse: collapse;
	display: table;
	margin: 10px;
}

.nicetable th
{
	border: 2px solid #854;
	background: #fa8;
	font-weight: bold;
	padding: 1ex;
	text-align: center;
}

.nicetable td
{
	border: 2px solid #558;
	background: #aaf;
	padding: 1ex;
	text-align: center;
}

.nicetable th a
{
	color: #000;
}

.nicetable td a
{
	color: #000;
}

.flex
{
	display: flex;
	flex-wrap: wrap;
	flex-flow: space-evenly;
	align-items: stretch;
}

.methods
{
	margin: 5px auto 5px 0px;
	border-collapse: collapse;
	display: table;
}

.methods th
{
	border: 1px solid #888;
	background: #fed;
	font-weight: bold;
	padding: 1ex;
	text-align: left;
	vertical-align: top;
}

.methods td
{
	border: 1px solid #888;
	padding: 1ex;
	text-align: left;
}

.searchresults
{
	font-size: 70%;
	margin-left: 5ex;
	color: #666;
}

/* styles for the tree view */

.entry
{
	padding: 4px 4px 2px 4px;
}

.current
{
	background: #fa4;
}

.tgui-tree
{
	font-family: sans-serif;
	font-size: 10pt;
	line-height: 150%;
	color: #000;
	border: none;
	padding: 3px;
	position: relative;

	width: 100%;
	height: 100%;
	overflow: auto;
}

.tgui-tree-main
{
	border-collapse: collapse;
}

.tgui-tree-cell-toggle
{
	display: block;
	width: 15px;
}

.tgui-tree-cell-content
{
	width: calc(100% - 15px);
	white-space: nowrap;
}

.tgui-tree-toggle
{
	vertical-align: middle;
	padding-right: 3px;
	color: #999;
	transition: color 0.5s;
}

.tgui-tree-toggle:hover
{
	color: #000;
}

.tgui-tree-element
{
}

.tgui-tree-element:hover
{
	background: #cdf;
}

.tgui-hidden
{
	display: none;
}


/* highlighting */

.example {
	margin: 10px 0 10px 0;
	padding: 10px;
	border: 2px solid #c66;
	border-radius: 10px;
}

.warning {
	margin: 10px 0 10px 0;
	padding: 10px;
	border: 4px solid #c66;
	background: #fcc;
	border-radius: 10px;
}

.keyword { font-family: monospace; background: #dde; border: 1px solid #dde; border-radius: 2px; font-weight: bold; }

.code { background: #ddd; }
.code-keyword { color: #00c; }
.code-identifier { color: #000; }
.code-integer { color: #088; }
.code-real { color: #480; }
.code-string { color: #800; }
.code-operator { color: #000; }
.code-grouping { color: #080; }
.code-delimiter { color: #000; }
.code-comment { color: #888; }

.ebnf { background: #dee; }
.ebnf-identifier { color: #c00; }
.ebnf-literal { color: #080; }
.ebnf-special { color: #808; font-style: italic; }
.ebnf-operator { color: #000; }
.ebnf-grouping { color: #c80; }
.ebnf-delimiter { color: #888; }
</style></head><body><div id="ide-container" style="left: 0; top: 0; width: 100vw; height: 100vh;"></div></body></html>